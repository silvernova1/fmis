@*@model fmis.Models.UserModels.FmisUser*@
@model IEnumerable<fmis.Models.UserModels.FmisUser>

@{
    ViewData["Title"] = "Index";

}
<Style>
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        -moz-appearance: none;
        margin: 0;
    }
</Style>

<!-- CREATE MODAL -->
<div class="modal fade" id="CreateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
        </div>
    </div>
</div>

<!--EDIT MODAL-->
<div class="modal fade" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
        </div>
    </div>
</div>

<h3 class="grey lighter smaller">
    List of User(s)
</h3>
<hr />
<p>
    <a asp-action="Create" class="btn btn-success btn-sm" data-toggle="modal" data-target="#CreateModal">
        <i class="ace-icon fa fa-plus "></i>Create New
    </a>
</p>
<div class="row">
    <div class="col-md-4">
        @if (Model.Count() > 0)
        {
            <table class="table table-striped" @*style="width: 960px"*@ id="data">
                <thead>
                    <tr>
                        <th>
                            Username
                        </th>
                        <th>
                            Role
                        </th>
                        <th>
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @if (User.FindFirstValue(ClaimTypes.Role) == "accounting_admin")
                    {
                        
                        @foreach (var item in Model.Where(x => x.Role == "accounting_admin" || x.Role == "accounting_user"))
                        {
                            var admin = "Admin";
                            var user = "User";
                            <tr>
                                <td>
                                    @item.Username
                                </td>
                                <td>
                                    @if (item.Role == "accounting_admin")
                                    {
                                        @admin;
                                    }
                                    else
                                    {
                                        @user;
                                    }
                                    
                                </td>
                                <td>
                                    <a asp-action="Edit" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#EditModal" asp-route-id="@item.Id" data-bs-toggle="tooltip" title="Edit">
                                        <i class="ace-icon fa fa-edit"></i>
                                    </a>
                                    <a class="btn btn-xs btn-danger" data-bs-toggle="tooltip" title="Delete" href="@Url.Action("Delete","Account",new { id = @item.Id })" onclick="return confirm('Do you want to delete this User?');">
                                        <i class="ace-icon fa fa-trash"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    }
                    @if (User.FindFirstValue(ClaimTypes.Role) == "budget_admin")
                    {
                        var admin = "Admin";
                        var user = "User";
                        @foreach (var item in Model.Where(x => x.Role == "budget_admin" || x.Role == "budget_user"))
                        {
                            <tr>
                                <td>
                                    @item.Username
                                </td>
                                <td>
                                    @if (item.Role == "accounting_admin")
                                    {
                                        @admin;
                                    }
                                    else
                                    {
                                        @user;
                                    }

                                </td>
                                <td>
                                    <a asp-action="Edit" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#EditModal" asp-route-id="@item.Id" data-bs-toggle="tooltip" title="Edit">
                                        <i class="ace-icon fa fa-edit"></i>
                                    </a>
                                    <a class="btn btn-xs btn-danger" data-bs-toggle="tooltip" title="Delete" href="@Url.Action("Delete","Account",new { id = @item.Id })" onclick="return confirm('Do you want to delete this User?');">
                                        <i class="ace-icon fa fa-trash"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        }
        else
        {
            <div class="alert alert-block alert-danger">
                <i class="ace-icon fa fa-warning red"></i>
                No Records found
            </div>
        }
    </div>
</div>
