@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Procurement (SUPPLIER)";
}

<br />
<div class="card border-primary text-left" style="width: 65%;">
    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item active">
                <a class="nav-link" asp-controller="Procurement" asp-action="Print">SUPPLIER</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-controller="Procurement" asp-action="Gas">RECOMMENDATION (GOODS AND SERVICES)</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-controller="Procurement" asp-action="Medicine">RECOMMENDATION (MEDICINE)</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-controller="Procurement" asp-action="TwgGoods">TWG (GOODS)</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-controller="Procurement" asp-action="TwgMedicine">TWG (MEDICINE)</a>
            </li>
        </ul>
    </div>
    <div class="card-body tab-content">
        <div role="tabpanel" class="tab-pane active" id="tab1">
            <h5 class="card-title">List of Supplier</h5>
            <select type="text" id="supplier" asp-items="@ViewBag.Supplier">
                <option value="">Select Supplier</option>
            </select>
        </div>
        <div role="tabpanel" class="tab-pane" id="tab2">
            <h5 class="card-title">Card Title for Tab 2</h5>
            <p class="card-text">Some content for tab 2.</p>
        </div>
        <div role="tabpanel" class="tab-pane" id="tab3">
            <h5 class="card-title">Card Title for Tab 3</h5>
            <p class="card-text">Some content for tab 3.</p>
        </div>
        <br />
        <a id="printButton" class="btn btn-xs btn-primary btn-edit" target="_blank">
            <i class="ace-icon fa fa-print"></i> Print
        </a>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("#printButton").click(function () {
            var supplierValue = $("#supplier").val();

            $.ajax({
                type: "POST",
                url: "@Url.Action("PrintPu","Procurement")",
                data: {
                    supplierValue: supplierValue
                },
                success: function (data) {
                    var newTab = window.open();
                    if (newTab !== null) {
                        newTab.document.write('<embed width="100%" height="100%" type="application/pdf" src="data:application/pdf;base64,' + data.pdf + '" />');
                    } else {
                        console.error("Failed to open a new window.");
                    }
                },
                error: function (error) {
                    console.error("Error generating PDF: ", error);
                }
            });
        });
    });
</script>