/*
@license

dhtmlxSpreadsheet v.5.1.5 Evaluation

This software is covered by DHTMLX Evaluation License and purposed only for evaluation.
Contact sales@dhtmlx.com to get Commercial or Enterprise license.
Usage without proper license is prohibited.

(c) XB Software.

*/
if(window.dhx&&(window.dhx_legacy=dhx,delete window.dhx),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dhx=t():e.dhx=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/codebase/",i(i.s=97)}([function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getTextLines=t.getCloneObject=t.rgbToHex=t.getStringWidth=t.getMinArrayNumber=t.getMaxArrayNumber=t.isEmptyObj=t.isType=t.compare=t.debounce=t.downloadFile=t.isNumeric=t.range=t.isId=t.isDefined=t.wrapBox=t.unwrapBox=t.detectWidgetClick=t.singleOuterClick=t.isEqualString=t.findIndex=t.naturalSort=t.copy=t.extend=t.uid=void 0;var o=i(4),r=(new Date).valueOf();t.uid=function(){return"u"+r++},t.extend=function e(t,i,n){if(void 0===n&&(n=!0),i)for(var o in i){var r=i[o],a=t[o];void 0===r?delete t[o]:!n||"object"!=typeof a||a instanceof Date||a instanceof Array?t[o]=r:e(a,r)}return t},t.copy=function(e,t){var i={};for(var n in e)t&&n.startsWith("$")||(i[n]=e[n]);return i},t.naturalSort=function(e){return e.sort((function(e,t){return"string"==typeof e?e.localeCompare(t):e-t}))},t.findIndex=function(e,t){for(var i=e.length,n=0;n<i;n++)if(t(e[n]))return n;return-1},t.isEqualString=function(e,t){if(e=e.toString(),t=t.toString(),e.length>t.length)return!1;for(var i=0;i<e.length;i++)if(e[i].toLowerCase()!==t[i].toLowerCase())return!1;return!0},t.singleOuterClick=function(e){var t=function(i){e(i)&&document.removeEventListener("click",t)};document.addEventListener("click",t)},t.detectWidgetClick=function(e,t){var i=function(i){return t((0,o.locate)(i,"data-dhx-widget-id")===e)};return document.addEventListener("click",i),function(){return document.removeEventListener("click",i)}},t.unwrapBox=function(e){return Array.isArray(e)?e[0]:e},t.wrapBox=function(e){return Array.isArray(e)?e:[e]},t.isDefined=function(e){return null!=e},t.isId=function(e){return"number"==typeof e||"string"==typeof e&&""!==e},t.range=function(e,t){if(e>t)return[];for(var i=[];e<=t;)i.push(e++);return i},t.isNumeric=function(e){return!isNaN(e-parseFloat(e))},t.downloadFile=function(e,t,i){void 0===i&&(i="text/plain");var n=new Blob([e],{type:i});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var o=document.createElement("a"),r=URL.createObjectURL(n);o.href=r,o.download=t,document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(r)}),0)}},t.debounce=function(e,t,i){var n;return function(){for(var o=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var s=i&&!n;clearTimeout(n),n=setTimeout((function(){n=null,i||e.apply(o,r)}),t),s&&e.apply(this,r)}},t.compare=function e(t,i){for(var n in t){if(t.hasOwnProperty(n)!==i.hasOwnProperty(n))return!1;switch(typeof t[n]){case"object":if(!e(t[n],i[n]))return!1;break;case"function":if(void 0===i[n]||"compare"!==n&&t[n].toString()!==i[n].toString())return!1;break;default:if(t[n]!==i[n])return!1}}for(var n in i)if(!t.hasOwnProperty(n))return!1;return!0};t.isType=function(e){return((Object.prototype.toString.call(e).match(/^\[object (\S+?)\]$/)||[])[1]||"undefined").toLowerCase()};t.isEmptyObj=function(e){for(var t in e)return!1;return!0};t.getMaxArrayNumber=function(e){if(e.length){for(var t=-1/0,i=0,n=e.length;i<n;i++)e[i]>t&&(t=e[i]);return t}};t.getMinArrayNumber=function(e){if(e.length){for(var t=1/0,i=0,n=e.length;i<n;i++)e[i]<t&&(t=e[i]);return t}};t.getStringWidth=function(e,t){t=n({font:"normal 14px Roboto",lineHeight:20},t);var i=document.createElement("canvas"),r=i.getContext("2d");t.font&&(r.font=t.font);var a=r.measureText(e).width;return(0,o.isIE)()||i.remove(),a};t.rgbToHex=function(e){if("#"===e.substr(0,1))return e;if("rgb"===e.substr(0,3)){var t=/(.*?)rgb[a]?\((\d+), *(\d+), *(\d+),* *([\d+.]*)\)/.exec(e),i=parseInt(t[2],10).toString(16).padStart(2,"0"),n=parseInt(t[3],10).toString(16).padStart(2,"0"),o=parseInt(t[4],10).toString(16).padStart(2,"0");return"#".concat(i).concat(n).concat(o)}},t.getCloneObject=function e(t){if(!t)return t;var i=Array.isArray(t)?[]:{};for(var n in t){var o=t[n];o instanceof Date?i[n]=new Date(o):i[n]="object"==typeof o?e(o):o}return i},t.getTextLines=function(e,t,i){for(var n=t.split(" "),o="",r="",a=[],s=0;s<n.length;s++){r+="".concat(n[s]," "),e.measureText(r.trimEnd()).width>i&&s>0?(a.push(o),o="".concat(n[s]," "),r="".concat(n[s]," ")):o+="".concat(n[s]," "),s===n.length-1&&a.push(o)}return a}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setTheme=t.awaitRedraw=t.resizeHandler=t.resizer=t.disableHelp=t.KEYED_LIST=t.inject=t.create=t.view=t.sv=t.el=void 0;var n=i(116),o=i(4);function r(e){var i=window.ResizeObserver,n=function(t){var i=t.el.offsetHeight,n=t.el.offsetWidth;e(n,i)};return i?(0,t.el)("div.dhx-resize-observer",{_hooks:{didInsert:function(e){new i((function(){return n(e)})).observe(e.el)}}}):(0,t.el)("iframe.dhx-resize-observer",{_hooks:{didInsert:function(e){e.el.contentWindow.onresize=function(){return n(e)},n(e)}}})}t.el=n.defineElement,t.sv=n.defineSvgElement,t.view=n.defineView,t.create=n.createView,t.inject=n.injectView,t.KEYED_LIST=n.KEYED_LIST,t.disableHelp=function(){n.DEVMODE.mutations=!1,n.DEVMODE.warnings=!1,n.DEVMODE.verbose=!1,n.DEVMODE.UNKEYED_INPUT=!1},t.resizer=r,t.resizeHandler=function(e,i){return(0,t.create)({render:function(){return r(i)}}).mount(e)},t.awaitRedraw=function(){return new e((function(e){requestAnimationFrame((function(){e()}))}))},t.setTheme=function(e,t){void 0===e&&(e="light");var i="data-dhx-theme";t||document.querySelectorAll("[".concat(i,"]")).forEach((function(e){return e.removeAttribute(i)})),t=t||document.documentElement,(0,o.toNode)(t).setAttribute(i,e)}}).call(this,i(16))},function(e,t,i){"use strict";(function(e){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.showAlert=t.isCellSpaned=t.isCellFixed=t.checkSpanByNames=t.checkSpan=t.getStylesObject=t.doesContainUrl=t.isURL=t.getCellNode=t.isMac=t.convertStyles=t.getTextHeight=t.parseFromText=t.parseHtmlTable=t.analyzeMSOFormat=t.getSeparatorsFromMSO=t.fetchFile=t.isWasmSupported=t.cleanActionConfig=t.extendConfig=t.getCellsArray=t.getPrevRangeCell=t.getNextRangeCell=t.getRangeMatrix=t.getRangeArray=t.getRangeIndexes=t.isRangeId=t.getCellInfo=t.getCellNameById=t.getCellNameByIndex=t.getCellIndex=t.getCellIds=t.getNumberFromLetter=t.getLetterFromNumber=void 0;var r=i(0),a=i(25),s=i(14),l=i(11),c=i(12),u=i(28);function d(e){if(!e)return"";var t=(e=--e)%26,i=String.fromCharCode(65+t),n=Math.floor(e/26);return n>0?d(n)+i:i}function h(e){return e?(e=e.toUpperCase()).split("").reduce((function(e,t,i,n){return e+=(t.charCodeAt(0)-64)*Math.pow(26,n.length-(i+1))}),0):-1}function f(e,t){if(!e)return{};var i=e.match(/([a-zA-Z]*\d*):([a-zA-Z]*\d*)/);if(i){var n=f(i[1],t),o=f(i[2],t),r=+n.row<=o.row?n.row:o.row,s=+n.col<=o.col?n.col:o.col;return{start:{row:r,col:s},end:{row:r===o.row?n.row:o.row,col:s===o.col?n.col:o.col}}}if(!v(e,t))return{};var l=(0,a.str2pos)(e),c=l[0];return{col:l[1],row:c}}function p(e,t,i,n){if(i>n)return-1;var o=Math.floor((i+n)/2);if(!e[o])return o;var r=+e[o].id;return r===t?o:r>t?p(e,t,i,o-1):p(e,t,o+1,n)}function v(e,t,i){void 0===i&&(i=!1);var n=e.match(/([a-zA-Z]*)(\d*)/);if(n&&n[1]&&n[2]){for(var o=parseInt(n[2],10),r=t.data[i?"_initOrder":"_order"];r.length<o-1;)r.push({id:r.length});return{col:h(n[1]),row:p(r,o,0,o)}}}function g(e,t,i){var n=i.data.getId(e)||e+1;return"".concat(d(t)).concat(n)}function _(e,t,i){var n;if(!t)return"";var o=(null===(n=e.data.getItem(t))||void 0===n?void 0:n.$index)||t,a=(0,r.findIndex)(e.config.columns,(function(e){return i.toString()===e.id}));return a<0&&+i>0&&(a=+i),o<0||a<0?void 0:"".concat(d(a)).concat(o)}function m(e){return new RegExp(/([A-Z]+\d+:[A-Z]+\d+)|(?:,)([A-Z]+\d+)/).test(e)}function y(e,t,i){var n;return void 0===i&&(i=!1),n=e.includes(":")?e.split(":").map((function(e){return v(e,t,i)})):e.split(",").map((function(e){return v(e,t,i)})),{start:{row:Math.min(n[0].row,n[1].row),col:Math.min(n[0].col,n[1].col)},end:{row:Math.max(n[0].row,n[1].row),col:Math.max(n[0].col,n[1].col)}}}function b(e,t,i){void 0===i&&(i="row");var n=[],o="row"===i?"col":"row";if(e)for(var r=y(e,t,!0),a=r.start,s=r.end,l=a[i];l<=s[i];l++)for(var c=a[o];c<=s[o];c++){var u="row"===i?_(t,l+1,c):_(t,c+1,l);n.push(u)}return n}function w(e){var t={decimal:".",thousands:","};function i(t){return x(e.split(t)[1].split(";")[0])}return e.includes("mso-displayed-decimal-separator")&&(t.decimal=i("mso-displayed-decimal-separator:")),e.includes("mso-displayed-thousand-separator")&&(t.thousands=i("mso-displayed-thousand-separator:")),t}function x(e){return e.replace(/[\"&\\]/g,"")}function C(e,t){var i=e.split(";")[0];t||(t=(0,c.getSeparators)());var n=x(i);return n.includes("[$")&&(n.includes("d")||n.includes("m")||n.includes("y")||n.includes("h")||n.includes("s"))&&(n=n.substr(n.indexOf("]")+1)),(0,u.isDateFormat)(n)&&n.includes("[")&&(n=n.replace("[","").replace("]","")),!n.includes("0")&&n.includes("#"),n=n.replace(",",t.thousands).replace(".",t.decimal)}function E(e){if(e){for(var t={},i=0,n=e.split(";");i<n.length;i++){var o=n[i];if(o){var r=o.trim().split(":");"height"!==r[0]&&"width"!==r[0]&&(t[r[0]]=r[1])}}return t}}function S(e){if("string"!=typeof e||e.includes(" "))return!1;try{var t=new URL(e);return t.origin&&"null"!==t.origin}catch(e){return!1}}function I(e,t,i,n){var o=e.split(":"),a=o[0],s=o[1];return(0,r.compare)(k(a,t,i,n),k(s,t,i,n))}function k(e,t,i,n){var o=f(e,n),r=o.col;return{isTopFixed:(null!=i?i:-1)>o.row,isLeftFixed:(null!=t?t:-1)>r}}t.getLetterFromNumber=d,t.getNumberFromLetter=h,t.getCellIds=f,t.getCellIndex=v,t.getCellNameByIndex=g,t.getCellNameById=_,t.getCellInfo=function(e,t,i){var n=f(e,i);return n.start&&(n=n.start),n&&e?t.getCell(n.row,n.col)||{}:{locked:!1}},t.isRangeId=m,t.getRangeIndexes=y,t.getRangeArray=b,t.getRangeMatrix=function(e,t,i){void 0===i&&(i="row");var n=[],o="row"===i?"col":"row";if(e)for(var r=y(e,t),a=r.start,s=r.end,l=a[i];l<=s[i];l++){for(var c=[],u=a[o];u<=s[o];u++){var d="row"===i?g(l,u,t):g(u,l,t);c.push(d)}n.push(c)}return n},t.getNextRangeCell=function(e,t,i,n){void 0===n&&(n="row");var o=b(e,i,n);return o[o.indexOf(t)+1]||o[0]},t.getPrevRangeCell=function(e,t,i,n){void 0===n&&(n="row");var o=b(e,i,n);return o[o.indexOf(t)-1]||o[o.length-1]},t.getCellsArray=function(e,t){if(e)return e.split(",").reduce((function(e,i){return m(i=i.toUpperCase())?e=e.concat(b(i,t)):e.push(i),e}),[])},t.extendConfig=function(e,t,i){for(var n in void 0===e&&(e={}),void 0===t&&(t={}),void 0===i&&(i=!0),e){var o=t[n],a=e[n];a&&"validate"in a&&(t[n]=a.validate(o)?o:a.default,e[n]=a.default)}return(0,r.extend)(e,t,i)},t.cleanActionConfig=function(e){return e.dataStore,e.sheets,e.editLine,e.grid,e.activePage,e.spreadsheet,e.mouseEvent,e.events,o(e,["dataStore","sheets","editLine","grid","activePage","spreadsheet","mouseEvent","events"])},t.isWasmSupported=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){return!1}return!1},t.fetchFile=function(t,i,n){return new e((function(e,o){var r=new XMLHttpRequest;r.open(i,t,!0),r.responseType=n,r.onload=function(){var t=r.response;t?e(t):o(r)},r.onerror=function(){return o(r)},r.send(null)}))},t.getSeparatorsFromMSO=w,t.analyzeMSOFormat=C,t.parseHtmlTable=function(e){var t,i,o=e.substring(e.indexOf("<style"),e.indexOf("</style>")),r={},a={};if(o.includes(".x")){var s=o.substring(o.indexOf(".x"),o.indexOf("--\x3e")).split("\r\n.");s[0]=s[0].substr(1);for(var l=0,u=s;l<u.length;l++){var d=u[l];if(d){var h=d.substring(0,d.indexOf("\r\n\t"));if(d.includes("mso-number-format")){var f=d.indexOf("mso-number-format"),p=d.split("mso-number-format")[1],v=p.indexOf('";');p=p.substring(0,v>-1?v:p.indexOf(";")),a[h]=p.split(p.indexOf(':"')>-1?':"':":")[1],d=d.substring(0,f)+d.substring(v+1)}r[h]=E(d.substring(d.indexOf("{")+1,d.indexOf("}")).trim())}}}var g=e.substring(e.indexOf("<table"),e.indexOf("</table>")+8),_=document.createElement("div");_.innerHTML=g;for(var m=_.querySelector("table"),y=(_.querySelector("col"),m.rows.length),b=0,x=0;x<y;x++){var S=(null===(i=null===(t=m.rows[x])||void 0===t?void 0:t.cells)||void 0===i?void 0:i.length)||0;b=Math.max(b,S)}var I=new Array(y);for(x=0;x<y;x++)I[x]=new Array(b);var k=(0,c.getSeparators)();a&&(k=w(e));var M=[];for(x=0;x<m.rows.length;x++)for(var O=m.rows[x],A=0,D=0;D<O.cells.length;D++){for(;void 0!==I[x][A];)A++;var P=O.cells[D],F=P.rowSpan,T=P.colSpan,R=P.innerText,V=P.classList;if(F>1||T>1){var H={from:{row:x,column:A},to:{row:x+F-1,column:A+T-1}};M.push(H);for(var L=A;L<T+A-1;L++)I[x][L+1]={val:"",style:{},format:""},M.push(null);for(var j=1;j<F;j++){x+j<y&&(I[x+j][A]={val:"",style:{},format:""},M.push(null));for(L=A;L<A+T-1;L++)I[x+j][A+1]={val:"",style:{},format:""},M.push(null)}}else M.push(null);for(var N=R.trim().replace(/\n/,""),$={},z="",B=0;B<V.length;B++){var W=V[B];r[W]&&($=n(n({},$),r[W])),a[W]&&(z=C(a[W],k))}$=n(n({},$),E(P.getAttribute("style"))),I[x][A]={val:N,style:$,format:z},A++}var G=[],U=[],q=[];return I.forEach((function(e){e.forEach((function(e){G.push(e.val),U.push(e.style),q.push(e.format)}))})),{values:G,styles:U,rowsCount:y,colsCount:b,formats:q,spans:M}},t.parseFromText=function(e){for(var t=e.split(/\n/),i=[],n=0,o=t;n<o.length;n++){var r=o[n].split(/\t/);i=i.concat(r)}return{values:i,rowsCount:t.length,colsCount:t[0].split("\t").length,formats:[""]}},t.getTextHeight=function(e,t){var i=document.createElement("div");i.style.width="".concat(t,"px"),i.innerText=e,i.classList.add("dhx-spreadsheet-height-detector"),document.body.appendChild(i);var n=i.scrollHeight;return i.remove(),n},t.convertStyles=function(e){if(!e)return{};var t,i=null,o="nowrap",a="normal",s=n({},e),l=s.textAlign||s["text-align"],c=s.verticalAlign||s["vertical-align"];if(l){switch(l){case"left":i="flex-start";break;case"center":i="center";break;case"right":i="flex-end"}s["justify-content"]=i}if(c){switch(c){case"top":t="flex-start";break;case"center":t="center";break;case"bottom":t="flex-end"}s["align-items"]="".concat(t," !important")}var u=e.multiline,d=e.color,h=e.background,f=e["background-color"];return u&&(o="wrap"===u?"normal":"nowrap",a="wrap"===u?"break-all":"normal",s["white-space"]=o,s["word-break"]=a),d&&(s.color=d.startsWith("#")?(0,r.rgbToHex)(d):d),f&&(s["background-color"]=f.startsWith("#")?(0,r.rgbToHex)(f):f),h&&(s.background=h.startsWith("#")?(0,r.rgbToHex)(h):h),s},t.isMac=function(){var e;return!!(null===(e=navigator.userAgentData)||void 0===e?void 0:e.platform.match(/(Mac)/i))},t.getCellNode=function(e,t,i){void 0===i&&(i=!1);var n=v(e,t,i),o=n.row,r=n.col,a=t.getRootNode().querySelector(".dhx_grid_data [data-dhx-id='".concat(o+1,"']"));if(a)return a.querySelector("[data-dhx-col-id='".concat(r,"']"))},t.isURL=S,t.doesContainUrl=function(e){if("string"==typeof e)return e.split(" ").find((function(e){return S(e)}))},t.getStylesObject=function(e){void 0===e&&(e="");var t=(e||"").split(" ")||[],i={};return t.forEach((function(e){i=n(n({},i),dhx.css.get(e))})),i},t.checkSpan=function(e,t,i,n){var o=e.from,r=e.to,a=o.column,s=o.row,l=r.column,c=r.row,u=g(s,a+1,n),d=g(c,l+1,n);return I("".concat(u,":").concat(d),t,i,n)},t.checkSpanByNames=I,t.isCellFixed=k,t.isCellSpaned=function(e,t){if(null==t?void 0:t.length){var i=(0,a.str2pos)(e),n=i[0],o=i[1];return t.find((function(e){var t=e.from,i=e.to,r=t.row,a=t.column,s=i.row,l=i.column;return r<=n&&s>=n&&a<=o&&l>=o}))}},t.showAlert=function(e){(0,s.alert)({header:l.default.alertTitle,text:e,buttons:[l.default.ok],buttonsAlignment:"right"})}}).call(this,i(16))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventsMixin=t.EventSystem=void 0;var n=function(){function e(e){this.events={},this.context=e||this}return e.prototype.on=function(e,t,i){var n=e.toLowerCase();this.events[n]=this.events[n]||[],this.events[n].push({callback:t,context:i||this.context})},e.prototype.detach=function(e,t){var i=e.toLowerCase(),n=this.events[i];if(t&&n&&n.length)for(var o=n.length-1;o>=0;o--)n[o].context===t&&n.splice(o,1);else this.events[i]=[]},e.prototype.fire=function(e,t){void 0===t&&(t=[]);var i=e.toLowerCase();return!this.events[i]||!this.events[i].map((function(e){return e.callback.apply(e.context,t)})).includes(!1)},e.prototype.clear=function(){this.events={}},e}();t.EventSystem=n,t.EventsMixin=function(e){var t=new n(e=e||{});e.detachEvent=t.detach.bind(t),e.attachEvent=t.on.bind(t),e.callEvent=t.fire.bind(t)}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function o(e,t,i){for(void 0===t&&(t="data-dhx-id"),void 0===i&&(i="target"),e instanceof Event&&(e=e[i]);e;){if(e.getAttribute&&e.getAttribute(t))return e;e=e.parentNode}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPageLinksCss=t.getLabelStyle=t.getPageInlineCss=t.fitPosition=t.calculatePosition=t.getRealPosition=t.isFirefox=t.isSafari=t.isIE=t.getScrollbarHeight=t.getScrollbarWidth=t.getBox=t.locateNodeByClassName=t.locate=t.locateNode=t.eventHandler=t.toNode=void 0,t.toNode=function(e){var t;return"string"==typeof e?document.getElementById(e)||document.querySelector("[data-cell-id=".concat(e,"]"))||document.querySelector(e)||(null===(t=document.querySelector("[data-dhx-root-id=".concat(e,"]")))||void 0===t?void 0:t.parentElement)||document.body:e||document.body},t.eventHandler=function(e,t,i){var n=Object.keys(t);return function(o){var r=e(o);if(void 0!==r){var a=o.target;e:for(;a;){var s=a.getAttribute&&a.getAttribute("class")||"";if(s.length)for(var l=s.split(" "),c=0;c<n.length;c++)if(l.includes(n[c])){if(!1===t[n[c]](o,r)||o.cancelBubble)return!1;break e}a=a.parentNode}}return"function"==typeof i&&i(o),!0}},t.locateNode=o,t.locate=function(e,t){void 0===t&&(t="data-dhx-id");var i=o(e,t);return i?i.getAttribute(t):""},t.locateNodeByClassName=function(e,t){for(e instanceof Element||(e=e.target);e;){if(t){if(e.classList&&e.classList.contains(t))return e}else if(e.getAttribute&&e.getAttribute("data-dhx-id"))return e;e=e.parentNode}},t.getBox=function(e){var t=e.getBoundingClientRect(),i=document.body,n=window.pageYOffset||i.scrollTop,o=window.pageXOffset||i.scrollLeft;return{top:t.top+n,left:t.left+o,right:i.offsetWidth-t.right,bottom:i.offsetHeight-t.bottom,width:t.right-t.left,height:t.bottom-t.top}};var r=-1;t.getScrollbarWidth=function(){if(r>-1)return r;var e=document.createElement("div");return document.body.appendChild(e),e.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",r=e.offsetWidth-e.clientWidth,document.body.removeChild(e),r};var a=-1;function s(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}}function l(){return{rightBorder:window.pageXOffset+window.innerWidth,bottomBorder:window.pageYOffset+window.innerHeight}}function c(e,t){var i,o,r=l(),a=r.rightBorder,s=r.bottomBorder-e.bottom-t.height,c=e.top-t.height;if("bottom"===t.mode?s>=0?o=e.bottom:c>=0&&(o=c):c>=0?o=c:s>=0&&(o=e.bottom),s<0&&c<0){if(t.auto)return u(e,n(n({},t),{mode:"right",auto:!1}));o=s>c?e.bottom:c}if(t.centering)i=function(e,t,i){var n=(t-(e.right-e.left))/2,o=e.left-n,r=e.right+n;return o>=0&&r<=i?o:o<0?0:i-t}(e,t.width,a);else{var d=a-e.left-t.width,h=e.right-t.width;i=d>=0?e.left:h>=0?h:h>d?e.left:h}return{left:i,top:o}}function u(e,t){var i,o,r=l(),a=r.rightBorder,s=r.bottomBorder,u=a-e.right-t.width,d=e.left-t.width;if("right"===t.mode?u>=0?i=e.right:d>=0&&(i=d):d>=0?i=d:u>=0&&(i=e.right),d<0&&u<0){if(t.auto)return c(e,n(n({},t),{mode:"bottom",auto:!1}));i=d>u?d:e.right}if(t.centering)o=function(e,t,i){var n=(t-(e.bottom-e.top))/2,o=e.top-n,r=e.bottom+n;return o>=0&&r<=i?o:o<0?0:i-t}(e,t.height,a);else{var h=e.bottom-t.height,f=s-e.top-t.height;o=f>=0?e.top:h>0||h>f?h:e.top}return{left:i,top:o}}function d(e,t){var i="bottom"===t.mode||"top"===t.mode?c(e,t):u(e,t),n=i.left,o=i.top;return{left:Math.round(n)+"px",top:Math.round(o)+"px",minWidth:Math.round(t.width)+"px",position:"absolute"}}t.getScrollbarHeight=function(){if(a>-1)return a;var e=document.createElement("div");return document.body.appendChild(e),e.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",a=e.offsetHeight-e.clientHeight,document.body.removeChild(e),a},t.isIE=function(){var e=window.navigator.userAgent;return e.includes("MSIE ")||e.includes("Trident/")},t.isSafari=function(){var e=function(e){return e.test(window.navigator.userAgent)},t=e(/Chrome/),i=e(/Firefox/);return!t&&!i&&e(/Safari/)},t.isFirefox=function(){var e=function(e){return e.test(window.navigator.userAgent)},t=e(/Chrome/),i=e(/Safari/);return!t&&!i&&e(/Firefox/)},t.getRealPosition=s,t.calculatePosition=d,t.fitPosition=function(e,t){return d(s(e),t)};var h=function(e){return e.href&&-1===e.ownerNode.outerHTML.indexOf(window.location.origin)&&(-1!==e.ownerNode.outerHTML.indexOf("http")||-1!==e.ownerNode.outerHTML.indexOf("https")||-1!==e.ownerNode.outerHTML.indexOf('href="//'))};t.getPageInlineCss=function(){for(var e=[],t=0;t<document.styleSheets.length;t++){var i=document.styleSheets[t];if(!h(i))for(var n=("cssRules"in i&&i.cssRules.length?i.cssRules:i.rules),o=0;o<n.length;o++){var r=n[o];"cssText"in r?e.push(r.cssText):e.push("".concat(r.selectorText," {\n").concat(r.style.cssText,"\n}\n"))}}return e.join("\n")},t.getLabelStyle=function(e){var t=e.helpMessage,i=e.type,n=e.labelWidth,o=e.label,r=n&&n.toString().startsWith("0"),a="text"!==i&&e.required;return!!(t||a||!(!o||o&&r)||n&&!r)&&{style:(o||n)&&!r&&{width:n,"max-width":"100%"},label:o&&r?null:o}},t.getPageLinksCss=function(e){var t=[];if(e)e.forEach((function(e){return t.push('<link href="'.concat(e,'" rel="stylesheet"/>'))}));else for(var i=0;i<document.styleSheets.length;i++){var n=document.styleSheets[i];h(n)&&t.push('<link href="'.concat(n.href,'" rel="stylesheet"/>'))}return t.join("\n")}},function(e,t,i){"use strict";var n,o,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ItemEvent=t.ValidationStatus=t.FormEvents=t.ClearMethod=void 0,function(e){e.value="value",e.validation="validation"}(n||(t.ClearMethod=n={})),function(e){e.beforeChange="beforeChange",e.change="change",e.click="click",e.focus="focus",e.blur="blur",e.keydown="keydown",e.beforeShow="beforeShow",e.afterShow="afterShow",e.beforeHide="beforeHide",e.afterHide="afterHide",e.afterValidate="afterValidate",e.beforeValidate="beforeValidate",e.beforeChangeProperties="beforeChangeProperties",e.afterChangeProperties="afterChangeProperties",e.beforeSend="beforesend",e.afterSend="aftersend",e.buttonClick="buttonClick",e.validationFail="validationfail"}(o||(t.FormEvents=o={})),function(e){e[e.pre=0]="pre",e[e.error=1]="error",e[e.success=2]="success"}(r||(t.ValidationStatus=r={})),function(e){e.click="click",e.beforeChange="beforeChange",e.change="change",e.input="input",e.focus="focus",e.blur="blur",e.keydown="keydown",e.beforeChangeOptions="beforeChangeOptions",e.changeOptions="changeOptions",e.beforeShow="beforeShow",e.afterShow="afterShow",e.beforeHide="beforeHide",e.afterHide="afterHide",e.beforeValidate="beforeValidate",e.afterValidate="afterValidate",e.beforeUploadFile="beforeUploadFile",e.uploadFile="uploadfile",e.uploadBegin="uploadBegin",e.uploadComplete="uploadComplete",e.uploadFail="uploadFail",e.uploadProgress="uploadProgress",e.beforeChangeProperties="beforeChangeProperties",e.afterChangeProperties="afterChangeProperties"}(a||(t.ItemEvent=a={}))},function(e,t,i){"use strict";var n,o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.FilterConditions=t.Actions=t.SpreadsheetEvents=void 0,function(e){e.beforeValueChange="beforeValueChange",e.afterValueChange="afterValueChange",e.beforeStyleChange="beforeStyleChange",e.afterStyleChange="afterStyleChange",e.beforeFormatChange="beforeFormatChange",e.afterFormatChange="afterFormatChange",e.beforeSelectionSet="beforeSelectionSet",e.afterSelectionSet="afterSelectionSet",e.beforeSelectionRemove="beforeSelectionRemove",e.afterSelectionRemove="afterSelectionRemove",e.beforeRowAdd="beforeRowAdd",e.afterRowAdd="afterRowAdd",e.beforeRowDelete="beforeRowDelete",e.afterRowDelete="afterRowDelete",e.beforeColumnAdd="beforeColumnAdd",e.afterColumnAdd="afterColumnAdd",e.beforeColumnDelete="beforeColumnDelete",e.afterColumnDelete="afterColumnDelete",e.beforeFocusSet="beforeFocusSet",e.afterFocusSet="afterFocusSet",e.beforeEditStart="beforeEditStart",e.afterEditStart="afterEditStart",e.beforeAction="beforeAction",e.afterAction="afterAction",e.beforeEditEnd="beforeEditEnd",e.afterEditEnd="afterEditEnd",e.groupFill="groupFill",e.beforeSheetAdd="beforeSheetAdd",e.afterSheetAdd="afterSheetAdd",e.beforeSheetRemove="beforeSheetRemove",e.afterSheetRemove="afterSheetRemove",e.beforeSheetRename="beforeSheetRename",e.afterSheetRename="afterSheetRename",e.beforeSheetChange="beforeSheetChange",e.afterSheetChange="afterSheetChange",e.beforeSheetClear="beforeSheetClear",e.afterSheetClear="afterSheetClear",e.beforeClear="beforeClear",e.afterClear="afterClear",e.editLineInput="editLineInput",e.editLineFocus="editLineFocus",e.editLineBlur="editLineBlur",e.cellInput="cellInput",e.gridRedraw="gridRedraw",e.afterPopupHide="afterPopupHide"}(n||(t.SpreadsheetEvents=n={})),function(e){e.setCellStyle="setCellStyle",e.setCellValue="setCellValue",e.setCellFormat="setCellFormat",e.removeCellStyles="removeCellStyles",e.lockCell="lockCell",e.deleteRow="deleteRow",e.addRow="addRow",e.deleteColumn="deleteColumn",e.addColumn="addColumn",e.groupAction="groupAction",e.groupRowAction="groupRowAction",e.groupColAction="groupColAction",e.addSheet="addSheet",e.deleteSheet="deleteSheet",e.renameSheet="renameSheet",e.clearSheet="clearSheet",e.clear="clear",e.resizeCol="resizeCol",e.resizeRow="resizeRow",e.setValidation="setValidation",e.sortCells="sortCells",e.insertLink="insertLink",e.fitColumn="fitColumn",e.filter="filter",e.merge="merge",e.unmerge="unmerge"}(o||(t.Actions=o={})),function(e){e.e="e",e.ne="ne",e.tc="tc",e.tdc="tdc",e.ts="ts",e.te="te",e.tex="tex",e.d="d",e.db="db",e.da="da",e.gt="gt",e.geq="geq",e.lt="lt",e.leq="leq",e.eq="eq",e.neq="neq",e.ib="ib",e.inb="inb"}(r||(t.FilterConditions=r={}))},function(e,t,i){"use strict";var n,o=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.setAttacments=t.widgetConfig=t.baseProps=t.isVerify=t.isTimeFormat=t.baseInputValidate=t.validateInput=t.isBlock=t.validateTemplate=t.getValidationMessage=t.getFormItemCss=void 0;var r=i(5),a=i(45),s=i(0);t.getFormItemCss=function(e,t,i){var n;void 0===i&&(i=!1);var o=e.labelPosition,a=e.required,s=e.disabled,l=e.hiddenLabel,c=e.$validationStatus,u=(n={},n[r.ValidationStatus.pre]="",n[r.ValidationStatus.error]=" dhx_form-group--state_error",n[r.ValidationStatus.success]=" dhx_form-group--state_success",n)[c]||"",d="left"===o?" dhx_form-group--inline":"",h=s?" dhx_form-group--disabled":"",f=l?" dhx_form-group--label_sr":"";return t?d+(i?"":u)+(a?" dhx_form-group--required":"")+h+f:d+h+f};var l=((n={})[a.Validation.validAlphaNumeric]=/^[a-zA-Z0-9_]+$/,n[a.Validation.validEmail]=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,n[a.Validation.validInteger]=/^-?\d+$/,n[a.Validation.validIPv4]=/\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}\b/,n[a.Validation.validNumeric]=/^-?\d+(\.\d+)?$/,n);function c(e){return"fieldset"!==e.type&&(Boolean(e.rows)||Boolean(e.cols))}t.getValidationMessage=function(e){var t;return(t={undefined:e.preMessage},t[r.ValidationStatus.pre]=e.preMessage,t[r.ValidationStatus.error]=e.errorMessage,t[r.ValidationStatus.success]=e.successMessage,t)[e.$validationStatus]||""},t.validateTemplate=function(e,t){return!l[e]||l[e].test(t)},t.isBlock=c,t.validateInput=function(e,t){var i=!0;if("function"==typeof t)i=t(e);else{var n=l[t];n&&(i=n.test(e.toString()))}return i},t.baseInputValidate=function(e,t){if(!(0,s.isDefined)(e))return!1;var i=t.inputType,n=t.min,o=t.max,r=t.minlength,a=t.maxlength;return"number"===i?void 0!==n&&void 0!==o?Number(n)<=Number(o)&&Number(n)<=Number(e)&&Number(o)>=Number(e):void 0!==n?Number(n)<=Number(e):void 0!==o?Number(o)>=Number(e):0===e||"0"===e||!!e:void 0!==r&&void 0!==a?Number(r)<=String(e).length&&Number(a)>=String(e).length:void 0!==r?Number(r)<=String(e).length:void 0!==a?Number(a)>=String(e).length:"string"==typeof e&&!!e},t.isTimeFormat=function(e,t){return 12===t?/(^0?([1-9][0-2]?):[0-5][0-9]?([AP][M]?)$)/i.test(e):/(^(0[0-9]|1[0-9]|2[0-3]|[0-9]):[0-5][0-9]$)/i.test(e)},t.isVerify=function(e){return["required","validation","minlength","maxlength","min","max"].some((function(t){switch(t){case"required":return!!e[t];case"validation":return"function"==typeof e[t]||"email"===e[t]||"integer"===e[t]||"numeric"===e[t]||"alphanumeric"===e[t]||"IPv4"===e[t];case"minlength":case"maxlength":return"number"==typeof e[t]||"string"==typeof e[t];case"min":case"max":return("number"==typeof e[t]||"string"==typeof e[t])&&"number"===e.inputType}}))},t.baseProps=["width","height","padding","css"];function u(e,t,i){void 0===e&&(e=[]);for(var n=[],o=0;o<e.length;o++){var r=e[o];r.type&&(t[r.name].parent=i,n.push(t[r.name])),c(r)&&n.push.apply(n,u(r.rows||r.cols,t,i))}return n}t.widgetConfig=function(e){e.width,e.type,e.id,e.name,e.hidden,e.editable,e.css,e.required,e.helpMessage,e.preMessage,e.successMessage,e.errorMessage,e.label,e.labelWidth,e.labelPosition,e.hiddenLabel,e.validation,e.icon;return o(e,["width","type","id","name","hidden","editable","css","required","helpMessage","preMessage","successMessage","errorMessage","label","labelWidth","labelPosition","hiddenLabel","validation","icon"])},t.setAttacments=function(e,t){var i;for(var n in e){var o=e[n];"fieldset"===o.config.type?(o.setAttachments(u(o.config.rows||o.config.cols,e,o)),o.setCell(t.getCell(n))):null===(i=t.getCell(n))||void 0===i||i.attach(o)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toViewLike=t.View=void 0;var n=i(0),o=i(4),r=function(){function e(e,t){var i;this.config=t||{},this._uid=null!==(i=this.config.rootId)&&void 0!==i?i:(0,n.uid)()}return e.prototype.mount=function(e,t){t&&(this._view=t),e&&this._view&&this._view.mount&&(this._container=(0,o.toNode)(e),this._container.tagName?this._view.mount(this._container):this._container.attach&&this._container.attach(this))},e.prototype.unmount=function(){var e=this.getRootView();e&&e.node&&(e.unmount(),this._view=null)},e.prototype.getRootView=function(){return this._view},e.prototype.getRootNode=function(){return this._view&&this._view.node&&this._view.node.el},e.prototype.paint=function(){this._view&&(this._view.node||this._container)&&(this._doNotRepaint=!1,this._view.redraw())},e}();t.View=r,t.toViewLike=function(e){return{getRootView:function(){return e},paint:function(){return e.node&&e.redraw()},mount:function(t){return e.mount(t)}}}},function(e,t,i){"use strict";var n,o,r,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.Split=t.GridSelectionEvents=t.GridSystemEvents=t.GridEvents=t.HeaderFilterEvent=void 0,function(e){e.change="change"}(n||(t.HeaderFilterEvent=n={})),function(e){e.scroll="scroll",e.expand="expand",e.filterChange="filterChange",e.beforeFilter="beforeFilter",e.beforeResizeStart="beforeResizeStart",e.resize="resize",e.afterResizeEnd="afterResizeEnd",e.cellClick="cellClick",e.cellRightClick="cellRightClick",e.cellMouseOver="cellMouseOver",e.cellMouseDown="cellMouseDown",e.cellDblClick="cellDblClick",e.headerCellClick="headerCellClick",e.footerCellClick="footerCellClick",e.headerCellMouseOver="headerCellMouseOver",e.footerCellMouseOver="footerCellMouseOver",e.headerCellMouseDown="headerCellMouseDown",e.footerCellMouseDown="footerCellMouseDown",e.headerCellDblClick="headerCellDblClick",e.footerCellDblClick="footerCellDblClick",e.headerCellRightClick="headerCellRightClick",e.footerCellRightClick="footerCellRightClick",e.beforeEditStart="beforeEditStart",e.afterEditStart="afterEditStart",e.beforeEditEnd="beforeEditEnd",e.afterEditEnd="afterEditEnd",e.beforeKeyDown="beforeKeyDown",e.afterKeyDown="afterKeyDown",e.beforeColumnHide="beforeColumnHide",e.afterColumnHide="afterColumnHide",e.beforeColumnShow="beforeColumnShow",e.afterColumnShow="afterColumnShow",e.beforeRowHide="beforeRowHide",e.afterRowHide="afterRowHide",e.beforeRowShow="beforeRowShow",e.afterRowShow="afterRowShow",e.beforeRowDrag="beforeRowDrag",e.dragRowStart="dragRowStart",e.dragRowOut="dragRowOut",e.dragRowIn="dragRowIn",e.canRowDrop="canRowDrop",e.cancelRowDrop="cancelRowDrop",e.beforeRowDrop="beforeRowDrop",e.afterRowDrop="afterRowDrop",e.afterRowDrag="afterRowDrag",e.beforeColumnDrag="beforeColumnDrag",e.dragColumnStart="dragColumnStart",e.dragColumnOut="dragColumnOut",e.dragColumnIn="dragColumnIn",e.canColumnDrop="canColumnDrop",e.cancelColumnDrop="cancelColumnDrop",e.beforeColumnDrop="beforeColumnDrop",e.afterColumnDrop="afterColumnDrop",e.afterColumnDrag="afterColumnDrag",e.beforeRowResize="beforeRowResize",e.afterRowResize="afterRowResize",e.beforeSort="beforeSort",e.afterSort="afterSort"}(o||(t.GridEvents=o={})),function(e){e.cellTouchMove="cellTouchMove",e.cellTouchEnd="cellTouchEnd",e.headerCellTouchMove="headerCellTouchMove",e.headerCellTouchEnd="headerCellTouchEnd"}(r||(t.GridSystemEvents=r={})),function(e){e.beforeUnSelect="beforeUnSelect",e.afterUnSelect="afterUnSelect",e.beforeSelect="beforeSelect",e.afterSelect="afterSelect"}(a||(t.GridSelectionEvents=a={})),function(e){e.left="leftSplit",e.right="rightSplit",e.top="topSplit",e.bottom="bottomSplit"}(s||(t.Split=s={}))},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(139),t),o(i(74),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={undo:"Undo",redo:"Redo",textColor:"Text color",backgroundColor:"Background color",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",link:"Link",halign:"Horizontal align",valign:"Vertical align",left:"Left",right:"Right",center:"Center",top:"Top",bottom:"Bottom",multiline:"Text wrapping",clip:"Clip",wrap:"Wrap",merge:"Merge",unmerge:"Unmerge",lockCell:"Lock cell",unlockCell:"Unlock cell",clear:"Clear",clearValue:"Clear value",clearStyles:"Clear styles",clearAll:"Clear all",columns:"Columns",rows:"Rows",addColumn:"Add column",removeColumn:"Remove column",fitToData:"Fit to data",addRow:"Add row",removeRow:"Remove row",row:"row",col:"col",format:"Format",common:"Common",number:"Number",currency:"Currency",percent:"Percent",text:"Text",date:"Date",time:"Time",filter:"Filter",help:"Help",custom:"Custom",deleteSheet:"Delete",renameSheet:"Rename",renameSheetAlert:"A sheet with the name $name already exists. Please enter another name. ",file:"File",import:"Import",export:"Export",downloadAs:"Download as...",importAs:"Import as...",data:"Data",validation:"Data validation",search:"Search",sort:"Sort",ascSort:"Sort A to Z",descSort:"Sort Z to A",copy:"Copy",edit:"Edit",insert:"Insert",remove:"Remove",linkCopied:"Link copied to clipboard",e:"Is empty",ne:"Is not empty",tc:"Text contains",tdc:"Text doesn't contain",ts:"Text starts with",te:"Text ends with",tex:"Text is exactly",d:"Date is",db:"Date is before",da:"Date is after",gt:"Greater than",geq:"Greater or equal to",lt:"Less than",leq:"Less or equal to",eq:"Is equal to",neq:"Is not equal to",ib:"Is between",inb:"Is not between",none:"None",empty:"Empty",value:"Value",values:"By values",condition:"By condition",and:"And",cancel:"Cancel",save:"Save",removeValidation:"Remove validation",selectAll:"Select all",unselectAll:"Unselect all",apply:"Apply",ok:"Ok",alertTitle:"There was a problem!",mergeAlertMessage:"You can't $action a range containing merges!",spanMergeAlert:"You can't merge frozen and non-frozen cells!",dontShowAgain:"Don't show again",spanPasteError:"You can't paste merges that cross the boundary of a frozen region",spanMergeLockedError:"You can't merge locked cells!",spanUnmergeLockedError:"You can't unmerge locked cells!",removeAlert:"You can't remove last $name!"}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.addNewFormat=t.getFormattedFormula=t.getFormattedValue=t.getCleanValue=t.detectFormat=t.getPureNumber=t.getDefaultFormatsMap=t.initFormat=t.getFormatRule=t.isNumeric=t.getFormat=t.getDefaultFormats=t.getSeparators=void 0;var o=i(0),r=i(19),a=i(11),s=i(28),l=i(25),c={},u=[],d={decimal:".",thousands:","},h="(\\[\\$[\\w\\W]*?\\]|[\\$]{0,1})",f="([,. ]{0,1})",p="([#0]*)",v=new RegExp("\\[\\$(\\D*[^\\]])|(\\$)"),g=new RegExp("".concat(h).concat(p).concat(f).concat(p).concat(f).concat(p).concat("([%]{0,1})","\\s?").concat(h)),_={};function m(){return u}function y(e){return!isNaN(e-parseFloat(e))}function b(e){if(e&&"string"==typeof e){if(_[e])return _[e];var t=function(e){return{currencyBefore:e[1],digits:e[2],thousandsSeparator:e[3],optionalDigits:e[4],decimalSeparator:e[5],decimalDigits:e[6],percent:e[7],currencyAfter:e[8],decimalLength:0}}(e.match(g));if(!t.decimalSeparator&&t.thousandsSeparator&&(t.decimalSeparator=t.thousandsSeparator,t.decimalDigits=t.optionalDigits,t.thousandsSeparator="",t.optionalDigits=""),t.decimalSeparator||(t.decimalSeparator=d.decimal),t.currencyBefore){var i=t.currencyBefore.match(v);t.currencyBefore=i[1]||i[2]}if(t.currencyAfter){i=t.currencyAfter.match(v);t.currencyAfter=i[1]||i[2]}return t.percent&&(t.currencyBefore="",t.currencyAfter=""),t.decimalDigits&&(t.decimalLength=t.decimalDigits.split("0").length-1),"common"===e&&(t.decimalSeparator=".",t.decimalLength="",t.thousandsSeparator=","),_[e]=t,t}}t.getSeparators=function(){return d},t.getDefaultFormats=m,t.getFormat=function(e){return u[(0,o.findIndex)(u,(function(t){return t.id===e}))]},t.isNumeric=y,t.getFormatRule=b;var w="15.0031",x="44490.5625";function C(e){var t="string"==typeof e&&e.includes("%"),i=parseFloat("".concat(e).replace(/[^.\d]/g,""));return t?i/100:i}function E(e,t){if(!(0,o.isDefined)(e)||""===e||"boolean"==typeof e||"".concat(e).startsWith("="))return e;var i=m().find((function(e){return"common"===e.id})),n=t||i,a=n.id,l=n.mask;if("text"===a||!a)return e;var c=y(e);if(a.includes("date")||a.includes("time")){if(c)return+e;var u=(0,s.getDHXDateFormat)(l),d=e;if("object"==typeof d&&d.valueOf())return(0,s.getExcelDateFromJs)(d);var h=d.replace(/\n/g," ").replace(/\s+/g," ").trim();return(0,r.stringToDate)(h,u,!0)&&(d=(0,s.getExcelDateFromJs)((0,r.stringToDate)(h,u))),d}return"percent"===a||l.endsWith("%")?C(e):S(e,l)}function S(e,t){var i;if("string"!=typeof e||e.startsWith("="))return e;var n=null===(i=m().find((function(e){return"number"===e.id})))||void 0===i?void 0:i.mask;if(!t&&!n)return e;var o=b(t||n),r=o.currencyBefore,a=o.currencyAfter,s=o.decimalSeparator,l=o.thousandsSeparator;if(r&&(e=e.replace(r,"")),a&&(e=e.replace(a,"")),t){var c=e.split(l),u=c.length-1,d=c[u].split(s),h=d[0],f=d[1];if(c[u]=h,c.some((function(e,t){return t&&3!==e.length||!/^-?\d+$/.test(e)})))return e;e="".concat(c.join("")).concat(f?".".concat(f):"")}return parseFloat(e)||e}function I(e,t){var i;if(!(0,o.isDefined)(e))return"";if("boolean"==typeof e)return"".concat(e).toUpperCase();if(!(null==t?void 0:t.id)||"@"===t.mask)return e;if("common"===t.id)return null!==(i=t.$value||e)&&void 0!==i?i:"";var n=t.mask,a=t.id;return a.includes("date")||a.includes("time")?y(e)?(0,r.getFormattedDate)((0,s.getDHXDateFormat)(n),(0,s.excelDateToJSDate)(+e)):e:function(e,t,i){var n=y(e);if(!t)return e;if(!n)return e;var o="";t.currencyBefore&&(o+=t.currencyBefore);var r=parseFloat(e),a=r<0;a&&(r=Math.abs(r));var s=r.toString();t.percent&&(r*=100);var l="common"===i;if(t.digits&&!l){var c=t.decimalDigits.length,u=Math.pow(10,c);s=(r=Math.round(r*u)/u).toFixed(c)}var d=(null==t?void 0:t.digits)+(null==t?void 0:t.optionalDigits),h=s.split(".");if(d&&d.length>h[0].length){for(var f=h[0].split(""),p=h[0],v=0,g=d.length-1;g>-1;g--){var _=d[g],m=f[v];"0"!==_||m||(p="0"+p),v++}s=p+(h.length>1?".".concat(h[1]):"")}return o+=t.digits?function(e,t,i,n,o,r){void 0===t&&(t=""),void 0===n&&(n=3),void 0===o&&(o=""),void 0===r&&(r=!1);for(var a=e.toString().split("."),s=[],l=o?[]:[""],c=1,u=!1,d=o.length-1;d>-1;d--){var h=o[d],f=a[1][d];("#"!==h||"0"!==f||u)&&(l.push(f),u=!0)}for(d=a[0].length-1;d>-1;d--)s.push(a[0][d]),c===n&&d?(s.push(t),c=1):c++;return l=r?a[1]:l.reverse().join(""),a[0]=s.reverse().join(""),l?"".concat(a[0]).concat(i).concat(l):a[0]}(s,t.thousandsSeparator,t.decimalSeparator,t.optionalDigits.length,t.decimalDigits,l):s,o+=t.percent,t.currencyAfter&&(o+=t.currencyAfter),a&&(o="-".concat(o)),o}(e,b(n),a)}t.initFormat=function(e,t){var i;c=e.config;var r=t.dateFormat,l=t.timeFormat,h=void 0===l?12:l,f=t.currency,p=t.decimal,v=t.thousands;u=[{name:a.default.common,id:"common",mask:"#".concat(v,"##0").concat(p),example:w},{name:a.default.number,id:"number",mask:"#".concat(v,"##0").concat(p,"00"),example:w},{name:a.default.percent,id:"percent",mask:"#".concat(v,"##0").concat(p,"00%"),example:w},{name:a.default.currency,id:"currency",mask:"[$".concat(f,"]#").concat(v,"##0").concat(p,"00"),example:w},{name:a.default.date,id:"date",mask:(0,s.getExcelFormatFromDHX)(r),example:x},{name:a.default.time,id:"time",mask:"h:mm ".concat(h>12?"":"am/pm"),example:x,timeFormat:h},{name:a.default.text,id:"text",mask:"@",example:"some text"}],null===(i=c.formats)||void 0===i||i.forEach((function(e){var t=(0,o.findIndex)(u,(function(t){return t.id===e.id}));if(t>=0)u[t]=e;else{var i=e;(0,s.isDateFormat)(e.mask)&&(i=n(n({},e),{mask:(0,s.getExcelFormatFromDHX)(e.mask)})),u.push(i)}})),d={decimal:p,thousands:v},c.formats=u,u.forEach((function(e){b(e.mask)}))},t.getDefaultFormatsMap=function(){return u.reduce((function(e,t){return e[t.mask]=t.id,e}),{})},t.getPureNumber=C,t.detectFormat=function(e){var t=m(),i=function(e){return t.find((function(t){return t.id===e}))},n=i("number"),o=i("percent"),r=i("date"),a=i("time"),s="".concat(e).startsWith("http");return"".concat(e).includes("%")||/[a-z]/.exec("".concat(e))||!y(e)&&!y(S(e,null==n?void 0:n.mask))?!s&&(e instanceof Date||y(E(e,r)))?r:!s&&y(E(e,a))?a:y(S(e,null==o?void 0:o.mask))||"".concat(e).endsWith("%")?o:i("common"):n},t.getCleanValue=E,t.getFormattedValue=I,t.getFormattedFormula=function(e){var t=e.formula,i=e.store,n=e.format;if(!t||!t.startsWith("="))return t;n=n||m().find((function(e){return"common"===e.id}));for(var o=i.parse(t).code,r="",a=0;a<o.length;a+=3){var s=o[a];if(s!==l.T_DATA){var c=t.substr(o[a+1],o[a+2]),u=t.substr(o[a+4],o[a+5]);s===l.T_NUMBER&&o[a+6]===l.T_NUMBER&&"."===u&&(c=I(c="".concat(c).concat(u).concat(t.substr(o[a+7],o[a+8])),n),a+=6),(s!==l.T_PAGE||o[a+3]!==l.T_RANGE&&o[a+3]!==l.T_ARG)&&(r+=c)}}return r},t.addNewFormat=function(e,t,i){var n=i.find((function(t){return t.mask===e}));if(n)return n;var r=(0,s.isDateFormat)(e),l=(0,o.uid)(),c="".concat(a.default.custom," ").concat(l),u={id:r?"".concat(r,"_").concat(l):l,mask:e,example:r?x:w,name:c};return i.push(u),u}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(26),t),o(i(67),t),o(i(125),t),o(i(126),t),o(i(33),t),o(i(160),t),o(i(27),t),o(i(70),t),o(i(69),t),o(i(161),t),o(i(68),t),o(i(51),t)},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(104),t),o(i(105),t),o(i(109),t),o(i(62),t),o(i(47),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;var a=i(1),s=i(4),l=i(8),c=i(10),u=i(5),d=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;n._handlers=r({showHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.show(e.target,{mode:"left"===n.config.labelPosition?"bottom":"right",theme:e.target})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.hide()}},n._getHandlers());return n.mount(t,(0,a.create)({render:function(){return n.config&&n._draw()}})),n}return o(t,e),t.prototype.setValidationStatus=function(e){void 0===e&&(e="pre"),this.config.$validationStatus=u.ValidationStatus[e]},t.prototype._destructor=function(){this._helper&&this._helper.destructor(),this.config=this._handlers=this._helper=null,this.unmount()},t.prototype._getHandlers=function(){return{}},t.prototype._init=function(){},t.prototype._draw=function(){return this._drawLabel()},t.prototype._drawLabel=function(){var e=this.config,t=e.id,i=e.helpMessage,n=e.required;this.config.helpMessage&&(this._helper||(this._helper=new c.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));var o=(0,s.getLabelStyle)(this.config);return o&&(0,a.el)("".concat(this.config.type.includes("group")?"legend":"label",".dhx_label"),{for:t||this._uid,class:i?"dhx_label--with-help":"",style:o.style},i?[(o.label||n)&&(0,a.el)("span.dhx_label__holder",o.label),(0,a.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper,id:"dhx_label__help_".concat(t||this._uid)})]:o.label)},t}(l.View);t.Label=d},function(e,t,i){(function(t,i){!function(){t="undefined"!=typeof window?window:this;var n=1,o={},r=!1;function a(e){t.setImmediate?i(e):t.importScripts?setTimeout(e):(n++,o[n]=e,t.postMessage(n,"*"))}function s(e){"use strict";if("function"!=typeof e&&null!=e)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var t,i,n=this,o=0,r=0,l=[];n.promise=n,n.resolve=function(e){return t=n.fn,i=n.er,o||(r=e,o=1,a(d)),n},n.reject=function(e){return t=n.fn,i=n.er,o||(r=e,o=2,a(d)),n},n._d=1,n.then=function(e,t){if(1!=this._d)throw TypeError();var i=new s;return i.fn=e,i.er=t,3==o?i.resolve(r):4==o?i.reject(r):l.push(i),i},n.catch=function(e){return n.then(null,e)};var c=function(e){o=e||4,l.map((function(e){3==o&&e.resolve(r)||e.reject(r)}))};try{"function"==typeof e&&e(n.resolve,n.reject)}catch(e){n.reject(e)}return n;function u(e,t,i,n){if(2==o)return n();if("object"!=typeof r&&"function"!=typeof r||"function"!=typeof e)n();else try{var a=0;e.call(r,(function(e){a++||(r=e,t())}),(function(e){a++||(r=e,i())}))}catch(e){r=e,i()}}function d(){var e;try{e=r&&r.then}catch(e){return r=e,o=2,d()}u(e,(function(){o=1,d()}),(function(){o=2,d()}),(function(){try{1==o&&"function"==typeof t?r=t(r):2==o&&"function"==typeof i&&(r=i(r),o=1)}catch(e){return r=e,c()}r==n?(r=TypeError(),c()):u(e,(function(){c(3)}),c,(function(){c(1==o&&3)}))}))}}t.setImmediate||t.addEventListener("message",(function(e){if(e.source==t)if(r)a(o[e.data]);else{r=!0;try{o[e.data]()}catch(e){}delete o[e.data],r=!1}})),s.resolve=function(e){if(1!=this._d)throw TypeError();return e instanceof s?e:new s((function(t){t(e)}))},s.reject=function(e){if(1!=this._d)throw TypeError();return new s((function(t,i){i(e)}))},s.all=function(e){if(1!=this._d)throw TypeError();if(!(e instanceof Array))return s.reject(TypeError());var t=new s;return function i(n,o){if(o)return t.resolve(o);if(n)return t.reject(n);0==e.reduce((function(e,t){return t&&t.then?e+1:e}),0)&&t.resolve(e),e.map((function(t,n){t&&t.then&&t.then((function(t){return e[n]=t,i(),t}),i)}))}(),t},s.race=function(e){if(1!=this._d)throw TypeError();if(!(e instanceof Array))return s.reject(TypeError());if(0==e.length)return new s;var t=new s;return function i(n,o){if(o)return t.resolve(o);if(n)return t.reject(n);0==e.reduce((function(e,t){return t&&t.then?e+1:e}),0)&&t.resolve(e),e.map((function(e,t){e&&e.then&&e.then((function(e){i(null,e)}),i)}))}(),t},s._d=1,e.exports=s}()}).call(this,i(48),i(106).setImmediate)},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(54),t),o(i(136),t),o(i(55),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrollFixedColsAndRows=t.getTotalHeight=t.getTotalWidth=t.isHtmlEnable=t.isTooltip=t.isContentTooltip=t.showTooltip=t.isAutoWidth=t.isSortable=t.isRowEmpty=t.isCssSupport=t.removeHTMLTags=t.getStyleByClass=t.transpose=void 0;var n=i(0),o=i(4),r=i(14);t.transpose=function(e,t){for(var i=[],n=0;n<e.length;n++)for(var o=e[n],r=0;r<o.length;r++){i[r]=i[r]||[];var a=t?t(o[r]):o[r];i[r].push(a)}return i},t.getStyleByClass=function(e,t,i,o){var r,a,s=t.querySelector("."+i),l=(r=s,"string"==typeof(a='<div class="'.concat(e,'"></div>'))?(r.insertAdjacentHTML("beforeend",a),r.lastChild):(r.appendChild(a),a)),c=window.getComputedStyle(l),u={color:"rgb(0, 0, 0)"===c.color?o.color:(0,n.rgbToHex)(c.color),background:"rgba(0, 0, 0, 0)"===c.backgroundColor?o.background:(0,n.rgbToHex)(c.backgroundColor),fontSize:Math.round(parseFloat(c.fontSize)),bold:["bold","700","600","500"].includes(c.fontWeight)};return s.removeChild(l),u.color===o.color&&u.background===o.background&&u.fontSize===o.fontSize?null:u},t.removeHTMLTags=function(e){return"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e?"":"".concat(null==e?"":e).replace(/<[^>]*>/g,"").replace(/["]/g,"&quot;").trim()},t.isCssSupport=function(e,t){try{return CSS.supports(e,t)}catch(n){var i=document.createElement("div");return i.style[e]=t,i.style[e]===t}},t.isRowEmpty=function(e){if(e)return Object.keys(e).reduce((function(t,i){return"id"===i||i.startsWith("$")?t:t&&void 0!==e[i]&&""!==e[i]?void 0:t}),!0)},t.isSortable=function(e,t){return!1!==t.sortable&&e.sortable||t.sortable},t.isAutoWidth=function(e,t){if(t)return!1!==t.autoWidth&&e.autoWidth||t.autoWidth;var i=!1;return e.columns.map((function(t){(!1!==t.autoWidth&&e.autoWidth||t.autoWidth)&&(i=!0)})),i},t.showTooltip=function(e){var t=e.node,i=e.value,n=e.htmlEnable,o=void 0!==n&&n;t&&(0,r.tooltip)(i.toString(),{css:"dhx_grid_tooltip",node:t,htmlEnable:o})},t.isContentTooltip=function(e,t,i,n){for(var o=!1,r="header"===n?e.headerTooltip:e.footerTooltip,a=[e.tooltip,r,t.tooltip,null==i?void 0:i.tooltip],s=0;s<a.length;s++)"boolean"==typeof a[s]&&(o=a[s]);return o},t.isTooltip=function(e,t){return!1!==t.tooltip&&e.tooltip||t.tooltip},t.isHtmlEnable=function(e,t,i){var n,o;return!!(null!==(o=null!==(n=null==i?void 0:i.htmlEnable)&&void 0!==n?n:t.htmlEnable)&&void 0!==o?o:e.htmlEnable)},t.getTotalWidth=function(e){return e.reduce((function(e,t){return e+(t.$width||0)}),0)},t.getTotalHeight=function(e){return e.reduce((function(e,t){return e+(t.$height||0)}),0)},t.scrollFixedColsAndRows=function(e){var t=(0,o.locateNode)(e,"data-dhx-widget-id").querySelector(".dhx_grid-body"),i=e.deltaY,n=e.shiftKey?[i,0]:[0,i];null==t||t.scrollBy.apply(t,n)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateHelper=t.stringToDate=t.getFormattedDate=t.locale=void 0;var n=i(0),o=i(0);t.locale={monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Monday"],cancel:"Cancel"};var r,a={"%d":function(e){var t=e.getDate();return t<10?"0"+t:t},"%j":function(e){return e.getDate()},"%l":function(e){return t.locale.days[e.getDay()]},"%D":function(e){return t.locale.daysShort[e.getDay()]},"%m":function(e){var t=e.getMonth()+1;return t<10?"0"+t:t},"%n":function(e){return e.getMonth()+1},"%M":function(e){return t.locale.monthsShort[e.getMonth()]},"%F":function(e){return t.locale.months[e.getMonth()]},"%y":function(e){return e.getFullYear().toString().slice(2)},"%Y":function(e){return e.getFullYear()},"%h":function(e){var t=e.getHours()%12;return 0===t&&(t=12),t<10?"0"+t:t},"%g":function(e){var t=e.getHours()%12;return 0===t&&(t=12),t},"%H":function(e){var t=e.getHours();return t<10?"0"+t:t},"%G":function(e){return e.getHours()},"%i":function(e){var t=e.getMinutes();return t<10?"0"+t:t},"%s":function(e){var t=e.getSeconds();return t<10?"0"+t:t},"%a":function(e){return e.getHours()>=12?"pm":"am"},"%A":function(e){return e.getHours()>=12?"PM":"AM"},"%u":function(e){return e.getMilliseconds()}},s={"%d":function(e,t,i,n){var o=/(^([0-9][0-9])$)/i.test(t);if(n)return o;o?e.setDate(Number(t)):e.setDate(Number(1))},"%j":function(e,t,i,n){var o=/(^([0-9]?[0-9])$)/i.test(t);if(n)return o;o?e.setDate(Number(t)):e.setDate(Number(1))},"%m":function(e,t,i,n){var o=/(^([0-9][0-9])$)/i.test(t);if(n)return o;o?e.setMonth(Number(t)-1):e.setMonth(Number(0)),o&&e.getMonth()!==Number(t)-1&&e.setMonth(Number(t)-1)},"%n":function(e,t,i,n){var o=/(^([0-9]?[0-9])$)/i.test(t);if(n)return o;o?e.setMonth(Number(t)-1):e.setMonth(Number(0)),o&&e.getMonth()!==Number(t)-1&&e.setMonth(Number(t)-1)},"%M":function(e,i,n,r){var a=(0,o.findIndex)(t.locale.monthsShort,(function(e){return e===i}));if(r)return-1!==a;-1===a?e.setMonth(0):e.setMonth(a),-1!==a&&e.getMonth()!==a&&e.setMonth(a)},"%F":function(e,i,n,r){var a=(0,o.findIndex)(t.locale.months,(function(e){return e===i}));if(r)return-1!==a;-1===a?e.setMonth(0):e.setMonth(a),-1!==a&&e.getMonth()!==a&&e.setMonth(a)},"%y":function(e,t,i,n){var o=/(^([0-9][0-9])$)/i.test(t);if(n)return o;o?e.setFullYear(Number("20"+t)):e.setFullYear(Number("2000"))},"%Y":function(e,t,i,n){var o=/(^([0-9][0-9][0-9][0-9])$)/i.test(t);if(n)return o;o?e.setFullYear(Number(t)):e.setFullYear(Number("2000"))},"%h":function(e,t,i,n){var o=/(^0[1-9]|1[0-2]$)/i.test(t);if(n)return o;o&&("am"===i||"pm"===i)||"AM"===i||"PM"===i?e.setHours(Number(t)):e.setHours(Number(0))},"%g":function(e,t,i,n){var o=/(^[1-9]$)|(^0[1-9]|1[0-2]$)/i.test(t);if(n)return o;o&&("am"===i||"pm"===i)||"AM"===i||"PM"===i?e.setHours(Number(t)):e.setHours(Number(0))},"%H":function(e,t,i,n){var o=/(^[0-2][0-9]$)/i.test(t);if(n)return o;o?e.setHours(Number(t)):e.setHours(Number(0))},"%G":function(e,t,i,n){var o=/(^[1-9][0-9]?$)/i.test(t);if(n)return o;o?e.setHours(Number(t)):e.setHours(Number(0))},"%i":function(e,t,i,n){var o=/(^([0-5][0-9])$)/i.test(t);if(n)return o;o?e.setMinutes(Number(t)):e.setMinutes(Number(0))},"%s":function(e,t,i,n){var o=/(^([0-5][0-9])$)/i.test(t);if(n)return o;o?e.setSeconds(Number(t)):e.setSeconds(Number(0))},"%u":function(e,t,i,n){var o=/(^([0-9][0-9][0-9])$)/i.test(t);if(n)return o;o?e.setMilliseconds(Number(t)):e.setMilliseconds(Number(0))},"%a":function(e,t,i,n){if(n)return"pm"===t||"am"===t;"pm"===t&&e.setHours(e.getHours()+12)},"%A":function(e,t,i,n){if(n)return"PM"===t||"AM"===t;"PM"===t&&e.setHours(e.getHours()+12)}};function l(e){for(var t=[],i="",n=0;n<e.length;n++)"%"===e[n]?(i.length>0&&(t.push({type:r.separator,value:i}),i=""),t.push({type:r.datePart,value:e[n]+e[n+1]}),n++):i+=e[n];return i.length>0&&t.push({type:r.separator,value:i}),t}function c(e,t,i){if("string"==typeof e){for(var n,o=l(t=t.replace(/(?<=[a-z])%a/i,(function(t){return e=e.replace(/(am|pm)/i," $&")," "+t}))),a=[],c=0,u=null,d="Incorrect date, see docs: https://docs.dhtmlx.com/suite/calendar__api__calendar_dateformat_config.html",h=0;h<o.length;h++)if(o[h].type===r.separator){var f=e.indexOf(o[h].value,c);if(-1===f){if(i)return!1;throw new Error(d)}u&&(a.push({formatter:u,value:e.slice(c,f)}),u=null),c=f+o[h].value.length}else if(o[h].type===r.datePart){if(o[h+1]&&o[h+1].type!==r.separator){if(i)return!1;throw new Error(d)}u=o[h].value}"%A"===u||"%a"===u?a.unshift({formatter:u,value:e.slice(c)}):u&&a.push({formatter:u,value:e.slice(c)}),a.reverse();for(var p=0,v=a;p<v.length;p++){"%A"!==(y=v[p]).formatter&&"%a"!==y.formatter||(n=y.value)}for(var g=new Date(0),_=0,m=a;_<m.length;_++){var y=m[_];if(s[y.formatter]){if(i&&!s[y.formatter](g,y.value,n,i))return!1;s[y.formatter](g,y.value,n)}}return!!i||g}}!function(e){e[e.separator=0]="separator",e[e.datePart=1]="datePart"}(r||(r={})),t.getFormattedDate=function(e,t){return l(e).reduce((function(e,i){return i.type===r.separator?e+i.value:a[i.value]?e+a[i.value](t):e}),"")},t.stringToDate=c;t.DateHelper=function(){function e(){}return e.copy=function(e){return new Date(e)},e.fromYear=function(e){return new Date(e,0,1)},e.fromYearAndMonth=function(e,t){return new Date(e,t,1)},e.weekStart=function(e,t){var i=(e.getDay()+7-t)%7;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-i)},e.monthStart=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},e.yearStart=function(e){return new Date(e.getFullYear(),0,1)},e.dayStart=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},e.addDay=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},e.addMonth=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth()+t)},e.addYear=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear()+t,e.getMonth())},e.withHoursAndMinutes=function(e,t,i,n){return void 0===n||!n&&12===t||n&&12!==t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,i):n&&12===t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,i):new Date(e.getFullYear(),e.getMonth(),e.getDate(),t+12,i)},e.setMonth=function(e,t){e.setMonth(t)},e.setYear=function(e,t){e.setFullYear(t)},e.mergeHoursAndMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())},e.isWeekEnd=function(e){return 0===e.getDay()||6===e.getDay()},e.getTwelweYears=function(e){var t=e.getFullYear(),i=t-t%12;return(0,n.range)(i,i+11)},e.getDayOrdinal=function(t){return(t.valueOf()-e.yearStart(t).valueOf())/864e5},e.getWeekNumber=function(t){var i=4===t.getDay()?t:e.addDay(t,4-t.getDay()),n=e.getDayOrdinal(i);return Math.trunc(n/7)+1},e.isSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},e.toDateObject=function(e,t){return"string"==typeof e?c(e,t):new Date(e)},e.nullTimestampDate=new Date(0),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.focusManager=void 0;var n=i(4),o=function(){function e(){var e=this;this._initHandler=function(t){return e._activeWidgetId=(0,n.locate)(t,"data-dhx-widget-id")},this._removeFocusClass=function(e){var t=document.body.classList;t.contains("utilityfocus")&&t.remove("utilityfocus")},this._addFocusClass=function(e){var t=document.body.classList;"Tab"===e.code?t.contains("utilityfocus")||t.add("utilityfocus"):t.contains("utilityfocus")&&t.remove("utilityfocus")},document.addEventListener("focusin",this._initHandler),document.addEventListener("pointerdown",this._initHandler),document.addEventListener("mousedown",this._removeFocusClass),document.addEventListener("keydown",this._addFocusClass)}return e.prototype.getFocusId=function(){return this._activeWidgetId},e.prototype.setFocusId=function(e){this._activeWidgetId=e},e}();t.focusManager=new o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyManager=void 0;var n=i(20),o=i(4);function r(e){for(var t=e.toLowerCase().match(/\w+/g),i=0,n="",o=0;o<t.length;o++){var r=t[o];"ctrl"===r?i+=4:"shift"===r?i+=2:"alt"===r?i+=1:n=r}return i+n}var a={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},s=function(){function e(e){var t=this;this._keysStorage={},this._initHandler=function(e){var i;if(e.which>=48&&e.which<=57||e.which>=65&&e.which<=90)i=String.fromCharCode(e.which);else{var r=32===e.which?e.code:e.key;i=(0,o.isIE)()&&a[r]||r}var s=t._keysStorage[(e.ctrlKey||e.metaKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+(i&&i.toLowerCase())];if(s)for(var l=0;l<s.length;l++){if(t._beforeCall&&!1===t._beforeCall(e,n.focusManager.getFocusId()))return;s[l].handler(e)}},e&&(this._beforeCall=e),document.addEventListener("keydown",this._initHandler)}return e.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},e.prototype.addHotKey=function(e,t){var i=r(e);this._keysStorage[i]||(this._keysStorage[i]=[]),this._keysStorage[i].push({handler:t})},e.prototype.removeHotKey=function(e,t){var i=this;if(e)if(e&&t){var n=r(e),o=function(e){return e.toString().replace(/\n/g,"").replace(/\s/g,"")};this._keysStorage[n].forEach((function(e,r){o(e.handler)===o(t)&&(delete i._keysStorage[n][r],i._keysStorage[n]=i._keysStorage[n].filter((function(e){return e})))}))}else{var a=r(e);delete this._keysStorage[a]}else this._keysStorage={}},e.prototype.exist=function(e){var t=r(e);return!!this._keysStorage[t]},e.prototype.getKeyStorageLength=function(){return Object.keys(this._keysStorage).length},e}();t.KeyManager=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getValueForNumberColumn=t.getEditorOptions=t.toFormat=t.getMaxColsWidth=t.getTreeCellWidthOffset=t.getCalculatedRowHeight=t.getMaxRowHeight=t.getUnique=t.calculatePositions=t.countColumns=t.measureTextHeight=t.normalizeArray=void 0;var r=i(0),a=i(18),s=i(19);t.normalizeArray=function(e,t){e[t]&&("string"==typeof e[t]?e[t]=[{text:"".concat(e[t])}]:e[t]=e[t].map((function(e){return"string"==typeof e&&(e={text:e}),e})))},t.measureTextHeight=function(e){var t=e.text,i=void 0===t?"":t,n=e.width,o=void 0===n?0:n,s=e.lineHeight,l=void 0===s?20:s,c=e.font,u=void 0===c?"14px Arial":c,d=e.htmlEnable,h=void 0!==d&&d,f=document.createElement("canvas"),p=f.getContext("2d",{alpha:!1});p.font=u;var v=[],g=[];h&&(i=(0,a.removeHTMLTags)(i));var _=Math.ceil(p.measureText(i).width/o);_>1&&(_=(0,r.getTextLines)(p,i,o).length),g.push(_),v.push(i.split("\n").length);var m=Math.max((0,r.getMaxArrayNumber)(v),(0,r.getMaxArrayNumber)(g));return f.remove(),m*l},t.countColumns=function(e,t){var i=0,n=0,o=0,a=!1,s=0,l=!1;return t.forEach((function(e){if(i=Math.max(i,e.header.length),o+=e.$width,e.footer&&(n=Math.max(n,e.footer.length),l||(l=!0)),!a)for(var t=0,r=e.header;t<r.length;t++){if(r[t].colspan)return void(a=!0)}})),t.forEach((function(e){if(l&&(e.footer=e.footer||[]),e.header.length<i)for(var t=0;t<i;t++)e.header[t]=e.header[t]||{text:""};if(e.footer){if(e.footer.length<n)for(t=0;t<n;t++)e.footer[t]=e.footer[t]||{text:""};for(t=0;t<e.footer.length;t++)e.footer[t].id||(e.footer[t].id=(0,r.uid)())}e.header=e.header.map((function(e){return"object"!=typeof e&&(e={text:e}),e.css=e.css||"",e.text||e.css.includes("dhx_cell-empty")||(e.css+=" dhx_cell-empty"),e.id||(e.id=(0,r.uid)()),e})),""===e.header[0].text&&s++})),e.$totalWidth=o,e.$colspans=a,e.$footer=l,s},t.calculatePositions=function(e,t,i,n,o){for(var r,a,s,l=n.columns||[],c=l.length,u=o||[],d=u.length,h=n.leftSplit?n.columns.slice(0,n.leftSplit).filter((function(e){return!e.hidden})).length:0,f=null!==(r=n.topSplit)&&void 0!==r?r:0,p=null!==(a=n.rightSplit)&&void 0!==a?a:0,v=null!==(s=n.bottomSplit)&&void 0!==s?s:0,g=0,_=i.left,m=n.$totalWidth/c,y=0;y<c;y++){var b=l[y];if(!b.hidden){if(!((_-=b.$width)+m/2>0))break;g++}}var w=0,x=i.top,C=n.$totalHeight/d;for(y=0;y<d;y++){if(!(T=u[y]).hidden){if(!((x-=T.$height)+C/2>0))break;w++}}for(var E=0,S=0,I=-1/0,k=1/0,M=0;M<c;M++){var O=l[M];M>=g&&E<e&&!O.hidden&&(E+=O.$width,S++),O.$width>I&&(I=O.$width),O.$width<k&&(k=O.$width)}var A=0,D=0,P=-1/0,F=1/0;for(M=0;M<d;M++){var T=u[M];M>=w&&A<t&&!T.hidden&&(A+=T.$height,D++),T.$height>P&&(P=T.$height),T.$height<F&&(F=T.$height)}F=F<n.rowHeight?F:n.rowHeight;var R=Math.round(I/k),V=Math.round(P/F),H=g-R>=h?g-R:h,L=g+S+R,j=(n.leftSplit||0)-h,N=l.length-p-j,$=L<N?L:N,z=w-V>=f?w-V:f,B=w+D+V,W=u.length-v;return{xStart:H,xEnd:$,yStart:z,yEnd:B<W?B:W}},t.getUnique=function(e,t,i){var n=e.map((function(e){return e[t]}));return i&&n.forEach((function(e,t){"string"==typeof e&&e.includes(", ")&&(e.split(", ").forEach((function(e){return n.push(e)})),delete n[t])})),n.filter((function(e,t,i){return i.indexOf(e)===t&&(0,r.isDefined)(e)})).sort()};t.getMaxRowHeight=function(e,t,i){var n,o;void 0===i&&(i={font:"14px Arial",lineHeight:20});var s=document.createElement("canvas"),l=s.getContext("2d",{alpha:!1});l.font=i.font;for(var c={},u=t.length,d=0;d<u;d++)t[d].template?c[t[d].id]={width:t[d].$width-24||0,htmlEnable:t[d].htmlEnable,template:t[d].template,cols:t[d]}:c[t[d].id]={width:t[d].$width-24||0,htmlEnable:t[d].htmlEnable};for(var h=[],f=[],p=0,v=Object.entries(e);p<v.length;p++){var g=v[p],_=g[0],m=g[1];if(c[_]&&"id"!==_&&"height"!==_&&!_.startsWith("$")&&("string"==typeof m||"number"==typeof m||m instanceof Date||Array.isArray(m))){var y="";if(null===(n=c[_])||void 0===n?void 0:n.template){var b=c[_].template(m,e,c[_].cols);y=c[_].htmlEnable?(0,a.removeHTMLTags)(b):b}else y="string"==typeof m?c[_].htmlEnable?(0,a.removeHTMLTags)(m):m:m.toString();var w=Math.ceil(l.measureText(y).width/c[_].width);w>1&&(w=(0,r.getTextLines)(l,y,null===(o=c[_])||void 0===o?void 0:o.width).length),f.push(w),h.push(y.split("\n").length)}}var x=Math.max((0,r.getMaxArrayNumber)(h),(0,r.getMaxArrayNumber)(f));return s.remove(),x*i.lineHeight+8};t.getCalculatedRowHeight=function(e,t){var i=(t=n({rowHeight:40,padding:12},t)).rowHeight<40?e:e+2*t.padding;return e<t.rowHeight?t.rowHeight:i};t.getTreeCellWidthOffset=function(e){return 20+20*e.$level-(e.$items?20:0)};t.getMaxColsWidth=function(e,t,i,n){if(void 0===i&&(i={font:"normal 14.4px Arial"}),e.length&&t.length){var o=document.createElement("canvas"),r=o.getContext("2d",{alpha:!1});r.font=i.font;for(var l={},c=t.length,u=0;u<c;u++){var d=t[u],h=d.template,f=d.htmlEnable,p=d.format,v=d.id,g=d.type;l[v]=h&&"data"===n?{width:20,htmlEnable:!!f,template:h,cols:d,type:g}:{width:20,htmlEnable:!!f,format:"date"===g?p||"%M %d %Y":p,type:g}}var _=e.length;for(u=0;u<_;u++)for(var m=0,y=Object.entries(e[u]);m<y.length;m++){var b=y[m],w=b[0],x=b[1],C=l[w];if(C&&"id"!==w&&"height"!==w&&!w.startsWith("$")&&("string"==typeof x||"number"==typeof x||x instanceof Date||Array.isArray(x))){h=C.template;var E=C.cols,S=(p=C.format,g=C.type,f=C.htmlEnable,C.width),I=void 0;if("function"==typeof h){var k=h(x,e[u],E);I=f?(0,a.removeHTMLTags)(k):k}else I=f?(0,a.removeHTMLTags)(x):x.toString();var M=p&&"date"===g&&new Date(I);(null==M?void 0:M.valueOf())&&(I=(0,s.getFormattedDate)(p,M));var O=r.measureText(I).width;O>S&&(l[w].width=O)}}o.remove();for(var A={},D=0,P=Object.entries(l);D<P.length;D++){var F=P[D];w=F[0],x=F[1];A[w]=Math.ceil(x.width)}return A}},t.toFormat=function(e,t,i){if("boolean"==typeof e)return e;if(!e&&"number"!=typeof e)return e;var n=function(t){var n,o,r,a=i.replace(/#+/g,"#").split("#").filter((function(e){return e})),s=i.match(/0/g)&&i.match(/0/g).length;e=("percent"===t?100*Number(e):e).toString();var l=Math.trunc(Number(e));if(s){var c=e.split(".")[1]||"0";r=a.find((function(e){return e.includes("0")})).replace(/0+/g,""),o=Number("0."+c).toFixed(s),Number(o)>=1&&l++,o=o.toString().split(".")[1].padEnd(s,"0")}var u="".concat(e<0&&0===Math.abs(l)?"-":"").concat(l),d=a.find((function(e){return!e.includes("0")}));return n=d?u.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1".concat(d)):u,n+=(r||"")+(o||""),"percent"===t?"".concat(n,"%"):n};switch(t){case"number":return i&&!isNaN(Number(e))?n(t):e;case"percent":return i||(i="#"),isNaN(Number(e))?e:n(t);case"date":return i||(i="%M %d %Y"),"string"==typeof e?e=(0,s.getFormattedDate)(i,(0,s.stringToDate)(e,i)):"object"==typeof e&&(e=(0,s.getFormattedDate)(i,e)),e;default:return e}},t.getEditorOptions=function(e,t){return o(o([],("function"==typeof e.options?e.options(e,t):e.options)||[],!0),e.$customOptions||[],!0)},t.getValueForNumberColumn=function(e,t){return!(0,r.isDefined)(t)||""===t||"number"==typeof t||["select","combobox","multiselect"].includes(e.editorType)?t:"string"==typeof t?parseFloat(t):NaN}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(162),t),o(i(163),t),o(i(40),t)},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.proRender=t.render=t.applyAutoWidth=t.getElementSizes=t.getRenderConfig=t.getCurrFixedCols=t.calcScrollBarWidth=t.BORDERS=void 0;var o=i(1),r=i(4),a=i(22),s=i(18),l=i(9),c=i(30),u=i(84),d=i(85),h=i(0);function f(e,i,n){var o,a;void 0===i&&(i=!1);var s=e.$totalHeight+e.$headerHeight+e.$footerHeight+t.BORDERS>(null!==(o=null==n?void 0:n.height)&&void 0!==o?o:e.$height),l=!s||i?0:(0,r.getScrollbarWidth)(),c=e.$totalWidth+t.BORDERS+l>(null!==(a=null==n?void 0:n.width)&&void 0!==a?a:e.$width);return{x:!c||i?0:(0,r.getScrollbarWidth)(),y:l,xState:c,yState:s}}function p(e,t){return e[t]?(t===l.Split.left?e.columns.slice(0,e.leftSplit):e.columns.slice(-e.rightSplit)).filter((function(e){return!e.hidden})):[]}function v(e,t,i,n){var o=void 0===i?[0,0]:i,r=o[0],a=o[1],s=e[0],l=e[1],c=t[0],u=t[1];return c<=s&&s<=u||c<=l&&l<=u||s<=c&&u<=l||s<r||a&&l>=n-a}function g(e,t,i){var o=e.config,r=o.spans,s=void 0===r?[]:r,c=o.columns,u=o.leftSplit,d=void 0===u?0:u,h=o.topSplit,f=void 0===h?0:h,g=o.rightSplit,_=void 0===g?0:g,m=o.bottomSplit,y=void 0===m?0:m,b=c.filter((function(e){return!e.hidden})),w=(0,a.calculatePositions)(i.width,i.height,e._scroll,o,t),x=b.slice(w.xStart,w.xEnd),C=t.slice(w.yStart,w.yEnd),E=s.filter((function(e){var i=e.$rowsVisibility,n=void 0===i?[]:i,o=e.$colsVisibility,r=void 0===o?[]:o,a=v(n,[w.yStart,w.yEnd],[f,y],t.length),s=v(r,[w.xStart,w.xEnd],[d,_],c.length);return a&&s})),S={left:p(o,l.Split.left),right:p(o,l.Split.right)},I={top:t.slice(0,o.topSplit||0),bottom:o.bottomSplit?t.slice(-o.bottomSplit):[]};return n(n({},o),{data:t,columns:o.columns,scroll:e._scroll,$positions:w,headerHeight:o.$headerHeight,footerHeight:o.$footerHeight,firstColId:b[0]&&b[0].id,events:e.events,_events:e._events,filteredColumns:b,currentColumns:x,currentRows:C,currentSpans:E,fixedColumns:S,fixedRows:I,sortBy:e._sortBy,sortDir:e._sortDir,content:e.content,gridId:e._uid,$renderFrom:"render"})}function _(e){if(e&&(e.tagName||(e=e._parent._container),e)){var t=e.currentStyle||window.getComputedStyle(e),i=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)||0,n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)||0;return{width:e.clientWidth-i,height:e.clientHeight-n}}}function m(e,t){var i,r=(0,c.getCells)(e),a=e.filteredColumns,l=e.$resizing,u=e.$totalHeight,d=e.$totalWidth,f=e.leftSplit,p=e.data,v=e.$positions,g=(0,c.getSpans)(e);if(l){var _=(0,h.findIndex)(a,(function(e){return e.id===l})),m=(0,s.getTotalWidth)(a.slice(0,_))+a[_].$width;i=(0,o.el)(".dhx_grid-resize-line",{style:{top:0,left:m,height:u}})}var y=e.selection?e.selection.toHTML():null;y="string"==typeof y?(0,o.el)("div.dhx_selection",{".innerHTML":y}):y;var b,w=v;return(0,o.el)(".dhx_data-wrap",{style:{height:u,width:d,"padding-left":t.x,"padding-top":t.y},role:"presentation"},[(0,o.el)(".dhx_grid_data".concat(f?".dhx_grid_fixed_left":""),n(n({_flags:o.KEYED_LIST},(0,c.getHandlers)(w.yStart,w.xStart,e)),(b=p.length,{role:"rowgroup","aria-rowcount":b})),r),(0,o.el)(".dhx_span-spans",n({role:"presentation"},(0,c.getHandlers)(w.yStart,w.xStart,e)),g),(0,o.el)(".dhx_grid_selection",{_ref:"selection","aria-hidden":"true"},[y,i])])}function y(e,i,n){var o=n.height-t.BORDERS;return o=i?o:o-e.headerHeight,e.$footer?i?o:o-e.footerHeight:o}function b(e,i,n,o,a){void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===a&&(a=!1);var l=!a&&e.$totalHeight>=i.height-e.$headerHeight?(0,r.getScrollbarWidth)():0,c=i.width-t.BORDERS-l,u=e.columns.filter((function(e){return!e.hidden})),d=u.filter((function(t){return!t.width&&!t.$fixed&&(0,s.isAutoWidth)(e,t)})),h=(0,s.getTotalWidth)(u.filter((function(t){return t.width||t.$fixed||!(0,s.isAutoWidth)(e,t)}))),f=d.reduce((function(e,t){return e+(t.gravity||1)}),0);if(c<e.$totalWidth){var p=d.reduce((function(e,t){return e+(t.maxWidth||t.$width)}),0);d.length&&d.forEach((function(e){var t=0,i=(t=n?Math.abs(c-p)*((e.gravity||1)/f):Math.abs(c-h)*((e.gravity||1)/f))<e.minWidth||e.minWidth<e.$width,o=t>e.maxWidth;i||o?i?(h+=e.$width-t,e.$fixed=!0):o&&(e.$width=e.maxWidth,e.$fixed=!0):e.$width=t,e.$width<20&&(e.$width=20)}))}else d.forEach((function(e){var t=Math.abs(c-h)*((e.gravity||1)/f),i=t<e.minWidth||e.minWidth<e.$width,r=t>e.maxWidth;i||r?i?(h+=e.$width-t,o&&(e.$fixed=!0)):r&&(e.$width=e.maxWidth,o&&(e.$fixed=!0)):e.$width=t,e.$width<20&&(e.$width=20),!n&&e.$fixed&&delete e.$fixed}));n&&b(e,i,!1,o,a)}t.BORDERS=2,t.calcScrollBarWidth=f,t.getCurrFixedCols=p,t.getRenderConfig=g,t.getElementSizes=_,t.applyAutoWidth=b,t.render=function(e,i,r,a,h){if(i._container||(i.config.$width=1,i.config.$height=1),e&&e.node&&e.node.parent&&e.node.parent.el){var p=_(e.node.parent.el);i.config.$width=p.width,i.config.$height=p.height}var v=i.config;if(!v)return(0,o.el)("div");if(!v.columns.length)return(0,o.el)(".dhx_grid",{"data-dhx-widget-id":h,"data-dhx-root-id":v.rootParent,role:"empty-grid"});var w=i.data.getRawData(0,-1,null,2);v.columns.reduce((function(e,t){return t.hidden?e:t.hidden}),!0)?v.$totalHeight=0:v.$totalHeight=w.reduce((function(e,t){return e+(t.$height||0)}),0);var x=_(i._container),C={width:(v.$width?v.$width:v.width&&"number"==typeof v.width?v.width:null==x?void 0:x.width)||0,height:(v.$height?v.$height:v.height&&"number"==typeof v.height?v.height:null==x?void 0:x.height)||0};(0,s.isAutoWidth)(v)&&(b(v,C),v.$totalWidth=(0,s.getTotalWidth)(v.columns.filter((function(e){return!e.hidden})))),v.$width=C.width,v.$height=C.height;var E=g(i,w,C);E.selection=a,E.datacollection=i.data;var S=(0,c.getShifts)(E);E.$scrollBarWidth=f(E);var I,k,M,O,A=(0,s.isCssSupport)("position","sticky"),D=y(E,A,C),P={wrapper:C,sticky:A,shifts:S,gridBodyHeight:D},F=(0,d.getFixedRows)(E,n(n({},P),{name:"header",position:"top"})),T=E.$footer?(0,d.getFixedRows)(E,n(n({},P),{name:"footer",position:"bottom"})):null,R=E.$totalWidth+t.BORDERS<C.width?"dhx_grid-less-width":"",V=E.$totalHeight+t.BORDERS<C.height?"dhx_grid-less-height":"",H=E.fixedColumns.right.length?"dhx_grid__contains_cols_right--fixed":"",L=v.bottomSplit?"dhx_grid__contains_rows_bottom--fixed":"";if(!e.node){var j=i.getScrollState(),N=j.x,$=j.y;(0,o.awaitRedraw)().then((function(){i.scroll(N,$)}))}return(0,o.el)(".dhx_grid.dhx_widget",n({class:(E.css||"")+(A?"":" dhx_grid_border")+(v.multiselection?" dhx_no-select--pointer":""),"data-dhx-widget-id":h,"data-dhx-root-id":v.rootParent},(I=E.data,k=v.columns,M=E.editable,O=E.multiselection,{role:"grid","aria-rowcount":I.length,"aria-colcount":k.filter((function(e){return!e.hidden})).length,"aria-readonly":M?"false":"true","aria-multiselectable":O?"true":"false"})),[(0,o.resizer)((function(e){return(0,s.isAutoWidth)(i.config)&&e&&(v.$totalWidth=0,b(v,C,!0,!0)),i.paint()})),(0,o.el)(".dhx_grid-content",{style:n({},C),onclick:r.onclick,onmouseover:r.onmouseover,class:"".concat(R," ").concat(V," ").concat(H," ").concat(L).trim(),role:"presentation"},[A?null:F,(0,o.el)(".dhx_grid-body",{style:{height:D,width:C.width-t.BORDERS},onscroll:r.onscroll,_ref:"grid_body",role:"presentation"},[(0,o.el)("div",{},[A?F:null,m(E,S),A?T:null])]),(0,u.getFixedColsHeader)(E,P,l.Split.left),(0,u.getFixedColsHeader)(E,P,l.Split.right),(0,u.getFixedCols)(E,P,l.Split.left),(0,u.getFixedCols)(E,P,l.Split.right),(0,d.getFixedDataRows)(E,P,l.Split.top),(0,d.getFixedDataRows)(E,P,l.Split.bottom),A?null:T])])},t.proRender=function(e,i,r,a,h){var p,v;i._container||(i.config.$width=1,i.config.$height=1),e&&e.node&&e.node.parent&&e.node.parent.el&&(v=_(e.node.parent.el),i.config.$width=v.width,i.config.$height=v.height);var w=i.config;if(!w)return(0,o.el)("div");if(!w.columns.length)return(0,o.el)(".dhx_grid",{"data-dhx-widget-id":h,"data-dhx-root-id":w.rootParent,role:"empty-grid"});var x,C,E,S=i.data.getRawData(0,-1,null,2);w.columns.reduce((function(e,t){return t.hidden?e:t.hidden}),!0)?w.$totalHeight=0:w.$totalHeight=S.reduce((function(e,t){return e+(t.$height||0)}),0);var I=_(i._container);"auto"===i.config.height&&(E=function(e,i,n){var o,r,a=e._container,s=i.$headerHeight+(i.$footerHeight&&i.$footerHeight+1)+i.$totalHeight+t.BORDERS;if(a){var l=window.getComputedStyle(a),c=l.minHeight,u=l.maxHeight;return s<=parseFloat(c)?parseFloat(c):s>=parseFloat(u)?parseFloat(u):s+f(i,!!(null===(o=e.scrollView)||void 0===o?void 0:o.config.enable),n).x}return s+(n?f(i,!!(null===(r=e.scrollView)||void 0===r?void 0:r.config.enable),n).x:0)}(i,w,v||I)),x=w.$width?w.$width:w.width&&"number"==typeof w.width?w.width:null==I?void 0:I.width,C=w.$height?w.$height:w.height&&"number"==typeof w.height?w.height:null==I?void 0:I.height;var k={width:x||0,height:("auto"===i.config.height?E:C)||0};(0,s.isAutoWidth)(w)&&(b(w,k,!0,!1,i.scrollView&&i.scrollView.config.enable),w.$totalWidth=(0,s.getTotalWidth)(w.columns.filter((function(e){return!e.hidden})))),w.$width=k.width,w.$height=k.height;var M=g(i,S,k);M.selection=a,M.datacollection=i.data;var O=(0,c.getShifts)(M);M.$scrollBarWidth=f(M,!!(null===(p=i.scrollView)||void 0===p?void 0:p.config.enable));var A=(0,s.isCssSupport)("position","sticky"),D=y(M,A,k),P={wrapper:k,sticky:A,shifts:O,gridBodyHeight:D},F=(0,d.getFixedRows)(M,n(n({},P),{name:"header",position:"top"})),T=M.$footer?(0,d.getFixedRows)(M,n(n({},P),{name:"footer",position:"bottom"})):null,R=M.$totalWidth+t.BORDERS<k.width?"dhx_grid-less-width":"",V=M.$totalHeight+t.BORDERS<k.height?"dhx_grid-less-height":"",H=M.fixedColumns.right.length?"dhx_grid__contains_cols_right--fixed":"",L=w.bottomSplit?"dhx_grid__contains_rows_bottom--fixed":"";if(!e.node){var j=i.getScrollState(),N=j.x,$=j.y;(0,o.awaitRedraw)().then((function(){i.scroll(N,$)}))}var z=(0,o.el)("div",{},[A?F:null,m(M,O),A?T:null]);return(0,o.el)(".dhx_grid.dhx_widget",{class:(M.css||"")+(A?"":" dhx_grid_border")+(w.multiselection?" dhx_no-select--pointer":""),style:{height:null!=E?E:null},"data-dhx-widget-id":h,"data-dhx-root-id":w.rootParent,role:"grid","aria-rowcount":M.data.length,"aria-colcount":w.columns.filter((function(e){return!e.hidden})).length},[(0,o.resizer)((function(e){return(0,s.isAutoWidth)(i.config)&&e&&(w.$totalWidth=0,b(w,k,!0,!0)),i.paint()})),(0,o.el)(".dhx_grid-content",{style:n({},k),onclick:r.onclick,onmouseover:r.onmouseover,class:"".concat(R," ").concat(V," ").concat(H," ").concat(L).trim(),role:"presentation"},[A?null:F,(0,o.el)(".dhx_grid-body",{style:{height:D,width:k.width-t.BORDERS},onscroll:r.onscroll,_ref:"grid_body",role:"presentation"},[i.scrollView&&i.scrollView.config.enable?i.scrollView.render([z]):z]),(0,u.getFixedColsHeader)(M,P,l.Split.left),(0,u.getFixedColsHeader)(M,P,l.Split.right),(0,u.getFixedCols)(M,P,l.Split.left),(0,u.getFixedCols)(M,P,l.Split.right),(0,d.getFixedDataRows)(M,P,l.Split.top),(0,d.getFixedDataRows)(M,P,l.Split.bottom),A?null:T])])}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)};var o=function(){return o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}(function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(t,e)}(Array);var r,a=1,s=2,l=3,c=4,u=5,d=6,h=7,f=8,p=9,v=10,g=11,_=12,m=13,y=3,b={1:"#ERROR",2:"#ERROR",3:"#REF!",4:"#SPILL!"};function w(e,t,i){return i+64*t+64*e*4096}function x(e){return[e<2147483648?e>>18:e/262144&16777215,e>>6&4095,63&e]}function C(e){return e<2147483648?e>>18:e/262144&16777215}function E(e){return e>>6&4095}function S(e){return 63&e}function I(e,t,i){for(var n=x(e),o=n[0],r=n[1],a=x(t),s=a[0]-o,l=a[1]-r,c=0;c<=s;c++)for(var u=0;u<=l;u++)i(e+64*u+4096*c*64)}function k(e,t,i,n){for(var o=0,r=0;r<i;r++)for(var a=0;a<t;a++)n(e+64*a+4096*r*64,o),o++}function M(e,t){for(var i,n,o,r,d,v,_,y,b=e.code,w=e.source,C="",E=b.length,I=0;I<E;I+=3){switch(b[I]){case u:var k=void 0;b[I+6]===p&&(k=t.pageName(S(b[I+7]))),C+=A(k||e.source.substr(b[I+1],b[I+2]))+"!";break;case h:r=(i=x(b[I+4]))[0],v=i[1],y=i[2],t.z!==y&&b[I-3]!==u&&(C+=A(t.pageName(y))+"!"),C+=O(r,v,b[I+5]);break;case c:C+=w.substr(b[I+1],b[I+2]).toUpperCase();break;case f:r=(n=x(b[I+4]))[0],v=n[1],y=n[2],d=(o=x(b[I+7]))[0],_=o[1],t.z!==y&&b[I-3]!==u&&(C+=A(t.pageName(y))+"!"),C+=O(r,v,b[I+5]),C+=":",C+=O(d,_,b[I+8]);break;case p:break;case s:C+="{{"+w.substr(b[I+1],b[I+2])+"}}";break;case l:C+="#REF!";break;case a:C+='"'+w.substr(b[I+1],b[I+2])+'"';break;case m:C+="{";var M=b[I+1],D=b[I+2];I+=3;for(var P=0;P<D;P++){for(var F=0;F<M;F++){F>0&&(C+=",");var T=b[I];T===a?C+='"'+w.substr(b[I+1],b[I+2])+'"':T===g&&(C+=w.substr(b[I+1],b[I+2])),I+=3}P<D-1&&(C+=";")}I-=3,C+="}";break;default:C+=w.substr(b[I+1],b[I+2])}}return C}function O(e,t,i){var n="";2&i&&(n+="$");var o="";for(t+=1;t>0;){var r=t%26;0===r&&(r=26),o=String.fromCharCode(64+r)+o,t=(t-r)/26}return n+=o,1&i&&(n+="$"),n+=e+1}function A(e){return-1!==e.indexOf(" ")?"'"+e+"'":e}function D(e){return e<=122}function P(e){return e<=122?e>=65||35===e||36===e||46===e:e>191}function F(e){return e>=97}function T(e){var t=e.charCodeAt(0);return t>=48&&t<=57}function R(e,t){var i;do{t++,i=e.charCodeAt(t)}while(i>=48&&i<=57);return t}function V(e,t){var i;do{i=e[++t]}while('"'!==i);return t}function H(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function L(e,t){var i;do{i=e[++t]}while(H(i));return t}function j(e,t){if("<"===e[t]){var i=e[t+1];">"!==i&&"="!==i||t++}else">"===e[t]&&"="===e[t+1]&&t++;return t+1}function N(e,t,i){for(var n=e.length,o=!0,a=t,p=!1,v=!1,g=!1,_=0;a<n;a++){var m=e[a];if("'"!==m){if(!p){g=!0;var y=m.charCodeAt(0);if(P(y)){D(y)?F(y)&&(v=!0):o=!1,1==_&&_++;continue}if(T(m)){0==_&&_++;continue}break}}else{if(g)break;if(p){a++;break}p=!0}}var b=e[a],w=t,x=a-t;return p&&((x-=1+("'"===e[a-1]?1:0))<0&&(x=0),w++,i=u),0===i&&(":"===b&&o?1!==_?i=l:(i=f,v&&(r=!0)):"!"===b?i="#"===e[w]?l:u:"("===b?(function(e,t,i){var n=e.substr(t,i);return n.toUpperCase()!==n}(e,w,x)&&(r=!0),i=c):"}"===b&&"}"===e[a-1]?i=s:1===_&&o?(i=h,v&&(r=!0)):i=d),[w,x,a,i]}function $(e,t,i){for(var n=0,o=0,r=1,a=1,s=0,c=!1,u=t.length-1;u>=0;u--){var d=t[u].charCodeAt(0);36!==d?d<58?(o+=(d-48)*r,r*=10):(c||(r=1,n=o,o=0,c=!0,a+=1),o+=(d-(d>96?96:64))*r,r*=26):s+=a}o>4095?e.push(l,0,0):e.push(p,w(n-1,o-1,i),s)}function z(e,t){var i,n,o=[];r=!1;for(var c,p=-1,y=-1,b=0,w=0;w<e.length;w++){var x=e[w];if(y>-1)if("}"==x){var E=o[y+2]+=1,S=o[y+1]=b/E;S-Math.round(S)!=0&&o.push(l,0,0),y=-1}else if('"'===x){var I=V(e,w);w++,o.push(a,w,I-w),b++,w=I}else if("-"===x){var k=R(e,w+1);o.push(g,w,k-w),b++,w=k-1}else if(T(x)){var O=R(e,w);o.push(g,w,O-w),b++,w=O-1}else" "===x||"\t"===x||","===x||(";"===x?o[y+2]+=1:o.push(l,0,0));else if('"'!=x){if(!(p>-1))if("{"!=x)if("'"==x||((c=x.charCodeAt(0))<=122?c>=65||35===c||36===c:c>191)){var A=void 0,D=N(e,w,0),P=(Q=D[0],ee=D[1],D[2]),F=D[3],z=o.length;if(F!==h&&F!==f||o[o.length-3]!==u)A=t.z,o.push(F,Q,ee);else{var B="'"===e[Q-2]?1:0,W=o[z-2],G=o[z-1];void 0===(A=t.page(e.substr(W,G)))&&(o.push(l,0,0),A=0),o.push(F,Q-G-2*B-1,ee+G+2*B+1)}if(w=P-1,F===d)t.name(o,e,t);else if(F===f){var U=o.length;if($(o,e.substr(Q,ee),A),Q=(i=N(e,w+2,0))[0],ee=i[1],P=i[2],(F=i[3])===u&&(Q=(n=N(e,P+1,0))[0],ee=n[1],P=n[2],F=n[3]),F!==h){o[U-3]=h;continue}$(o,e.substr(Q,ee),A);var q=o[U+1],X=o[U+4];(q>X||C(q)>C(X))&&(o[U+1]=X,o[U+4]=q),o[U-1]+=ee+1,w=P-1}else F===h?$(o,e.substr(Q,ee),A):F!==l&&F!==u||w++}else if(H(x)){var Y=L(e,w);o.push(_,w,Y-w),w=Y-1}else if(T(x)){var K=R(e,w);o.push(g,w,K-w),w=K-1}else{var J=j(e,w);o.push(v,w,J-w),w=J-1}else{if("{"==e[w+1]){var Z=N(e,w+2,s),Q=Z[0],ee=Z[1],te=Z[2];o.push(s,Q,ee),w=te+2-1;continue}y=o.length,b=0,o.push(m,0,0)}}else p>-1?(o.push(a,p+1,w-p-1),p=-1):p=w}var ie={code:o,source:e,exec:null,broken:0,triggers:null};return r&&(ie.source=M(ie,t)),ie}var B="            ";function W(e){return B.substr(0,10-e.length)}var G=[">","<","=","+"];function U(e,t){var i=function(e,t){for(var i=e.code,n=e.source,o="",r=0,b=[],w=i.length,x=0;x<w;x+=3){switch(i[x]){case c:o+='ctx.m["'+n.substr(i[x+1],i[x+2]).toUpperCase()+'"]';break;case a:o+='"'+n.substr(i[x+1],i[x+2])+'"';break;case s:o+='ctx.p("'+n.substr(i[x+1],i[x+2])+'")';break;case d:case h:var C=void 0,E=void 0;if(i[x-3]===v?C=x-3:i[x-3]===_&&i[x-6]===v&&(C=x-6),i[x+6]===v?E=x+6:i[x+6]===_&&i[x+9]===v&&(E=x+9),C||E){var S=C?n[i[C+1]]:null,I=E?n[i[E+1]]:null;if("&"==S||"&"==I){o+="(ctx.v("+i[x+4]+') === null ? "" : ctx.v('+i[x+4]+"))";break}if(-1!=G.indexOf(S)||-1!=G.indexOf(I)){o+="(ctx.v("+i[x+4]+") === null ? 0 : ctx.v("+i[x+4]+"))";break}}o+="ctx.v("+i[x+4]+")";break;case f:o+="ctx.r("+i[x+4]+", "+i[x+7]+")";break;case v:if(1===i[x+2])"&"===(k=n[i[x+1]])?o+='+""+':t&&"+"==k?o+="*1+1*":"="===k?o+="==":";"===k?o+=",":"{"===k?o+="[":"}"===k?o+="]":"%"===k?i[x+3]&&i[x+3]!==v?o+=t?"/0+":k:o+=("/"==b[r]?"*":"/")+"100":("("==k?(r++,b.push("+")):")"==k&&(r--,b.pop()),o+=k),"+"!=k&&"-"!=k&&"*"!=k&&"/"!=k&&"&"!=k||(b[r]=k);else if(2===i[x+2]){var k;o+="<>"===(k=n.substr(i[x+1],i[x+2]))?"!=":k}else o+=n.substr(i[x+1],i[x+2]);break;case g:o+=n.substr(i[x+1],i[x+2]);break;case l:return"";case p:case u:case _:break;case m:o+="ctx.a([";for(var M=i[x+1],O=i[x+2],A=(x+=3)+M*O*3,D=!1;x<A;x+=3){D&&(o+=",");var P=i[x];if(P===g)o+=n.substr(i[x+1],i[x+2]);else if(P===a)o+='"'+n.substr(i[x+1],i[x+2])+'"';else if(P===l)return e.broken=y,"";D=!0}x-=3,o+="],"+M+", "+O+")"}}return o}(e,t);if(!i)return e.broken=y,void(e.exec=null);try{e.exec=new Function("ctx","return "+i)}catch(t){e.broken=1,e.exec=null}}var q={null:"#NULL!",div0:"#DIV/0!",value:"#VALUE!",ref:"#REF!",name:"#NAME?",num:"#NUM!",na:"#N/A",data:"#GETTING_DATA"};function X(e){var t=new Date(e.getFullYear(),0,0),i=e.valueOf()-t.valueOf()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}function Y(e){var t=new Date(Math.round(86400*(e-25569)*1e3));return new Date(t.getTime()+6e4*t.getTimezoneOffset())}function K(e){return 25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5}function J(e){return!(!e&&0!==e||(e*=1,isNaN(e)))&&e}function Z(e){if(1===e.length){var t=e[0];return"object"==typeof t?t:[t]}for(var i=[],n=0;n<e.length;n++)i=i.concat(e[n]);return i}function Q(e){return!e&&0!==e}function ee(e){return"string"==typeof e?"TRUE"===e:!!e}function te(e){var t="string"==typeof e?new Date(e):Y(e);if(t.getTime())return t;throw e+" is invalid date"}function ie(e){var t=J(e);if("number"!=typeof t)throw e+" is not a number";return t}function ne(e,t,i,n,o){var r=J(e);r<0&&8==o&&(t=null);var a,s=t?J(t):null;if("number"!=typeof r||"boolean"==typeof s)throw q.value;if(r<i&&(r=i),r>n&&(r=n),s<-1)throw q.num;s&&(s=Math.floor(+s));var l=e<0&&16===o?"FF":"";if(a=n<2147483648?(r>>>0&n-i).toString(o):(r>>>0).toString(o),s&&a.length>s)throw q.num;return(l+a).padStart(s,"0").toUpperCase()}function oe(e){return e>0?Math.floor(e):Math.ceil(e)}function re(e){return e<0?Math.floor(e):Math.ceil(e)}function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=Z(e),o=0;o<n.length;o++){var r=J(n[o]);"number"==typeof r&&(i+=r)}return i}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=0,o=Z(e),r=0;r<o.length;r++){var a=J(o[r]);"number"==typeof a&&(i+=a,n++)}return n?i/n:0}function le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=Z(e),n=0,o=0,r=0;r<i.length;r++){var a=i[r],s=J(i[r]);"number"==typeof s?(n+=s,o++):(!0===a&&n++,(a||!1===a)&&o++)}return o?n/o:0}function ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=Z(e),o=0;o<n.length;o++){"number"==typeof J(n[o])&&i++}return i}function ue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=Z(e),o=0;o<n.length;o++)n[o]&&1*n[o]!=0&&i++;return i}function de(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=-1/0,n=Z(e),o=0;o<n.length;o++){var r=J(n[o]);"number"==typeof r&&r>i&&(i=r)}return i===-1/0?0:i}function he(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=1/0,n=Z(e),o=0;o<n.length;o++){var r=J(n[o]);"number"==typeof r&&r<i&&(i=r)}return i===1/0?0:i}function fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=!1,n=1,o=Z(e),r=0;r<o.length;r++){var a=J(o[r]);"number"==typeof a&&(i=!0,n*=a)}return i?n:null}function pe(e,t,i){for(var n=Z(e),o=t?0:-1,r=i?le.apply(void 0,e):se.apply(void 0,e),a=0,s=0;s<n.length;s++){var l=n[s],c=J(n[s]);if("number"!=typeof c){if(!i||"boolean"!=typeof l&&!l)continue;c=!0===l?1:0}o++,a+=Math.pow(c-r,2)}return o?a/o:0}function ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pe(e,!1,!1)}function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pe(e,!1,!0)}function _e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pe(e,!0,!1)}function me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pe(e,!0,!0)}function ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(ve.apply(void 0,e))}function be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(_e.apply(void 0,e))}function we(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return Math.pow(i,n)}var xe={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};var Ce=[];function Ee(e){var t=J(e);if("number"==typeof t&&t>-1){var i=Math.floor(t);return 0===i||1===i?1:(Ce[i]>0||(Ce[i]=Ee(i-1)*i),Ce[i])}}function Se(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return Ee(i)/(Ee(n)*Ee(i-n))}var Ie=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function ke(e,t,i){void 0===i&&(i="i");var n=J(e),o=J(t);if("number"!=typeof n&&"number"!=typeof o)throw q.num;var r="",a="";return e&&(r=e.toString()),t&&1!==t?a=t+i:1===t&&(a=i),t>0?(r?r+"+":"")+a:r+a}function Me(e,t){return void 0===t&&(t=null),ne(e,t,-512,511,2)}function Oe(e,t){return void 0===t&&(t=null),ne(e,t,-274877906944,274877906943,16)}function Ae(e,t){return void 0===t&&(t=null),ne(e,t,-536870912,536870911,8)}var De=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17];function Pe(e){for(var t,i=e<0,n=0,o=0,r=2/(2+(e=Math.abs(e))),a=4*r-2,s=De.length-1;s>0;s--)t=a*n-o+De[s],o=n,n=t;var l=r*Math.exp(-e*e+.5*(De[0]+a*n)-o);return i?l-1:1-l}function Fe(e,t){var i=J(e),n=J(t);if("number"==typeof i)return"number"==typeof n?Pe(n)-Pe(i):Pe(i);throw q.value}var Te=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];var Re=Math.pow(2,39);function Ve(e){if("string"!=typeof e)throw q.value;if(["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(e)>=0)return 0;var t=e.indexOf("+"),i=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===i&&(i=e.indexOf("-",1));var n=e.substring(e.length-1,e.length),o="i"===n||"j"===n;if(t>=0||i>=0){if(!o)throw q.num;if(t>=0){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw q.num;return Number(e.substring(0,t))}if(isNaN(+e.substring(0,i))||isNaN(+e.substring(i+1,e.length-1)))throw q.num;return Number(e.substring(0,i))}if(o){if(isNaN(+e.substring(0,e.length-1)))throw q.num;return 0}if(isNaN(+e))throw q.num;return+e}function He(e){if("string"!=typeof e)throw q.value;if(["i","j"].indexOf(e)>=0)return 1;var t=(e=e.replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),i=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===i&&(i=e.indexOf("-",1));var n=e.substring(e.length-1,e.length),o="i"===n||"j"===n;if(t>=0||i>=0){if(!o)throw q.num;if(t>=0){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw q.num;return Number(e.substring(t+1,e.length-1))}if(isNaN(+e.substring(0,i))||isNaN(+e.substring(i+1,e.length-1)))throw q.num;return-Number(e.substring(i+1,e.length-1))}if(o){var r=+e.substring(0,e.length-1);if(isNaN(r))throw q.num;return r}if(isNaN(+e))throw q.num;return 0}function Le(e){var t=+Ve(e),i=+He(e);return ke(Math.cos(t)*Math.cosh(i),-Math.sin(t)*Math.sinh(i))}function je(e){var t=+Ve(e),i=+He(e);return ke(Math.cos(i)*(Math.exp(t)+Math.exp(-t))/2,Math.sin(i)*(Math.exp(t)-Math.exp(-t))/2)}function Ne(e,t){var i=+Ve(e),n=+He(e),o=+Ve(t),r=+He(t),a=Math.pow(o,2)+Math.pow(r,2);return ke((i*o+n*r)/a,(n*o-i*r)/a)}function $e(e){var t=+Ve(e),i=+He(e);return ke(Math.sin(t)*Math.cosh(i),Math.cos(t)*Math.sinh(i))}function ze(e){var t=+Ve(e),i=+He(e);return ke(Math.cos(i)*(Math.exp(t)-Math.exp(-t))/2,Math.sin(i)*(Math.exp(t)+Math.exp(-t))/2)}var Be=Math.pow(2,29);function We(e,t,i){var n=J(t);if("number"!=typeof n||t<0||t>1||i&&(0===t||1===t))throw q.value;var o=Z(e).sort((function(e,t){return e-t}));i&&(o=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n}([0],o));var r=(o.length+(i?0:-1))*n,a=Math.floor(r);if(void 0===o[a+1])return o[a];var s=o[a+1]-o[a];return o[a]+s*(r-a)}function Ge(e,t,i){var n=J(t);if("number"!=typeof n)throw q.value;switch(n){case 0:if(i)throw q.value;return he.apply(void 0,e);case 1:return We(e,.25,i);case 2:return We(e,.5,i);case 3:return We(e,.75,i);case 4:if(i)throw q.value;return de.apply(void 0,e);default:throw q.num}}function Ue(e,t,i,n){var o=ie(e),r=ie(t),a=ie(i);if(1==t)return 1/a;var s=Math.exp(-Math.pow(o/a,r));return n?1-s:r/Math.pow(a,r)*Math.pow(o,r-1)*s}function qe(e,t,i,n){void 0===n&&(n=!1);var o=ie(e),r=ie(t),a=ie(i),s=function(e,t,i){return Se(t,e)*Math.pow(i,e)*Math.pow(1-i,t-e)};if(!n)return s(o,r,a);for(var l=0,c=0;c<o+1;c++)l+=s(c,r,a);return l}function Xe(e,t,i){var n=e.filter((function(e){return"number"==typeof e})),o=t.filter((function(e){return"number"==typeof e}));if(n.length!==o.length)throw q.na;var r=n.length;if(0===r)throw q.div0;for(var a=n.reduce((function(e,t){return e+t}),0)/r,s=o.reduce((function(e,t){return e+t}),0)/r,l=0,c=0;c<r;c++)l+=(n[c]-a)*(o[c]-s);return l/(i?r-1:r)}function Ye(e,t){return Xe(e,t,!1)}var Ke={ABS:function(e){var t=J(e);if("number"==typeof t)return Math.abs(t)},ACOS:function(e){var t=J(e);if("number"==typeof t)return Math.acos(t)},ACOSH:function(e){var t=J(e);if("number"==typeof t)return Math.acosh(t)},ACOT:function(e){var t=J(e);if("number"==typeof t)return Math.atan(1/t)},ACOTH:function(e){var t=J(e);if("number"==typeof t)return.5*Math.log((t+1)/(t-1))},ADD:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i+n},ARABIC:function(e){if(!J(e)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(""+e)){var t=0;return(""+e).replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(e){return t+=xe[e],e})),+t}},ASIN:function(e){var t=J(e);if("number"==typeof t)return Math.asin(t)},ASINH:function(e){var t=J(e);if("number"==typeof t)return Math.asinh(t)},ATAN:function(e){var t=J(e);if("number"==typeof t)return Math.atan(t)},ATAN2:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return Math.atan2(n,i)},ATANH:function(e){var t=J(e);if("number"==typeof t)return Math.log((1+t)/(1-t))/2},AVEDEV:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Z(e).filter((function(e){return"number"==typeof e})),n=i.length;if(0===n)throw q.div0;var o=i.reduce((function(e,t){return e+t}),0)/n;return i.reduce((function(e,t){return e+Math.abs(t-o)}),0)/n},AVERAGE:se,AVERAGEA:le,BASE:function(e,t,i){void 0===i&&(i=0);var n=J(e),o=J(t),r=J(i);if("number"==typeof n&&"number"==typeof o&&"number"==typeof r){var a=n.toString(o);return new Array(Math.max(r+1-a.length,0)).join("0")+a.toUpperCase()}},BINOMDIST:qe,"BINOM.INV":function(e,t,i){for(var n=ie(e),o=ie(t),r=ie(i),a=0;a<=n;a++){if(qe(a,n,o,!0)>=r)return a}},"BINOM.DIST.RANGE":function(e,t,i,n){var o=ie(e),r=ie(t),a=ie(i),s=J(n);"number"!=typeof s&&(s=a);for(var l=0,c=a;c<=s;c++){l+=Se(o,c)*Math.pow(r,c)*Math.pow(1-r,o-c)}return l},"BINOM.DIST":qe,BITAND:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i&n;throw q.value},BITLSHIFT:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return n>0?i<<n:i>>-n;throw q.value},BITOR:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i|n;throw q.value},BITRSHIFT:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return n>0?i>>n:i<<-n;throw q.value},BITXOR:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i^n;throw q.value},CEILING:function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=0);var n=J(e),o=J(t),r=J(i);if("number"==typeof n&&"number"==typeof o&&"number"==typeof r)return 0===o?0:(o=Math.abs(o),n>=0?Math.ceil(n/o)*o:0===i?-1*Math.floor(Math.abs(n)/o)*o:-1*Math.ceil(Math.abs(n)/o)*o)},COMBIN:Se,COMBINA:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return 0===i&&0===n?1:Se(i+n-1,i-1)},COMPLEX:ke,CORREL:function(e,t){if(e.length!==t.length)throw q.na;for(var i=e.filter((function(e){return"number"==typeof e})),n=t.filter((function(e){return"number"==typeof e})),o=i.length,r=i.reduce((function(e,t){return e+t}),0)/o,a=n.reduce((function(e,t){return e+t}),0)/o,s=0,l=0,c=0,u=0;u<o;u++)s+=(i[u]-r)*(n[u]-a),l+=Math.pow(i[u]-r,2),c+=Math.pow(n[u]-a,2);var d=Math.sqrt(l*c);if(!d)throw q.div0;return s/d},COS:function(e){var t=J(e);if("number"==typeof t)return Math.cos(t)},COSH:function(e){var t=J(e);if("number"==typeof t)return Math.cosh(t)},COT:function(e){var t=J(e);if("number"==typeof t)return 1/Math.tan(t)},COTH:function(e){var t=J(e);if("number"==typeof t){var i=Math.exp(2*t);return(i+1)/(i-1)}},COUNT:ce,COUNTA:ue,COUNTBLANK:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=Z(e),o=0;o<n.length;o++)0===n[o]||n[o]||i++;return i},COVAR:Ye,"COVARIANCE.P":Ye,"COVARIANCE.S":function(e,t){return Xe(e,t,!0)},CSC:function(e){var t=J(e);if("number"==typeof t)return 1/Math.sin(t)},CSCH:function(e){var t=J(e);if("number"==typeof t)return 2/(Math.exp(t)-Math.exp(-t))},DEC2BIN:Me,DEC2HEX:Oe,DEC2OCT:Ae,DECIMAL:function(e,t){var i=J(e),n=J(t);if(!(""+i).match("/[2-9]/")&&"number"==typeof i&&"number"==typeof n&&n>1&&n<37)return parseInt(""+i,n)},DEGREES:function(e){var t=J(e);if("number"==typeof t)return 180*t/Math.PI},DELTA:function(e,t){var i=J(e),n=J(t);if("number"==typeof i||"number"==typeof i)return+(i===n);throw q.value},DEVSQ:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Z(e),n=[];i.forEach((function(e){"number"==typeof e&&n.push(e)}));var o=n.reduce((function(e,t){return e+t}),0)/n.length;return n.reduce((function(e,t){return e+Math.pow(t-o,2)}),0)},DIVIDE:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n&&0!==n)return i/n},EQ:function(e,t){return typeof e==typeof t&&e==t},ERF:Fe,ERFC:function(e,t){var i=J(e);if("number"==typeof i)return 1-Fe(i,t);throw q.value},EVEN:function(e){var t=J(e);if("number"==typeof t){var i=re(t);return i%2?i+Math.sign(t):i}},EXP:function(e){var t=J(e);if("number"==typeof t)return Math.exp(t);throw q.value},FACT:Ee,FACTDOUBLE:function e(t){var i=J(t);if("number"==typeof i){var n=Math.floor(i);return n<=0?1:n*e(n-2)}},FISHER:function(e){var t=J(e);if("number"==typeof t&&t>-1&&t<1)return.5*Math.log((1+t)/(1-t));throw q.value},FISHERINV:function(e){var t=J(e);if("number"==typeof t){var i=Math.exp(2*t);return(i-1)/(i+1)}throw q.value},FLOOR:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n){var o=Math.abs(n);return i>=0?Math.floor(i/o)*o:-1*Math.ceil(Math.abs(i)/o)*o}},GAMMA:function e(t){var i=J(t);if("number"!=typeof i)throw q.value;if(!(Number.isInteger(i)&&i<=0)){if(i<.5)return Math.PI/(Math.sin(Math.PI*i)*e(1-i));i-=1;for(var n=Te[0],o=1;o<9;o++)n+=Te[o]/(i+o);var r=i+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(r,i+.5)*Math.exp(-r)*n}throw q.num},GCD:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Z(e),n=i.length;if(!n)return 1;for(var o=i[0],r=1;"number"!=typeof o;){if(o=i[r],r>i.length)throw"The arguments should contain at least one numeric value";r++}for(var a=o<0?-o:o;r<n;r++){var s=J(i[r]);if("number"==typeof s){for(var l=s<0?-s:s;a&&l;)a>l?a%=l:l%=a;a+=l}}return a},GEOMEAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Z(e);if(i.some((function(e){return!Number.isFinite(e)||e<=0})))throw q.num;return Math.pow(i.reduce((function(e,t){return t*e}),1),1/i.length)},GESTEP:function(e,t){void 0===t&&(t=0);var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return+(e>=t);throw q.value},GT:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i>n},GTE:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i>=n},HARMEAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Z(e);if(i.some((function(e){return!Number.isFinite(e)||e<=0})))throw q.num;var n=i.reduce((function(e,t){return e+1/t}),0);return 1/(1/i.length*n)},HEX2BIN:function(e,t){return Me(parseInt(e.toString(),16),t)},HEX2DEC:function(e,t){var i=parseInt(e.toString(),16);if(!Number.isFinite(i))throw q.value;var n=i>Re;n&&(i=-(i-2*Re));var o=t?J(t):null,r=i.toString();return(n?"-":"")+(o?r.padStart(o,"0"):r)},HEX2OCT:function(e,t){void 0===t&&(t=null);var i=parseInt(e.toString(),16);return i>Re&&(i^=Re),Ae(i,t)},IMABS:function(e){var t=Ve(e),i=He(e);if(!Number.isFinite(+t)||!Number.isFinite(+i))throw q.value;return Math.sqrt(Math.pow(+t,2)+Math.pow(+i,2))},IMAGINARY:He,IMCONJUGATE:function(e){return ke(+Ve(e),-+He(e))},IMCOS:Le,IMCOSH:je,IMCOT:function(e){return Ne(Le(e),$e(e))},IMCSC:function(e){return Ne("1",$e(e))},IMCSCH:function(e){return Ne("1",ze(e))},IMDIV:Ne,IMEXP:function(e){var t=+Ve(e),i=+He(e),n=Math.exp(t);return ke(n*Math.cos(i),n*Math.sin(t))},IMLN:function(e){var t=+Ve(e),i=+He(e);return ke(Math.log(Math.sqrt(t*t+i*i)),Math.atan(i/t))},IMPOWER:function(e,t){var i=J(t);if("number"!=typeof i)throw q.value;var n=+Ve(e),o=+He(e),r=Math.sqrt(n*n+o*o),a=Math.pow(r,i),s=Math.atan(o/n);return ke(a*Math.cos(i*s),a*Math.sin(i*s))},IMPRODUCT:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw q.value;for(var i,n,o,r,a,s,l=e[0],c=0,u=e.slice(1);c<u.length;c++){var d=u[c];i=l.toString(),n=d.toString(),o=void 0,r=void 0,a=void 0,s=void 0,o=+Ve(i),r=+He(i),a=+Ve(n),s=+He(n),l=ke(o*a-r*s,o*s+r*a)}return l.toString()},IMREAL:Ve,IMSEC:function(e){return Ne("1",Le(e))},IMSECH:function(e){return Ne("1",je(e))},IMSIN:$e,IMSINH:ze,IMSQRT:function(e){var t=+Ve(e),i=+He(e),n=Math.sqrt(Math.sqrt(t*t+i*i)),o=Math.atan(i/t)/2;return ke(n*Math.cos(o),n*Math.sin(o))},IMSUB:function(e,t){var i=+Ve(e),n=+He(e);return ke(i-+Ve(t),n-+He(t))},IMSUM:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw q.value;for(var i,n,o,r,a=e[0],s=0,l=e.slice(1);s<l.length;s++){var c=l[s];i=a.toString(),n=c.toString(),o=void 0,r=void 0,o=+Ve(i),r=+He(i),a=ke(o+ +Ve(n),r+ +He(n))}return a.toString()},IMTAN:function(e){return Ne($e(e),Le(e))},INT:function(e){var t=J(e);if("number"==typeof t)return Math.floor(t)},LARGE:function(e,t){var i=J(t),n=e.sort((function(e,t){return e-t}));if("number"==typeof i&&!e.some((function(e){return"number"!=typeof J(e)})))return n[n.length-i];throw q.value},LN:function(e){var t=J(e);if("number"==typeof t)return Math.log(t)},LOG:function(e,t){void 0===t&&(t=10);var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return Math.log(i)/Math.log(n)},LOG10:function(e){var t=J(e);if("number"==typeof t)return Math.log(t)/Math.log(10)},LT:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i<n},LTE:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i<=n},MAX:de,MEDIAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Z(e);i.sort((function(e,t){return e-t}));var n=Math.floor(i.length/2);return i.length%2?i[n]:(i[n-1]+i[n])/2},MIN:he,MINUS:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i-n},MOD:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n&&0!==n){var o=Math.abs(i%n);return t>0?o:-o}},MROUND:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n&&i*n>-1)return Math.round(i/n)*n},MULTINOMIAL:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=Z(e),n=0,o=1,r=0;r<i.length;r++){var a=J(i[r]);"number"==typeof a&&(n+=a,o*=Ee(i[r]))}return Ee(n)/o},MULTIPLY:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i*n},NE:function(e,t){return typeof e!=typeof t||e!=t},OCT2BIN:function(e,t){void 0===t&&(t=null);var i=parseInt(e.toString(),8);return i&Be&&(i=-(2*Be-i)),Me(i,t)},OCT2DEC:function(e,t){void 0===t&&(t=null);var i=t?J(t):null,n=parseInt(e.toString(),8);if(n&Be&&(n=-(2*Be-n)),!Number.isFinite(n)||"boolean"==typeof i)throw q.value;return n.toString().padStart(i||0,"0")},OCT2HEX:function(e,t){void 0===t&&(t=null);var i=parseInt(e.toString(),8);return i&Be&&(i=-(2*Be-i)),Oe(i,t)},ODD:function(e){var t=J(e);if("number"==typeof t){var i=re(t);return i%2?i:i+Math.sign(t)}},PERCENTILE:We,"PERCENTILE.INC":We,"PERCENTILE.EXC":function(e,t){return We(e,t,!0)},PERMUT:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return Ee(i)/Ee(i-n);throw q.value},PI:function(){return Math.PI},POW:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return we(e,t)},POWER:we,PRODUCT:fe,QUARTILE:Ge,"QUARTILE.INC":Ge,"QUARTILE.EXC":function(e,t){return Ge(e,t,!0)},QUOTIENT:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return oe(i/n)},RADIANS:function(e){var t=J(e);if("number"==typeof t)return t*Math.PI/180},RAND:function(){return Math.random()},RANDBETWEEN:function(e,t){var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n)return i+Math.ceil((n-i+1)*Math.random())-1},ROMAN:function(e){var t=J(e);if("number"==typeof t){for(var i=String(t).split(""),n="",o=3;o--;)n=(Ie[+i.pop()+10*o]||"")+n;return new Array(+i.join("")+1).join("M")+n}},ROUND:function(e,t){var i=J(e),n=J(t)||0;if("number"==typeof i&&"number"==typeof n)return parseFloat(i.toFixed(n))},ROUNDDOWN:function(e,t){var i=J(e),n=J(t)||0;if("number"==typeof i&&"number"==typeof n)return Math.floor(i*Math.pow(10,n))/Math.pow(10,n)},ROUNDUP:function(e,t){var i=J(e),n=J(t)||0;if("number"==typeof i&&"number"==typeof n)return Math.ceil(i*Math.pow(10,n))/Math.pow(10,n)},SEC:function(e){var t=J(e);if("number"==typeof t)return 1/Math.cos(t)},SECH:function(e){var t=J(e);if("number"==typeof t)return 2/(Math.exp(t)+Math.exp(-t))},SIGN:function(e){var t=J(e);if("number"==typeof t)return 0===t?0:t/Math.abs(t);throw q.value},SIN:function(e){var t=J(e);if("number"==typeof t)return Math.sin(t)},SINH:function(e){var t=J(e);if("number"==typeof t)return Math.sinh(t)},SMALL:function(e,t){var i=J(t),n=e.sort((function(e,t){return e-t}));if("number"==typeof i&&!e.some((function(e){return"number"!=typeof J(e)})))return n[i-1];throw q.value},SQRT:function(e){var t=J(e);if("number"==typeof t&&t>=0)return Math.sqrt(t)},SQRTPI:function(e){var t=J(e);if("number"==typeof t&&t>-1)return Math.sqrt(t*Math.PI)},STDEV:ye,"STDEV.S":ye,"STDEV.P":be,STDEVA:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(ge.apply(void 0,e))},STDEVP:be,STDEVPA:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(me.apply(void 0,e))},STEYX:function(e,t){if(e.length!==t.length)throw q.na;var i=e.filter((function(e){return"number"==typeof e})),n=t.filter((function(e){return"number"==typeof e})),o=i.length;if(2===o)throw q.div0;for(var r=i.reduce((function(e,t){return e+t}),0)/o,a=n.reduce((function(e,t){return e+t}),0)/o,s=0,l=0,c=0,u=0;u<o;u++)s+=(i[u]-r)*(n[u]-a),l+=Math.pow(i[u]-r,2),c+=Math.pow(n[u]-a,2);if(2===c)throw q.div0;return Math.sqrt((l-Math.pow(s,2)/c)/(o-2))},SUBTOTAL:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=J(e),o=Z(t);if("number"==typeof n)switch(n){case 1:case 101:return se.apply(void 0,o);case 102:case 2:return ce.apply(void 0,o);case 103:case 3:return ue.apply(void 0,o);case 104:case 4:return de.apply(void 0,o);case 105:case 5:return he.apply(void 0,o);case 106:case 6:return fe.apply(void 0,o);case 107:case 7:case 110:case 10:return;case 108:case 8:return be.apply(void 0,o);case 109:case 9:return ae.apply(void 0,o);case 111:case 11:return _e.apply(void 0,o)}},SUM:ae,SUMPRODUCT:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0].length;for(var n in e)if(e[n].length!==i)return;var o=0;for(n=0;n<e[0].length;n++){var r=!1,a=1;for(var s in e){var l=J(e[s][n]);"number"==typeof l&&(a*=l,r=!0)}r&&(o+=a)}return o},SUMSQ:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=Z(e),o=0;o<n.length;o++){var r=J(n[o]);"number"==typeof r&&(i+=Math.pow(r,2))}return i},SUMX2MY2:function(e,t){if(!e.find((function(e){return"number"!=typeof J(e)}))&&!t.find((function(e){return"number"!=typeof J(e)}))){for(var i=0,n=0;n<e.length;n++)i+=e[n]*e[n]-t[n]*t[n];return i}},SUMX2PY2:function(e,t){if(!e.find((function(e){return"number"!=typeof J(e)}))&&!t.find((function(e){return"number"!=typeof J(e)}))){for(var i=0,n=0;n<e.length;n++)i+=e[n]*e[n]+t[n]*t[n];return i}},SUMXMY2:function(e,t){if(!e.find((function(e){return"number"!=typeof J(e)}))&&!t.find((function(e){return"number"!=typeof J(e)}))){for(var i=0,n=0;n<e.length;n++)i+=Math.pow(e[n]-t[n],2);return i}},TAN:function(e){var t=J(e);if("number"==typeof t)return Math.tan(t)},TANH:function(e){var t=J(e);if("number"==typeof t)return Math.tanh(t)},TRUNC:function(e){var t=J(e);if("number"==typeof t)return oe(t)},VAR:ve,"VAR.S":ve,"VAR.P":_e,VARA:ge,VARP:_e,VARPA:me,WEIBULL:Ue,"WEIBULL.DIST":Ue};var Je=/[\0-\x1F]/g;var Ze=Object.freeze({__proto__:null,CONCATENATE:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Z(e).join("")},LEFT:function(e,t){return Q(e)?"":e.toString().substring(0,t)},MID:function(e,t,i){return Q(e)?"":e.toString().substring(t,t+i)},RIGHT:function(e,t){return Q(e)?"":e.toString().substring(e.length-t)},LOWER:function(e){return Q(e)?"":e.toString().toLowerCase()},UPPER:function(e){return Q(e)?"":e.toString().toUpperCase()},PROPER:function(e){if(Q(e))return"";var t=e.toString().toLowerCase().split(" ");for(var i in e="",t)e+=(e?" ":"")+t[i].substring(0,1).toUpperCase()+t[i].substring(1);return e},TRIM:function(e){return Q(e)?"":e.toString().trim()},LEN:function(e){return Q(e)?0:e.toString().length},CHAR:function(e){var t=J(e);if("number"==typeof t)return String.fromCharCode(t)},CLEAN:function(e){return void 0===e&&(e=""),(""+e).replace(Je,"")},CODE:function(e){return void 0===e&&(e=""),(""+e).charCodeAt(0)},EXACT:function(e,t){return e===t},FIND:function(e,t,i){void 0===i&&(i=0);var n=J(i);if("number"==typeof n&&t)return(""+t).indexOf(""+e,n-1)+1;throw"index cannot be string"},FIXED:function(e,t,i){void 0===t&&(t=2),void 0===i&&(i=!1);var n=J(e),o=J(t);if("number"==typeof n&&"number"==typeof o){var r=n.toFixed(o);if(ee(i))return""+r;var a=(""+r).split("."),s=a[0],l=a[1];return s.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+l}},NUMBERVALUE:function(e,t,i){if(void 0===t&&(t="."),void 0===i&&(i=","),"string"==typeof e&&"string"==typeof t&&"string"==typeof i)return Number(e.replace(t,".").replace(i,""))},REGEXEXTRACT:function(e,t){if("string"==typeof e&&"string"==typeof t){var i=e.match(new RegExp(t));return i?i[i.length>1?i.length-1:0]:null}},REGEXMATCH:function(e,t){if("string"==typeof e&&"string"==typeof t)return!!e.match(new RegExp(t))},REGEXREPLACE:function(e,t,i){if("string"==typeof e&&"string"==typeof t)return e.replace(new RegExp(t),""+i)},REPT:function(e,t){var i=J(t);if("number"==typeof i)return new Array(i+1).join(""+e)},SEARCH:function(e,t,i){void 0===i&&(i=0);var n=J(i);if("number"==typeof n){var o=(""+t).toLowerCase().indexOf((""+e).toLowerCase(),n-1)+1;if(0!==o)return o;throw"not found"}},SUBSTITUTE:function(e,t,i,n){if(!e||!t||!i&&""!==i)return""+e;if(void 0===n)return(""+e).replace(new RegExp(""+t,"g"),""+i);for(var o=0,r=0;(""+e).indexOf(""+t,o)>0;)if(o=(""+e).indexOf(""+t,o+1),++r===n)return(""+e).substring(0,o)+i+(""+e).substring(o+(""+t).length)},T:function(e){return"string"==typeof e&&"TRUE"!==e&&"FALSE"!==e?""+e:""},JOIN:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=[];return t.forEach((function(t){"object"==typeof t?n.push(t.join(""+e)):n.push(t)})),n.join(""+e)},REPLACE:function(e,t,i,n){var o=J(t),r=J(i);if("number"==typeof o&&"number"==typeof r){var a=e.toString(),s=n.toString();return a.replace(a.substr(o-1,r),s)}},ARRAYTOTEXT:function(e,t){return t?"{"+e.map((function(e){return"string"==typeof e?'"'+e+'"':e})).join("; ")+"}":e.join("; ")}});function Qe(e){return void 0===e?null:e}function et(e,t,i,n){void 0===i&&(i=0);var o=-1;if(0===i)o=t.indexOf(e);else{var r="string"==typeof e?"":-1/0*i;1===i?t.forEach((function(t,i){t<=e&&t>r&&(r=t,o=i)})):-1===i&&t.forEach((function(t,i){t>=e&&t<r&&(r=t,o=i)}))}return o+1}var tt={LOOKUP:function(e,t,i){var n=et(e,t,1);if(0===n)throw"#N/A";return(i||t)[n-1]},HLOOKUP:function(e,t,i,n){var o=!0;void 0!==n&&(o=ee(n));var r=t.$width?t.$width:t.length,a=et(e,t.slice(0,r),o?1:0);if(0===a)throw"#N/A";return Qe(t[r*((i||1)-1)+a-1])},VLOOKUP:function(e,t,i,n){var o=!0;void 0!==n&&(o=ee(n));var r,a=t.$width?t.$width:1,s=t.length/a;if(1===s)r=t;else{r=[];for(var l=0;l<s;l++)r.push(t[a*l])}var c=i,u=et(e,r,o?1:0);if(0===u)throw"#N/A";return Qe(t[a*(u-1)+(c||1)-1])},XLOOKUP:function(e,t,i,n,o,r){var a=et(e,t,o);if(0===a){if(void 0!==n)return n;throw"#N/A"}return(i||t)[a-1]},INDEX:function(e,t,i){var n=t,o=i;return Qe(e[(e.$width?e.$width:1)*(n-1)+(o||1)-1])},MATCH:function(e,t,i){var n=i;void 0===i&&(n=1);var o=et(e,t,n);if(0===o)throw"#N/A";return o},XMATCH:function(e,t,i,n){var o=et(e,t,i);if(0===o)throw"#N/A";return o}},it=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],nt=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],ot=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function rt(e,t){var i=te(e),n=te(t);if(i&&n)return Math.round((i.getTime()-n.getTime())/864e5)}function at(e){var t=te(e);if(t){t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));var i=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-i.getTime())/864e5+1)/7)}}function st(e,t,i,n){var o=te(e),r=te(t);if(o&&r){for(var a=void 0===i?ot[1]:ot[i],s=n||[],l=0;l<s.length;l++){if((v=Y(s[l]))instanceof Error)throw"The "+s[l]+" is not a  number";s[l]=v}var c=(r.getTime()-o.getTime())/864e5+1,u=Math.round(c),d=o;for(l=0;l<c;l++){var h=(new Date).getTimezoneOffset()>0?d.getUTCDay():d.getDay(),f=!1;h!==a[0]&&h!==a[1]||(f=!0);for(var p=0;p<s.length;p++){var v;if((v=s[p]).getDate()===d.getDate()&&v.getMonth()===d.getMonth()&&v.getFullYear()===d.getFullYear()){f=!0;break}}f&&u--,d.setDate(d.getDate()+1)}return u}}function lt(e,t,i,n){var o=te(e),r=J(t);if(o&&"number"==typeof r){for(var a=void 0===i?ot[1]:ot[i],s=n||[],l=0;l<s.length;l++){if((h=Y(s[l]))instanceof Error)throw"The "+s[l]+" is not a  number";s[l]=h}for(var c=0;c<r;){o.setDate(o.getDate()+1);var u=o.getDay();if(u!==a[0]&&u!==a[1]){for(var d=0;d<s.length;d++){var h;if((h=s[d]).getDate()===o.getDate()&&h.getMonth()===o.getMonth()&&h.getFullYear()===o.getFullYear()){c--;break}}c++}}return K(o)}}function ct(e){return 1===new Date(e,1,29).getMonth()}var ut=function(e,t){var i=e.getFullYear(),n=new Date(i,2,1);if(ct(i)&&e<n&&t>=n)return!0;var o=t.getFullYear(),r=new Date(o,2,1);return ct(o)&&t>=r&&e<r};function dt(e,t,i){void 0===i&&(i=0);var n=te(e),o=te(t);if(n&&o){var r=n.getDate(),a=n.getMonth()+1,s=n.getFullYear(),l=o.getDate(),c=o.getMonth()+1,u=o.getFullYear(),d=365,h=u-s+1,f=(new Date(u+1,0,1).getTime()-new Date(s,0,1).getTime())/1e3/60/60/24/h;switch(i){case 0:return 31===r&&31===l?(r=30,l=30):31===r?r=30:30===r&&31===l&&(l=30),(l+30*c+360*u-(r+30*a+360*s))/360;case 1:return s===u||s+1===u&&(a>c||a===c&&r>=l)?((s===u&&ct(s)||ut(n,o)||1===c&&29===l)&&(d=366),rt(o.toDateString(),n.toDateString())/d):rt(o.toDateString(),n.toDateString())/f;case 2:return rt(o.toDateString(),n.toDateString())/360;case 3:return rt(o.toDateString(),n.toDateString())/365;case 4:return(l+30*c+360*u-(r+30*a+360*s))/360}}}var ht={DATE:function(e,t,i){return K(new Date(e,t-1,i))},TIME:function(e,t,i){var n=K(new Date(1900,0,1,e,t,i,0));return n-Math.trunc(n)},DAY:function(e){return Y(e).getDate()},MONTH:function(e){return Y(e).getMonth()+1},YEAR:function(e){return Y(e).getFullYear()},HOUR:function(e){return Y(e).getHours()},MINUTE:function(e){return Y(e).getMinutes()},SECOND:function(e){return Y(e).getSeconds()},NOW:function(){return K(new Date)},DATEDIF:function(e,t,i){var n=i.toLowerCase();if("d"===n)return t-e;var o=Y(e),r=Y(t);switch(n){case"y":return r.getFullYear()-o.getFullYear();case"m":return(s=12*(r.getFullYear()-o.getFullYear()))+r.getMonth()-o.getMonth();case"d":return Math.floor(t-e);case"md":if((l=r.getDate()-o.getDate())<0){var a=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();return r.getDate()+a-o.getDate()}return l;case"ym":var s;return(s=r.getMonth()-o.getMonth())<0?12+s:s;case"yd":var l;return(l=X(r)-X(o))<0?365+l:l}},DATEVALUE:function(e){if("string"==typeof e)return K(new Date(new Date(e).toDateString()))},DAYS:rt,DAYS360:function(e,t,i){void 0===i&&(i=0);var n=te(e),o=te(t);if(n&&o){var r=n.getMonth(),a=o.getMonth(),s=void 0,l=void 0;if(ee(i))s=31===n.getDate()?30:n.getDate(),l=31===o.getDate()?30:o.getDate();else{var c=new Date(n.getFullYear(),r+1,0).getDate(),u=new Date(o.getFullYear(),a+1,0).getDate();s=n.getDate()===c?30:n.getDate(),o.getDate()===u?s<30?(a++,l=1):l=30:l=o.getDate()}return 360*(o.getFullYear()-n.getFullYear())+30*(a-r)+(l-s)}},EDATE:function(e,t){var i=te(e),n=J(t);if(i&&"number"==typeof n)return i.setMonth(i.getMonth()+n),K(i)},EOMONTH:function(e,t){var i=te(e),n=J(t);if(i&&"number"==typeof n)return K(new Date(i.getFullYear(),i.getMonth()+n+1,0))},ISOWEEKNUM:at,NETWORKDAYS:function(e,t,i){return st(e,t,1,i)},"NETWORKDAYS.INTL":st,TIMEVALUE:function(e){if("string"==typeof e){var t=e.split(" "),i=t[1],n=t[0].split(":"),o=new Date;return o.setHours(+n[0]),i&&"PM"===i.toUpperCase()&&o.setHours(o.getHours()+12),o.setMinutes(+n[1]),n[2]&&o.setSeconds(+n[2]),(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400}},WEEKNUM:function(e,t){void 0===t&&(t=1);var i=te(e);if(21===t)return at(t);var n=nt[t],o=new Date(i.getFullYear(),0,1),r=o.getDay()<n?1:0,a=o.getTime()-24*Math.abs(o.getDay()-n)*60*60*1e3;return Math.floor((i.getTime()-a)/864e5/7+1)+r},WEEKDAY:function(e,t){void 0===t&&(t=1);var i=te(e).getDay();return it[t][i]},WORKDAY:function(e,t,i){return lt(e,t,1,i)},"WORKDAY.INTL":lt,YEARFRAC:dt};var ft=Object.freeze({__proto__:null,IF:function(e,t,i){return e?t:i},AND:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<e.length;i++)if(!ee(e[i]))return!1;return!0},NOT:function(e){return!ee(e)},OR:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<e.length;i++)if(e[i])return!0;return!1},CHOOSE:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=J(e);if(t.length>1&&"number"==typeof n){if(t.length<n)throw"the index number is greater than the length of the array of values";if(n<=0)throw"index cannot be less than or equal to 0";return t[--n]}},FALSE:function(){return!1},TRUE:function(){return!0}});var pt=Object.freeze({__proto__:null,ISBLANK:function(e){return Q(e)},ISBINARY:function(e){return/^[01]{1,10}$/.test(""+e)},ISEVEN:function(e){var t=J(e);return"number"==typeof t&&t%2==0},ISODD:function(e){var t=J(e);return"number"==typeof t&&t%2!=0},ISNONTEXT:function(e){return"string"!=typeof e},ISNUMBER:function(e){return"number"==typeof J(e)},ISTEXT:function(e){return"string"==typeof e},N:function(e){var t=J(e);if("number"==typeof t)return t;var i=new Date(e);return i.getTime()?K(i):"TRUE"===e||!0===e?1:0}});function vt(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r,a=ie(e),s=ie(t),l=ie(i),c=ie(n);if(0===a)r=(l+c)/s;else{var u=Math.pow(1+a,s);r=a*(l*u+c)/(u-1),1===o&&(r/=1+a)}return-r}function gt(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r,a=ie(e),s=ie(t),l=ie(i),c=ie(n);if(0!==a){var u=Math.pow(1+a,s);return r=c*u+l*(u-1)/a,1===o&&(r=c*u+l*(1+a)*(u-1)/a),-r}r=c+l*s}function _t(e,t,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a=ie(e),s=ie(i),l=ie(t),c=ie(n),u=vt(a,s,c,ie(o),r);return(1===l?1===r?0:-c:1===r?gt(a,l-2,u,c,1)-u:gt(a,l-1,u,c,0))*a}var mt=Object.freeze({__proto__:null,ACCRINT:function(e,t,i,n,o,r,a){void 0===o&&(o=0),void 0===a&&(a=0);var s=te(e),l=te(i),c=ie(n),u=ie(o),d=ie(r),h=ie(a);if(1!==d)throw"This function is only supported with frequency 1";if(-1===[0,1,2,3,4].indexOf(h))throw"Basis is "+a+". It's should be 0, 1, 2, 3 or 4";if(l<=s)throw"Settlement canot be before or equal to issue";return u*c*dt(e,i,h)},PMT:vt,FV:gt,DB:function(e,t,i,n,o){void 0===o&&(o=12);var r=ie(e),a=ie(t),s=ie(i),l=ie(n),c=ie(o);if(r<0||a<0||s<0||l<0)throw"Parameters cannot be negative";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(c))throw"Month is "+o+". It's should be beetwen 1 and 12";if(l>s)throw"Period cannot be greater than life";if(a>=r)return 0;for(var u=+(1-Math.pow(a/r,1/s)).toFixed(3),d=r*u*c/12,h=d,f=0,p=n===s?s-1:n,v=2;v<=p;v++)h+=f=(r-h)*u;return 1===n?d:n===s?(r-h)*u:f},DDB:function(e,t,i,n,o){void 0===o&&(o=2);var r=ie(e),a=ie(t),s=ie(i),l=ie(n),c=ie(o);if(r<0||a<0||s<0||l<0||c<0)throw"Parameters cannot be negative";if(l>s)throw"Period cannot be greater than life";if(a>=r)return 0;for(var u=0,d=0,h=1;h<=n;h++)u+=d=Math.min(c/s*(r-u),r-a-u);return d},DOLLAR:function(e,t){void 0===t&&(t=2);var i=J(e),n=J(t);if("number"==typeof i&&"number"==typeof n){if(n>=0)return"$"+i.toFixed(n);var o=Math.pow(10,-n);return"$"+Math.trunc(i/o)*o}},DOLLARDE:function(e,t){var i=ie(e),n=ie(t);if(n<0)throw"Fraction cannot be negative";if(n>=0&&n<1)throw"Fraction cannot be zero";n=parseInt(""+n,10);var o=parseInt(""+e,10);o+=i%1*Math.pow(10,Math.ceil(Math.log(n)/Math.LN10))/n;var r=Math.pow(10,Math.ceil(Math.log(n)/Math.LN2)+1);return o=Math.round(o*r)/r},DOLLARFR:function(e,t){var i=ie(e),n=ie(t);if(n<0)throw"Fraction cannot be negative";if(n>=0&&n<1)throw"Fraction cannot be zero";n=parseInt(""+n,10);var o=parseInt(""+e,10);return o+=i%1*Math.pow(10,-Math.ceil(Math.log(n)/Math.LN10))*n},EFFECT:function(e,t){var i=ie(e),n=ie(t);if(i<=0)throw"Rate cannot be less than or equal to zero";if(n<1)throw"Periods cannot be less than 1";return n=parseInt(""+n,10),Math.pow(1+i/n,n)-1},FVSCHEDULE:function(e,t){for(var i=ie(e),n=t.map((function(e){return ie(e)})),o=n.length,r=i,a=0;a<o;a++)r*=1+n[a];return r},IRR:function(e,t){void 0===t&&(t=0);for(var i=Z(e).map((function(e){return ie(e)})),n=ie(t),o=function(e,t,i){for(var n=i+1,o=e[0],r=1;r<e.length;r++)o+=e[r]/Math.pow(n,(t[r]-t[0])/365);return o},r=function(e,t,i){for(var n=i+1,o=0,r=1;r<e.length;r++){var a=(t[r]-t[0])/365;o-=a*e[r]/Math.pow(n,a+1)}return o},a=[],s=!1,l=!1,c=0;c<i.length;c++)a[c]=0===c?0:a[c-1]+365,i[c]>0&&(s=!0),i[c]<0&&(l=!0);if(!s||!l)throw"Values should contain at least one positive value and one negative value";var u,d,h,f=n=void 0===t?.1:n,p=!0;do{u=f-(h=o(i,a,f))/r(i,a,f),d=Math.abs(u-f),f=u,p=d>1e-10&&Math.abs(h)>1e-10}while(p);return f},IPMT:_t,ISPMT:function(e,t,i,n){var o=ie(e),r=ie(t),a=ie(i);return ie(n)*o*(r/a-1)},NPV:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=Z(e).map((function(e){return ie(e)})),n=ie(i[0]),o=0,r=1;r<i.length;r++)o+=i[r]/Math.pow(1+n,r);return o},NOMINAL:function(e,t){var i=ie(e),n=ie(t);if(i<=0)throw"Rate cannot be less then or equal to zero";if(n<1)throw"Periods cannot be less then 1";return n=parseInt(""+n,10),(Math.pow(i+1,1/n)-1)*n},NPER:function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=ie(e),a=ie(t),s=ie(i),l=ie(n),c=ie(o),u=a*(1+r*c)-l*r,d=s*r+a*(1+r*c);return Math.log(u/d)/Math.log(1+r)},PDURATION:function(e,t,i){var n=ie(e),o=ie(t),r=ie(i);if(n<=0)throw"Rate cannot be less then or equal to zero";return(Math.log(r)-Math.log(o))/Math.log(1+n)},PPMT:function(e,t,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a=ie(e),s=ie(t),l=ie(i),c=ie(n),u=ie(o),d=ie(r);return vt(a,l,c,u,d)-_t(a,s,l,c,u,d)},PV:function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=ie(e),a=ie(t),s=ie(i),l=ie(n),c=ie(o);return 0===r?-s*a-l:((1-Math.pow(1+r,a))/r*s*(1+r*c)-l)/Math.pow(1+r,a)},SYD:function(e,t,i,n){var o=ie(e),r=ie(t),a=ie(i);return(o-r)*(a-ie(n)+1)*2/(a*(a+1))},TBILLPRICE:function(e,t,i){var n=te(e),o=te(t),r=ie(i);if("number"==typeof r&&o>n)return 100*(1-r*Math.round((o.getTime()-n.getTime())/864e5)/360)},TBILLYIELD:function(e,t,i){var n=te(e),o=te(t),r=ie(i);if("number"==typeof r&&o>n)return(100-r)/r*360/Math.round((o.getTime()-n.getTime())/864e5)}}),yt={number:Ke,string:Ze,date:ht,other:ft,information:pt,financial:mt,lookup:tt},bt=o(o(o(o(o(o(o({},Ke),Ze),ht),ft),pt),mt),tt);function wt(e,t,i,n,o,r){var a=x(e),s=a[0],l=a[1],c=a[2],u=x(n),d=u[0],h=u[1];return c===u[2]&&(!(s>=d+o)&&(!(s+t<=d)&&(!(l>=h+r)&&!(l+i<=h))))}var xt=Math.pow(10,8);function Ct(e,t,i){i.add?e.has(t)||i.add(t):e.add(t)}function Et(e){if(e.keys)return Array.from(e.keys());var t=[];return e.forEach((function(e,i){return t.push(i)})),t}function St(e){if(e.values)return e.values();var t=[];e.forEach((function(e,i){return t.push(i)}));var i=0;return{add:function(e){t.push(e)},next:function(){var e=t[i];return{done:++i>t.length,value:e}}}}var It=function(){function e(e){var t=this;(e=e||{get:null,set:null,strict:!1})&&(this._getter=e.get,this._setter=e.set,this._strict=e.strict),this._parser=z,this._printer=U,this._parseContext={name:function(){},pageName:function(){return""},pageObj:function(){return null},page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={a:function(e,t,i){return e.$width=t,e.$height=i,e},v:function(e){if(-1===e)throw new Error;var i=t._getter(e);return void 0===i?null:i},r:function(e,i){var n=x(e),o=n[0],r=n[1],a=x(i),s=a[0]-o,l=a[1]-r+1,c=[];c.$width=l,c.$height=s+1;for(var u=0;u<=s;u++)for(var d=0;d<l;d++)c[u*l+d]=t._getter(e+64*d+4096*u*64);return c},m:bt,e:function(e){throw e},p:function(e){return t.getPlaceholder(e)}}}return e.prototype.getTriggerList=function(e){return this._triggers.get(e)},e.prototype.setValue=function(e,t,i,n){""===t&&(t=null),this._removeTriggers(e,null),this._setter(e,t,i)&&(n||this.trigger(e))},e.prototype.clean=function(e){this._removeTriggers(e,null)},e.prototype.getValue=function(e){return this._getter(e)},e.prototype.getMeta=function(){return this._meta},e.prototype.setMeta=function(e){this._meta=o(o({},this._meta),e)},e.prototype.setPlaceholder=function(e,t){var i=this;"*"===e?Object.entries(t).forEach((function(e){return i.setPlaceholder(e[0],e[1])})):(null===t?delete this._holders[e]:this._holders[e]=t,this.each((function(t,n){(function(e,t,i){for(var n=0;n<e.length;n+=3)if(e[n]===s&&t.substr(e[n+1],e[n+2])==i)return!0;return!1})(n.code,n.source,e)&&i.setMath(t,n.source,i._parseContext)})))},e.prototype.getPlaceholder=function(e){if("*"===e)return this._holders;var t=this._holders[e];return void 0===t?null:t},e.prototype.setMath=function(e,t,i,n){var o=this._generate(t,i),r=this._setMathAt(e,o);n||this._execAndTrigger(r)},e.prototype.refresh=function(e){this._execAndTrigger(e)},e.prototype.getMath=function(e){return this._data.get(e)},e.prototype.trigger=function(e,t){var i=this._triggers.get(e);if(i){var n=!t;t||(t=new Set);for(var o=0;o<i.length;o++)t.add(i[o]);n&&this.triggerSet(t)}return null},e.prototype.triggerSet=function(e){for(var t=this,i=new Map;e.size;){var n=St(e),o=!1;e:for(var r=n.next();!r.done;r=n.next()){var a=this._data.get(r.value),s=i.get(r.value);if(!s||(1==s&&(s=this._check_for_loops(r.value,a.triggers,i)),2!=s)){var l=a.triggers;if(l)for(var c=0;c<l.length;c++)if(e.has(l[c]))continue e;this._execAndTrigger(r.value,e),s||i.set(r.value,1),e.delete(r.value),o=!0}}if(!o)return void e.forEach((function(i){return t._errorAndTrigger(i,e)}))}},e.prototype.getStats=function(){return{math:this._data.size,trigger:this._triggers.size}},e.prototype._check_for_loops=function(e,t,i){var n=new Set;t.forEach((function(e){return n.add(e)}));for(var o=St(n),r=o.next();!r.done;r=o.next()){if(r.value==e)return i.set(e,2),2;var a=i.get(r.value);if(a&&a>1)return i.set(e,a),a;var s=this._data.get(r.value);s&&s.triggers&&s.triggers.forEach((function(e){return Ct(n,e,o)}))}return i.set(e,3),3},e.prototype._setMathAt=function(e,t){if(this._removeTriggers(e,t)){if(t.triggers)if(-1===t.triggers.indexOf(e)&&3!==t.broken)for(var i=0;i<t.triggers.length;i++){var n=t.triggers[i],r=this._triggers.get(n);void 0===r&&(r=[],this._triggers.set(n,r)),r.push(e)}else t=o(o({},t),{broken:y});return this._data.set(e,t),e}},e.prototype._removeTriggers=function(e,t){var i=this._data.get(e);if(!i)return!0;if(i===t)return!1;i.$width&&this._clearArea(e,!1);var n=i.triggers;if(n&&i.broken!==y)for(var o=0;o<n.length;o++){var r=n[o],a=this._triggers.get(r);if(a){var s=a.filter((function(t){return t!==e}));s.length?this._triggers.set(r,s):this._triggers.delete(r)}}return this._data.delete(e),!0},e.prototype.parse=function(e,t){return this._parser(e,t||this._parseContext)},e.prototype.exec=function(e,t){var i=this._generate(e,t);return this._exec(i)},e.prototype.each=function(e){var t=this;Et(this._data).forEach((function(i){return e(i,t._data.get(i))}))},e.prototype.setLogger=function(e){this._err_handler=e},e.prototype._setErr=function(e,t){return e.broken=2,t&&this._err_handler&&this._err_handler(t),b[e.broken]},e.prototype._exec=function(e){if(e.broken>0&&2!==e.broken)return b[e.broken];try{var t=e.exec(this._context);return e.broken=0,"number"==typeof t?isFinite(t)?Math.round(t*xt)/xt:this._setErr(e):t}catch(t){return this._setErr(e,t)}},e.prototype.toString=function(e,t){return M(e,t||this._parseContext)},e.prototype.regenerate=function(e,t,i){var n=this;i=o({},i||this._parseContext),Et(this._data).forEach((function(o){var r=!1,a=n._data.get(o),s=S(o);if(t&&s===e)n._removeTriggers(o,null);else{for(var l=0;l<a.code.length;l+=3)if(a.code[l]===p&&S(a.code[l+1])===e){r=!0;break}r&&(i.z=s,t?n.setMath(o,a.source,i):(a.source=M(a,i),a.code=n._parser(a.source,i).code))}}))},e.prototype.recalculate=function(e,t){var i=this;t=o({},t||this._parseContext);var n=new Set;this.each((function(o){if(e){var r=i._data.get(o);if(r.broken&&2!==r.broken)return t.z=S(o),void i.setMath(o,r.source,t)}n.add(o)})),this.triggerSet(n)},e.prototype._generate=function(e,t,i){var n=i||this._parser(e,t||this._parseContext);return this._printer(n,this._strict),n.triggers=function(e){for(var t=[],i=e.code,n=i.length,o=0;o<n;o+=3){switch(i[o]){case h:case d:var r=i[o+4];t.push(r);break;case f:I(i[o+4],i[o+7],(function(e){return t.push(e)}))}}if(t.length>10){var a=new Set;t=t.filter((function(e){return!a.has(e)&&(a.add(e),!0)}))}return t.length?t:null}(n),n},e.prototype._execAndTrigger=function(e,t){this.$count+=1;var i=this._data.get(e);if(i){var n=this._exec(i);if(Array.isArray(n))if(63!==S(e))return void this._complexSetter(e,n,t);this._setter(e,n,2)&&this.trigger(e,t)}},e.prototype._complexSetter=function(e,t,i){var n=this,o=t.$width,r=t.$height,a=this._data.get(e);a.$width=o,a.$height=r;try{k(e,o,r,(function(o,r){n._setter(o,t[r],2,0===r?null:e)&&n.trigger(o,i)}))}catch(t){this._clearArea(e,!0)}},e.prototype._clearArea=function(e,t){var i=this,n=this._data.get(e),o=n.$width,r=n.$height;k(e,o,r,(function(n,o){0===o&&t?i._setter(n,b[4],1)&&i.trigger(n):(t?i._setter(n,null,3,e):i._setter(n,null,3,-1))&&i.trigger(n)}))},e.prototype._errorAndTrigger=function(e,t){var i=this._data.get(e),n=this._setErr(i);this._setter(e,n,2)&&this.trigger(e,t)},e.prototype.debug=function(e,t){void 0===t&&(t=!1);var i=function(e){for(var t=e.code,i=e.source,n="",o=t.length,r=0;r<o;r+=3){var y=t[r],b=void 0;switch(y){case c:b="method";break;case a:b="text";break;case u:b="page";break;case s:b="holder";break;case d:b="name";break;case h:b="arg";break;case f:b="range";break;case p:b="data";break;case v:b="op";break;case g:b="number";break;case l:b="error";break;case _:b="extra";break;case m:b="arr"}n+=y===p?B+(t[r+1]+".")+t[r+2]+"\n":y===m?"["+b+"]"+W(b)+t[r+1]+" x "+t[r+2]+"\n":"["+b+"]"+W(b)+i.substr(t[r+1],t[r+2])+"\n"}return n}(this.parse(e));if(t)return i;console.log(i)},e.prototype.transpose=function(e,t,i,n){var r=this;n=n||this._parseContext;var a=x(e),s=a[0],l=a[1],c=a[2],u=new Map,d=new Map,h=new Set;Et(this._data).forEach((function(e){var a=x(e),f=a[0],p=a[1],v=a[2],g=r._data.get(e),_=v===n.z?n:o(o({},n),{z:v}),m=r._transpose(g,s,l,t,i,n,_),y=e;if(v===c&&(p>=l||f>=s)&&(y=w(f>=s?f+t:f,p>=l?p+i:p,v)),g!==m||e!==y){if(d.set(e,m),v===c&&(i<0&&p>=l&&p<l-i||t<0&&f>=s&&f<s-t))return;u.set(y,m),g.broken!==m.broken&&h.add(y)}})),Et(u).forEach((function(e){return r._setMathAt(e,u.get(e))})),Array.from(d.keys()).forEach((function(e){u.has(e)||r._removeTriggers(e,null)})),t>0&&this._triggerRow(s,t,h),i>0&&this._triggerColumn(l,i,h),t<0&&this._triggerColumn(s-1,2,h),i<0&&this._triggerColumn(l-1,2,h),this.triggerSet(h)},e.prototype._triggerColumn=function(e,t,i){var n=this,o=t?e+t:e;Et(this._triggers).forEach((function(t){var r=E(t);r>=e&&r<o&&n.trigger(t,i)}))},e.prototype._triggerRow=function(e,t,i){var n=this,o=t?e+t:e;Et(this._triggers).forEach((function(t){var r=C(t);r>=e&&r<o&&n.trigger(t,i)}))},e.prototype.moveMath=function(e,t,i,n,o,r,a){return"string"==typeof e&&(e=this.parse(e,r)),this._moveMath(e,t,i,n,o,a||r).source},e.prototype._moveMath=function(e,t,i,n,o,r){for(var a=e.code,s=0;s<a.length;s+=3)if(a[s]===h){var l=x(a[s+4]),c=l[0],u=l[1];wt(o.id,o.h,o.w,a[s+4],1,1)&&(c+=t,u+=i,a[s+4]=w(c,u,n)),s+=3}else if(a[s]===f){var d=x(a[s+4]),p=d[0],v=d[1],g=x(a[s+7]),_=g[0],m=g[1];wt(o.id,o.h,o.w,a[s+4],_-p+1,m-v+1)&&(p+=t,v+=i,_+=t,m+=i,a[s+4]=w(p,v,n),a[s+7]=w(_,m,n)),s+=6}var y={code:a,broken:e.broken,source:e.source,triggers:null,exec:null};return y=this._parser(M(y,r),r),this._generate(y.source,r,y)},e.prototype.transposeMath=function(e,t,i,n){return"string"==typeof e&&(e=this.parse(e,n)),n=n||this._parseContext,this._transpose(e,-1,-1,t,i,n,n).source},e.prototype._transpose=function(e,t,i,n,o,r,a){for(var s=!0,c=e.code,u=!(t<0||i<0),d=0;d<c.length;d+=3)if(c[d]===h){var p=x(c[d+4]),v=p[0],g=p[1],_=p[2];if(r.z!==_)continue;var m=c[d+5];if(!u&&3==m)continue;(u||0==(1&m))&&0!==n&&v>=t&&(s&&(c=[].concat(c),s=!1),((v+=n)<t||v<0)&&(c[d]=l)),(u||0==(2&m))&&0!==o&&g>=i&&(s&&(c=[].concat(c),s=!1),((g+=o)<i||g<0)&&(c[d]=l)),s||(c[d+4]=w(v,g,_)),d+=3}else if(c[d]===f){var y=c[d+5],b=c[d+8];if(!u&&3===y&&3===b)continue;var C=x(c[d+4]),E=C[0],S=C[1],I=(_=C[2],x(c[d+7])),k=I[0],O=I[1];if(r.z!==_)continue;0!==n&&((u||0==(1&y))&&(n>0?E>=t:E>t)&&(s&&(c=[].concat(c),s=!1),(E+=n)<0&&(c[d]=l)),(u||0==(1&b))&&k>=t&&(s&&(c=[].concat(c),s=!1),(k+=n)<E&&(c[d]=l))),0!==o&&((u||0==(2&y))&&(o>0?S>=i:S>i)&&(s&&(c=[].concat(c),s=!1),(S+=o)<0&&(c[d]=l)),(u||0==(2&b))&&O>=i&&(s&&(c=[].concat(c),s=!1),(O+=o)<S&&(c[d]=l))),s||(c[d+4]=w(E,S,_),c[d+7]=w(k,O,_)),d+=6}if(s)return e;var A={code:c,broken:e.broken,source:e.source,triggers:null,exec:null};return A=this._parser(M(A,a),a),this._generate(A.source,a,A)},e}();var kt=function(){function e(e,t,i){this._id=e,this._store=t,this._meta={},this._parseContext=o(o({},i),{z:e}),this.reset(),this._parseMode=!1}return e.prototype.reset=function(){this._data=[],this._rows=[],this._cols=[],this._spans=[]},e.prototype.getMeta=function(){return this._meta},e.prototype.setMeta=function(e){this._meta=o(o({},this._meta),e)},e.prototype.getID=function(){return this._id},e.prototype.cellID=function(e,t){return w(e,t,this._id)},e.prototype.getSize=function(){var e=this._data.length,t=0;return this._data.forEach((function(e){e&&e.length>t&&(t=e.length)})),[e,t]},e.prototype.getContext=function(){return this._parseContext},e.prototype.addRow=function(e,t){this._data.splice.apply(this._data,Mt(e,t)),this._store.transpose(w(e,0,this._id),t,0,this._parseContext),this._rows.splice.apply(this._rows,Mt(e,t)),this._recalculateSpans(e,t,0)},e.prototype.removeRow=function(e,t){return this._data.splice(e,t),this._store.transpose(w(e,0,this._id),-t,0,this._parseContext),this._rows.splice(e,t),this._recalculateSpans(e,-t,0)},e.prototype.addColumn=function(e,t){var i=Mt(e,t);this._data.forEach((function(e){e&&e.splice.apply(e,i)})),this._store.transpose(w(0,e,this._id),0,t,this._parseContext),this._cols.splice.apply(this._cols,Mt(e,t)),this._recalculateSpans(e,0,t)},e.prototype.removeColumn=function(e,t){this._data.forEach((function(i){i&&i.splice(e,t)})),this._store.transpose(w(0,e,this._id),0,-t,this._parseContext),this._cols.splice(e,t),this._recalculateSpans(e,0,-t)},e.prototype.setCell=function(e,t,i){var n=this._data[e];n||(n=this._data[e]=[]);var r=n[t];n[t]=r?o(o(o({},r),i),{value:r.value}):i,void 0!==i.value&&this.setValue(e,t,i.value)},e.prototype.clearCell=function(e,t){var i=this._data[e];i&&i[t]&&(i[t]=null,this._store.setValue(w(e,t,this._id),""))},e.prototype.setValue=function(e,t,i,n){var o=w(e,t,this._id);"string"==typeof i&&i.length>1&&"="===i[0]?this._store.setMath(o,i.substr(1),this._parseContext):this._store.setValue(o,i,n)},e.prototype.getCell=function(e,t,i){var n=this._data[e],o=n?n[t]:null;return o||!i||(n||(n=this._data[e]=[]),(o=n[t])||(o=n[t]={value:null})),o},e.prototype.getValue=function(e,t,i){if(i){var n=this._store.getMath(w(e,t,this._id));if(n)return"="+n.source}var o=this.getCell(e,t,!1);return o?o.value:null},e.prototype.getRange=function(e,t,i,n){for(var o=[],r=e;r<=i;r++)for(var a=t;a<=n;a++)o.push(this.getValue(r,a,!1));return o},e.prototype.getCellRange=function(e,t,i,n){for(var o=[],r=e;r<=i;r++)for(var a=t;a<=n;a++)o.push(this.getCell(r,a));return o},e.prototype.eachCell=function(e){this._data.forEach((function(t,i){t&&t.forEach((function(t,n){t&&e(i,n,t)}))}))},e.prototype.serialize=function(e){var t=this,i=[];return this.eachCell((function(n,r,a){if(a=o({},a),e){var s=t._store.getMath(w(n,r,t.getID()));s&&(a.value="="+s.source)}i.push([n,r,a])})),i},e.prototype.parse=function(e,t){var i=this;this.reset(),this._store.each((function(e){S(e)===i._id&&i._store.clean(e)})),this.parseBlock(e,t,!0)},e.prototype.parseBlock=function(e,t,i){var n=this,r=new Set;this._parseMode=!0,e.forEach((function(e){var a=e[0],s=e[1],l=e[2],c=w(a,s,n._id);i||n._store.clean(c);var u=n._data[a];u||(u=n._data[a]=[]);var d=(l=u[s]=o({},l)).value;if(d)if("string"==typeof d&&d.length>1&&"="===d[0]){var h=d.substr(1);n._store.setMath(c,h,n.getContext(),!0),r.add(c)}else t&&(l.value=null,n._store.setValue(c,d,null,!0),n._store.trigger(c,r))})),this._store.triggerSet(r),this._parseMode=!1},e.prototype.throwError=function(e){if(!this._parseMode)throw e},e.prototype.setRowMeta=function(e,t){var i=this._rows[e]||{};this._rows[e]=i?o(o({},i),t):t},e.prototype.getRowMeta=function(e,t){var i=this._rows[e];if(t&&!i){var n={};return this._rows[e]=n,n}return i||null},e.prototype.setColumnMeta=function(e,t){var i=this._cols[e]||{};this._cols[e]=i?o(o({},i),t):t},e.prototype.getColumnMeta=function(e,t){var i=this._cols[e];if(t&&!i){var n={};return this._cols[e]=n,n}return i||null},e.prototype.sort=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n="asc");for(var o=x(e),r=o[0],a=o[1],s=x(t),l=s[0],c=s[1],u="asc"===n,d=[],h=[],f=r;f<=l;f++){for(var p=[],v=a;v<=c;v++){var g=this._store.getMath(this.cellID(f,v));p.push({value:this.getValue(f,v),row:f,math:g||null})}d.push(p)}d.sort((function(e,t){var n=e[i].value,o=t[i].value;return"string"==typeof n&&"string"==typeof o||"number"==typeof n&&"number"==typeof o?n<o?u?-1:1:n>o?u?1:-1:0:"number"==typeof n?-1:1}));for(f=r;f<=l;f++)for(v=a;v<=c;v++){var _=d[f-r][v-a];if(_.math){var m=_.row-f,y=this._store.transposeMath(_.math,-m,0,this._parseContext);_.value="="+y}h.push([f,v,{value:_.value}])}this.parseBlock(h)},e.prototype.addSpan=function(e,t,i){var n;if(t>1||i>1){for(var o=0;o<=this._spans.length-1;o++){var r=this._spans[o];wt(e,t,i,r.id,r.info.width,r.info.height)&&this._spans.splice(o,1)}this._spans.push({id:e,info:{width:t,height:i}})}else-1!==(n=this._spans.findIndex((function(t){return t.id===e})))&&this._spans.splice(n,1)},e.prototype.getSpan=function(e){return this._spans.find((function(t){return t.id===e}))||null},e.prototype.getSpans=function(){return this._spans},e.prototype._recalculateSpans=function(e,t,i){var n,o;if(this._spans.length)for(var r=this._spans.length-1;r>=0;r--){var a=this._spans[r],s=a.info,l=s.height,c=s.width,u=x(a.id),d=u[0],h=u[1];t&&(d=(n=this._adjustSpan(d,l,e,t))[0],l=n[1]),i&&(h=(o=this._adjustSpan(h,c,e,i))[0],c=o[1]),c<1||l<1||c+l<=2?this._spans.splice(r,1):(a.id=w(d,h,this._id),a.info.height=l,a.info.width=c)}},e.prototype._adjustSpan=function(e,t,i,n){var o=e+t;if(n<0){var r=i+(n=-n);i>e?i<=o&&(t-=Math.min(n,e+t-i)):r>e?(t-=r-e,e=n-(r-e)):e-=n}else i<=e?e+=n:i<=o&&(t+=n);return[e,t]},e}();function Mt(e,t){for(var i=[e,0],n=0;n<t;n++)i.push(null);return i}var Ot=function(){function e(e,t,i){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=e,this._page=t,this._pageGetter=i}return e.prototype.get=function(e){return this._store.getMath(this._ranges.get(e))},e.prototype.toId=function(e){return this._ranges.get(e)},e.prototype.add=function(e,t){var i=this._ranges.get(e)||this._next_id();this._store.setMath(i,t,this._page.getContext()),this._ranges.set(e,i),this._refresh(e)},e.prototype.remove=function(e){this._ranges.delete(e),this._counter=1,this._refresh(e)},e.prototype.serialize=function(){var e=this;return Array.from(this._ranges.keys()).map((function(t){return[t,e.get(t).source]}))},e.prototype.parse=function(e){var t=this;e.forEach((function(e){return t.add(e[0],e[1])}))},e.prototype._refresh=function(e){var t=this,i=e.indexOf("!"),n="";-1!==i&&(n=e.substr(0,i),e=e.substr(i+1)),this._store.each((function(i,o){if(function(e,t,i,n){for(var o=0;o<e.length;o+=3)if(e[o]===d){if(""!==i){if(e[o-3]===u&&t.substr(e[o-2],e[o-1])!==i)continue;return!0}if(t.substr(e[o+1],e[o+2])===n)return!0}return!1}(o.code,o.source,n,e)){var r=S(i);t._store.setMath(i,o.source,t._pageGetter(r).getContext())}}))},e.prototype._next_id=function(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,w(this._counter,0,this._page.getID())},e.prototype.renamePage=function(e,t){var i=this;e+="!",t&&(t+="!"),this._ranges.forEach((function(n,o,r){0===o.indexOf(e)&&(t?r.set(o.replace(e,t),n):i._store.clean(n),r.delete(o))}))},e}();var At=function(){function e(e,t){this._store=e,this._pageGetter=t}return e.prototype.copy=function(e,t){t||(t=e);var i=this._serialize(e,t);return this._store.setMeta({$clipboard:i}),i},e.prototype.paste=function(e,t,i,n,o){var r;if(void 0===o&&(o=this._updateCurrentCell),n=n||0,null===(r=i=i||this._store.getMeta().$clipboard)||void 0===r?void 0:r.data.length){var a=x(e),s=a[0],l=a[1],c=a[2],u=x(t),d=u[0],h=u[1],f=this._pageGetter(c),p=x(i.from||0),v=p[0],g=p[1],_=i.data,m=[],y=s-v,b=l-g;if(0===n)for(var w=_[0].length-1,C=0;C<=_.length-1;C++)for(var E=0;E<=w;E++){var S=_[C][E],I=s+C,k=l+E;(M=this._updateCell(I,k,c,S,y,b,o))&&m.push(M)}if(1===n)for(C=s;C<=d;C++)for(E=l;E<=h;E++){k=E-l,S=_[I=C-s][k];(M=this._updateCell(C,E,c,S,y,b,o))&&m.push(M)}if(2===n)for(I=0,C=s;C<=d;C++){k=0;I===_.length&&(I=0);for(E=l;E<=h;E++){k===_[0].length&&(k=0);S=_[I][k];var M,O=C-(v+I),A=E-(g+k);(M=this._updateCell(C,E,c,S,O,A,o))&&m.push(M),k++}I++}f.parseBlock(m)}},e.prototype.clean=function(e,t,i){i=i||255;for(var n=x(e),r=n[0],a=n[1],s=n[2],l=x(t),c=l[0],u=l[1],d=this._pageGetter(s),h=[],f=[],p=r;p<=c;p++)for(var v=a;v<=u;v++){var g=d.getCell(p,v),_=w(p,v,s),m=255===i?{}:o({},g);if(1&i){var y=this._store.getTriggerList(_);y&&f.push.apply(f,y),delete m.value}h.push([p,v,m])}d.parseBlock(h),this._refreshRelatedFormulas(f)},e.prototype._refreshRelatedFormulas=function(e){var t=this;Dt(e).forEach((function(e){return t._store.refresh(e)}))},e.prototype._serialize=function(e,t){for(var i=x(e),n=i[0],r=i[1],a=i[2],s=x(t),l=s[0],c=s[1],u=this._pageGetter(a),d={from:e,data:[]},h=n;h<=l;h++){for(var f=[],p=r;p<=c;p++){var v=u.getCell(h,p),g=this._store.getMath(w(h,p,a)),_=void 0;g&&(_=g.source);var m=[v?o({},v):null];_&&m.push(_),f.push(m)}d.data.push(f)}return d},e.prototype.reset=function(){this._store.setMeta({$clipboard:null})},e.prototype.move=function(e,t){for(var i=t||this._store.getMeta().$clipboard,n=i.data,o=i.from,r=x(o),a=r[0],s=r[1],l=r[2],c=n.length,u=n[0].length,d=x(e),h=d[0],f=d[1],p=d[2],v=[],g=[],_=this._pageGetter(p),m={id:o,h:c,w:u},y=0;y<c;y++)for(var b=0;b<u;b++){var C=n[y][b],E=C[0],S=C[1],I=w(a+y,s+b,l),k=this._store.getTriggerList(I);if(k){var M=this._getTriggersOutsideCutRange(k,o,c,u);M.length&&v.push.apply(v,M)}var O=h+y,A=f+b;if(E){if(S){var D=this._pageGetter(l).getContext(),P=this._store.moveMath(S,h-a,f-s,p,m,D,_.getContext());E.value="="+P}g.push([O,A,E])}else g.push([O,A,{}])}_.parseBlock(g),this._updateRelatedFormulas(v,h-a,f-s,p,m)},e.prototype._updateRelatedFormulas=function(e,t,i,n,o){var r=this;Dt(e).forEach((function(e){var a=x(e)[2],s=r._store.getMath(e),l=r._pageGetter(a).getContext(),c=r._store.moveMath(s,t,i,n,o,l);r._store.setMath(e,c,l)}))},e.prototype._getTriggersOutsideCutRange=function(e,t,i,n){var o=[];return e.forEach((function(e){wt(t,i,n,e,1,1)||o.push(e)})),o},e.prototype._updateCell=function(e,t,i,n,r,a,s){var l=n[0],c=n[1],u=this._pageGetter(i),d=l?o({},l):{value:null};d.formula=c?"="+this._store.transposeMath(c,r,a):null;var h=s(u.getCell(e,t)||{},d);return h?[e,t,h]:null},e.prototype._updateCurrentCell=function(e,t){return t.formula&&(t.value=t.formula),t},e.prototype.fromCSV=function(e,t,i){return void 0===t&&(t="\n"),void 0===i&&(i="\t"),{data:e.split(t).map((function(e){return e.split(i).map((function(e){return[{value:e}]}))}))}},e}();function Dt(e){var t=new Set(e);return Array.from(t)}var Pt=function(){function e(e){var t=this;this._cfg=e||{strict:!1},this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:function(e){return t._pageName2ID.get(e)},pageName:function(e){return t._pageNames[e]},pageObj:function(e){return t._pages[e]},name:function(e,i,n){var o,r=e.length,a=i.substr(e[r-2],e[r-1]);if(e[r-6]===u){var s=i.substr(e[r-5],e[r-4]);o=t._ranges.toId(s+"!"+a)||t._ranges.toId(a)}else o=t._ranges.toId(n.pageName(n.z)+"!"+a)||t._ranges.toId(a);e.push(p,o||-1,0)},z:0};var i=this._store=new It(o(o({},this._cfg),{get:function(e){var i=x(e),n=i[0],o=i[1],r=i[2];return t._pages[r].getValue(n,o)},set:function(e,n,o,r){var a=x(e),s=a[0],l=a[1],c=a[2],u=t._pages[c].getCell(s,l,!0),d=r?null:"number"==typeof u.spill?u.spill:n||0===n?u.source:null;if(3===o){if(r>=0&&(u.spill=r,u.source!==r))return!1;u.source=r=null}else if(null===n&&!r&&u.source)return!1;r&&(e!==r&&u.source!==r&&(u.value||0===u.value||"number"==typeof u.source&&u.source!==r)&&t._pages[c].throwError("spill error"));u.source!==r&&(u.source=r);var h=2===o||3===o;if((null==o||h)&&(o=u.$format||0),u.$format=o,"string"==typeof n&&1!=o&&n){var f=parseFloat(n);h&&(f=f.toString()),f==n&&(n=parseFloat(n))}var p=u.value!==n;return p&&(u.value=n),"number"==typeof d&&i.triggerSet(new Set([d])),p}})),n=this._pages[63]=new kt(63,this._store,this._parseContext);this._ranges=new Ot(this._store,n,this.getPage.bind(this)),this._cm=new At(this._store,this.getPage.bind(this))}return e.prototype.addPage=function(e){for(;this._pages[this._pCounter];)this._pCounter++;var t=this._pCounter,i=new kt(t,this._store,this._parseContext);return this._pageName2ID.set(e,t),this._pages[t]=i,this._pageNames[t]=e,i},e.prototype.renamePage=function(e,t){if(e!==t){var i=this._pageName2ID.get(e);this._pageName2ID.delete(e),this._pageName2ID.set(t,i),this._pageNames[i]=t,this._ranges.renamePage(e,t);var n=this._pages[i].getContext();this._store.regenerate(i,!1,n)}},e.prototype.removePage=function(e){var t=this._pageName2ID.get(e),i=this._pages[t].getContext();this._pageName2ID.delete(e),this._pages[t]=this._pageNames[t]=null,this._pCounter=0,this._ranges.renamePage(e,null),this._store.regenerate(t,!0,i)},e.prototype.getPage=function(e){return"string"==typeof e&&(e=this._pageName2ID.get(e)),this._pages[e]},e.prototype.getRanges=function(){return this._ranges},e.prototype.getStore=function(){return this._store},e.prototype.find=function(e,t){var i=t.firstOnly,n=t.resultsLimit,o=void 0===n?100:n,r=[];return this._pages.forEach((function(t,n){t.eachCell((function(t,a,s){var l=s.value;e(l)&&(i&&0===r.length||!i&&r.length<o)&&r.push({id:w(t,a,n),value:l})}))})),r},e.prototype.getCopyManager=function(){return this._cm},e}();t.CLEAN_MODE_ALL=255,t.CLEAN_MODE_DATA=1,t.D_COMMON=0,t.D_STRING=1,t.DataPage=kt,t.DataStore=Pt,t.PASTE_MODE_OVERLAP=0,t.PASTE_MODE_RANGE=1,t.PASTE_MODE_REPEAT=2,t.Store=It,t.T_ARG=h,t.T_DATA=p,t.T_ERROR=l,t.T_METHOD=c,t.T_NAME=d,t.T_NUMBER=g,t.T_OPERATOR=v,t.T_PAGE=u,t.T_PLACEHOLDER=s,t.T_RANGE=f,t.T_SPACE=_,t.T_TEXT=a,t.addMethod=function(e,t){bt[e]=t},t.column=E,t.fromId=x,t.methodGroups=yt,t.methods=bt,t.page=S,t.row=C,t.str2id=function(e){var t=[];return $(t,e,0),t[1]},t.str2pos=function(e){var t=[];return $(t,e,0),x(t[1]).slice(0,2)},t.str2range=function(e){var t=[];e.split(":").map((function(e){return $(t,e,0)}));var i=x(t[1]),n=i[0],o=i[1],r=x(t[4]);return[n,o,r[0],r[1]]},t.toId=w},function(e,t,i){"use strict";var n,o,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.DataDriver=t.DragEvents=t.DataEvents=t.TreeFilterType=void 0,function(e){e.all="all",e.level="level",e.leafs="leafs"}(n||(t.TreeFilterType=n={})),function(e){e.afterAdd="afteradd",e.beforeAdd="beforeadd",e.removeAll="removeall",e.beforeRemove="beforeremove",e.afterRemove="afterremove",e.change="change",e.filter="filter",e.dataRequest="dataRequest",e.load="load",e.loadError="loaderror",e.beforeLazyLoad="beforelazyload",e.afterLazyLoad="afterlazyload",e.beforeItemLoad="beforeItemLoad",e.afterItemLoad="afterItemLoad"}(o||(t.DataEvents=o={})),function(e){e.beforeDrag="beforeDrag",e.dragStart="dragStart",e.dragOut="dragOut",e.dragIn="dragIn",e.canDrop="canDrop",e.cancelDrop="cancelDrop",e.beforeDrop="beforeDrop",e.afterDrop="afterDrop",e.afterDrag="afterDrag"}(r||(t.DragEvents=r={})),function(e){e.json="json",e.csv="csv",e.xml="xml"}(a||(t.DataDriver=a={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOnlyPermanentFilters=t.hasJsonOrArrayStructure=t.isTreeCollection=t.copyWithoutInner=t.toDataDriver=t.toProxy=t.dhxError=t.dhxWarning=t.isDebug=t.findByConf=t.naturalCompare=t.isEqualObj=void 0;var n=i(0),o=i(33),r=i(68);t.isEqualObj=function(e,t){for(var i in e)if(e[i]!==t[i]||Array.isArray(e[i]))return!1;return!0},t.naturalCompare=function(e,t){if(isNaN(e)||isNaN(t)){var i=[],n=[];for(e.replace(/(\d+)|(\D+)/g,(function(e,t,n){i.push([t||1/0,n||""])})),t.replace(/(\d+)|(\D+)/g,(function(e,t,i){n.push([t||1/0,i||""])}));i.length&&n.length;){var o=i.shift(),r=n.shift(),a=o[0]-r[0]||o[1].localeCompare(r[1]);if(a)return a}return i.length-n.length}return e-t},t.findByConf=function(e,t){if("function"==typeof t){if(t.call(this,e))return e}else if(t.by&&t.match&&e[t.by]===t.match)return e},t.isDebug=function(){var e=window.dhx;if(void 0!==e)return void 0!==e.debug&&e.debug},t.dhxWarning=function(e){console.warn(e)},t.dhxError=function(e){throw new Error(e)},t.toProxy=function(e){var t=typeof e;return"string"===t?new o.DataProxy(e):"object"===t?e:void 0},t.toDataDriver=function(e){if("string"==typeof e){var t=window.dhx,i=t&&t.dataDrivers||r.dataDrivers;if(i[e])return new i[e];console.warn("Incorrect data driver type:",e),console.warn("Available types:",JSON.stringify(Object.keys(i)))}else if("object"==typeof e)return e},t.copyWithoutInner=function(e,t){var i={};for(var n in e)n.startsWith("$")||t&&t[n]||(i[n]=e[n]);return i},t.isTreeCollection=function(e){return Boolean(e.getRoot)},t.hasJsonOrArrayStructure=function(e){if("object"==typeof e)return!0;if("string"!=typeof e)return!1;try{var t=JSON.parse(e);return"[object Object]"===Object.prototype.toString.call(t)||Array.isArray(t)}catch(e){return!1}},t.isOnlyPermanentFilters=function(e){return!(!e||(0,n.isEmptyObj)(e))&&Object.keys(e).every((function(t){var i;return null===(i=e[t].config)||void 0===i?void 0:i.permanent}))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDateFormat=t.isDHXFormat=t.getExcelFormatFromDHX=t.getDHXDateFormat=t.getExcelDateFromString=t.isTimeCheck=t.timeStringToJS=t.timeDiff=t.dateDiff=t.addTime=t.addDay=t.excelDateToJSDate=t.getExcelDateFromJs=void 0;var n=i(19);function o(e){return e?25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5:null}function r(e,t){return isNaN(e)?0:Math.min(t,Math.max(0,e))}function a(e){var t,i,n=0,o=0,a=0;if("string"==typeof e){var s=e.match(/\d+/g);if(!s)return e;e.toLowerCase().includes("pm")&&(t=!0),e.toLowerCase().includes("am")&&(i=!0),o=r(+s[0],23),(t||i)&&(t&&o<12&&(o+=12),i&&12===o&&(o=0)),n=r(+s[1],59),a=r(+s[2],59)}return new Date(1991,0,1,o,n,a)}t.getExcelDateFromJs=o,t.excelDateToJSDate=function(e){var t=new Date(Math.round(86400*(e-25569)*1e3));return new Date(t.getTime()+6e4*t.getTimezoneOffset())},t.addDay=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.addTime=function(e,t){return void 0===t&&(t=36e5),new Date(e.getTime()+t)},t.dateDiff=function(e,t){var i=t.getTime(),n=e.getTime();return parseInt("".concat((i-n)/864e5))},t.timeDiff=function(e,t){var i=new Date,n=new Date;i.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds());var o=n.getTime(),r=i.getTime();return parseInt("".concat(o-r))},t.timeStringToJS=a,t.isTimeCheck=function(e){return/([0-2][0-9]:[0-5][0-9]:[0-5][0-9])/i.test(e)},t.getExcelDateFromString=function(e,t){if("string"!=typeof e)return e;var i=t.id,r=t.mask,s=e;if(i.includes("date")&&(s=(0,n.stringToDate)(e,c(r),!0)?o((0,n.stringToDate)(e,c(r))):e),"time"===i){var l=a(e);s="string"==typeof l?l:o(l)}return s};var s={mmmm:"%F",mmm:"%M",mm:"%m",m:"%n",dddd:"%I",ddd:"%D",dd:"%d",d:"%j",y:"%y",yy:"%y",yyyy:"%Y",w:"",ww:"",q:"",h:"%G",hh:"%H","AM/PM":"%A","am/pm":"%a","A/P":"%A","a/p":"%a",n:"%i",nn:"%i",s:"%s",ss:"%s"},l={h:"%g",hh:"%h"};function c(e){if(u(e))return e;var t=e.toLowerCase(),i="",n="",o="",r="",a=t.includes("am/pm")||t.includes("a/p");a&&(e=(e=(e=(e=e.replace("AM/PM","%A")).replace("am/pm","%a")).replace("A/P","%A")).replace("a/p","%a"));for(var c=0;c<=e.length;c++){for(var d=e[c],h="",f=c;!h&&f<e.length;){var p=e[f];h=s[p],f++}"m"===d&&(r.includes("h")||h.includes("s"))&&(d="n"),n&&d!==o&&(i+=n.includes("h")&&a?l[n]:s[n]||o,r=s[n]?n:r,n=""),n+=d,o=d}return i}function u(e){return e.includes("%")}t.getDHXDateFormat=c,t.getExcelFormatFromDHX=function(e){if(!u(e))return e;var t=e;return Object.keys(s).forEach((function(e){for(var i=s[e];i&&t.includes(i);)t=t.replace(i,e)})),Object.keys(l).forEach((function(e){for(var i=l[e];i&&t.includes(i);)t=t.replace(i,e)})),t},t.isDHXFormat=u,t.isDateFormat=function(e){if(e.toLowerCase().includes("date"))return"date";if(e.toLowerCase().includes("time"))return"time";if(e.includes("#")||e.includes("0"))return!1;var t=u(e)?e:c(e),i=["%F","%M","%m","%n","%I","%D","%d","%j","%y","%Y"].find((function(e){return t.includes(e)})),n=["%G","%H","%i","%s","%g","%h"].find((function(e){return t.includes(e)}));return!(!i&&!n)&&(i?"date":"time")}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateSpans=t.setAutoHeightToRow=t.removeRowsCss=t.updateRowsIndex=t.updateColumns=t.getIndexRowCell=t.getHeaderCell=void 0;var r=i(12),a=i(2);function s(e,t,i){return void 0===i&&(i=!0),'<div class="dhx_custom_header_cell">\n\t\t\t'.concat(e,'\n\t\t<div class="dhx_resizer_grip_wrap">\n\t\t\t<div class="dhx_resizer_grip" data-dhx-id=').concat(t,'>\n\t\t\t\t<div class="dhx_resizer_grip_line"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t').concat(i?'<i class="dxi dxi-dots-vertical dhx_header_icon" data-dhx-id='.concat(t,"></i>"):"","\n\t</div>")}t.getHeaderCell=s,t.getIndexRowCell=function(e){return'<div class="dhx_custom_index_cell">'.concat(e,'\n\t<div class="dhx_resizer_grip_wrap">\n\t\t\t<div class="dhx_resizer_grip" data-dhx-id=').concat(e-1,'>\n\t\t\t\t<div class="dhx_resizer_grip_line"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>')},t.updateColumns=function(e){var t=e.columns,i=0;null==t||t.map((function(e,t){if(e.width=e.width||120,i+=e.hidden?0:e.width,"$index"!==e.id){var n=(0,a.getLetterFromNumber)(t);e.header=[{text:s(n,t),css:""}],e.$letter=n}})),e.$totalWidth=i},t.updateRowsIndex=function(e){e.map((function(e,t){e.$index=t+1}))},t.removeRowsCss=function(e){e.data.map((function(t){e.removeRowCss(t.id,"dhx_selected_row")}))},t.setAutoHeightToRow=function(e,t,i,s){var l=i.getMeta(),c=l.cols,u=l.rows,d=(0,a.getCellIds)(e,t),h=d.row,f=d.col,p="wrap"===s,v=(0,a.getCellInfo)(e,i,t),g=n({},u[h]),_=v.value,m=v.format;if(_){var y=(0,r.getFormattedValue)(_,m),b=n({},c[f]),w=b.width,x=b.wrappedRows,C=(0,a.getTextHeight)(y,w),E=g.wrap,S=(g.height,g.changedByUser);if(E||(E=new Map,g.wrap=E),p?E.set(f,C):E.delete(f),x||(b.wrappedRows=new Set),p?b.wrappedRows.add(h):E.size||b.wrappedRows.delete(h),!S){var I=[];E.forEach((function(e,t){f!==t&&I.push(e)}));var k=Math.max.apply(Math,o(o([],I,!1),[0],!1));return g.height=Math.max(k,p?C:t.config.rowHeight),u[h]=n({},g),c[f]=n({},b),i.setMeta({rows:u}),!0}}},t.updateSpans=function(e,t,i,o){var r=o.getMeta().merged;if(null==r?void 0:r.length){var a=!1,s=r.map((function(o){var r=o.from,s=o.to;if(e&&(r.column>=i||s.column>=i)){var l={from:u=n({},r),to:n(n({},s),{column:s.column+e})};if(r.column>=i&&e>0||r.column>i&&e<0){var c=u.column;u.column=c+e<0?0:c+e}return a=!0,l}if(t&&(r.row>=i||s.row>=i)){var u;l={from:u=n({},r),to:n(n({},s),{row:s.row+t})};if(r.row>=i&&t>0||r.column>i&&t<0){var d=u.row;u.row=d+t<0?0:d+t}return a=!0,l}return{from:r,to:s}}));if(a)return o.setMeta({merged:s}),s}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSpan=t.getShifts=t.getSpans=t.getCells=t.getTreeCell=t.getHandlers=void 0;var o=i(0),r=i(1),a=i(37),s=i(18),l=i(9),c=i(129),u=i(4),d=i(22),h=i(24);function f(e,t,i,n,o){t=(0,u.locateNodeByClassName)(o.target,"dhx_grid-fixed-cols-wrap")?0:t;var r=(0,u.locateNodeByClassName)(o.target,"dhx_grid-cell"),a=(0,u.locateNodeByClassName)(o.target,"dhx_span-cell");if((r||a)&&n){var s=r?r.parentNode:a,l=(r||a).getAttribute("data-dhx-col-id"),c=i.filteredColumns.find((function(e){return e.id===l})),d=s.getAttribute("data-dhx-id"),h=(i.$data||i.data).find((function(e){return e.id.toString()===d}));n.toLocaleLowerCase().includes("touch")?i._events.fire(n,[h,c,o]):i.events.fire(n,[h,c,o])}}function p(e,t,i,o){var a=o.$editable&&o.$editable.row===t.id&&o.$editable.col===i.id,s=!o.fixedColumns.left.length||"leftFixedCols"===o.$renderFrom,l=i.align?"dhx_align-".concat(i.align):"dhx_align-left",c="";s&&(c="dhx_tree-cell ".concat(i.$cellCss[t.id]||""," ").concat(l),t.$items&&(c+=" dhx_grid-expand-cell"),a&&(c+=" dhx_tree-editing-cell"),o.dragMode&&!a&&(c+=(t.$drophere?" dhx_grid-cell--drophere":"")+(t.$dragtarget?" dhx_grid-cell--dragtarget":"")));var u=(0,d.getTreeCellWidthOffset)(t);return(0,r.el)(".dhx_grid-cell",n({class:c,style:{width:i.$width,height:t.$height,padding:t.$items?0:"0 0 0 ".concat(u,"px")},"data-dhx-col-id":i.id},{role:"gridcell","aria-colindex":1}),s?[t.$items?(0,r.el)(".dhx_grid-expand-cell-icon",n(n({class:t.$opened?"dxi dxi-chevron-up":"dxi dxi-chevron-down","data-dhx-id":t.id},function(e){return{role:"button","aria-label":e.$opened?"Collapse group":"Expand group"}}(t)),{style:{padding:t.$level?"0 0 0 ".concat(4+u,"px"):"0 0 0 4px"}})):null,(0,r.el)(".dhx_tree-cell",{class:l+"".concat(o.autoHeight?" dhx_tree-cell_auto-height":"")},[e])]:null)}function v(e,t,i){return(0,c.getEditor)(e,t,i)}function g(e){var t=e.$scrollBarWidth,i=e.$totalWidth-e.$width+h.BORDERS+t.y,n=e.$totalHeight-e.$height+e.$headerHeight+e.$footerHeight+h.BORDERS+t.x;return{x:i>0?i-e.scroll.left:0,y:n>0?n-e.scroll.top:0}}t.getHandlers=function(e,t,i){return{onclick:[f,e,t,i,l.GridEvents.cellClick],onmouseover:[f,e,t,i,l.GridEvents.cellMouseOver],onmousedown:[f,e,t,i,l.GridEvents.cellMouseDown],ondblclick:[f,e,t,i,l.GridEvents.cellDblClick],oncontextmenu:[f,e,t,i,l.GridEvents.cellRightClick],ontouchstart:[f,e,t,i,l.GridEvents.cellMouseDown],ontouchmove:[f,e,t,i,l.GridSystemEvents.cellTouchMove],ontouchend:[f,e,t,i,l.GridSystemEvents.cellTouchEnd]}},t.getTreeCell=p,t.getCells=function(e){if(!e.data||!e.filteredColumns)return[];var t,i=e.$positions,o=e.data?e.data.slice(i.yStart,i.yEnd):[],a=e.filteredColumns.slice(i.xStart,i.xEnd),l=e.selection.getCell(),c=!0,u=document.querySelector(".dhx_drag-ghost");if(u){var h=Array.from(u.querySelectorAll(".dhx_grid-row")).map((function(e){return Number(e.getAttribute("aria-rowindex"))-1}));h.length&&(t=h.map((function(t){return e.data[t]})).filter((function(e){return e&&!o.find((function(t){return t.id===e.id}))})),o.push.apply(o,t))}return o.map((function(u,h){var f=null==t?void 0:t.some((function(e){return e.id===u.id})),g=o.length-1===h,_="";return e.rowCss&&(_=e.rowCss(u)),u.$css&&(_+=u.$css),(0,r.el)(".dhx_grid-row",n({style:{height:g?u.$height+1:u.$height,display:f?"none":null},"data-dhx-id":u.id,class:_,_key:u.id,_flags:r.KEYED_LIST},f?{}:{role:"row","aria-rowindex":i.yStart+h+1}),u.$customRender?[u.$customRender(u,e)]:a.map((function(t,o){var a,h;if(!t.hidden){var f=u[t.id],g=(0,d.getEditorOptions)(t,u);(t.editable||e.editable&&!1!==t.editable)&&("select"===t.editorType||"combobox"===t.editorType||"multiselect"===t.editorType)&&g&&(f=(f="string"==typeof f&&"multiselect"===t.editorType?f.split(",").map((function(e){return e.trim()})):[null==f?void 0:f.toString()]).map((function(e){var t,i;return null!==(i=null===(t=g.find((function(t){return t.id&&t.id.toString()===e})))||void 0===t?void 0:t.value)&&void 0!==i?i:e})).join(", "));var _=(0,d.toFormat)(f,t.type,t.format),m=t.template?t.template(_,u,t):"boolean"!=typeof(h=_)&&"boolean"!==t.type||"string"==typeof h?h||0===h?h:"":"".concat(Boolean(h));"string"==typeof m&&(m=(0,s.isHtmlEnable)(e,t)?(0,r.el)("div.dhx_grid-cell__content",n({".innerHTML":m},{role:"button","aria-label":"Edit content"})):m);var y="".concat(t.$cellCss&&t.$cellCss[u.id]||""," dhx_").concat(t.type,"-cell").replace(/\s+/g," "),b=t.$width,w=e.$editable&&e.$editable.row===u.id&&e.$editable.col===t.id&&!e.$editable.isSpan,x=e.leftSplit,C=e.filteredColumns;return(w||"boolean"===t.type&&(e.editable&&(null===(a=t.editable)||void 0===a||a)||!e.editable&&t.editable))&&(m=v(u,t,e).toHTML(),y+=" dhx_grid-cell__editable",x===C.indexOf(t)+1&&(b-=1)),"tree"===e.type&&e.firstColId===t.id?p(m,u,t,e):(e.dragMode&&!w&&(y+=(u.$drophere?" dhx_grid-cell--drophere":"")+(u.$dragtarget?" dhx_grid-cell--dragtarget":"")),t.align&&(y+=" dhx_align-".concat(t.align)),(0,s.isHtmlEnable)(e,t)&&(y+=" dhx_grid-cell__content_html-enable"),e.autoHeight&&(y+=" dhx_grid-cell__content_auto-height"),(0,r.el)(".dhx_grid-cell",n({class:y,style:{width:b,height:u.$height+"px"},_key:t.id,"data-dhx-col-id":t.id},function(t,i,o,r){return n({role:"gridcell","aria-colindex":i,"aria-readonly":r?"false":"true"},function(t,i){var n={tabindex:-1};return l?l.row.id===i.id&&l.column.id===t.id&&(n.tabindex=0):c&&(n.tabindex=0,n.onkeydown=function(t){if(e.selection&&!l&&"Tab"===t.key){var i=t.target.parentNode.getAttribute("data-dhx-id"),n=t.target.getAttribute("data-dhx-col-id");n&&i&&(e.selection.setCell(i,n),l=e.selection.getCell()),c=!1}}),n}(t,u))}(t,i.xStart+o+1,0,e.editable)),[m]))}})))}))},t.getSpans=function(e,t){var i,n,c=[],u=e.columns,f=e.filteredColumns,p=e.data,_=e.currentSpans,m=e.bottomSplit;if(!f.length||!_)return null;for(var y=e.fixedColumns.right.length,b=_.filter((function(t){var i;return null===(i=t.$renderFrom)||void 0===i?void 0:i.includes(e.$renderFrom)})),w=b.sort((function(e,t){return"string"==typeof e.row&&"string"==typeof t.row?e.row.localeCompare(t.row):e.row-t.row})),x=function(_){var b=w[_].row,x=w[_].column,C=w[_].rowspan||1,E=w[_].colspan||1,S=w[_].text,I=w[_].css,k=w[_].$markCss,M=w[_].$type,O=t===l.Split.bottom&&e.$renderFrom.endsWith("FixedCols"),A=O?e.$data:p,D=(0,o.findIndex)(f,(function(e){return"".concat(e.id)==="".concat(x)})),P=(0,o.findIndex)(A,(function(e){return"".concat(e.id)==="".concat(b)}));if(D<0||P<0)return"continue";if(O){var F=e.$data[P+C-1];if(!p.find((function(e){return e.id===(null==F?void 0:F.id)})))return"continue"}var T=f[D],R=A[P];if(T.hidden)return"continue";var V=void 0;V=(0,o.isDefined)(S)?S.toString():void 0===R[x]?"":(0,d.toFormat)(R[x],T.type,T.format);var H=T.template||function(e,t,i){return e||0===e?e:""};V=H(V,R,T);var L=(0,s.isHtmlEnable)(e,T);V="string"==typeof V?(0,r.el)("div.dhx_span-cell-content",{".innerHTML":L?V:null},L?null:V):V;var j=void 0;if("bottomFixedRows"===e.$renderFrom||O){var N=A.length-m;j=P<N?-(0,s.getTotalHeight)(A.slice(P,N)):(0,s.getTotalHeight)(A.slice(N,P))}else j=(0,s.getTotalHeight)(A.slice(0,P))-(t?0:1);var $=0;if("rightFixedCols"===e.$renderFrom){var z=f.length-e.fixedColumns.right.length;$=D<z?-(0,s.getTotalWidth)(f.slice(D,z)):(0,s.getTotalWidth)(f.slice(z,D))}else for(var B=D-1;B>=0;B--)$+=f[B].$width;var W=R.$items&&0===D,G=D===f.length-1,U=D+(0,a.getReducedColspan)(u,x,E)===f.length,q=y&&D===f.length-y,X=t===l.Split.bottom&&e.fixedRows.bottom.find((function(e){return e.id===b})),Y=m&&P+C>A.length-m,K=y&&D+E===f.length-y,J=T.header[0].text?" dhx_span-cell":" dhx_span-cell dhx_span-cell--title";J+=W?" dhx_span-expand-cell":"",J+=k?" ".concat(k):"",J+=I?" ".concat(I):"",J+=0===P?" dhx_span-first-row":"",J+=P+C===A.length?" dhx_grid__span_bottom--last-row":"",J+=0===D||q?" dhx_span-first-col":"",J+=G||U?" dhx_span-last-col":"",J+=1===E?" dhx_span-".concat(T.type||"string","-cell"):" dhx_span-string-cell",J+=T.align?" dhx_align-".concat(T.align):" dhx_".concat(M,"-cell"),J+=X?" dhx_grid__span_bottom--all-fixed":"",J+=Y?" dhx_grid__span_bottom--part-fixed":"",J+=K?" dhx_grid__span_right--before-fixed":"";var Z=(0,o.findIndex)(u,(function(e){return e.id===x})),Q=E>1?(0,a.getWidth)(u,E,Z):T.$width,ee=void 0;if(C>1){if(ee=(0,a.getHeight)(A,C,P),t===l.Split.top&&e.$renderFrom.endsWith("FixedCols")){var te=P+C-A.length;if(te>0){var ie=e.fixedRows.top.length;ee+=(0,s.getTotalHeight)(e.$data.slice(ie,ie+te))}}}else ee=R.$height;var ne=null;if((null===(i=e.$editable)||void 0===i?void 0:i.isSpan)&&e.$editable.row===b&&e.$editable.col===x||"boolean"===T.type&&(e.editable&&(null===(n=T.editable)||void 0===n||n)||!e.editable&&T.editable)){var oe=e.topSplit,re=e.fixedColumns.left.length,ae=re&&D+E<=re||y&&D>=f.length-y,se=P<(oe||0)||P+C>A.length-(m||0),le=oe&&P+C<=oe||m&&P>=A.length-m,ce=D<(re||0)||D+E>f.length-(y||0);if("render"===e.$renderFrom||ae&&!se||le&&!ce){var ue=e.$height,de=e.$scrollBarWidth,he=e.scroll,fe=e.fixedRows,pe=e.fixedColumns,ve=w[_].text,ge=0;if(V=v(R,T,e).toHTML(ve),J+=" dhx_span__editable",!le){var _e=(0,s.getTotalHeight)(fe.top),me=(0,s.getTotalHeight)(fe.bottom),ye=de.yState?ue-e.$headerHeight-e.$footerHeight-de.x-h.BORDERS:e.$totalHeight,be=j+ee-he.top,we=j-_e<he.top,xe=be>ye-me;we&&xe&&de.xState&&(ge=1),j=we?he.top+_e-(_e&&!ae?1:0):j,ee=xe?ye-j-me+he.top-ge:we?be-_e:ee}if("render"===e.$renderFrom){if(ne=12,pe.left.find((function(e){return e.id===x}))&&($=he.left+(0,s.getTotalWidth)(pe.left.slice(0,D)),!ae)){var Ce=(0,s.getTotalWidth)(pe.left.slice(D,re));Q=Q-he.left>Ce?Q-he.left:Ce}if(fe.top.find((function(e){return e.id===b}))&&(j=he.top+(0,s.getTotalHeight)(fe.top.slice(0,P)),!le)){var Ee=(0,s.getTotalHeight)(e.fixedRows.top.slice(P,e.topSplit));ee=ee>0?Ee+ee-ge:Ee}if(pe.right.find((function(e){return e===f[f.indexOf(T)+E-1]}))){var Se=f.length,Ie=g(e),ke=Se-f.indexOf(T)-E,Me=(Ce=ke?(0,s.getTotalWidth)(pe.right.slice(0,-ke)):(0,s.getTotalWidth)(pe.right),(0,s.getTotalWidth)(f.slice(D,Se-y)));$=Ie.x>Me?$-Ie.x+Me:$,ae||(Q=Ie.x<Me?Q-Ie.x-1:Ce-1)}if(fe.bottom.find((function(e){return e===A[A.indexOf(R)+C-1]}))){Se=A.length,Ie=g(e);var Oe=Se-A.indexOf(R)-C,Ae=(Ee=Oe?(0,s.getTotalHeight)(fe.bottom.slice(0,-Oe)):(0,s.getTotalHeight)(e.fixedRows.bottom),(0,s.getTotalHeight)(A.slice(P,Se-m)));j=Ie.y>Ae?j-Ie.y+Ae:j,le||(ee=Ie.y<Ae?Ee+ee-ge-(Oe?-1:ge?0:1):Ee-(Oe?-1:1))}}re===D+1&&(Q-=1),D===f.length-y&&($+=1,Q-=1)}}c.push((0,r.el)("div",{class:J,style:{width:Q,height:ee,top:j,left:$,zIndex:ne},"data-dhx-col-id":x,"data-dhx-id":b,"aria-hidden":"true"},[W?(0,r.el)(".dhx_span-expand-cell-icon",{class:R.$opened?"dxi dxi-chevron-up":"dxi dxi-chevron-down","data-dhx-id":R.id,role:"button","aria-label":R.$opened?"Collapse group":"Expand group",style:{padding:"0 0 0 ".concat(4+(0,d.getTreeCellWidthOffset)(R),"px")}}):null,V]))},C=0;C<w.length;C++)x(C);return c},t.getShifts=function(e){var t=e.filteredColumns.slice(0,e.$positions.xStart),i=e.data.slice(0,e.$positions.yStart);return{x:(0,s.getTotalWidth)(t),y:(0,s.getTotalHeight)(i)}},t.normalizeSpan=function(e,t,i){var r=t.topSplit,a=void 0===r?0:r,s=t.bottomSplit,c=void 0===s?0:s,u=t.columns,d=(0,h.getCurrFixedCols)(t,l.Split.left).length,f=(0,h.getCurrFixedCols)(t,l.Split.right).length,p=e.column,v=e.row,g=e.colspan,_=e.rowspan,m=u.findIndex((function(e){return e.id==p})),y=(0,o.isDefined)(e.text)?"string":u[m].type,b=i.getIndex(v),w=m+(g?g-1:0),x=b+(_?_-1:0),C=[],E=m<d,S=b<a,I=w>=u.length-f,k=x>=i.getLength()-c,M=[b,x],O=[m,w];return w>=d&&x>=a&&m<u.length-f&&b<i.getLength()-c&&C.push("render"),E&&C.push("leftFixedCols"),I&&C.push("rightFixedCols"),!S||E||I?S&&!C.includes("render")&&C.push("render"):C.push("topFixedRows"),!k||E||I?k&&!C.includes("render")&&C.push("render"):C.push("bottomFixedRows"),n(n({},e),{$renderFrom:C,$type:y,$rowsVisibility:M,$colsVisibility:O})}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(79),t),o(i(148),t),o(i(80),t),o(i(57),t)},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(86),t),o(i(174),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataProxy=void 0;var n=i(51),o=function(){function e(e,t){this.url=this._url=e,this.config=t}return e.prototype.updateUrl=function(e,t){for(var i in void 0===t&&(t={}),this._url=this.url=e||this._url,this.url+=this.url.includes("?")?"&":"?",t)this.config[i]=t[i],this.url+="".concat(i,"=").concat(encodeURIComponent(t[i]),"&");this.url=this.url.slice(0,-1)},e.prototype.load=function(){return n.ajax.get(this.url,void 0,this.config)},e.prototype.save=function(e,t){switch(t){case"delete":return n.ajax.delete(this.url,e,this.config);case"update":return n.ajax.put(this.url,e,this.config);default:return n.ajax.post(this.url,e,this.config)}},e}();t.DataProxy=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollView=t.scrollViewConfig=void 0;var n=i(0),o=i(1),r=i(4);t.scrollViewConfig={enable:!1,autoHide:!0,timeout:1e3,scrollHandler:function(){}};var a=function(){function e(e,i){var o;void 0===i&&(i={});var a=this;this.config=(0,n.extend)({enable:t.scrollViewConfig.enable,autoHide:t.scrollViewConfig.autoHide,timeout:t.scrollViewConfig.timeout,scrollHandler:t.scrollViewConfig.scrollHandler},i),this._wheelName=(0,r.isIE)()?"onmousewheel":"onwheel",this._getRootView=e,this._scrollYTop=this._scrollXLeft=this._runnerYTop=this._runnerXLeft=this._runnerHeight=this._runnerWidth=0,this._visibleYArea=this._visibleXArea=1,this._scrollWidth=(0,r.getScrollbarWidth)(),this._scrollHeight=(0,r.getScrollbarHeight)(),this._handlers=((o={onscroll:function(e){a.config.scrollHandler(e),a.update()}})[this._wheelName]=function(e){var t=!!(0,r.locateNodeByClassName)(e.target,"y-scroll");e.preventDefault();var i=40*((e.deltaY||-e.wheelDelta)>0?1:-1),n=a._getRefs().area;if(t){var o=n.scrollHeight-a._runnerHeight,s=a._scrollYTop+i;n.scrollTop=s<0?0:s>o?o:s}else{var l=n.scrollWidth-a._runnerWidth,c=a._scrollXLeft+i;n.scrollLeft=c<0?0:c>l?l:c}a.update()},o.onmousedownRunner=function(e){e.preventDefault();var t=!!(0,r.locateNodeByClassName)(e.target,"y-scroll"),i=a._getRefs(),n=i.area,o=i.runnerY,s=i.runnerX,l=n.getBoundingClientRect(),c=l.top+window.pageYOffset,u=l.bottom+window.pageYOffset,d=n.scrollHeight-a._runnerHeight,h=e.pageY-o.getBoundingClientRect().top-window.pageYOffset,f=l.left+window.pageXOffset,p=l.right+window.pageXOffset,v=n.scrollWidth-a._runnerWidth,g=e.pageX-s.getBoundingClientRect().left-window.pageXOffset,_=function(e){if(t){var i=e.pageY-h;n.scrollTop=i<=c?0:i>u?d:(i-c)/a._visibleYArea}else{var o=e.pageX-g;n.scrollLeft=o<=f?0:o>p?v:(o-f)/a._visibleXArea}a.update()},m=function(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",m),document.body.classList.remove("dhx-no-select")};document.body.classList.add("dhx-no-select"),document.addEventListener("mousemove",_),document.addEventListener("mouseup",m)},o.onmousedownArea=function(e){if(!(0,r.locateNodeByClassName)(e,"scroll-runner")){e.preventDefault();var t=!!(0,r.locateNodeByClassName)(e.target,"y-scroll"),i=a._getRefs(),n=i.area,o=i.runnerY,s=i.runnerX;t?n.scrollTop+=(e.pageY-o.getBoundingClientRect().top)/a._visibleYArea:n.scrollLeft+=(e.pageX-s.getBoundingClientRect().left)/a._visibleXArea,a.update()}},o.onmouseenter=function(e){if(!(0,r.locateNodeByClassName)(e,"scroll-runner")){var t=a._getRefs();if(t){var i=!!(0,r.locateNodeByClassName)(e.target,"y-scroll"),n=t.areaX,o=t.areaY;i&&a._runnerHeight>0?o.style.background="#eee":!i&&a._runnerWidth>0&&(n.style.background="#eee")}}},o.onmouseleave=function(e){if(!(0,r.locateNodeByClassName)(e,"scroll-runner")){var t=a._getRefs();if(t){var i=!!(0,r.locateNodeByClassName)(e.target,"y-scroll"),n=t.areaX,o=t.areaY;i&&a._runnerHeight>0?o.style.background="transparent":!i&&a._runnerWidth>0&&(n.style.background="transparent")}}},o)}return e.prototype.enable=function(){this.config.enable=!0,this._getRootView().redraw()},e.prototype.disable=function(){this.config.enable=!1,this._getRootView().redraw()},e.prototype.render=function(e,t){var i,n,r=this;if(void 0===t&&(t=""),!this.config.enable||!e.length)return e;t&&(this._uid=t);var a=this.config.enable?[(0,o.el)(".y-scroll",(i={},i[this._wheelName]=this._handlers[this._wheelName],i._ref=t?"scroll-y-area-".concat(t):"scroll-y-area",i.onmousedown=this._handlers.onmousedownArea,i.onmouseenter=this._handlers.onmouseenter,i.onmouseleave=this._handlers.onmouseleave,i.style={width:"6px",height:"100%",right:0,top:0,position:"absolute"},i),[(0,o.el)(".scroll-runner",{_ref:t?"scroll-y-runner-".concat(t):"scroll-y-runner",onmousedown:this._handlers.onmousedownRunner,style:{height:this._runnerHeight+"px",top:this._runnerYTop}})]),(0,o.el)(".x-scroll",(n={},n[this._wheelName]=this._handlers[this._wheelName],n._ref=t?"scroll-x-area-".concat(t):"scroll-x-area",n.onmousedown=this._handlers.onmousedownArea,n.onmouseenter=this._handlers.onmouseenter,n.onmouseleave=this._handlers.onmouseleave,n.style={width:"100%",height:"6px",left:0,bottom:0,position:"absolute"},n),[(0,o.el)(".scroll-runner",{_ref:t?"scroll-x-runner-".concat(t):"scroll-x-runner",onmousedown:this._handlers.onmousedownRunner,style:{width:this._runnerWidth+"px",left:this._runnerXLeft}})])]:null;return(0,o.el)(".scroll-view-wrapper",[(0,o.el)(".scroll-view",{onscroll:this._handlers.onscroll,_ref:t?"scroll-view-".concat(t):"scroll-view",_hooks:{didInsert:function(){r.update()},didRecycle:function(){r.update()}},style:{width:"calc(100% + ".concat(this._scrollWidth,"px)"),height:"calc(100% + ".concat(this._scrollHeight,"px)")}},e)].concat(a))},e.prototype.update=function(){var e=this._getRefs();if(e){var t=e.area,i=e.areaX,o=e.areaY,r=e.runnerY,a=e.runnerX;this._visibleYArea=t.clientHeight/t.scrollHeight,this._visibleXArea=t.clientWidth/t.scrollWidth,this._scrollYTop=t.scrollTop,this._scrollXLeft=t.scrollLeft,this._runnerYTop=this._scrollYTop*this._visibleYArea,this._runnerXLeft=this._scrollXLeft*this._visibleXArea,this._runnerHeight=this._visibleYArea<1?t.clientHeight*this._visibleYArea:0,this._runnerWidth=this._visibleXArea<1?t.clientWidth*this._visibleXArea:0;var s=r.style.top,l=a.style.left;r.style.opacity=1,r.style.top=this._runnerYTop+"px",r.style.height=this._runnerHeight+"px",a.style.opacity=1,a.style.left=this._runnerXLeft+"px",a.style.width=this._runnerWidth+"px",s!==r.style.top&&(o.style.opacity=.9,o.style.width="10px"),l!==a.style.left&&(i.style.opacity=.9,i.style.height="10px"),this.config.autoHide?!this._autoHideFunc&&(this._autoHideFunc=(0,n.debounce)((function(){r.style.opacity=0,o.style.width="6px",a.style.opacity=0,i.style.height="6px"}),this.config.timeout)):this._autoHideFunc=(0,n.debounce)((function(){o.style.width="6px",i.style.height="6px"}),this.config.timeout),this._autoHideFunc()}},e.prototype._getRefs=function(){var e=this._getRootView(),t=!(!e.refs["scroll-view"]||!e.refs["scroll-x-runner"]&&!e.refs["scroll-y-runner"]),i=!(!this._uid||!e.refs["scroll-view-".concat(this._uid)]||!e.refs["scroll-x-runner-".concat(this._uid)]&&!e.refs["scroll-y-runner-".concat(this._uid)]);if(e.refs){if(t)return{area:e.refs["scroll-view"].el,areaY:e.refs["scroll-y-area"].el,areaX:e.refs["scroll-x-area"].el,runnerY:e.refs["scroll-y-runner"].el,runnerX:e.refs["scroll-x-runner"].el};if(i)return{area:e.refs["scroll-view-".concat(this._uid)].el,areaY:e.refs["scroll-y-area-".concat(this._uid)].el,areaX:e.refs["scroll-x-area-".concat(this._uid)].el,runnerY:e.refs["scroll-y-runner-".concat(this._uid)].el,runnerX:e.refs["scroll-x-runner-".concat(this._uid)].el}}},e}();t.ScrollView=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getNavbarButtonCSS=t.navbarComponentMixin=t.getIcon=t.getCount=void 0;var o=i(1),r=i(0);t.getCount=function(e,t,i){var n={danger:" dhx_navbar-count--color_danger",secondary:" dhx_navbar-count--color_secondary",primary:" dhx_navbar-count--color_primary",success:" dhx_navbar-count--color_success"}[e.countColor]||" dhx_navbar-count--color_danger";return(0,o.el)(".dhx_navbar-count",{class:t+n+(!i&&parseInt(e.count,10)>99?" dhx_navbar-count--overlimit":"")},i&&parseInt(e.count,10)>99?"99+":e.count)},t.getIcon=function(e,t){return void 0===e&&(e=""),e.startsWith("dxi")&&(e="dxi "+e),(0,o.el)("span",{class:"dhx_".concat(t,"__icon ").concat(e),"aria-hidden":"true"})};t.navbarComponentMixin=function(e,t,i,r){var a,s,l=function(e,t,i){var n="",o="";return o=(n=i?"dhx_menu-item":"dhx_"+e+"__item")+(t.css?" "+t.css:""),"spacer"!==t.type&&"separator"!==t.type||(o+=" ".concat(n,"--").concat(t.type)),"button"!==t.type||"sidebar"!==e||t.icon||(o+=" dhx_navbar-item--colapse_hidden"),o}(e,t,i),c="ribbon"===e&&("navItem"===t.type||"imageButton"===t.type);return(0,o.el)("li",n({_key:t.id,class:l+(t.icon&&!t.value&&c?" dhx_ribbon__item--icon":"")+(t.src&&!t.value&&c?" dhx_ribbon__item--icon":"")+(t.size&&c?" dhx_ribbon__item--"+t.size:""),".innerHTML":"customHTML"===t.type?t.html:void 0,"data-dhx-id":"customHTML"===t.type?t.id:void 0},(a=t.type,s={role:"none"},"separator"===a&&(s.role="separator",s["aria-orientation"]="vertical"),s)),"customHTML"!==t.type?[r]:void 0)},t.getNavbarButtonCSS=function(e,t){var i=e.color,n=e.size,o=e.view,a=e.full,s=e.icon,l=e.circle,c=e.loading,u=e.value,d=e.active,h=e.count;return({danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[i]||" dhx_button--color_primary")+({small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[n]||" dhx_button--size_medium")+({flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[o]||" dhx_button--view_flat")+(a?" dhx_button--width_full":"")+(l?" dhx_button--circle":"")+(c?" dhx_button--loading":"")+(d?" dhx_button--active":"")+(s&&!u?" dhx_button--icon":"")+((0,r.isDefined)(h)?" dhx_button--count":"")}},function(e,t,i){"use strict";var n,o,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultMode=t.FileStatus=t.ProgressBarEvents=t.UploaderEvents=void 0,function(e){e.uploadBegin="uploadbegin",e.beforeUploadFile="beforeuploadfile",e.uploadFile="uploadfile",e.uploadFail="uploadfail",e.uploadComplete="uploadcomplete",e.uploadProgress="uploadprogress"}(n||(t.UploaderEvents=n={})),function(e){e.cancel="cancel"}(o||(t.ProgressBarEvents=o={})),function(e){e.queue="queue",e.uploaded="uploaded",e.failed="failed",e.inprogress="inprogress"}(r||(t.FileStatus=r={})),function(e){e.grid="grid",e.list="list"}(a||(t.VaultMode=a={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReducedColspan=t.getHeight=t.getWidth=void 0,t.getWidth=function(e,t,i){return e.slice(i,i+(t||1)).filter((function(e){return!e.hidden})).reduce((function(e,t){return e+t.$width}),0)},t.getHeight=function(e,t,i){var n=e.filter((function(e){return!e.hidden}));return t?n.reduce((function(e,n,o){var r=n.$height;return e+=o>=i&&o<i+t?r:0}),0):n[i].$height},t.getReducedColspan=function(e,t,i){var n=e.findIndex((function(e){return e.id===t}));return e.slice(n,n+(i||1)).filter((function(e){return!e.hidden})).length}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(133),t),o(i(77),t)},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionEvents=void 0,function(e){e.beforeUnSelect="beforeunselect",e.afterUnSelect="afterunselect",e.beforeSelect="beforeselect",e.afterSelect="afterselect"}(n||(t.SelectionEvents=n={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationBarEvents=t.DataEvents=void 0;var n,o=i(13);Object.defineProperty(t,"DataEvents",{enumerable:!0,get:function(){return o.DataEvents}}),function(e){e.inputCreated="inputCreated",e.click="click",e.openMenu="openMenu",e.beforeHide="beforeHide",e.afterHide="afterHide",e.inputFocus="inputFocus",e.inputBlur="inputBlur",e.inputChange="inputChange",e.input="input",e.keydown="keydown"}(n||(t.NavigationBarEvents=n={}))},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsManager=t.actions=void 0;var o=i(0),r=i(6),a=i(178),s=i(179),l=i(180),c=i(181),u=i(182),d=i(183),h=i(184),f=i(185),p=i(186),v=i(187),g=i(188),_=i(189),m=i(190),y=i(191),b=i(192),w=i(193),x=i(194),C=i(195),E=i(196),S=i(2),I=i(197),k=i(198),M=i(199),O=i(200),A=i(201),D=i(202),P=i(203);t.actions={setCellStyle:y.SetCellStyle,setCellValue:b.SetCellValue,setCellFormat:m.SetCellFormat,removeCellStyles:g.RemoveCellStyles,lockCell:v.LockCell,deleteRow:u.DeleteRow,addRow:s.AddRow,deleteColumn:c.DeleteColumn,addColumn:a.AddColumn,groupAction:h.GroupAction,groupRowAction:p.GroupRowAction,groupColAction:f.GroupColAction,addSheet:l.AddSheet,deleteSheet:d.DeleteSheet,renameSheet:_.RenameSheet,clear:w.Clear,clearSheet:x.ClearSheet,resizeCol:C.ResizeCol,resizeRow:E.ResizeRow,setValidation:I.SetValidation,sortCells:k.SortCells,insertLink:M.InsertLink,fitColumn:O.FitColumn,filter:A.Filter,merge:D.Merge,unmerge:P.Unmerge};var F=function(){function e(e){this._config=e,this._actions=[],this._redoActions=[],this._sheets=[],this._redoSheets=[],this._dataStore=e.dataStore,this._events=e.events}return e.prototype.execute=function(e,i){if(Array.isArray(e)){var a=function(e,i,o){var a,s={},l={},c=e.map((function(e){var o=e.groupAction||e.action;if(a||(a=e.page),o)return(0,S.getCellsArray)(e.cell,i.grid).forEach((function(t){if(!s[t]){var o=n({},(0,S.getCellInfo)(t,e.page,i.grid));s[t]=o}})),l=n({},e.page.getMeta()),new t.actions[o](n(n({},e),i))}));return{do:function(){var e=c.map((function(e){return(0,S.cleanActionConfig)(e.config)}));o.fire(r.SpreadsheetEvents.beforeAction,[r.Actions.groupAction,e])&&(c.map((function(e){return e.do()})),o.fire(r.SpreadsheetEvents.afterAction,[r.Actions.groupAction,e]))},undo:function(){var e=c.map((function(e){return(0,S.cleanActionConfig)(e.config)}));a.setMeta(l),o.fire(r.SpreadsheetEvents.beforeAction,[r.Actions.groupAction,e])&&(Object.keys(s).forEach((function(e){var t=(0,S.getCellIds)(e,i.grid),n=t.row,o=t.col,r=s[e],l=a.getCell(n,o)||{},c={};Object.keys(l).forEach((function(e){c[e]=r[e]||null})),a.setCell(n,o,c)})),o.fire(r.SpreadsheetEvents.afterAction,[r.Actions.groupAction,e]))},config:i}}(e,this._config,this._events);return a.do(),this._actions.push({command:r.Actions.groupAction,action:a}),void this._sheets.push(this._config.spreadsheet.activeSheetName)}if((0,o.extend)(i,this._config),t.actions[e]){var s=new t.actions[e](i);if(!this._events.fire(r.SpreadsheetEvents.beforeAction,[e,(0,S.cleanActionConfig)(i)]))return;s.do(),i.action===r.Actions.addSheet||i.action===r.Actions.deleteSheet||i.action===r.Actions.renameSheet?this._sheets.push(null):this._sheets.push(this._config.spreadsheet.activeSheetName),this._actions.push({command:e,action:s}),e!==r.Actions.resizeCol&&e!==r.Actions.resizeRow&&this._events.fire(r.SpreadsheetEvents.afterAction,[e,(0,S.cleanActionConfig)(i)])}},e.prototype.undo=function(){var e=this._actions[this._actions.length-1];if(e){var t=e.command,i=e.action;if(t!==r.Actions.groupAction&&!this._events.fire(r.SpreadsheetEvents.beforeAction,[t,(0,S.cleanActionConfig)(i.config),!0]))return;this._actions.pop(),i.undo();var n=this._sheets.pop();if(n){var o=this._dataStore.getPage(n);this._config.spreadsheet._changeSheet(o.getMeta().toolbarId)}this._redoActions.push({command:t,action:i}),this._redoSheets.push(n),t!==r.Actions.resizeCol&&t!==r.Actions.resizeRow&&t!==r.Actions.groupAction&&this._events.fire(r.SpreadsheetEvents.afterAction,[t,(0,S.cleanActionConfig)(i.config)])}},e.prototype.redo=function(){var e=this._redoActions[this._redoActions.length-1];if(e){var t=e.command,i=e.action;if(t!==r.Actions.groupAction&&!this._events.fire(r.SpreadsheetEvents.beforeAction,[t,(0,S.cleanActionConfig)(i.config),!0]))return;this._redoActions.pop(),i.do();var n=this._redoSheets.pop();if(n){var o=this._dataStore.getPage(n);this._config.spreadsheet._changeSheet(o.getMeta().toolbarId)}this._actions.push({command:t,action:i}),this._sheets.push(n),t!==r.Actions.resizeCol&&t!==r.Actions.resizeRow&&t!==r.Actions.groupAction&&this._events.fire(r.SpreadsheetEvents.afterAction,[t,(0,S.cleanActionConfig)(i.config)])}},e}();t.ActionsManager=F},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeToolbarFormat=t.getFormatsDropdown=t.getFormatItem=t.getToggledValue=t.updateToolbar=t.getColorpickerTemplate=void 0;var r=i(11),a=i(12),s=i(2);function l(e,t){return'<div class="dxi dxi-'.concat(t,' dhx_toolbar-button__icon dhx_toolbar-button__colorpicker" style="border-bottom: solid 3px ').concat(e,'"></div>')}function c(e,t){void 0===t&&(t=1500.31);var i=e.name,n=(0,a.getFormattedValue)(t,e);return'<div class="dhx_format-item"><span class="dhx_format-name">'.concat(r.default[i]||i,' </span><span class="dhx_format-helper">').concat(n,"</span></div>")}function u(e){return{id:e.id,css:"dhx_format-name-wrap",twoState:!0,html:c(e,e.example)}}t.getColorpickerTemplate=l,t.updateToolbar=function(e,t,i,o){var c,u=i.getMeta(),d=u.merged,h=u.focusedCell,f=u.selectedCells;if(f&&h){var p=f.join(","),v=n({locked:!1,format:(0,a.getFormat)("common")},(0,s.getCellInfo)(h.cell,i,o)),g=[],_=!!(0,s.getCellsArray)(p,o).find((function(e){return!(0,s.isCellSpaned)(e,d)}));v.css&&(g="string"==typeof v.css?v.css.split(" "):v.css);for(var m={},y=0,b=g;y<b.length;y++){var w=b[y];m=n(n({},m),dhx.css.get(w))}var x=n({color:"#4C4C4C",background:"#FFF","text-align":"left","vertical-align":"center","font-style":"","font-weight":"","text-decoration":"",multiline:"clip"},m),C=r.default[_?"merge":"unmerge"],E="dxi dxi-table-".concat(_?"merge":"split","-cell").concat(_?"s":"");e.data.update("merge",{active:!_,icon:E,tooltip:C}),t.data.update("merge",{value:C,tooltip:C}),function(i){var n=function(n){switch(n){case"color":e.data.update(n,{html:l(i[n]||"#4C4C4C","format-color-text")});break;case"background":case"background-color":e.data.update("background",{html:l(i[n]||"#FFF","format-color-fill")});break;case"text-align":var o="halign-".concat(i[n]);if(!e.data.exists("halign")||!e.data.exists(o))return{value:void 0};e.data.update("halign",{icon:e.data.getItem(o).icon});var r={};e.data.getItem("halign").items.forEach((function(e){r[e.id]=!1,t.data.update(e.id,{active:e.id===o})})),r[o]=!0,e.setState(r);break;case"vertical-align":var a="valign-".concat(i[n]);if(!e.data.exists("valign")||!e.data.exists(a))return{value:void 0};var s={};e.data.getItem("valign").items.forEach((function(e){s[e.id]=!1,t.data.update(e.id,{active:e.id===a})})),s[a]=!0,e.setState(s),e.data.update("valign",{icon:e.data.getItem(a).icon});break;case"multiline":if(!e.data.exists("multiline"))return{value:void 0};var c="multiline-".concat(i[n]),u={};e.data.getItem("multiline").items.forEach((function(e){u[e.id]=!1,t.data.update(e.id,{active:e.id===c})})),u[c]=!0,e.setState(u),e.data.update("multiline",{icon:e.data.getItem(c).icon});break;case"font-weight":e.data.update("font-weight-bold",{active:"bold"==i[n]||"700"==i[n]}),t.data.update("font-weight-bold",{active:"bold"==i[n]||"700"==i[n]});break;case"font-style":e.data.update("font-style-italic",{active:"italic"===i[n]}),t.data.update("font-style-italic",{active:"italic"===i[n]});break;case"text-decoration":var d={active:i[n].includes("underline")};e.data.update("text-decoration-underline",d),t.data.update("text-decoration-underline",d);var h={active:i[n].includes("line-through")};e.data.update("text-decoration-line-through",h),t.data.update("text-decoration-line-through",h)}};for(var o in i){var r=n(o);if("object"==typeof r)return r.value}}(x);var S=e.data.getItem("format");S&&S.items.map((function(e){return e.active=!1}));var I=function(i){switch(i){case"locked":e.data.getItem("lock")&&e.data.update("lock",{active:v[i]});break;case"format":var n=(0,a.getDefaultFormatsMap)()[null===(c=v[i])||void 0===c?void 0:c.mask]||"common",o=e.data.getItem(n);e.data.getItem("format")&&e.data.update("format",{value:o?(0,a.getFormat)(n).name:e.data.getItem("custom_format").value}),o&&e.data.update(n,{active:!0}),e.data.update("custom_format",{hidden:!!o,active:!o}),t.data.getItems("format").forEach((function(e){t.data.update(e.id,{active:n===e.id})}))}};for(var k in v)I(k);for(var k in i)if("filter"===k)e.data.getItem("filter")&&e.data.update("filter",{active:i[k]})}},t.getToggledValue=function(e,t,i,o,r){var a=(0,s.getCellInfo)(t,e,r),l=[];a.css&&(l="string"==typeof a.css?a.css.split(" "):a.css);for(var c={},u=0,d=l;u<d.length;u++){var h=d[u];c=n(n({},c),dhx.css.get(h))}var f=c[i],p=f&&"none"!==f?f:"",v=p.includes(o)?p.split(o).join(""):"".concat(p," ").concat(o);return"text-decoration"!==i||v||(v="none"),v.trim()},t.getFormatItem=c,t.getFormatsDropdown=function(e){var t=e.formats;return o(o([],t.map((function(e){return u(e)})),!0),[{id:"custom_format",css:"dhx_format-name-wrap",twoState:!0,hidden:!0,value:r.default.custom}],!1)},t.normalizeToolbarFormat=u},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WindowEvents=void 0,function(e){e.resize="resize",e.headerDoubleClick="headerdoubleclick",e.move="move",e.afterShow="aftershow",e.afterHide="afterhide",e.beforeShow="beforeshow",e.beforeHide="beforehide"}(n||(t.WindowEvents=n={}))},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(87),t),o(i(220),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Input=t.Validation=void 0;var a,s=i(1),l=i(0),c=i(7),u=i(15),d=i(3),h=i(5);!function(e){e.empty="",e.validEmail="email",e.validInteger="integer",e.validNumeric="numeric",e.validAlphaNumeric="alphanumeric",e.validIPv4="IPv4"}(a||(t.Validation=a={}));var f=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,null,i)||this;return n.events=new d.EventSystem,n._propsItem=["inputType","required","validation","icon","placeholder","autocomplete","readOnly","maxlength","minlength","min","max","step","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._props=r(r([],c.baseProps,!0),n._propsItem,!0),n._initView(i),n._initHandlers(),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._propsItem=this._propsItem=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=this.getValue()),!e&&!this.events.fire(h.ItemEvent.beforeValidate,[t]))return!1;var i=this.config.validation?(0,c.validateInput)(t,this.config.validation):this.config.required?!(!(0,c.baseInputValidate)(t,this.config)||!String(t).trim().length):(0,c.baseInputValidate)(t,this.config);return e||(this.setValidationStatus(i?"success":"error"),this.events.fire(h.ItemEvent.afterValidate,[t,i]),!this.isFocused()&&this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.clear=function(){""!==this.config.value&&this.events.fire(h.ItemEvent.beforeChange,[""])&&(this.config.value="",this.events.fire(h.ItemEvent.change,[this.getValue()]),(0,c.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},t.prototype.setValue=function(e){void 0!==e&&this.config.value!==e&&this.events.fire(h.ItemEvent.beforeChange,[e])&&(this.config.value=e,this.events.fire(h.ItemEvent.change,[this.getValue()]),(0,c.isVerify)(this.config)&&this.validate())},t.prototype.getValue=function(){var e=this.config,t=e.inputType,i=e.value;return"number"===t&&"number"==typeof i||null===i?i:"number"===t&&"string"==typeof i?i.length?Number(i):"":"string"==typeof i?i.length?i:"":void 0===i?"":String(i)},t.prototype.isFocused=function(){var e,t,i;return(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.input.el.blur()}))},t.prototype._initView=function(e){var t=this;if((0,l.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var i in this.config={type:"input",id:e.id,name:e.name,value:"",disabled:!1,hidden:!1,inputType:"text",required:!1,icon:"",placeholder:"",autocomplete:!1,readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.hidden&&(0,s.awaitRedraw)().then((function(){t.hide(!0)})),this._value=this.config.value,this.paint()},t.prototype._initHandlers=function(){var e=this;this.events.on(h.ItemEvent.change,(function(t){e._value=t,e.paint()}))},t.prototype._getHandlers=function(){var e=this;return{oninput:function(t){e._value=t.target.value,e.events.fire(h.ItemEvent.input,[e._value])},onchange:function(t){e._value=t.target.value,e._value!==e.config.value&&e.setValue(e._value)},onfocus:function(){e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()},onblur:function(){e._uid&&(e.events.fire(h.ItemEvent.blur,[e.getValue()]),e._value!==e.config.value&&e.setValue(e._value),e.paint())},onkeydown:function(t){"Enter"===t.code&&"input"===e.config.type&&t.preventDefault(),e.events.fire(h.ItemEvent.keydown,[t])}}},t.prototype._draw=function(){var e=this,t=this.config,i=t.id,n=t.disabled,o=t.name,r=t.icon,a=t.placeholder,l=t.required,u=t.inputType,d=t.hidden,h=t.autocomplete,f=t.readOnly,p=t.maxlength,v=t.minlength,g=t.max,_=t.min,m=t.label,y=t.helpMessage,b=t.value,w=d?" dhx_form-group--hidden":"";return(0,s.el)("div.dhx_form-group",{class:(0,c.getFormItemCss)(this.config,(0,c.isVerify)(this.config),this.isFocused())+w},[this._drawLabel(),(0,s.el)(".dhx_input__wrapper",{},[(0,s.el)("div.dhx_input__container",{},[this.config.icon?(0,s.el)(".dhx_input__icon",{class:this.config.icon}):null,(0,s.el)("input.dhx_input",{type:["text","number","password"].includes(u)?u:"text","data-dhx-id":o||i,id:i||this._uid,placeholder:a||"",value:b,name:o||"",disabled:n,required:l,readOnly:f,maxlength:p,minlength:v,max:g,min:_,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,class:r?"dhx_input--icon-padding":"",autocomplete:h?"on":"off",_ref:"input","aria-label":m||y||"type ".concat(o||u||"text"),"aria-describedby":y?"dhx_label__help_".concat(i||this._uid):null,_hooks:{didRecycle:function(t,i){e.isFocused()&&e._value&&(i.el.value=e._value)}}})]),(0,c.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,c.getValidationMessage)(this.config))])])},t}(u.Label);t.Input=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={dragAndDrop:"Drag & drop",or:"or",grid:"Grid",list:"List",browse:"Browse files",filesOrFoldersHere:"files or folders here",cancel:"Cancel",clearAll:"Clear all",clearAllSelected:"Clear selected",clear:"Clear",add:"Add",upload:"Upload",download:"Download",error:"error",byte:"B",kilobyte:"KB",megabyte:"MB",gigabyte:"GB"}},function(e,t,i){"use strict";var n,o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageContainerPosition=t.Position=t.RealPosition=void 0,function(e){e.left="left",e.right="right",e.top="top",e.bottom="bottom",e.center="center"}(n||(t.RealPosition=n={})),function(e){e.right="right",e.bottom="bottom",e.center="center",e.left="left",e.top="top"}(o||(t.Position=o={})),function(e){e.topLeft="top-left",e.topRight="top-right",e.bottomLeft="bottom-left",e.bottomRight="bottom-right"}(r||(t.MessageContainerPosition=r={}))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";function n(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,n){return t+t+i+i+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function o(e){var t,i,n=e.r/255,o=e.g/255,r=e.b/255,a=Math.max(n,o,r),s=a-Math.min(n,o,r),l=function(e){return(a-e)/6/s+.5};if(0===s)t=i=0;else{i=s/a;var c=l(n),u=l(o),d=l(r);n===a?t=d-u:o===a?t=1/3+c-d:r===a&&(t=2/3+u-c),t<0?t+=1:t>1&&(t-=1)}return{h:360*t,s:i,v:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAlpha=t.alphaToHex=t.isHex=t.HexToHSV=t.RGBToHSV=t.HexToRGB=t.RGBToHex=t.HSVtoRGB=void 0,t.HSVtoRGB=function(e){var t={r:0,g:0,b:0},i=e.h/60,n=e.s,o=e.v,r=Math.floor(i)%6,a=i-Math.floor(i),s=255*o*(1-n),l=255*o*(1-n*a),c=255*o*(1-n*(1-a));switch(o*=255,r){case 0:t.r=o,t.g=c,t.b=s;break;case 1:t.r=l,t.g=o,t.b=s;break;case 2:t.r=s,t.g=o,t.b=c;break;case 3:t.r=s,t.g=l,t.b=o;break;case 4:t.r=c,t.g=s,t.b=o;break;case 5:t.r=o,t.g=s,t.b=l}for(var u in t)t[u]=Math.round(t[u]);return t},t.RGBToHex=function(e){return Object.keys(e).reduce((function(t,i){var n=e[i].toString(16).toUpperCase();return t+(n=1===n.length?"0"+n:n)}),"#")},t.HexToRGB=n,t.RGBToHSV=o,t.HexToHSV=function(e){return o(n(9===e.length?e.slice(0,-2):e))},t.isHex=function(e){return/(^#[0-9A-F]{8}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},t.alphaToHex=function(e){var t=Math.round(255*e).toString(16).toUpperCase();return 1===t.length?"0"+t:t},t.getAlpha=function(e){return 9===e.length?Number((parseInt(e.slice(-2),16)/255).toFixed(2)):1}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={cancel:"Cancel",select:"Select",rightClickToDelete:"Right click to delete",customColors:"Custom colors",addNewColor:"Add new color"}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;var n=i(26),o=i(27);function r(e){return e?e.includes("json")?"json":e.includes("xml")?"xml":"text":"text"}function a(t,i,a,s,l){var c=s||{};if(l&&(c.Accept="application/"+l),"GET"!==a&&(c["Content-Type"]=c["Content-Type"]||"application/json"),"GET"===a){var u=i&&"object"==typeof i?function(e){return Object.keys(e).reduce((function(t,i){var n="object"==typeof e[i]?JSON.stringify(e[i]):e[i];return t.push(i+"="+encodeURIComponent(n)),t}),[]).join("&")}(i):i&&"string"==typeof i?i:"";u&&(t+=t.includes("?")?"&":"?",t+=u),i=null}return window.fetch?("application/json"===c["Content-Type"]&&i&&"object"==typeof i&&(i=JSON.stringify(i)),window.fetch(t,{method:a,body:i||null,headers:c}).then((function(t){if(!t.ok)return t.text().then((function(i){return e.reject({status:t.status,statusText:t.statusText,message:i})}));var i=l||r(t.headers.get("Content-Type"));if("raw"===i)return{headers:Object.fromEntries(t.headers.entries()),url:t.url,body:t.body};if(204!==t.status)switch(i){case"json":return t.json();case"xml":var a=(0,o.toDataDriver)(n.DataDriver.xml);return a?t.text().then((function(e){return a.toJsonObject(e)})):t.text();default:return t.text()}}))):new e((function(e,s){var u=new XMLHttpRequest;for(var d in u.onload=function(){u.status>=200&&u.status<300?("raw"===l&&e({url:u.responseURL,headers:u.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce((function(e,t){var i=t.split(": ");return e[i[0]]=i[1],e}),{}),body:u.response}),204===u.status?e():e(function(e,t){switch(t){case"json":return JSON.parse(e);case"text":default:return e;case"xml":var i=(0,o.toDataDriver)(n.DataDriver.xml);return i?i.toJsonObject(e):{parseError:"Incorrect data driver type: 'xml'"}}}(u.responseText,l||r(u.getResponseHeader("Content-Type"))))):s({status:u.status,statusText:u.statusText})},u.onerror=function(){s({status:u.status,statusText:u.statusText,message:u.responseText})},u.open(a,t),c)u.setRequestHeader(d,c[d]);switch(a){case"POST":case"DELETE":case"PUT":u.send(void 0!==i?JSON.stringify(i):"");break;default:u.send()}}))}t.ajax={get:function(e,t,i){return a(e,t,"GET",i&&i.headers,void 0!==i?i.responseType:void 0)},post:function(e,t,i){return a(e,t,"POST",i&&i.headers,void 0!==i?i.responseType:void 0)},put:function(e,t,i){return a(e,t,"PUT",i&&i.headers,void 0!==i?i.responseType:void 0)},delete:function(e,t,i){return a(e,t,"DELETE",i&&i.headers,void 0!==i?i.responseType:void 0)}}}).call(this,i(16))},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeCell=void 0,o(i(71),t),o(i(158),t),o(i(9),t),o(i(37),t);var r=i(30);Object.defineProperty(t,"getTreeCell",{enumerable:!0,get:function(){return r.getTreeCell}}),o(i(22),t),o(i(18),t)},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(134),t),o(i(76),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;var r=i(55),a=i(72),s=i(1),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;if(n._root=n.config.parent||n,n._all={},n._parseConfig(),n._progress=!1,n.config.activeTab&&(n.config.activeView=n.config.activeTab),n.config.views&&(n.config.activeView=n.config.activeView||n._cells[0].id,n._isViewLayout=!0),!i.parent){var o=(0,s.create)({render:function(){return n._root&&n.toVDOM()}},n);n.mount(t,o)}return n}return o(t,e),t.prototype.destructor=function(){if(null!==this._all&&"function"==typeof this._all[Symbol.iterator])for(var e=0,t=this._all;e<t.length;e++){var i=t[e];this._all[i].destructor()}this.config=this._cells=this._root=this._xLayout=this._isViewLayout=null,this._all={},this.unmount()},t.prototype.toVDOM=function(){var t;if(this._isViewLayout){var i=[this.getCell(this.config.activeView).toVDOM()];return e.prototype.toVDOM.call(this,i)}var n=[];return this._inheritTypes(),null===(t=this._cells)||void 0===t||t.forEach((function(e){var t=e.toVDOM();Array.isArray(t)?n=n.concat(t):n.push(t)})),e.prototype.toVDOM.call(this,n)},t.prototype.removeCell=function(e){if(this.events.fire(r.LayoutEvents.beforeRemove,[e])){var t=this.config.parent||this;if(t===this){var i=this.getCell(e);if(i){var n=i.getParent();delete this._all[e],n._cells=n._cells.filter((function(t){return t.id!=e})),n.paint()}this.events.fire(r.LayoutEvents.afterRemove,[e])}else t.removeCell(e)}},t.prototype.addCell=function(e,t){if(void 0===t&&(t=-1),this.events.fire(r.LayoutEvents.beforeAdd,[e.id])){var i=this._createCell(e);t<0&&(t=this._cells.length+t+1),this._cells.splice(t,0,i),this.paint(),this.events.fire(r.LayoutEvents.afterAdd,[e.id])}},t.prototype.getId=function(e){return e<0&&(e=this._cells.length+e),this._cells[e]?this._cells[e].id:void 0},t.prototype.getRefs=function(e){return this._root.getRootView().refs[e]},t.prototype.getCell=function(e){var t;return null===(t=this._root)||void 0===t?void 0:t._all[e]},t.prototype.forEach=function(e,t,i){if(void 0===i&&(i=1/0),this._haveCells(t)&&!(i<1)){var n;n=t?this._root._all[t]._cells:this._root._cells;for(var o=0;o<n.length;o++){var r=n[o];e.call(this,r,o,n),this._haveCells(r.id)&&r.forEach(e,r.id,--i)}}},t.prototype.cell=function(e){return this.getCell(e)},t.prototype.progressShow=function(){this._progress=!0,this.paint()},t.prototype.progressHide=function(){this._progress=!1,this.paint()},t.prototype._getCss=function(t){var i=this._xLayout?"dhx_layout-columns":"dhx_layout-rows",n=this.config.align?" "+i+"--"+this.config.align:"";if(t)return i+" dhx_layout-cell"+(this.config.align?" dhx_layout-cell--"+this.config.align:"");var o=this.config.parent?e.prototype._getCss.call(this):"dhx_widget dhx_layout",r=this.config.parent?"":" dhx_layout-cell";return o+(this.config.full?r:" "+i)+n},t.prototype._parseConfig=function(){var e=this,t=this.config,i=t.rows||t.cols||t.views||[];this._xLayout=!t.rows,this._cells=i.map((function(t){return e._createCell(t)}))},t.prototype._createCell=function(e){var i;return e.rows||e.cols||e.views?(e.parent=this._root,i=new t(this,e)):i=new a.Cell(this,e),this._root._all[i.id]=i,e.init&&e.init(i,e),i},t.prototype._haveCells=function(e){if(e){var t=this._root._all[e];return t._cells&&t._cells.length>0}return Object.keys(this._all).length>0},t.prototype._inheritTypes=function(e){var t=this;if(void 0===e&&(e=this._cells),Array.isArray(e))e.forEach((function(e){return t._inheritTypes(e)}));else{var i=null==e?void 0:e.config;if((null==i?void 0:i.rows)||(null==i?void 0:i.cols)){var n=e.getParent();!i.type&&n&&(n.config.type?i.type=n.config.type:this._inheritTypes(n))}}},t}(a.Cell);t.Layout=l},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutEvents=void 0,function(e){e.beforeShow="beforeShow",e.afterShow="afterShow",e.beforeHide="beforeHide",e.afterHide="afterHide",e.beforeResizeStart="beforeResizeStart",e.resize="resize",e.afterResizeEnd="afterResizeEnd",e.beforeAdd="beforeAdd",e.afterAdd="afterAdd",e.beforeRemove="beforeRemove",e.afterRemove="afterRemove",e.beforeCollapse="beforeCollapse",e.afterCollapse="afterCollapse",e.beforeExpand="beforeExpand",e.afterExpand="afterExpand"}(n||(t.LayoutEvents=n={}))},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(78),t),o(i(150),t),o(i(83),t)},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ListEvents=void 0,function(e){e.click="click",e.doubleClick="doubleclick",e.focusChange="focuschange",e.beforeEditStart="beforeEditStart",e.afterEditStart="afterEditStart",e.beforeEditEnd="beforeEditEnd",e.afterEditEnd="afterEditEnd",e.itemRightClick="itemRightClick",e.itemMouseOver="itemMouseOver",e.contextmenu="contextmenu"}(n||(t.ListEvents=n={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutoFilledCells=t.isCellGreater=t.getTimeStep=t.getDateStep=t.getProgressionStep=t.getLastCopyingCell=t.getCellsDiff=t.alphaRegex=void 0;var n=i(12),o=i(2),r=i(28);function a(e,t,i){var n=(0,o.getCellIndex)(e,i),r=(0,o.getCellIndex)(t,i),a=r.col-n.col,s=r.row-n.row,l=a<0||s<0;return{x:a,y:s,isLargerByX:Math.abs(a)>Math.abs(s),negativeDir:l}}function s(e){var t=e.map((function(e){return parseFloat(e)||0})),i=t.reduce((function(e,t){return e+t}),0),n=t.length;return(i/n*2-2*t[0])/(n-1)}function l(e){for(var t=(0,r.dateDiff)(e[0],e[1]),i=1;i<e.length-1;i++)(0,r.dateDiff)(e[i],e[i+1])!==t&&(t=0,i=e.length);return t}function c(e){for(var t=(0,r.timeDiff)(e[0],e[1]),i=1;i<e.length-1;i++)(0,r.timeDiff)(e[i],e[i+1])!==t&&(t=0,i=e.length);return t}t.alphaRegex=/(\d+$)/,t.getCellsDiff=a,t.getLastCopyingCell=function(e,t,i){(0,o.isRangeId)(e)&&(e=e.split(":")[1]);var n=(0,o.getCellIndex)(e,i),r=a(e,t,i),s=r.x,l=r.y,c=r.isLargerByX,u=n.row+l,d=n.col+s,h=c?d:n.col,f=c?n.row:u;return(0,o.getCellNameByIndex)(f,h,i)},t.getProgressionStep=s,t.getDateStep=l,t.getTimeStep=c,t.isCellGreater=function(e,t,i){var n=(0,o.getCellIndex)(e,i),r=(0,o.getCellIndex)(t,i);return n.row===r.row?n.col>r.col:n.row>r.row},t.getAutoFilledCells=function(e,i,u,d,h){var f=e.filter((function(e){var t=e.value,i=e.format;return(0,n.isNumeric)(t)&&"date"!==i.id&&"time"!==i.id&&"text"!==i.id})).map((function(e){return e.value})),p=e.filter((function(e){var t=e.value,i=e.format;return(0,n.isNumeric)(t)&&"date"===i.id})).map((function(e){return(0,r.excelDateToJSDate)(e.value)})),v=e.filter((function(e){var t=e.value,i=e.format;return(0,n.isNumeric)(t)&&"time"===i.id})).map((function(e){return(0,r.excelDateToJSDate)(e.value)})),g=e.filter((function(e){var i=e.value;return!(0,n.isNumeric)(i)&&i.match(t.alphaRegex)})).map((function(e){return e.value})).map((function(e){return parseInt(e.match(t.alphaRegex)[0])})),_=p.length<2?1:l(p),m=v.length<2?36e5:c(v),y=(0,o.getCellsArray)(i,h),b=s(1===f.length?[f[0],f[0]+1]:f),w=s(1===g.length?[g[0],g[0]+1]:g),x=function(e,t){var i=(0,o.getCellIndex)(e,h),n=(0,o.getCellIndex)(t,h);return i.row===n.row?i.col>n.col:i.row>n.row},C=[],E=parseFloat(f[f.length-1]),S=p[p.length-1],I=v[v.length-1],k=g[g.length-1],M=0,O=i.split(":"),A=O[0],D=O[1],P=u.split(":"),F=P[0],T=P[1],R=a(A===F&&D?D:A,F,h).isLargerByX,V=x(A,x(F,T)?T:F);V&&(_=-_,S=p[0],m=-m,I=v[0],b=-b,E=f[f.length-1],w=-w,k=g[g.length-1]);var H=(0,o.getCellsArray)(u,h).filter((function(e){return!y.includes(e)}));V&&(H=H.reverse(),e=e.reverse());var L=H.map((function(i,a){var s,l;l=e[M].value.toString().startsWith("="),s=e[M].value;var c=e[M].span;if(c){var u=c,f=u.from,p=u.to,v=(0,o.getCellIndex)(i,h),g=(0,o.getCellNameByIndex)(v.row+p.row-f.row,v.col+p.column-f.column,h),x="".concat(i,":").concat(g);C.includes(x)||C.push(x)}if(l){var O=0,A=0,D=V?-1*(a+M+y.length+1):a-M+y.length;R?A=D:O=D,s=d.transposeMath(s,O,A)}if((0,n.isNumeric)(s))switch(e[M].format.id){case"date":S=(0,r.addDay)(S,_),s=(0,r.getExcelDateFromJs)(S);break;case"time":I=(0,r.addTime)(I,m),s=(0,r.getExcelDateFromJs)(I);break;default:s=(E+=b).toFixed(5)}else s.match(t.alphaRegex)&&(k+=w,s=s.replace(t.alphaRegex,Math.abs(k)));return M=void 0!==e[M+1]?M+1:0,s}));return V&&(L=L.reverse()),{cells:"".concat(H[0],":").concat(H[H.length-1]),value:L,spans:C}}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(88),t),o(i(251),t),o(i(5),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={apply:"apply",reject:"reject"}},function(e,t,i){"use strict";function n(e){var t=document.activeElement;t.classList.contains("dhx_alert__apply-button")&&"Enter"===e.key||t.classList.contains("dhx_alert__confirm-reject")||t.classList.contains("dhx_alert__confirm-aply")||e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0}),t.blockScreen=void 0,t.blockScreen=function(e){var t=document.createElement("div");return t.className="dhx_alert__overlay "+(e||""),document.body.appendChild(t),document.addEventListener("keydown",n),function(){document.body.removeChild(t),document.removeEventListener("keydown",n)}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.disableTooltip=t.enableTooltip=t.tooltip=t.getZIndex=t.findPosition=void 0;var o=i(4),r=i(47),a=750,s=200;function l(e,t,i,n,o,a){var s,c,u;switch(void 0===o&&(o=8),void 0===a&&(a=0),a>1&&(t=r.Position.center),t){case r.Position.center:return(c=e.left+window.pageXOffset+(e.width-i)/2)+o<window.pageXOffset&&(c=e.left+window.pageXOffset),{left:c,top:u=e.top+window.pageYOffset+(e.height-n)/2,pos:s=r.RealPosition.center};case r.Position.right:return s=r.RealPosition.right,(c=e.right+window.pageXOffset+o)+i>window.innerWidth+window.pageXOffset?l(e,r.Position.left,i,n,o,++a):{left:c,top:u=window.pageYOffset+e.top+(e.height-n)/2,pos:s};case r.Position.left:return s=r.RealPosition.left,(c=window.pageXOffset+e.left-i-o)<0?l(e,r.Position.right,i,n,o,++a):{left:c,top:u=window.pageYOffset+e.top+(e.height-n)/2,pos:s};case r.Position.top:return s=r.RealPosition.top,(c=window.pageXOffset+e.left+(e.width-i)/2)+i>window.innerWidth+window.pageXOffset?c=window.innerWidth+window.pageXOffset-i:c<0&&(c=0),(u=window.pageYOffset+e.top-n-o)-n<0?l(e,r.Position.bottom,i,n,o,++a):{left:c,top:u,pos:s};case r.Position.bottom:default:return(c=window.pageXOffset+e.left+(e.width-i)/2)+i>window.innerWidth+window.pageXOffset?c=window.innerWidth+window.pageXOffset-i:c<0&&(c=0),s=r.RealPosition.bottom,(u=window.pageYOffset+e.bottom+o)+n>window.innerHeight+window.pageYOffset?l(e,r.Position.top,i,n,o,++a):{left:c,top:u,pos:s}}}t.findPosition=l;var c=document.createElement("div"),u=document.createElement("span");u.className="dhx_tooltip__text",c.appendChild(u),c.setAttribute("role","tooltip"),c.style.position="absolute";var d,h=null,f=!1,p=null,v=null;function g(e){return e&&(e.classList.contains("dhx_popup--window")&&e.classList.contains("dhx_popup--window_active")||e.classList.contains("dhx_popup--window_modal")||e.classList.contains("dhx_popup"))?1e7:(null==e?void 0:e.classList.contains("dhx_popup--window"))?9999999:e&&e.offsetParent?g(e.offsetParent):null}function _(e,t,i,n,o,a,s){void 0===o&&(o=!1),void 0===a&&(a=8);var d=e.getBoundingClientRect();s?u.innerHTML=t:u.textContent=t,document.body.appendChild(c),c.className="dhx_widget dhx_tooltip"+(o?" dhx_tooltip--forced":"");var h=c.getBoundingClientRect(),p=l(d,i,h.width,h.height,a),v=p.left,_=p.top,m=p.pos,y=g(e);switch(y&&(c.style.zIndex=y.toString()),m){case r.RealPosition.bottom:case r.RealPosition.top:case r.RealPosition.left:case r.RealPosition.right:case r.RealPosition.center:c.style.left=v+"px",c.style.top=_+"px"}c.className+=" dhx_tooltip--".concat(m," ").concat(n||""),f=!0,o||setTimeout((function(){c.className+=" dhx_tooltip--animate"}))}function m(e,t,i){var n=i.force,o=i.showDelay,l=i.hideDelay,u=i.position,g=i.css,m=i.htmlEnable,y=i.margin;n||(v=setTimeout((function(){_(e,t,u||r.Position.bottom,g,!1,y,m)}),o||a));var b=function(){var t;f&&(t=l,h&&(p=setTimeout((function(){document.body.removeChild(c),f=!1,p=null}),t||s))),clearTimeout(v),e.removeEventListener("mouseleave",b),e.removeEventListener("blur",b),document.removeEventListener("mousedown",b),h=null,d=null};n&&_(e,t,u,g,n,y,m),e.addEventListener("mouseleave",b),e.addEventListener("blur",b),document.addEventListener("mousedown",b),d=b}function y(e,t){var i=(0,o.toNode)(t.node);i!==h&&(d&&(d(),d=null),h=i,p?(clearTimeout(p),p=null,m(i,e,n(n({},t),{force:!0}))):m(i,e,t))}function b(e){var t=(0,o.locateNode)(e,"dhx_tooltip_text");t&&y(t.getAttribute("dhx_tooltip_text"),{position:t.getAttribute("dhx_tooltip_position")||r.Position.bottom,node:t})}t.getZIndex=g,t.tooltip=y,t.enableTooltip=function(){document.addEventListener("mousemove",b)},t.disableTooltip=function(){document.removeEventListener("mousemove",b)}},function(e,t,i){},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.locale=void 0,o(i(118),t),o(i(66),t),o(i(65),t),o(i(49),t);var r=i(50);Object.defineProperty(t,"locale",{enumerable:!0,get:function(){return r.default}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.palette=t.grayShades=void 0,t.grayShades=["#000000","#4C4C4C","#666666","#808080","#999999","#B3B3B3","#CCCCCC","#E6E6E6","#F2F2F2","#FFFFFF"],t.palette=[["#D4DAE4","#B0B8CD","#949DB1","#727A8C","#5E6677","#3F4757","#1D2534"],["#FFCDD2","#FE9998","#F35C4E","#E94633","#D73C2D","#CA3626","#BB2B1A"],["#F9E6AD","#F4D679","#EDB90F","#EAA100","#EA8F00","#EA7E00","#EA5D00"],["#BCE4CE","#90D2AF","#33B579","#36955F","#247346","#1D5B38","#17492D"],["#BDF0E9","#92E7DC","#02D7C5","#11B3A5","#018B80","#026B60","#024F43"],["#B3E5FC","#81D4FA","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B"],["#AEC1FF","#88A3F9","#5874CD","#2349AE","#163FA2","#083596","#002381"],["#C5C0DA","#9F97C1","#7E6BAD","#584A8F","#4F4083","#473776","#3A265F"],["#D6BDCC","#C492AC","#A9537C","#963A64","#81355A","#6E3051","#4C2640"],["#D2C5C1","#B4A09A","#826358","#624339","#5D4037","#4E342E","#3E2723"]]},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ColorpickerEvents=void 0,function(e){e.beforeChange="beforeChange",e.change="change",e.apply="apply",e.cancelClick="cancelClick",e.modeChange="modeChange",e.selectClick="selectClick",e.colorChange="colorChange",e.viewChange="viewChange"}(n||(t.ColorpickerEvents=n={}))},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DataCollection=void 0;var r=i(3),a=i(121),s=i(124),l=i(33),c=i(27),u=i(26),d=i(0),h=function(){function e(e,t){var i=this;this._filters={},this._changes={order:[]},this.config=e||{},this._sort=new s.Sort,this._loader=new a.Loader(this,this._changes),this.events=t||new r.EventSystem(this),this.events.on(u.DataEvents.dataRequest,(function(e,t){var n=i.dataProxy;n&&n.updateUrl&&(n.updateUrl(null,{from:e,limit:n.config.limit||t-e}),i.load(n))})),this.events.on(u.DataEvents.loadError,(function(e){setTimeout((function(){"string"!=typeof e?(0,c.dhxError)(e):(0,c.dhxWarning)(e)}),0)})),this._reset()}return e.prototype._reset=function(){this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this._meta=new WeakMap,this._loaded=!1},e.prototype.add=function(e,t){var i,n=this;if(this.events.fire(u.DataEvents.beforeAdd,[e]))return i=Array.isArray(e)?e.map((function(e,i){return 0!==i&&(t+=1),n._add(e,t)})):this._add(e,t),this._reapplyFilters(!0),i},e.prototype.remove=function(e){var t=this;e instanceof Array?o([],e,!0).map((function(e){t._remove(e)})):(0,d.isId)(e)&&this._remove(e)},e.prototype.removeAll=function(){this._reset(),this.events.fire(u.DataEvents.removeAll),this.events.fire(u.DataEvents.change)},e.prototype.exists=function(e){return!!this._pull[e]},e.prototype.getNearId=function(e){if(!this._pull[e])return this._order[0].id||""},e.prototype.getItem=function(e){return this._pull[e]},e.prototype.update=function(e,t,i){var n=this.getItem(e);if(n){if((0,c.isEqualObj)(t,n))return;(0,d.isId)(t.id)&&e!==t.id?((0,c.dhxWarning)("this method doesn't allow change id"),(0,c.isDebug)()):(t.parent&&n.parent&&t.parent!==n.parent&&this.move(e,-1,this,t.parent),(0,d.extend)(this._pull[e],t,!1),this.config.update&&this.config.update(this._pull[e]),i||this._onChange("update",e,this._pull[e])),this._reapplyFilters(!0)}else(0,c.dhxWarning)("item not found")},e.prototype.getIndex=function(e){return(0,d.isId)(e)&&(0,d.isDefined)(this._pull[e])?(0,d.findIndex)(this._order,(function(t){return t&&t.id.toString()===e.toString()})):-1},e.prototype.getId=function(e){if(this._order[e])return this._order[e].id},e.prototype.getLength=function(){return this._order.length},e.prototype.isDataLoaded=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._order.length),(0,d.isNumeric)(e)&&(0,d.isNumeric)(t)?0===this._order.slice(e,t).filter((function(e){return e&&e.$empty})).length:(this._loaded||(this._loaded=!this.find((function(e){return e.$empty}))),!!this._loaded)},e.prototype.filter=function(e,t,i){var n;if(this.isDataLoaded()){if((null==t?void 0:t.$restore)&&(e=this._normalizeFilters(e||this._filters)),!(null==t?void 0:t.add)&&(this._order=this._initOrder||this._order,this._initOrder=null,!(null==t?void 0:t.$restore)))for(var o in this._filters){var r=this._filters[o];(null===(n=r.config)||void 0===n?void 0:n.permanent)?this._applyFilters(r.rule):delete this._filters[o]}var a;if(e&&!(null==t?void 0:t.$restore)&&(a=(null==t?void 0:t.id)||(0,d.uid)(),this._filters[a]={rule:e,config:t||{}}),e&&"function"!=typeof e)if((0,d.isDefined)(e.by))this._applyFilters(e);else for(var o in e)this._applyFilters(e[o]);else this._applyFilters(e);if(!i){var s=this._getPureFilters(this._filters);this.events.fire(u.DataEvents.filter,[(0,d.isEmptyObj)(s)?null:s])}return a}(0,c.dhxWarning)("the method doesn't work with lazyLoad")},e.prototype.resetFilter=function(e,t){var i,n=e||{},o=n.id,r=n.permanent;if((0,d.isEmptyObj)(e))for(var a in this._filters)(null===(i=this._filters[a].config)||void 0===i?void 0:i.permanent)||delete this._filters[a];else r?this._filters={}:o&&delete this._filters[o];return this.filter(null,{$restore:!0},t),(0,d.isEmptyObj)(this._getPureFilters(this._filters))},e.prototype.getFilters=function(e){var t=this.getRawFilters(e),i=t?this._getPureFilters(t):{};return(0,d.isEmptyObj)(i)?null:i},e.prototype.getRawFilters=function(e){var t=this._filters;return(null==e?void 0:e.permanent)&&(t=Object.keys(t).reduce((function(e,i){var n;return(null===(n=t[i].config)||void 0===n?void 0:n.permanent)&&(e[i]=t[i]),e}),{})),(0,d.isEmptyObj)(t)?null:t},e.prototype.find=function(e){for(var t in this._pull){var i=(0,c.findByConf)(this._pull[t],e);if(i)return i}return null},e.prototype.findAll=function(e){var t=[];for(var i in this._pull){var n=(0,c.findByConf)(this._pull[i],e);n&&t.push(n)}return t},e.prototype.sort=function(e,t){this.isDataLoaded()?(t&&t.smartSorting&&(this._sorter=e),e&&this._applySorters(e),this.events.fire(u.DataEvents.change,[void 0,"sort",e])):(0,c.dhxWarning)("the method doesn't work with lazyLoad")},e.prototype.copy=function(e,t,i,n){var o=this;return e instanceof Array?e.map((function(e,r){return o._copy(e,t,i,n,r)})):this._copy(e,t,i,n)},e.prototype.move=function(e,t,i,n,o){var r=this;return e instanceof Array?e.map((function(e,o){return r._move(e,t,i,n,o)})):this._move(e,t,i,n,0,o)},e.prototype.forEach=function(e){for(var t=0;t<this._order.length;t++)e.call(this,this._order[t],t,this._order)},e.prototype.load=function(e,t){return"string"==typeof e&&(this.dataProxy=e=new l.DataProxy(e)),this.dataProxy=e,this._loader.load(e,t)},e.prototype.parse=function(e,t){return this._reset(),this._loader.parse(e,t)},e.prototype.$parse=function(e){var t=this.config.approximate;t&&(e=this._approximate(e,t.value,t.maxNum)),this._parse_data(e),this._reapplyFilters(!0),this.events.fire(u.DataEvents.change,["load"]),this.events.fire(u.DataEvents.load)},e.prototype.save=function(e){"string"==typeof e&&(e=new l.DataProxy(e)),this._loader.save(e)},e.prototype.changeId=function(e,t,i){if(void 0===t&&(t=(0,d.uid)()),i||this.isDataLoaded()){var n=this.getItem(e);n?(n.id=t,(0,d.extend)(this._pull[e],n),this._pull[t]=this._pull[e],i||this._onChange("update",t,this._pull[t]),delete this._pull[e]):(0,c.dhxWarning)("item not found")}else(0,c.dhxWarning)("the method doesn't work with lazyLoad")},e.prototype.isSaved=function(){return!this._changes.order.length},e.prototype.map=function(e){for(var t=[],i=0;i<this._order.length;i++)t.push(e.call(this,this._order[i],i,this._order));return t},e.prototype.mapRange=function(e,t,i){e<0&&(e=0),t>this._order.length-1&&(t=this._order.length-1);for(var n=this._order.slice(e,t),o=[],r=e;r<=t;r++)o.push(i.call(this,this._order[r],r,n));return o},e.prototype.reduce=function(e,t){for(var i=0;i<this._order.length;i++)t=e.call(this,t,this._order[i],i);return t},e.prototype.serialize=function(e){void 0===e&&(e=u.DataDriver.json);for(var t=[],i=function(e){var i=n({},o._order[e]);Object.keys(i).forEach((function(e){e.startsWith("$")&&delete i[e]})),t.push(i)},o=this,r=0;r<this._order.length;r++)i(r);var a=(0,c.toDataDriver)(e);if(a)return a.serialize(t)},e.prototype.getInitialData=function(){return this._initOrder},e.prototype.setMeta=function(e,t,i){if(e){var n=this._meta.get(e);n||(n={},this._meta.set(e,n)),n[t]=i}},e.prototype.getMeta=function(e,t){var i=this._meta.get(e);return i?i[t]:null},e.prototype.getMetaMap=function(e){return this._meta.get(e)},e.prototype.setRange=function(e,t){this._range=t?[e,t]:null},e.prototype.getRawData=function(e,t,i,n){if(i=i||this._order,1===n)return i;if(this._range)if(e=this._range[0]+e,-1===t)t=this._range[1];else{var o=Math.abs(t-e);t=e+o>this._range[1]?this._range[1]:e+o}if(!t||0===e&&(-1===t||t===i.length))return i;if(e>=i.length)return[];(-1===t||t>i.length)&&(t=i.length);var r=i.slice(e,t);return 0!==r.filter((function(e){return e.$empty})).length&&this.events.fire(u.DataEvents.dataRequest,[e,t]),r},e.prototype._add=function(e,t){if(this.isDataLoaded()){var i=this._addCore(e,t);return this._onChange("add",e.id,e),this.events.fire(u.DataEvents.afterAdd,[e]),i}(0,c.dhxWarning)("the method doesn't work with lazyLoad")},e.prototype._remove=function(e){if(this.isDataLoaded()){var t=this._pull[e];if(t){if(!this.events.fire(u.DataEvents.beforeRemove,[t]))return;this._removeCore(t.id),this._onChange("remove",e,t)}this.events.fire(u.DataEvents.afterRemove,[t])}else(0,c.dhxWarning)("the method doesn't work with lazyLoad")},e.prototype._copy=function(t,i,o,r,a){if(this.isDataLoaded()){if(!this.exists(t))return null;var s=(0,d.uid)();return a&&(i=-1===i?-1:i+a),o?o instanceof e||!r?o.exists(t)?(o.add(n(n({},(0,c.copyWithoutInner)(this.getItem(t))),{id:s}),i),s):(o.add((0,c.copyWithoutInner)(this.getItem(t)),i),t):void o.add((0,c.copyWithoutInner)(this.getItem(t)),i):(this.add(n(n({},(0,c.copyWithoutInner)(this.getItem(t))),{id:s}),i),s)}(0,c.dhxWarning)("the method doesn't work with lazyLoad")},e.prototype._move=function(e,t,i,n,o,r){if(this.isDataLoaded()){if(o&&(t=-1===t?-1:t+o),i&&i!==this&&this.exists(e)){var a=(0,d.copy)(this.getItem(e),!0);return r&&(a.id=r),(!r&&i.exists(e)||i.exists(r))&&(a.id=(0,d.uid)()),n&&(a.parent=n),i.add(a,t),this.remove(e),a.id}if(this.getIndex(e)===t)return null;var s=this._order.splice(this.getIndex(e),1)[0];return-1===t&&(t=this._order.length),this._order.splice(t,0,s),this.events.fire(u.DataEvents.change,[e,"update",this.getItem(e)]),e}(0,c.dhxWarning)("the method doesn't work with lazyLoad")},e.prototype._addCore=function(e,t){var i;return this.config.init&&(e=this.config.init(e)),e.id=null!==(i=e.id)&&void 0!==i?i:(0,d.uid)(),this._pull[e.id]&&(0,c.dhxError)("Item ".concat(e.id," already exist")),this._initOrder&&!(0,c.isTreeCollection)(this)&&this._addToOrder(this._initOrder,e,t),this._addToOrder(this._order,e,t),e.id},e.prototype._removeCore=function(e){this.getIndex(e)>=0&&(this._order=this._order.filter((function(t){return t.id!==e})),delete this._pull[e]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter((function(t){return t.id!==e})),delete this._pull[e])},e.prototype._parse_data=function(e){var t=this._order.length;this.config.prep&&(e=this.config.prep(e));for(var i=0,n=e;i<n.length;i++){var o=n[i];this._addCore(o,t++)}},e.prototype._approximate=function(e,t,i){for(var n=e.length,o=t.length,r=Math.floor(n/i),a=Array(Math.ceil(n/r)),s=0,l=0;l<n;l+=r){for(var c=(0,d.copy)(e[l]),u=Math.min(n,l+r),h=0;h<o;h++){for(var f=0,p=l;p<u;p++)f+=e[p][t[h]];c[t[h]]=f/(u-l)}a[s++]=c}return a},e.prototype._onChange=function(e,t,i){for(var o=0,r=0,a=this._changes.order;r<a.length;r++){var s=a[r],l=this._changes.order.indexOf(s);if(s.id===t&&!s.saving&&(o+=1,l===this._changes.order.length-1||this._changes.order[l+1].id!==t)){if(s.error&&(s.error=!1),s=n(n({},s),{obj:i,status:e}),(o+=1)>10?this._changes.order.splice(l,o-10,s):this._changes.order.splice(l+1,0,s),this._loader.updateChanges(this._changes),"remove"===e&&i.$emptyRow)return;return void this.events.fire(u.DataEvents.change,[t,e,i])}}this._changes.order.push({id:t,status:e,obj:n({},i),saving:!1}),this._loader.updateChanges(this._changes),this.events.fire(u.DataEvents.change,[t,e,i])},e.prototype._addToOrder=function(e,t,i){i>=0&&e[i]?(this._pull[t.id]=t,e.splice(i,0,t)):(this._pull[t.id]=t,e.push(t))},e.prototype._applySorters=function(e){this._sort.sort(this._order,e,this._sorter),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,e,this._sorter)},e.prototype._applyFilters=function(e){if(e){var t="function"!=typeof e?this._getRuleCallback(e):e,i=this._order.filter((function(e){return t(e)}));this._initOrder||(this._initOrder=this._order),this._order=i}},e.prototype._reapplyFilters=function(e){void 0===e&&(e=!1);var t=this.getFilters({permanent:!0});t&&this.filter(t,{$restore:!0,add:!0},!0),e&&this._sorter&&this._applySorters()},e.prototype._getRuleCallback=function(e){if((0,d.isDefined)(e.by)&&(0,d.isDefined)(e.match))return e.compare?function(t){return e.compare(t[e.by],e.match,t,e.multi)}:function(t){return t[e.by]==e.match}},e.prototype._getPureFilters=function(e){return Object.keys(e).reduce((function(t,i){var n;return(null===(n=e[i].config)||void 0===n?void 0:n.$local)||(t[i]=e[i]),t}),{})},e.prototype._normalizeFilters=function(e){var t=[];for(var i in e){var o=e[i].rule;if("function"!=typeof o)if((0,d.isDefined)(o.by))t.push(this._getRuleCallback(o));else for(var r in o)t.push(this._getRuleCallback(o[r]));else t.push(o)}return n({},t)},e}();t.DataCollection=h},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.dataDriversPro=t.dataDrivers=void 0;var o=i(69),r=i(70),a=i(122);t.dataDrivers={json:o.JsonDriver,csv:r.CsvDriver},t.dataDriversPro=n(n({},t.dataDrivers),{xml:a.XMLDriver})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonDriver=void 0;var n=function(){function e(){}return e.prototype.toJsonArray=function(e){return this.getRows(e)},e.prototype.serialize=function(e){return e},e.prototype.getFields=function(e){return e},e.prototype.getRows=function(e){return"string"==typeof e?JSON.parse(e):e},e}();t.JsonDriver=n},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CsvDriver=void 0;var o=function(){function e(e){this.config=n(n({},{skipHeader:0,nameByHeader:!1,rowDelimiter:"\n",columnDelimiter:","}),e),this.config.nameByHeader&&(this.config.skipHeader=1)}return e.prototype.getFields=function(e,t){for(var i=new RegExp('(?<!")'.concat(this.config.columnDelimiter,'(?!")')),n=e.trim().split(i),o={},r=0;r<n.length;r++)o[t?t[r]:r+1]=isNaN(Number(n[r]))?n[r].replace(/"[,;"]"/gi,(function(e){return e.split("").splice(1,1).slice(-1,1).join("")})):parseFloat(n[r]);return o},e.prototype.getRows=function(e){return e.trim().split(this.config.rowDelimiter)},e.prototype.toJsonArray=function(e){var t=this,i=this.getRows(e),n=this.config.names;if(this.config.skipHeader){var o=i.splice(0,this.config.skipHeader);this.config.nameByHeader&&(n=o[0].trim().split(this.config.columnDelimiter))}return i.map((function(e){return t.getFields(e,n)}))},e.prototype.serialize=function(e,t){var i=e[0]?Object.keys(e[0]).filter((function(e){return!e.startsWith("$")})).join(this.config.columnDelimiter)+this.config.columnDelimiter+this.config.rowDelimiter:"",n=this._serialize(e);return t?n:i+n},e.prototype._serialize=function(e){var t=this;return e.reduce((function(e,i){var n=Object.keys(i).reduce((function(e,n,o){var r,a;return n.startsWith("$")||"items"===n?e:"".concat(e).concat((null!==(a=null===(r=i[n])||void 0===r?void 0:r.toString())&&void 0!==a?a:"").replaceAll(/[,;"]/gi,(function(e){return'"'.concat(e,'"')}))).concat(o===i.length-1?"":t.config.columnDelimiter)}),"");return i.items?"".concat(e).concat(e?"\n":"").concat(n).concat(t._serialize(i.items)):"".concat(e).concat(e?t.config.rowDelimiter:"").concat(n)}),"")},e}();t.CsvDriver=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;var l=i(1),c=i(3),u=i(4),d=i(0),h=i(21),f=i(8),p=i(13),v=i(127),g=i(22),_=i(37),m=i(18),y=i(128),b=i(9),w=i(24),x=i(19),C=i(152),E=i(156),S=i(157),I=i(20),k=i(30),M=function(e){function t(t,i){var n=e.call(this,t,i)||this;n._touch={duration:350,dblDuration:300,timer:null,start:!1},n._destructed=!1,n.version="5.1.5",n.config=(0,d.extend)({rowHeight:40,headerRowHeight:40,footerRowHeight:40,keyNavigation:!0,sortable:!0,columns:[],data:[],tooltip:!0,rootParent:"string"==typeof t&&t||n._uid},n._normalizeConfig(i)),n.content=(0,C.getContent)(),n._scroll={top:0,left:0},n.config.autoWidth=n.config.autoWidth||n.config.fitToContainer,n.config.adjust=n.config.adjust||n.config.columnsAutoWidth,n.config.editable=n.config.editable||n.config.editing,n.config.leftSplit=n.config.leftSplit||n.config.splitAt,n.config.columns.forEach((function(e){e.format=e.format||e.dateFormat}));var o=function(e,t,i){var o;if(e&&t&&(0,m.isTooltip)(n.config,t)){var r=void 0;if("combobox"===t.editorType||"select"===t.editorType){var a=(0,g.getEditorOptions)(t,e).find((function(i){var n;return(i instanceof Object?i.id.toString():i)===(null===(n=e[t.id])||void 0===n?void 0:n.toString())}));r=a instanceof Object?a.value:a}else if("multiselect"===t.editorType){var s=null===(o=e[t.id])||void 0===o?void 0:o.toString().split(", ");if(null==s?void 0:s.length)r=(0,g.getEditorOptions)(t,e).filter((function(e){return s.includes(e instanceof Object?e.id.toString():e)})).map((function(e){return e instanceof Object?e.value:e})).join(", ")}var l=(0,g.toFormat)(r||e[t.id],t.type,t.format),c=function(){return!!l||"boolean"==typeof l};t.tooltipTemplate?l=t.tooltipTemplate(l,e,t)||null:c()&&t.template&&(l=t.template(l,e,t)),c()&&(0,m.showTooltip)({value:l,node:i,htmlEnable:(0,m.isHtmlEnable)(n.config,t)})}},a=function(e,t){var i,o;void 0===t&&(t="header");var a=e.target,s=a.getAttribute("data-dhx-text-id"),l=n.getColumn(a.getAttribute("data-dhx-id"));if(s&&l){var c=null===(i=l[t])||void 0===i?void 0:i.find((function(e){return e.id===s}));if((0,m.isContentTooltip)(n.config,l,c,t)){var u=(null==c?void 0:c.content)&&["avg","sum","max","min","count"].includes(c.content),d=u?null===(o=n.content[c.content])||void 0===o?void 0:o.toHtml(l,r(r({},n.config),{datacollection:n.data})):null==c?void 0:c.text;"function"==typeof(null==c?void 0:c.tooltipTemplate)&&(d=c.tooltipTemplate(d,c,l)),u&&"function"==typeof l.template&&(d=l.template(d,c,l)),(null==d?void 0:d.toString().length)&&(0,m.showTooltip)({value:d,node:a,htmlEnable:(0,m.isHtmlEnable)(n.config,l,c)})}}};if(n._htmlEvents={onclick:(0,u.eventHandler)((function(e){return(0,u.locate)(e)}),{"dhx_grid-header-cell--sortable":function(e,t){var i,o=e.target.getAttribute("dhx_resized"),r=n.getColumn(t);if(r&&(0,m.isSortable)(n.config,r)&&!o&&n.events.fire(b.GridEvents.beforeSort,[r,"asc"===n._sortDir?"desc":"asc"])){var a=null===(i=(0,u.locateNodeByClassName)(e,"dhx_grid-header-cell"))||void 0===i?void 0:i.querySelector(".dhx_grid-header-cell-text_content").innerHTML,s=a?r.header.find((function(e){return e.text===a})):null,l="asc"===n._sortDir&&n._sortBy===t?"desc":"asc";n._sort(t,l,null==s?void 0:s.sortAs)}},"dhx_grid-expand-cell":function(e,t){e.target.classList.contains("dhx_grid-expand-cell-icon")&&n.events.fire(b.GridEvents.expand,[t])},"dhx_span-expand-cell":function(e,t){e.target.classList.contains("dhx_span-expand-cell-icon")&&n.events.fire(b.GridEvents.expand,[t])}}),onscroll:function(e){n.events.fire(b.GridEvents.scroll,[{y:e.target.scrollTop,x:e.target.scrollLeft}])},onmouseover:{".dhx_grid-cell.dhx_boolean-cell .dhx_checkbox.dhx_cell-editor__checkbox":function(e){var t=e.composedPath(),i=n.data.getItem(t[2].getAttribute("data-dhx-id")),r=n.getColumn(t[1].getAttribute("data-dhx-col-id"));o(i,r,e.target)},".dhx_grid-cell:not(.dhx_boolean-cell)":function(e){var t=n.data.getItem(e.composedPath()[1].getAttribute("data-dhx-id")),i=n.getColumn(e.target.getAttribute("data-dhx-col-id"));o(t,i,e.target)},".dhx_grid-cell:not(.dhx_tree-cell) .dhx_grid-cell__content, .dhx_tree-cell :not(.dhx_grid-cell__content)":function(e){var t=e.composedPath(),i=n.data.getItem(t[2].getAttribute("data-dhx-id")),r=n.getColumn(t[1].getAttribute("data-dhx-col-id"));o(i,r,e.target)},".dhx_grid-cell.dhx_tree-cell .dhx_grid-cell__content":function(e){var t=e.composedPath(),i=n.data.getItem(t[3].getAttribute("data-dhx-id")),r=n.getColumn(t[2].getAttribute("data-dhx-col-id"));o(i,r,t[2])},".dhx_span-cell:not(.dhx_grid-header-cell)":function(e){var t=e.target,i=n.data.getItem(t.getAttribute("data-dhx-id")),o=n.getColumn(t.getAttribute("data-dhx-col-id")),r=n.getSpan(i.id,o.id);if(i&&r&&(0,m.isTooltip)(n.config,r)){var a=r.text||(0,g.toFormat)(i[o.id],o.type,o.format);r.tooltipTemplate?a=r.tooltipTemplate(a,r):o.template&&(a=o.template(a,i,o)),a&&(0,m.showTooltip)({value:a,node:t,htmlEnable:(0,m.isHtmlEnable)(n.config,o)})}},".dhx_grid-header-cell":function(e){return a(e,"header")},".dhx_grid-footer-cell":function(e){return a(e,"footer")}}},n.config.eventHandlers)for(var s=0,c=Object.entries(n.config.eventHandlers);s<c.length;s++){var f=c[s],v=f[0],_=f[1];n._htmlEvents[v]=(0,u.eventHandler)((function(e){return{col:n.getColumn((0,u.locate)(e,"data-dhx-col-id")||(0,u.locate)(e,"data-dhx-id"))||{},row:n.data.getItem((0,u.locate)(e,"data-dhx-id"))||{}}}),_,n._htmlEvents[v])}return(n.config.dragMode||n.config.dragItem)&&(p.dragManager.setItem(n._uid,n),n.config.dragItem||(n.config.dragItem="row"),n.config.dragMode||(n.config.dragMode="both")),n._init(),n.config.columns&&n._parseColumns(!0),n._canDataParse()&&n.data.parse(n.config.data),n.selection=new y.Selection(n,{disabled:!n.config.selection},n.events,n._uid),n.mount(t,n._createView()),(0,l.awaitRedraw)().then((function(){n.config.keyNavigation&&(n.keyManager=new h.KeyManager((function(e,t){return!(t!==n._uid||!n.events.fire(b.GridEvents.beforeKeyDown,[e]))&&(n.events.fire(b.GridEvents.afterKeyDown,[e]),!0)})),n._initHotKey(),I.focusManager.setFocusId(n._uid))})),i.autoEmptyRow&&0===n.data.getLength()&&(n._addEmptyRow(),n.paint()),n}return o(t,e),t.prototype.destructor=function(){this._destructed=!0,this._destroyContent(),this.keyManager&&this.keyManager.destructor(),this.events&&this.events.clear(),this._events&&this._events.clear(),this.export=this.content=this.selection=null,this._activeFilters=this._filterData=this._scroll=this._touch=this._htmlEvents=this._hiddenFilters=null,this.unmount()},t.prototype.setColumns=function(e){var t=this;this._destroyContent(),this.config.columns=e,this._parseColumns(!0),this._adjustColumns(),this._checkFilters(),this._checkMarks(),this.paint(),this.config.keyNavigation&&(0,l.awaitRedraw)().then((function(){t._initHotKey(!0),t.paint()}))},t.prototype.addRowCss=function(e,t){var i=this.data.getItem(e),n=i.$css||"";n.match(new RegExp(t,"g"))||(i.$css=n+" ".concat(t),this.paint())},t.prototype.removeRowCss=function(e,t){var i=this.data.getItem(e),n=i.$css?i.$css.replace(t,""):"";i.$css=n,this.paint()},t.prototype.addCellCss=function(e,t,i){var n=this.getColumn(t),o=this.config.spans?this.getSpan(e,t):null;if(o||n){var r=o?o.css:n.$cellCss[e];if(r){var a=r.match(new RegExp(i,"g"))?"":" ".concat(i);o?o.css+=a:n.$cellCss[e]+=a}else this.data.getItem(e)&&(o?o.css="".concat(i," "):n.$cellCss[e]="".concat(i," "));this.paint()}},t.prototype.removeCellCss=function(e,t,i){var n=this.getColumn(t);n&&(n.$cellCss[e]?(n.$cellCss[e]=n.$cellCss[e].replace(i,""),this.paint()):this.data.getItem(e)&&(n.$cellCss[e]=""))},t.prototype.showColumn=function(e){var t=this.getColumn(e);if(t&&t.hidden&&this.events.fire(b.GridEvents.beforeColumnShow,[t])){t.hidden=!1,this.config.$totalWidth+=t.$width,this._parseColumns(),this.config.data=this._prepareData(this.data);var i=this._hiddenFilters&&this._hiddenFilters[t.id];i&&(this._activeFilters[t.id]=i,delete this._hiddenFilters[t.id],this._checkFilters(),this._checkSelectFilterValue()),this.paint(),this.events.fire(b.GridEvents.afterColumnShow,[t])}},t.prototype.hideColumn=function(e){var t=this.getColumn(e);if(t&&!t.hidden&&this.events.fire(b.GridEvents.beforeColumnHide,[t])){t.hidden=!0,this.config.$totalWidth-=t.$width,this._parseColumns(),this.config.data=this._prepareData(this.data);var i=this._activeFilters&&this._activeFilters[t.id];i&&(this._hiddenFilters||(this._hiddenFilters={}),this._hiddenFilters[t.id]=i,delete this._activeFilters[t.id],this._checkFilters()),this.paint(),this.events.fire(b.GridEvents.afterColumnHide,[t])}},t.prototype.isColumnHidden=function(e){var t=this.getColumn(e);if(t)return!!t.hidden},t.prototype.showRow=function(e){if((0,d.isDefined)(e)){var t=e.toString(),i=this.data.getItem(t);i&&i.hidden&&this.events.fire(b.GridEvents.beforeRowShow,[i])&&(this.data.update(t,{hidden:!1}),this._checkFilters(!0),this.paint(),this.events.fire(b.GridEvents.afterRowShow,[i]))}},t.prototype.hideRow=function(e){if((0,d.isDefined)(e)){var t=e.toString(),i=this.data.getItem(t);i&&this.events.fire(b.GridEvents.beforeRowHide,[i])&&(this.data.update(t,{hidden:!0}),this._checkFilters(!0),this._checkSelectFilterValue(),this.paint(),this.events.fire(b.GridEvents.afterRowHide,[i]))}},t.prototype.isRowHidden=function(e){if((0,d.isDefined)(e)){var t=this.data.getItem(e.toString());return t?!!t.hidden:void 0}},t.prototype.getScrollState=function(){return{x:this._scroll.left,y:this._scroll.top}},t.prototype.scroll=function(e,t){var i=this.getRootView().refs.grid_body.el.querySelector(".scroll-view")||this.getRootView().refs.grid_body.el;i.scrollLeft=!e&&0!==e||"number"!=typeof e?i.scrollLeft:e,i.scrollTop=!t&&0!==t||"number"!=typeof t?i.scrollTop:t,this.paint()},t.prototype.scrollTo=function(e,t){var i=this.selection.getCell(),n=this.config.columns.filter((function(e){return!e.hidden})),o=(0,d.findIndex)(n,(function(e){return e.id==t})),r=i?i.column:this.config.columns[0],a=(0,d.findIndex)(n,(function(e){return e.id==r.id})),s=this.config.leftSplit?(0,m.getTotalWidth)(n.slice(0,this.config.leftSplit)):0,l=(0,m.getTotalWidth)(n.slice(0,o))-(o-a<0?s:0),c=this.data.getRawData(0,-1),u=(0,d.findIndex)(c,(function(t){return t.id==e})),h=(0,m.getTotalHeight)(c.slice(0,u)),f=this.getScrollState(),p=this.config.$width+f.x,v=this.config.$height+f.y-this.config.$headerHeight,g=h-f.y-c[u].$height,_=l-f.x-n[o].$width,y=h+2*c[u].$height+18-v,b=l+2*n[o].$width+18-p,w=g>0&&y<0?0:g<0?g:y,x=_>0&&b<0?0:_<0?_:b;this.scroll(x+f.x,w+f.y)},t.prototype.adjustColumnWidth=function(e,t){void 0===t&&(t=!0);var i=this.config.columns.filter((function(e){return!e.hidden})),n=i.filter((function(t){return t.id===e})),o=this._adjustColumnsWidth({rows:this.config.data,cols:n,totalCols:i,adjust:t});this.config.$totalWidth=i.reduce((function(e,t){if(o[t.id]){t.$fixed=!0;var i=t.maxWidth,n=t.minWidth,r=o[t.id];t.$width=r,i&&r>i&&(t.$width=i),n&&t.$width<n&&(t.$width=n)}return e+t.$width}),0),this.paint()},t.prototype.getCellRect=function(e,t){var i=this.config.columns.filter((function(e){return!e.hidden})),n=this.data.getRawData(0,-1),o=this.getSpan(e,t),r=(0,d.findIndex)(i,(function(e){return e.id==(o?o.column:t)})),a=(0,d.findIndex)(n,(function(t){return t.id==(o?o.row:e)}));return{x:(0,m.getTotalWidth)(i.slice(0,r)),y:(0,m.getTotalHeight)(n.slice(0,a)),height:(null==o?void 0:o.rowspan)?(0,_.getHeight)(n,o.rowspan,a):n[a]?n[a].$height:0,width:(null==o?void 0:o.colspan)?(0,_.getWidth)(this.config.columns,o.colspan,(0,d.findIndex)(this.config.columns,(function(e){return e.id===o.column}))):i[r]?i[r].$width:0}},t.prototype.getColumn=function(e){for(var t,i=0,n=null===(t=this.config)||void 0===t?void 0:t.columns;i<n.length;i++){var o=n[i];if(o.id==e)return o}},t.prototype.addSpan=function(e){this.config.spans=this.config.spans||[];var t=(0,d.findIndex)(this.config.spans,(function(t){return"".concat(t.row)==="".concat(e.row)&&"".concat(t.column)==="".concat(e.column)}));t>=0?this.config.spans[t]=e:(this.config.spans.push((0,k.normalizeSpan)(e,this.config,this.data)),this._checkMarks(),this.paint())},t.prototype.getSpan=function(e,t){var i,n=this;if(this.config.spans){var o=this.data.getIndex(e.toString()),r=this.config.columns.findIndex((function(e){return e.id===t})),a=(0,d.findIndex)(this.config.spans,(function(e){var t=n.data.getIndex(e.row.toString()),i=n.config.columns.findIndex((function(t){return t.id===e.column})),a=t,s=e.rowspan?t+e.rowspan:t+1,l=i,c=e.colspan?i+e.colspan:i+1;return o>=a&&o<s&&r>=l&&r<c}));return null===(i=this.config)||void 0===i?void 0:i.spans[a]}},t.prototype.removeSpan=function(e,t){if(this.config.spans){var i=(0,d.findIndex)(this.config.spans,(function(i){return"".concat(i.row)=="".concat(e)&&"".concat(i.column)=="".concat(t)}));this.config.spans.splice(i,1),this.paint()}},t.prototype.editCell=function(e,t,i){var n,o=this.data.getItem(e),r=this.getColumn(t);if(o&&r){var a=r.editorType,s=this.getSpan(o.id,r.id);if(i||(i=this.config.autoHeight&&"number"!==r.type?"textarea":"input","date"===r.type&&(i="datePicker"),"boolean"===r.type&&(i="checkbox"),a&&(i=a),(0,d.isDefined)(null==s?void 0:s.text)&&(i=this.config.autoHeight?"textarea":"input")),"number"===r.type)if(!((0,d.isDefined)(null==s?void 0:s.text)&&["input","textarea"].includes(i))&&!["input","select","combobox"].includes(i))return;this.events.fire(b.GridEvents.beforeEditStart,[o,r,i])&&((null===(n=this.config.$editable)||void 0===n?void 0:n.editor)||this.config.$editable&&this.config.$editable.row===e&&this.config.$editable.col===t&&this.config.$editable.editorType===i||(this.config.$editable={row:o.id,col:r.id,isSpan:!!s,editorType:i},this.selection.config.disabled||this.selection.setCell(e.toString(),t.toString()),this.paint(),this.events.fire(b.GridEvents.afterEditStart,[o,r,i])))}else(0,p.dhxWarning)("item not found")},t.prototype.editEnd=function(e){this.config.$editable&&this.config.$editable.editor&&this.config.$editable.editor.endEdit(e)},t.prototype.getSortingState=function(){return{dir:this._sortDir,by:this._sortBy}},t.prototype.getHeaderFilter=function(e){var t=this,i=this.getColumn(e);if(i){var n=null;return i.header.forEach((function(i){i.content&&(n=t.content[i.content].element[e])})),n}},t.prototype.edit=function(e,t,i){this.editCell(e,t,i)},t.prototype.paint=function(){var t=this.config.hotkeys?Object.keys(this.config.hotkeys).length:0;!this.keyManager||this.keyManager.getKeyStorageLength()-t||this._initHotKey(!0),e.prototype.paint.call(this)},t.prototype._createView=function(){var e=this;return(0,l.create)({render:function(t,i){return e._destructed?(0,l.el)("div"):(0,w.render)(t,i,e._htmlEvents,e.selection,e._uid)},hooks:this._initHooks()},this)},t.prototype._parseColumns=function(e){void 0===e&&(e=!1);var t=this.config.columns.filter((function(e){return!e.hidden}));this.normalizeColumns({config:this.config,columns:t,configChanged:e}),(0,g.countColumns)(this.config,t)},t.prototype.normalizeColumns=function(e){var t,i,n,o=this,r=e.config,a=e.columns,s=e.configChanged;r.$headerHeightMap=[],r.$footerHeightMap=[],r.$headerHeight=r.$footerHeight=0;for(var l=0,c=a;l<c.length;l++){(p=c[l]).htmlEnable=null!==(t=p.htmlEnable)&&void 0!==t?t:r.htmlEnable,p.$cellCss=p.$cellCss||{},(0,g.normalizeArray)(p,"header"),(0,g.normalizeArray)(p,"footer"),p.minWidth&&p.minWidth<20&&(p.minWidth=20),p.maxWidth&&p.maxWidth<20&&(p.maxWidth=20);var u=p.minWidth||100;p.width&&(u=(u=p.maxWidth&&p.minWidth?p.width>=p.minWidth&&p.width<=p.maxWidth?p.width:p.width>=p.maxWidth?p.maxWidth:p.minWidth:p.maxWidth?p.width<=p.maxWidth?p.width:p.maxWidth>100?p.maxWidth:100:p.minWidth?p.width>=p.minWidth?p.width:p.minWidth:p.width)<20?20:u),p.$width=p.$width&&!s?p.$width:u,p.$width>p.maxWidth&&(p.$width=p.maxWidth),p.$width<p.minWidth&&(p.$width=p.minWidth)}for(var d=function(e){if(null===(i=e.header)||void 0===i?void 0:i.length){var t=0;e.header.forEach((function(i,n){(t=r.headerAutoHeight?o.getNormalizeContentHeight(i,e,r):r.headerRowHeight)>(r.$headerHeightMap[n]||0)&&(r.$headerHeightMap[n]=Math.max(t,r.headerRowHeight))}))}if(null===(n=e.footer)||void 0===n?void 0:n.length){var a=0;e.footer.forEach((function(t,i){(a=r.footerAutoHeight?o.getNormalizeContentHeight(t,e,r):r.footerRowHeight)>(r.$footerHeightMap[i]||0)&&(r.$footerHeightMap[i]=Math.max(a,r.footerRowHeight))}))}},h=0,f=a;h<f.length;h++){var p;d(p=f[h])}r.$headerHeight=r.$headerHeightMap.reduce((function(e,t){return e+t}),0),r.$footerHeight=r.$footerHeightMap.reduce((function(e,t){return e+t}),0),this._normalizeSpans()},t.prototype.getNormalizeContentHeight=function(e,t,i){return this.config.footerRowHeight},t.prototype._parseData=function(){this._detectColsTypes(),this.config.data=this.data.map((function(e){return e})),this.config.data=this._prepareData(this.data),this._checkMarks(),this._applyLocalFilter(),this._checkFilters(),this._render()},t.prototype._createCollection=function(e){this.data=new p.DataCollection({prep:e},this.events)},t.prototype._getRowIndex=function(e){return this.data.getIndex(e)},t.prototype._setEventHandlers=function(){var e=this,t=function(t){var i=t.source,n=t.target,o=a(t,["source","target"]);(null==i?void 0:i.length)&&i.map((function(t){return e.data.exists(t)&&e.data.update(t,o)})),e.data.exists(n)&&e.data.update(n,o)};this.data.events.on(p.DataEvents.load,(function(){e._applyLocalFilter(!0),e._parseData(),e.config.data instanceof p.DataCollection?(0,l.awaitRedraw)().then((function(){return e._normalizeSpans()})):e._normalizeSpans()})),this.data.events.on(p.DataEvents.change,(function(t,i,n){if("setPage"!==i){if("sort"===i)n.dir?e._sortDir=n.dir:e._sortBy===n.by?e._sortDir="asc"===e._sortDir?"desc":"asc":e._sortDir="asc",e._sortBy=n.by;else if("add"===i||"update"===i||"remove"===i){if((0,d.isId)(t)&&"remove"===i){var o=e.selection.getCells().find((function(e){return e.row.id===t}));o&&e.selection.removeCell(o.row.id,o.column.id)}e.config.data=e._prepareData(e.data)}else(0,p.isTreeCollection)(e.data)&&(e.config.data=e._prepareData(e.data)),e._adjustColumns();if((0,d.isId)(t)&&(e._checkFilters(),e._checkSelectFilterValue()),e._detectColsTypes(),e._removeMarks(),e._checkMarks(),e.config.autoEmptyRow&&(!e._activeFilters||(0,d.isEmptyObj)(e._activeFilters))){var r=e.data.find({by:"$emptyRow",match:!0});if(r){if(r.id===t)return;e.data.move(r.id,e.data.getLength()-1)}else e._addEmptyRow()}switch(i){case"add":case"remove":case"sort":e._normalizeSpans()}e._render()}else(0,l.awaitRedraw)().then((function(){var t=e.config.columns.find((function(e){return!0!==e.hidden}));e.scrollTo(e.data.getId(n[0]).toString(),t.id.toString()),e._render()}))})),this.data.events.on(p.DataEvents.filter,(function(t){t||e.data.getRawFilters({permanent:!0})||e._applyLocalFilter(),!t||(0,p.isOnlyPermanentFilters)(t)?(e._filterData=e.data.map((function(e){return e}))||[],e._setUniqueData(),e._clearFilterValue()):e._checkFilters(),e._removeMarks(),e._checkMarks(),e._normalizeSpans(),e.paint()})),this.data.events.on(p.DataEvents.removeAll,(function(){e._hiddenFilters={},e.config.columns.map((function(e){e.header.map((function(t){!t.content||"selectFilter"!==t.content&&"comboFilter"!==t.content||(e.$uniqueData=[])}))})),(0,d.isEmptyObj)(e._activeFilters)||e.data.resetFilter(),e._clearFilterValue(!0)})),this.events.on(p.DragEvents.beforeDrag,(function(t,i){return e.data.getItem(t.start)?e.events.fire(b.GridEvents.beforeRowDrag,[t,i]):"column"===e.config.dragItem||"both"===e.config.dragItem?e.events.fire(b.GridEvents.beforeColumnDrag,[t,i]):void 0})),this.events.on(p.DragEvents.dragStart,(function(i,n){var o=i.source,r=i.target,a=i.start;t({source:o,target:r,$dragtarget:!0}),e.data.getItem(a)?(e.events.fire(b.GridEvents.dragRowStart,[i,n]),e._autoScroll("vertical")):"column"!==e.config.dragItem&&"both"!==e.config.dragItem||(e.events.fire(b.GridEvents.dragColumnStart,[i,n]),e._autoScroll("horizontal"))})),this.events.on(p.DragEvents.dragIn,(function(t,i){e.data.getItem(t.start)?e.events.fire(b.GridEvents.dragRowIn,[t,i]):"column"!==e.config.dragItem&&"both"!==e.config.dragItem||e.events.fire(b.GridEvents.dragColumnIn,[t,i])})),this.events.on(p.DragEvents.dragOut,(function(t,i){e.data.getItem(t.start)?e.events.fire(b.GridEvents.dragRowOut,[t,i]):"column"!==e.config.dragItem&&"both"!==e.config.dragItem||e.events.fire(b.GridEvents.dragColumnOut,[t,i])})),this.events.on(p.DragEvents.canDrop,(function(i,n){var o=i,r=o.source,a=o.target,s=o.dragItem;delete i.dragItem,t({source:r,target:a,$drophere:!0}),"row"===s?e.events.fire(b.GridEvents.canRowDrop,[i,n]):"column"!==e.config.dragItem&&"both"!==e.config.dragItem||e.events.fire(b.GridEvents.canColumnDrop,[i,n])})),this.events.on(p.DragEvents.cancelDrop,(function(i,n){var o=i.source,r=i.target,a=i.start;t({source:o,target:r,$drophere:void 0,$dragtarget:void 0}),e.data.getItem(a)?e.events.fire(b.GridEvents.cancelRowDrop,[i,n]):"column"!==e.config.dragItem&&"both"!==e.config.dragItem||e.events.fire(b.GridEvents.cancelColumnDrop,[i,n])})),this.events.on(p.DragEvents.beforeDrop,(function(t,i){return"row"!==e.config.dragItem||"both"!==e.config.dragMode&&"target"!==e.config.dragMode?"column"===e.config.dragItem||"both"===e.config.dragItem?e.events.fire(b.GridEvents.beforeColumnDrop,[t,i]):void 0:e.events.fire(b.GridEvents.beforeRowDrop,[t,i])})),this.events.on(p.DragEvents.afterDrop,(function(t,i){var n,o;if(e.data.getItem(t.start)){var r=t.source;if(r.some((function(e){return e==t.target})))return;for(var a=e.data.getItem(t.start),l=0,c=e.config.columns;l<c.length;l++){var u=c[l];void 0===a[u.id]&&e.data.update(a.id,((n={})[u.id]=null,n),!0)}var d=e.data.getInitialData(),h=null==d?void 0:d.findIndex((function(e){return e.id==t.start})),f=null==d?void 0:d.findIndex((function(e){return e.id==t.target}));if(h>-1&&f>-1)if((null===(o=t.source)||void 0===o?void 0:o.length)>1){for(var p=[],v=function(e){var t=null==d?void 0:d.findIndex((function(t){return t.id==e})),i=null==d?void 0:d.splice(t,1)[0];p.push(i)},g=0,_=r;g<_.length;g++){v(_[g])}f=null==d?void 0:d.findIndex((function(e){return e.id==t.target})),f>0&&++f,null==d||d.splice.apply(d,s([f,0],p,!1))}else null==d||d.splice(f,0,null==d?void 0:d.splice(h,1)[0]);e.config.data=e._prepareData(d||e.data.map((function(e){return e}))),e.data.parse(e.config.data),e._checkFilters(),e.paint(),e.events.fire(b.GridEvents.afterRowDrop,[t,i])}else"column"!==e.config.dragItem&&"both"!==e.config.dragItem||e.events.fire(b.GridEvents.afterColumnDrop,[t,i])})),this.events.on(p.DragEvents.afterDrag,(function(i,n){var o=i.source,r=i.target,a=i.start;t({source:o,target:r,$dragtarget:void 0}),e.data.getItem(a)?e.events.fire(b.GridEvents.afterRowDrag,[i,n]):"column"!==e.config.dragItem&&"both"!==e.config.dragItem||e.events.fire(b.GridEvents.afterColumnDrag,[i,n]),e.config.data=e._prepareData(e.data instanceof Array?e.data.map((function(e){return e})):e.data.getInitialData()||e.data),e.data.parse(e.config.data),e._normalizeSpans()})),this.events.on(b.GridEvents.cellMouseDown,(function(t,i,n){if(n.targetTouches){if(e._touch.timer=setTimeout((function(){e._dragStart(n)}),e._touch.duration),e._touch.timeStamp)e._touch.dblDuration>=e._touch.timeStamp-+n.timeStamp.toFixed()&&((!1!==i.editable&&e.config.editable||i.editable)&&e.editCell(t.id,i.id,i.editorType),n.preventDefault(),e.events.fire(b.GridEvents.cellDblClick,[t,i,n])),e._touch.timeStamp=null;else e._touch.timeStamp=+n.timeStamp.toFixed();setTimeout((function(){e._touch.timeStamp=null}),e._touch.dblDuration)}else e._dragStart(n)})),this._events.on(b.GridSystemEvents.cellTouchMove,(function(t,i,n){e._touch.start&&n.preventDefault(),e._clearTouchTimer()})),this._events.on(b.GridSystemEvents.cellTouchEnd,(function(){e._touch.start=!1,e._clearTouchTimer()})),this.events.on(b.GridEvents.filterChange,(function(t,i,n,o){var r,a,s;if(e.events.fire(b.GridEvents.beforeFilter,[t,i])){if(e.config.autoEmptyRow){var l=e.data.find({by:"$emptyRow",match:!0});l&&e.data.remove(l.id)}e._activeFilters||(e._activeFilters={});var c=e.getColumn(i),u=c.header.filter((function(e){return e.content===n&&void 0!==e.customFilter}))[0];if("comboFilter"===n&&void 0!==t||"comboFilter"!==n&&""!==t){var d=(0,g.getEditorOptions)(c);"combobox"!==c.editorType&&"select"!==c.editorType&&"multiselect"!==c.editorType||!d||(t=Array.isArray(t)?t.map((function(e){var t;return(null===(t=d.find((function(t){return"string"==typeof t?t===e:t.value===e})))||void 0===t?void 0:t.id)||e})):null!==(a=null===(r=d.find((function(e){return"string"==typeof e?e===t:e.value===t})))||void 0===r?void 0:r.id)&&void 0!==a?a:t);e._activeFilters[i]={by:i,match:t,compare:null!==(s=null==u?void 0:u.customFilter)&&void 0!==s?s:function(t){var i=e.getColumn(t);return function(t,o,r,a){return e.content[n].match({val:t,match:o,obj:r,multi:a,col:i})}}(i),multi:"multiselect"===(null==c?void 0:c.editorType)}}else delete e._activeFilters[i];o||e.data.filter(e._activeFilters)}})),this.events.on(b.GridEvents.scroll,(function(t){e._scroll={top:t.y,left:t.x},e.editEnd(),e.paint()})),this.events.on(b.GridEvents.cellDblClick,(function(t,i,n){(0,u.locateNodeByClassName)(n,"dhx_boolean-cell")||t.hasOwnProperty("$groupName")||(!1!==i.editable&&e.config.editable||i.editable)&&e.editCell(t.id,i.id,i.editorType)})),this.events.on(b.GridEvents.afterEditEnd,(function(t,i,n){var o,a;if(!(null===(a=e.config.$editable)||void 0===a?void 0:a.editor)||e.config.$editable.col===n.id&&e.config.$editable.row===i.id){var s,l;e.config.$editable?(s=e.config.$editable.row,l=e.config.$editable.col):(s=i.id,l=n.id);var c=e.getSpan(s,l);if((0,d.isDefined)(null==c?void 0:c.text)&&void 0!==t)c.text=t.toString();else{var u=e.data.getItem(s);delete u.$emptyRow,void 0!==t&&e.data.update(s,r(r({},u),((o={})[l]=t,o)))}e.config.$editable=null,e.paint()}})),this.events.on(b.GridEvents.headerCellMouseDown,(function(t,i){var n=i.target.getAttribute("dhx_resized");if(n&&e.events.fire(b.GridEvents.beforeResizeStart,[t,i])&&(0,E.startResize)(e,n.toString(),i,(function(){e.paint(),e.config.$resizing=null,e.events.fire(b.GridEvents.afterResizeEnd,[t,i])})),i.targetTouches){if(e._touch.timeStamp)e._touch.dblDuration>=e._touch.timeStamp-+i.timeStamp.toFixed()&&(i.preventDefault(),e.events.fire(b.GridEvents.headerCellDblClick,[t,i])),e._touch.timeStamp=null;else e._touch.timeStamp=+i.timeStamp.toFixed();setTimeout((function(){e._touch.timeStamp=null}),e._touch.dblDuration)}})),this.events.on(b.GridEvents.footerCellDblClick,(function(t,i){if(i.targetTouches){if(e._touch.timeStamp)e._touch.dblDuration>=e._touch.timeStamp-+i.timeStamp.toFixed()&&(i.preventDefault(),e.events.fire(b.GridEvents.footerCellDblClick,[t,i])),e._touch.timeStamp=null;else e._touch.timeStamp=+i.timeStamp.toFixed();setTimeout((function(){e._touch.timeStamp=null}),e._touch.dblDuration)}})),this.events.on(b.GridEvents.resize,(function(){return e._parseColumns()})),this.events.on(b.GridEvents.afterResizeEnd,(function(t){var i;e.config.columns=null===(i=e.config.columns)||void 0===i?void 0:i.map((function(e){return e.id==t.id&&(e.width=t.$width),e})),e._parseColumns()}))},t.prototype._addEmptyRow=function(){var e=this.data.getId(this.data.getLength()-1),t=this.data.getItem(e),i=this.config.columns.filter((function(e){return!e.hidden}));(0,m.isRowEmpty)(t)||this.data.add(i.reduce((function(e,t){return e[t.id]="",e}),{$emptyRow:!0}))},t.prototype._sort=function(e,t,i){var n=this;t||(t=this._sortBy===e&&"asc"===this._sortDir?"desc":"asc");this.data.sort({by:e,dir:t,as:null!=i?i:function(t){var i=n.getColumn(e);return t&&"date"===i.type?"string"==typeof t?(0,x.stringToDate)(t,i.format).getTime():t.getTime():t?"".concat(t):""}}),this.events.fire(b.GridEvents.afterSort,[this.getColumn(e),t])},t.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},t.prototype._checkFilters=function(e){if(void 0===e&&(e=!1),(0,d.isEmptyObj)(this._activeFilters))e&&this.data.resetFilter(),this._filterData=this.data.map((function(e){return e}))||[],this._setUniqueData();else{var t=this.data.getRawFilters({permanent:!0});this.data.filter(t,{$restore:!0},!0),this._filterData=this.data.map((function(e){return e}))||[],this._setUniqueData(),this.data.filter(null,{$restore:!0},!0),this._filterData=this.data.map((function(e){return e}))||[],this._setUniqueData(!0)}},t.prototype._setUniqueData=function(e){var t=this;void 0===e&&(e=!1),this._filterData&&this.config.columns.forEach((function(i){i.header.forEach((function(n){if(n.content&&("selectFilter"===n.content||"comboFilter"===n.content)){var o=i.header.some((function(e){var t;return null===(t=e.filterConfig)||void 0===t?void 0:t.multiselection}));if(!e||e&&!o){var r=(0,g.getUnique)(t._filterData,i.id,o),a=(0,g.getEditorOptions)(i);"combobox"!==i.editorType&&"select"!==i.editorType&&"multiselect"!==i.editorType||!a||(r=r.map((function(e){var t=a.find((function(t){return"string"==typeof t?e===t:e===t.id}));return t&&"string"!=typeof t?t.value:e}))),r="string"!==i.type?Array.from(new Set(r.map((function(e){return(0,g.toFormat)(e,i.type,i.format)})))):r,e?i.$activeFilterData=r:(i.$uniqueData=r,i.$activeFilterData&&delete i.$activeFilterData)}}}))}))},t.prototype._checkSelectFilterValue=function(){var e,t=null===(e=this.content)||void 0===e?void 0:e.selectFilter;if(t)for(var i in t.value){var n=this.getColumn(i),o=t.value[i];n.hidden||!o||n.$uniqueData.includes(o)||t.element[i].clear()}},t.prototype._clearFilterValue=function(e){var t=this;void 0===e&&(e=!1),["selectFilter","inputFilter"].map((function(e){var i;return null===(i=t.content)||void 0===i?void 0:i[e]})).filter((function(e){return e})).forEach((function(i){for(var n in i.value)!i.value[n]||!e&&t.getColumn(n).hidden||i.element[n].clear(!0)}))},t.prototype._adjustColumns=function(){var e=this;if("boolean"==typeof this.config.adjust||"data"===this.config.adjust||"header"===this.config.adjust||"footer"===this.config.adjust){if(!(n=this.config.columns.filter((function(e){return!e.hidden}))).length)return;var t=this.config.data&&this.config.data.length?this.config.data:this.data.map((function(e){return e})),i=this._adjustColumnsWidth({rows:t,cols:n,totalCols:n});this.config.$totalWidth=n.reduce((function(e,t){t.$fixed=!0;var n=t.maxWidth,o=t.minWidth,r=i[t.id];return t.$width=r,n&&r>n&&(t.$width=n),o&&t.$width<o&&(t.$width=o),e+t.$width}),0)}else{var n;if(!(n=this.config.columns.filter((function(e){return!e.hidden&&e.adjust}))).length)return;n.forEach((function(t){e.adjustColumnWidth(t.id,t.adjust)}))}},t.prototype._prepareData=function(e){var t=this;return(this.config.autoHeight||this.config.headerAutoHeight||this.config.footerAutoHeight)&&(this.config.autoHeight=this.config.headerAutoHeight=this.config.footerAutoHeight=!1),this._normalizeDataType(),this._adjustColumns(),e.map((function(e){return e.$height=e.height||t.config.rowHeight,e}))},t.prototype._adjustColumnsWidth=function(e){var t,i,n,o,r=this,a=e.rows,s=e.cols,l=e.adjust,c=void 0===l?this.config.adjust:l,u={};if("header"===c||!0===c){var d=s.filter((function(e){return e.header}));if(y=(0,g.getMaxColsWidth)(this._prepareColumnData(d,"header"),d,{font:"bold 14.4px Arial"},"header"))for(var h=0,f=Object.entries(y);h<f.length;h++){var p=f[h],v=p[0],_=p[1];u=Object.assign(u,((t={})[v]=+_+24+(o=this.getColumn(v),(0,m.isSortable)(r.config,o)?16:0),t))}}if("footer"===c||!0===c){var y;d=s.filter((function(e){return e.footer}));if(y=(0,g.getMaxColsWidth)(this._prepareColumnData(d,"footer"),d,{font:"bold 14.4px Arial"},"footer"))for(var b=0,w=Object.entries(y);b<w.length;b++){var x=w[b];v=x[0],_=x[1];(u[v]&&u[v]<+_+24||!u[v])&&(u=Object.assign(u,((i={})[v]=+_+24,i)))}}if(("data"===c||!0===c)&&(y=(0,g.getMaxColsWidth)(a,s,{font:"normal 14.4px Arial"},"data")))for(var C=0,E=Object.entries(y);C<E.length;C++){var S=E[C];v=S[0],_=S[1];(u[v]&&u[v]<+_+24||!u[v])&&(u=Object.assign(u,((n={})[v]=+_+24,n)))}return u},t.prototype._prepareColumnData=function(e,t){for(var i,n,o,a,s,l,c,u,d,h,f,p,v,g=[],_=0;_<e.length;_++){for(var y=[],b=0;b<(null===(n=e[_])||void 0===n?void 0:n[t].length);b++){var w={};if(null===(a=null===(o=e[_])||void 0===o?void 0:o[t][b])||void 0===a?void 0:a.text){var x=null===(l=null===(s=e[_])||void 0===s?void 0:s[t][b])||void 0===l?void 0:l.htmlEnable;w[e[_].id]=(null===(u=null===(c=e[_])||void 0===c?void 0:c[t][b])||void 0===u?void 0:u.text)||"",x&&(w[e[_].id]=(0,m.removeHTMLTags)(w[e[_].id])),y.push(w)}else if(null===(h=null===(d=e[_])||void 0===d?void 0:d[t][b])||void 0===h?void 0:h.content){var C=null===(f=this.content)||void 0===f?void 0:f[null===(v=null===(p=e[_])||void 0===p?void 0:p[t][b])||void 0===v?void 0:v.content];"function"==typeof C.calculate?w[e[_].id]=(null==C?void 0:C.toHtml(this.getColumn(e[_].id),r(r({},this.config),{datacollection:this.data})))||"":w[e[_].id]="",y.push(w)}}for(var E=0;E<y.length;E++)for(var S=0,I=Object.entries(y[E]);S<I.length;S++){var k=I[S],M=k[0],O=k[1];g[E]=r({},g[E])||{},g[E]=Object.assign(g[E],((i={})[M]=O,i))}}return g},t.prototype._dragStart=function(e){if(this.config.dragMode&&("row"===this.config.dragItem||"both"===this.config.dragItem)&&!this.config.$editable){var t=this.getColumn(e.target.getAttribute("data-dhx-col-id"));if(!1===(null==t?void 0:t.draggable))return;var i=(0,u.locateNode)(e,"data-dhx-id"),n=i&&i.getAttribute("data-dhx-id");return e.targetTouches&&(this._touch.start=!0),p.dragManager.onMouseDown(e,[n],[this._getRowGhost([n])])}},t.prototype._getRowGhost=function(e){var t=this._container||(0,u.toNode)(this._uid),i=e.map((function(e){return t.querySelector('.dhx_grid-row[data-dhx-id="'.concat(e,'"]'))})),n=document.createElement("div");return i.forEach((function(e){return e&&n.appendChild(e.cloneNode(!0))})),n},t.prototype._initHooks=function(){var e=this;return{didMount:function(){var t;if(e._canDataParse(!0)){if(!e._container){var i=e.getRootView().node.parent.el,n=(0,w.getElementSizes)(i),o=null===(t=e.scrollView)||void 0===t?void 0:t.config.enable;(0,w.applyAutoWidth)(e.config,n,!0,!1,o)}e.data.parse(e.config.data)}e.config.autoWidth&&e._parseColumns()}}},t.prototype._normalizeDataType=function(){var e=this,t=this.config.columns.reduce((function(e,t){return"number"===t.type&&e.push(t),e}),[]);t.length&&this.data.forEach((function(i){for(var n,o=0,r=t;o<r.length;o++){var a=r[o],s=(0,g.getValueForNumberColumn)(a,i[a.id]);if(Number.isNaN(s))throw new Error("Incorrect data in column with type 'number', see docs: https://docs.dhtmlx.com/suite/grid/api/api_gridcolumn_properties/");i[a.id]!==s&&e.data.update(i.id,((n={})[a.id]=s,n),!0)}}))},t.prototype._applyLocalFilter=function(e){void 0===e&&(e=!1),e?this.data.filter((function(e){return e}),{$local:!0},!0):this.data.filter((function(e){return!e.hidden}),{$local:!0,permanent:!0},!0)},t.prototype._canDataParse=function(e){var t;return void 0===e&&(e=!1),!!((null===(t=this.config.data)||void 0===t?void 0:t.length)&&this.config.data instanceof Array&&this.config.columns)&&(this.config.autoWidth&&this.config.autoHeight?e:!e)},t.prototype._init=function(){this.events=new c.EventSystem(this),this._events=new c.EventSystem(this),this._attachDataCollection(),this.export=new v.Exporter("grid",this.version,this),this._setEventHandlers()},t.prototype._attachDataCollection=function(){var e=this;if(this.config.data instanceof p.DataCollection)return this.data=this.config.data,this.data.config.collapsed=this.config.collapsed,void(this.config.data=this.data.serialize());this._createCollection((function(t){return t.spans&&(e.config.spans=t.spans,t=t.data),t}))},t.prototype._setMarks=function(e,t){for(var i=this.data.map((function(t){return{id:t.id,data:t[e.id],row:t}})),n=this.data.map((function(t){return t[e.id]})),o=function(i){var o=t(i.data,n,i.row,e);if(o){e.$cellCss=e.$cellCss||{};var a=(e.$cellCss[i.id]||"").split(" ");o.split(" ").map((function(e){a.includes(e)||a.push(e)}));var s=a.join(" "),l=r.getSpan(i.id,e.id);e.$cellCss[i.id]=s,l&&(l.rowspan||l.colspan&&l.column===e.id)&&l.$markCss!==s&&(l.$markCss=s)}},r=this,a=0,s=i;a<s.length;a++){o(s[a])}},t.prototype._checkMarks=function(){var e=this;this.config.columns.map((function(t){var i=t.mark;i&&("function"==typeof i?e._setMarks(t,i):e._setMarks(t,(function(e,t){var n=[];t.forEach((function(e){null!=e&&""!==e&&n.push(parseFloat(e))}));var o=(0,d.getMinArrayNumber)(n),r=(0,d.getMaxArrayNumber)(n);return i.max&&r===parseFloat(e)?i.max:!(!i.min||o!==parseFloat(e))&&i.min})))}))},t.prototype._removeMarks=function(){var e;this.config.columns.forEach((function(e){e.mark&&(e.$cellCss={})})),null===(e=this.config.spans)||void 0===e||e.forEach((function(e){e.$markCss&&delete e.$markCss}))},t.prototype._detectColsTypes=function(){this.config.columns.forEach((function(e){return e.type?e:e.format?(e.type="number",e):void(e.type||(e.type="string"))}))},t.prototype._destroyContent=function(){for(var e in this.content)"comboFilter"===e&&this.content[e].destroy()},t.prototype._render=function(){this.paint()},t.prototype._initHotKey=function(e){void 0===e&&(e=!1);var t=(0,S.getKeysHandlers)(this);for(var i in t)this.keyManager.exist(i)||this.keyManager.addHotKey(i,t[i]);if(!e)for(var i in this.config.hotkeys)this.keyManager.addHotKey(i,this.config.hotkeys[i])},t.prototype._normalizeConfig=function(e){return Object.keys(e).forEach((function(t){t.startsWith("$")&&delete e[t]})),e},t.prototype._normalizeSpans=function(){var e,t=this;this.config.spans=null===(e=this.config.spans)||void 0===e?void 0:e.map((function(e){return(0,k.normalizeSpan)(e,t.config,t.data)}))},t.prototype._autoScroll=function(e){var t,i,n,o=(null===(t=this.scrollView)||void 0===t?void 0:t.config.enable)?null===(i=this.getRootNode())||void 0===i?void 0:i.querySelector(".scroll-view"):null===(n=this.getRootNode())||void 0===n?void 0:n.querySelector(".dhx_grid-body");if(o){var r=null,a=o.getBoundingClientRect(),s=a.top,l=a.bottom,c=a.left,u=a.right,d=a.height,h=a.width,f=function(e){"up"===e||"down"===e?o.scrollBy(0,"up"===e?-40:40):o.scrollBy("left"===e?-40:40,0),r=setTimeout((function(){f(e)}),100)},p=function(t){var i=t.clientX,n=t.clientY;switch(e){case"horizontal":i>u-30&&i<u&&n>s&&n<l?r||f("right"):i>c&&i<c+30&&n>s&&n<l?r||f("left"):r&&(clearTimeout(r),r=null);break;case"vertical":n>l-30&&n<l&&i>c&&i<u?r||f("down"):n>s&&n<s+30&&i>c&&i<u?r||f("up"):r&&(clearTimeout(r),r=null)}};(h<o.scrollWidth||d<o.scrollHeight)&&(document.addEventListener("pointermove",p),document.addEventListener("pointerup",(function(){document.removeEventListener("pointermove",p),r&&clearTimeout(r)}),{once:!0}))}},t}(f.View);t.Grid=M},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0;var a=i(0),s=i(1),l=i(8),c=i(55),u=i(135),d=i(3),h=i(54),f=function(e){function t(t,i){var n=e.call(this,t,i)||this;n._disabled=[];var o=t;return o&&o.isVisible&&(n._parent=o),n._parent&&n._parent.events?n.events=n._parent.events:n.events=new d.EventSystem(n),n.config.full=void 0===n.config.full?Boolean(n.config.header||n.config.collapsable||n.config.headerHeight||n.config.headerIcon||n.config.headerImage):n.config.full,n._afterWindowResized=n._resizedWindow.bind(n),n._initHandlers(),n.id=n.config.id||(0,a.uid)(),n._progress=!!n.config.progressDefault,n._stopProgressDefault=!1,n._isXDirection()&&!i.width&&(i.$autoWidth=!0),n._isXDirection()||i.height||(i.$autoHeight=!0),n}return o(t,e),t.prototype.paint=function(){var e;if(this.isVisible()){var t=this.getRootView();t?t.redraw():null===(e=this._parent)||void 0===e||e.paint()}},t.prototype.isVisible=function(){var e;if(!this._parent)return!(!this._container||!this._container.tagName)||Boolean(this.getRootNode());var t=null===(e=this._parent.config)||void 0===e?void 0:e.activeView;return(!t||t===this.id)&&(!this.config.hidden&&(!this._parent||this._parent.isVisible()))},t.prototype.hide=function(){this.events.fire(c.LayoutEvents.beforeHide,[this.id])&&(this.config.hidden=!0,this._resetCellsSize(),this._parent&&this._parent.paint&&this._parent.paint(),this.events.fire(c.LayoutEvents.afterHide,[this.id]))},t.prototype.show=function(){this.events.fire(c.LayoutEvents.beforeShow,[this.id])&&(this._parent&&this._parent.config&&void 0!==this._parent.config.activeView?this._parent.config.activeView=this.id:this.config.hidden=!1,this._parent&&!this._parent.isVisible()&&this._parent.show(),this.paint(),this.events.fire(c.LayoutEvents.afterShow,[this.id]))},t.prototype.expand=function(){this.events.fire(c.LayoutEvents.beforeExpand,[this.id])&&(this.config.collapsed=!1,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(c.LayoutEvents.afterExpand,[this.id]),this.paint())},t.prototype.collapse=function(){this.events.fire(c.LayoutEvents.beforeCollapse,[this.id])&&(this.config.collapsed=!0,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(c.LayoutEvents.afterCollapse,[this.id]),this.paint())},t.prototype.toggle=function(){this.config.collapsed?this.expand():this.collapse()},t.prototype._checkNextSize=function(e){var t=null!=e?e:this._getNextCell();return!!t&&(this._isXDirection()&&t.config.$autoWidth&&t.config.width?(t.config.width=void 0,!0):!this._isXDirection()&&t.config.$autoHeight&&t.config.height?(t.config.height=void 0,!0):!e&&t._checkNextSize())},t.prototype.getParent=function(){return this._parent},t.prototype.destructor=function(){var e;this.events&&this.events.clear(),window.removeEventListener("resize",this._afterWindowResized),"function"==typeof(null===(e=this.getWidget())||void 0===e?void 0:e.destructor)&&this.getWidget().destructor(),this.config=this.events=this.id=this._parent=this._handlers=this._uid=this._disabled=this._resizerHandlers=null,this.unmount()},t.prototype.getWidget=function(){return this._ui},t.prototype.getCellView=function(){return this._parent&&this._parent.getRefs(this._uid)},t.prototype.attach=function(e,t){return this.config.html=null,"object"==typeof e?this._ui=e:"string"==typeof e?this._ui=new window.dhx[e](null,t):"function"==typeof e&&(e.prototype instanceof l.View?this._ui=new e(null,t):this._ui={getRootView:function(){return e(t)}}),this.paint(),this._ui},t.prototype.attachHTML=function(e){this.config.html=e,this.paint()},t.prototype.detach=function(){this._stopProgressDefault=!1,this._ui=this.config.html=null,this.paint()},t.prototype.progressShow=function(){this.config.progressDefault&&(this._stopProgressDefault=!1),this._progress=!0,this.paint()},t.prototype.progressHide=function(){this.config.progressDefault&&(this._stopProgressDefault=!0),this._progress=!1,this.paint()},t.prototype.isVisibleProgress=function(){return this._progress},t.prototype.toVDOM=function(e){var t,i;if(null===this.config&&(this.config={}),!this.config.hidden){var n,o=this.config.$fieldset,l=this._calculateStyle(),c=(0,a.isDefined)(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:"".concat(this.config.padding,"px")}:"",u=this.config.full||this.config.html?l:r(r({},l),c),d=this._checkProgress()?this._getProgressBar():null;if(!this.config.html)if(this._ui){var h=this._ui.getRootView();h.render&&(h=(0,s.inject)(h)),n=[h]}else n=e||null;var f=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?(0,s.el)(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),r(r({},this._resizerHandlers),{_ref:"resizer_"+this._uid,tabindex:0}),[(0,s.el)("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,p={};if(this.config.on)for(var v in this.config.on)p["on"+v]=this.config.on[v];var g="",_=this.config.cols||this.config.rows;if(this.config.type&&_)switch(this.config.type){case"line":g=" dhx_layout-line";break;case"wide":g=" dhx_layout-wide";break;case"space":g=" dhx_layout-space"}var m=o?(0,s.el)("fieldset.dhx_form-fieldset",{class:this.config.$disabled?" dhx_form-fieldset--disabled":"",style:c,disabled:this.config.$disabled},[(0,s.el)("legend.dhx_form-fieldset-legend",{class:"dhx_form-fieldset-legend--".concat(this.config.labelAlignment||"left")},this.config.label),(0,s.el)(".dhx_layout-cell-content",{class:this._getCss(!1)},[n])]):this.config.full?[(0,s.el)("div",{tabindex:this.config.collapsable?"0":"-1",role:this.config.collapsable?"button":null,"aria-label":this.config.collapsable?"click to ".concat(this.config.collapsed?"expand":"collapse"):null,class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&(0,s.el)("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&(0,s.el)(".dhx_layout-cell-header__image-wrapper",[(0,s.el)("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&(0,s.el)("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?(0,s.el)("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):(0,s.el)("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:(0,s.el)("div",{style:r(r({},c),{height:"calc(100% - ".concat(this.config.headerHeight||37,"px)")}),class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?g:"")},this.config.html?[(0,s.el)("div",{".innerHTML":this.config.html,class:"dhx_layout-cell dhx_layout-cell-inner_html"})]:n)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?n:[this.config.collapsed?null:(0,s.el)(".dhx_layout-cell-content",{style:c},[(0,s.el)(".dhx_layout-cell-inner_html",{".innerHTML":this.config.html})])],y=(0,s.el)("div",r(r(((t={_key:this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,t["data-cell-id"]=null!==(i=this.config.id)&&void 0!==i?i:null,t),p),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?g:""),style:o?l:u}),m||d?[m,d]:null);return f?[y,f]:y}},t.prototype._getProgressBar=function(){return(0,s.el)("span",{class:"dhx_progress-bar"},[(0,s.sv)("svg",{viewBox:"25 25 50 50",class:"dhx_spinner"},[(0,s.sv)("circle",{cx:"50",cy:"50",r:"20",class:"path"})])])},t.prototype._getCss=function(e){return"dhx_layout-cell"},t.prototype._initHandlers=function(){var e=this;window.addEventListener("resize",this._afterWindowResized),this._handlers={enterCollapse:function(t){13===t.keyCode&&e._handlers.toggle()},collapse:function(){e.config.collapsable&&e.collapse()},expand:function(){e.config.collapsable&&e.expand()},toggle:function(){e.config.collapsable&&e.toggle()}};var t={left:null,top:null,isActive:!1,range:null,xLayout:null,nextCell:null,size:null,resizerLength:null,margin:null,collapsedSize:null},i=function(i,n){if(void 0===n&&(n={x:0,y:0}),t.isActive){var o=t.xLayout,r=i.targetTouches?i.targetTouches[0].clientX:i.clientX+n.x,a=i.targetTouches?i.targetTouches[0].clientY:i.clientY+n.y,s=o?r-t.range.min+window.pageXOffset:a-t.range.min+window.pageYOffset,l=o?"width":"height";s<0?s=t.resizerLength/2:s>t.size&&(s=t.size-t.resizerLength);var u=function(t){var i;return parseInt(null===(i=e.config[t])||void 0===i?void 0:i.toString())},d=u(o?"maxWidth":"maxHeight"),h=u(o?"minWidth":"minHeight");(!d||s<d)&&(!h||s>h)&&(e.config[l]=s-t.resizerLength/2+"px",t.nextCell.config[l]=t.size-s-t.resizerLength/2+"px",t.nextCell._getAnyFlexCell()&&(t.nextCell._getAnyFlexCell().config[l]=void 0),e.paint(),e.events.fire(c.LayoutEvents.resize,[e.id]))}},n={},o=function(r){if(t.isActive=!1,document.body.classList.remove("dhx_no-select--resize"),r.targetTouches)for(var a in document.removeEventListener("touchend",o),document.removeEventListener("touchmove",i),n)n[a].node.contentWindow.document.removeEventListener("touchend",o),n[a].node.contentWindow.document.removeEventListener("touchmove",n[a].listener);else for(var a in document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",i),n)n[a].node.contentWindow.document.removeEventListener("mouseup",o),n[a].node.contentWindow.document.removeEventListener("mousemove",n[a].listener);e.events.fire(c.LayoutEvents.afterResizeEnd,[e.id])},r=function(i){if(i.targetTouches&&i.preventDefault(),3!==i.which&&(t.isActive&&o(i),e.events.fire(c.LayoutEvents.beforeResizeStart,[e.id]))){document.body.classList.add("dhx_no-select--resize");var n=e.getCellView(),r=e._getNextCell(),a=r.getCellView(),s=e._getResizerView(),l=n.el.getBoundingClientRect(),d=s.el.getBoundingClientRect(),h=a.el.getBoundingClientRect();t.xLayout=e._isXDirection(),t.left=l.left+window.pageXOffset,t.top=l.top+window.pageYOffset,t.collapsedSize=e._getCollapsedSize(e,r),t.margin=(0,u.getMarginSize)(e.getParent().config),t.range=(0,u.getBlockRange)(l,h,t.xLayout),t.size=t.range.max-t.range.min-t.margin-t.collapsedSize,t.isActive=!0,t.nextCell=r,t.resizerLength=t.xLayout?d.width:d.height}};this._resizerHandlers={onmousedown:function(e){r(e),document.addEventListener("mouseup",o),document.addEventListener("mousemove",i);var t=document.querySelectorAll("iframe");if(t.length)for(var a in t.forEach((function(e,t){var o={x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y};n[t]={node:e,listener:function(e){return i(e,o)}}})),n)n[a].node.contentWindow.document.addEventListener("mouseup",o),n[a].node.contentWindow.document.addEventListener("mousemove",n[a].listener)},ontouchstart:function(e){r(e),document.addEventListener("touchend",o),document.addEventListener("touchmove",i);var t=document.querySelectorAll("iframe");if(t.length)for(var a in t.forEach((function(e,t){var o={x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y};n[t]={node:e,listener:function(e){return i(e,o)}}})),n)n[a].node.contentWindow.document.addEventListener("touchend",o),n[a].node.contentWindow.document.addEventListener("touchmove",n[a].listener)},ondragstart:function(e){return e.preventDefault()}}},t.prototype._getCollapsedSize=function(e,t){var i=0,n=this._parent,o=n._cells.indexOf(e),r=n._cells.indexOf(t);if(r-o==1)return i;for(var a=o+1;a<r;a++)n._cells[a].config.collapsed&&(this._isXDirection()?i+=45:i+=Number(n._cells[a].config.headerHeight)||37);return i},t.prototype._getCollapseIcon=function(){return this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-right":this._isXDirection()&&!this.config.collapsed?"dxi dxi-chevron-left":!this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-up":this._isXDirection()||this.config.collapsed?void 0:"dxi dxi-chevron-down"},t.prototype._isLastCell=function(){var e=this._parent;return e&&e._cells.indexOf(this)===e._cells.length-1},t.prototype._getNextCell=function(){var e=this._parent,t=e._cells.indexOf(this),i=!this._isLastCell()&&e._cells[t+1];return!!i&&(i.config.hidden||i.config.collapsed?i._getNextCell():i)},t.prototype._getAnyFlexCell=function(e){var t,i=this;void 0===e&&(e=!1);var n=this._parent,o=this._isXDirection()?"$autoWidth":"$autoHeight",r=null===(t=null==n?void 0:n._cells)||void 0===t?void 0:t.filter((function(t){return!0===t.config[o]&&(!!e||t.id!==i.id)}));return!!(null==r?void 0:r.length)&&r[r.length-1]},t.prototype._getResizerView=function(){return this._parent.getRefs("resizer_"+this._uid)},t.prototype._isXDirection=function(){return this._parent&&this._parent._xLayout},t.prototype._checkProgress=function(){return this instanceof h.Layout?this.isVisibleProgress():(this._calculateProgressState(),(this._progress||this._checkAutoProgress())&&!this.config.collapsed&&!this.config.hidden&&!this._parent.isVisibleProgress())},t.prototype._checkAutoProgress=function(){if(this._stopProgressDefault)return!1;var e=this.config,t=e.html;return e.progressDefault&&!this._ui&&!t},t.prototype._calculateProgressState=function(){if(!this._stopProgressDefault){var e=this.config,t=e.html,i=e.progressDefault;!i||this._ui||t||(this._progress=!0),i&&(this._ui||t)&&(this._progress=!1)}},t.prototype._calculateStyle=function(){var e=this.config;if(e){var t={},i=!1,n=!1;isNaN(Number(e.width))||(e.width=e.width+"px"),isNaN(Number(e.height))||(e.height=e.height+"px"),isNaN(Number(e.minWidth))||(e.minWidth=e.minWidth+"px"),isNaN(Number(e.minHeight))||(e.minHeight=e.minHeight+"px"),isNaN(Number(e.maxWidth))||(e.maxWidth=e.maxWidth+"px"),isNaN(Number(e.maxHeight))||(e.maxHeight=e.maxHeight+"px"),"content"===e.width&&(i=!0),"content"===e.height&&(n=!0);var o=e,r=o.width,a=o.height,s=o.cols,l=o.rows,c=o.minWidth,u=o.minHeight,d=o.maxWidth,h=o.maxHeight,f=o.gravity,p=o.collapsed,v=o.$fixed,g=-1===Math.sign(f)?0:f;"boolean"==typeof f&&(g=f?1:0);var _="boolean"==typeof f?!f:-1===Math.sign(f);this._isXDirection()?(v||r||void 0===f&&(c||d))&&(_=!0):(v||a||void 0===f&&(u||h))&&(_=!0);var m=this._checkFullSizeCell(),y=_&&!m?0:m?1:g||1,b=this._isXDirection()?"x":"y";if(void 0===c||p||(t.minWidth=c),void 0===u||p||(t.minHeight=u),void 0!==d&&(t.maxWidth=d),void 0!==h&&(t.maxHeight=h),void 0===this._parent&&void 0!==!b&&(b=!0),m||void 0===r||"content"===r){if(!0===b)t.width="100%";else if("x"===b)if(i)t.flex="0 0 auto";else{var w=this._isXDirection()?"1px":"auto";t.flex="".concat(y," ").concat(s||l?"0 ".concat(w):"1 auto")}}else t.width=r;if(m||void 0===a||"content"===a){if(!0===b)t.height="100%";else if("y"===b)if(n)t.flex="0 0 auto";else{w=this._isXDirection()?"auto":"1px";t.flex="".concat(y," ").concat(s||l?"0 ".concat(w):"1 auto")}}else t.height=a;return!0===b&&void 0===e.width&&void 0===e.height&&(t.flex="".concat(y," 1 auto")),p&&(this._isXDirection()?t.width="auto":t.height="auto",t.flex="0 0 auto"),t}},t.prototype._resizedWindow=function(){var e;if(void 0===this._isLastFlexCell?this._isLastFlexCell=(null===(e=this._getAnyFlexCell(!0))||void 0===e?void 0:e.id)===this.id:this._isLastFlexCell||window.removeEventListener("resize",this._afterWindowResized),this._isLastFlexCell){var t=this._isXDirection()?"width":"height";this.config[t]=void 0,this.paint()}},t.prototype._resetCellsSize=function(){var e=this,t=this._parent._cells.filter((function(t){return t!==e&&!t.config.hidden&&!t.config.collapsed})),i=this._isXDirection(),n=i?"$autoWidth":"$autoHeight",o=i?"width":"height";t.forEach((function(e){e.config[n]&&(e.config[o]=void 0)}))},t.prototype._checkFullSizeCell=function(){var e=this;if(!this._parent)return!1;var t=this._isXDirection()?"$autoWidth":"$autoHeight";if(!this.config[t])return!1;var i=this._parent._cells.filter((function(t){return t!==e&&!t.config.hidden}));return!!i.length&&i.every((function(e){return e.config.collapsed}))},t}(l.View);t.Cell=f},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(138),t),o(i(75),t)},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PopupEvents=void 0,function(e){e.beforeHide="beforeHide",e.beforeShow="beforeShow",e.afterHide="afterHide",e.afterShow="afterShow",e.click="click"}(n||(t.PopupEvents=n={}))},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SliderEvents=void 0,function(e){e.beforeChange="beforeChange",e.change="change",e.focus="focus",e.blur="blur",e.keydown="keydown",e.mousedown="mousedown",e.mouseup="mouseup"}(n||(t.SliderEvents=n={}))},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TimepickerEvents=void 0,function(e){e.beforeChange="beforeChange",e.change="change",e.beforeApply="beforeApply",e.afterApply="afterApply",e.beforeClose="beforeClose",e.afterClose="afterClose",e.apply="apply",e.close="close",e.save="save"}(n||(t.TimepickerEvents=n={}))},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarEvents=void 0,function(e){e.change="change",e.beforeChange="beforechange",e.modeChange="modeChange",e.monthSelected="monthSelected",e.yearSelected="yearSelected",e.cancelClick="cancelClick",e.dateMouseOver="dateMouseOver",e.dateHover="dateHover"}(n||(t.CalendarEvents=n={}))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Combobox=t.$template=void 0;var a=i(0),s=i(1),l=i(3),c=i(4),u=i(145),d=i(8),h=i(13),f=i(17),p=i(31),v=i(10),g=i(149),_=i(81),m=i(39),y=i(82),b=i(83);function w(e,t){return"function"==typeof t?t(e):e+" "+_.default.selectedItems}t.$template=function(e){return e.icon?(0,s.el)("div.dhx_combobox-options-wrapper",[(0,s.el)("span",{class:"".concat(e.icon," dhx_combobox-options__icon")}),(0,s.el)("span",{class:"dhx_combobox-options__value"},e.value)]):e.src?(0,s.el)("div.dhx_combobox-options-wrapper",[(0,s.el)("img",{class:"dhx_combobox-options__image",alt:e.value,src:e.src}),(0,s.el)("span",{class:"dhx_combobox-options__value"},e.value)]):(0,s.el)("span",{class:"dhx_combobox-options__value"},e.value)};var x=function(e){function i(t,i){var n=e.call(this,t,(0,a.extend)({listHeight:224,itemHeight:36,disabled:!1,readOnly:!1,newOptions:!1,htmlEnable:!0},i))||this;n.config.itemsCount=n.config.itemsCount||n.config.showItemsCount,n.config.helpMessage=n.config.helpMessage||n.config.help,n.config.cellHeight&&36===n.config.itemHeight&&(n.config.itemHeight=n.config.cellHeight),n.config.labelInline&&(n.config.labelPosition="left"),Array.isArray(n.config.data)?(n.events=new l.EventSystem(n),n.data=new h.DataCollection({}),n.data.parse(n.config.data)):n.config.data?(n.data=n.config.data,n.events=new l.EventSystem(n),n.events.context=n):(n.events=new l.EventSystem(n),n.data=new h.DataCollection({})),n.popup=new v.Popup,n.popup.events.on(v.PopupEvents.afterShow,(function(){n.paint()})),n.popup.events.on(v.PopupEvents.afterHide,(function(){n.config.multiselection&&(n._state.value=""),n.paint()})),n.popup.events.on(v.PopupEvents.beforeHide,(function(e){e&&n._hideOptions()})),(n.config.readonly||n.config.readOnly)&&(n.config.readOnly=n.config.readOnly||n.config.readonly,n._keyListener=new g.KeyListener),n._state={value:"",ignoreNext:!1,canDelete:!1,unselectActive:!1,currentState:b.ComboState.default,creatingState:!1},n._initHandlers(),n._createLayout(),n.config.value&&n._setValue(n.config.value,!0),n._initEvents();var o=(0,s.create)({render:function(){return n._draw()},hooks:{didRedraw:function(){n.popup.isVisible()&&(n.focus(),n._configurePopup())}}});return n.mount(t,o),n}return o(i,e),i.prototype.focus=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.focus()},i.prototype.blur=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.blur(),this.popup.hide()},i.prototype.enable=function(){this.config.disabled=!1,this.paint()},i.prototype.disable=function(){this.config.disabled=!0,this.paint()},i.prototype.isDisabled=function(){return this.config.disabled},i.prototype.clear=function(){this.list.selection.remove(),this._state.value="",this._filter(),this.paint()},i.prototype.getValue=function(e){var t=this.list.selection.getId();return e?(0,a.wrapBox)(t):Array.isArray(t)?t.join(","):t},i.prototype.setValue=function(e,t){return this._setValue(e,t)},i.prototype.addOption=function(e,t){if(void 0===t&&(t=!0),e){var i;"string"==typeof e?i=this.data.add({value:e}):"object"==typeof e&&(i=this.data.add(e));var n=this.config.multiselection&&t?r(r([],this.list.selection.getId(),!0),[i],!1):i;this.setValue(n)}},i.prototype.destructor=function(){this.popup&&this.popup.destructor(),this.events&&this.events.clear(),this.list&&this.list.destructor(),this._helper&&this._helper.destructor(),this._layout&&this._layout.destructor(),this.config=this.events=this.list=this.popup=null,this._helper=this._keyListener=this._handlers=this._state=this._uid=this._isPopupConfiqureted=null,this.unmount()},i.prototype.setState=function(e){switch(e){case"success":this._state.currentState=b.ComboState.success;break;case"error":this._state.currentState=b.ComboState.error;break;default:this._state.currentState=b.ComboState.default}this.paint()},i.prototype._setValue=function(e,t){var i=this;if(void 0===t&&(t=!1),!this._exsistId(e))return!1;if(this._filter(),this.list.selection.remove(null,t),this.config.multiselection)"string"==typeof e&&(e=e.split(",")),"number"==typeof e&&(e=[e]),e.forEach((function(e){i.list.selection.add(e,!1,!1,t)}));else{var n=(0,a.unwrapBox)(e);this.list.selection.add(n,!1,!1,t);var o=this.data.getItem(n);o&&(this._state.value=this._getItemText(o))}this.paint()},i.prototype._createLayout=function(){var e=this.list=new p.List(null,{$template:t.$template,template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!0,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data}),i=this._layout=new f.Layout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});i.getCell("list").attach(e),this.config.multiselection&&this.config.selectAllButton&&i.getCell("select-unselect-all").attach(y.selectAllView)},i.prototype._initHandlers=function(){var e=this;this.config.helpMessage&&(this._helper=new v.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={addOption:function(){return e.addOption(e._state.value)},showHelper:function(t){t.preventDefault(),t.stopPropagation(),e._helper.show(t.target,{mode:"left"===e.config.labelPosition?"bottom":"right",theme:t.target})},selectAll:function(){e._state.unselectActive?(e.list.selection.remove(),e.config.selectAllButton&&(e._layout.getCell("select-unselect-all").attach(y.selectAllView),e._state.unselectActive=!1)):(e.data.filter(),e.list.selection.add(),e.config.selectAllButton&&(e._layout.getCell("select-unselect-all").attach(y.unselectAllView),e._state.unselectActive=!0)),e._changePopupPosition(),e.paint()},onkeydown:function(t){if("Tab"===t.key&&e.popup.isVisible())e._hideOptions();else if(e.popup.isVisible()||t.which!==u.KEY_CODES.DOWN_ARROW||e._showOptions(),e.popup.isVisible()&&(t.which===u.KEY_CODES.RIGHT_ARROW&&e.config.readOnly&&!e.config.multiselection&&(e.list.moveFocus(p.MOVE_DOWN),t.preventDefault()),t.which===u.KEY_CODES.LEFT_ARROW&&e.config.readOnly&&!e.config.multiselection&&(e.list.moveFocus(p.MOVE_UP),t.preventDefault()),t.which===u.KEY_CODES.DOWN_ARROW&&(e.list.moveFocus(p.MOVE_DOWN),t.preventDefault()),t.which===u.KEY_CODES.UP_ARROW&&(e.list.moveFocus(p.MOVE_UP),t.preventDefault()),t.which===u.KEY_CODES.ESC&&e._hideOptions(),t.which===u.KEY_CODES.ENTER)){if(e.data.getLength()){var i=e.list.getFocus(),n=e.config.multiselection?r(r([],e.list.selection.getId(),!0),[i],!1):i;e.setValue(n)}else e.config.newOptions&&e.addOption(e._state.value,!0);e.config.multiselection?e._updatePopup():e.data.getLength()&&e._hideOptions()}e.events.fire(b.ComboboxEvents.keydown,[t,e.list.getFocus()])},onkeyup:function(t){if(e.config.multiselection&&!e.config.itemsCount)if(e._state.ignoreNext)e._state.ignoreNext=!1;else if(t.which===u.KEY_CODES.BACKSPACE&&!e._state.value&&e.config.multiselection&&e.list.selection.getId().length){var i=e.list.selection.getId(),n=i[i.length-1];e.list.selection.remove(n),e._changePopupPosition(),e.paint()}},oninput:function(t){if(!e.config.disabled){var i=t.target.value;e.events.fire(b.ComboboxEvents.input,[i]),e._state.value=i,e._filter(),i.length?e._state.canDelete=!1:(e._state.ignoreNext=!0,e._state.canDelete=!0),e.config.multiselection||(e.list.selection.remove(),e.paint()),e.popup.isVisible()||e._showOptions(),e._updatePopup()}},oninputclick:function(t){var i;if(!e.config.disabled){if(e.focus(),t.target.classList.contains("dhx_combobox__action-remove")){var n=null===(i=e.data.getItem((0,c.locate)(t)))||void 0===i?void 0:i.id;if(!(0,a.isId)(n))return;return e.list.selection.remove(n),e._changePopupPosition(),void e.paint()}if(t.target.classList.contains("dhx_combobox__action-clear-all"))return e.list.selection.getId().forEach((function(t){return e.list.selection.remove(t)})),e.config.selectAllButton&&e._state.unselectActive&&(e._layout.getCell("select-unselect-all").attach(y.selectAllView),e._state.unselectActive=!1),void e.paint();t.preventDefault(),e.popup.isVisible()?e.focus():e._showOptions()}},toggleIcon:function(){e.focus(),e.popup.isVisible()?e._hideOptions():e._showOptions()},onfocus:function(){var t;return null===(t=e.events)||void 0===t?void 0:t.fire(b.ComboboxEvents.focus,[])},onblur:function(){var t;return null===(t=e.events)||void 0===t?void 0:t.fire(b.ComboboxEvents.blur,[])}}},i.prototype._initEvents=function(){var e=this;this.data.events.on(h.DataEvents.load,(function(){e.config.value&&e._setValue(e.config.value,!0)})),this.data.events.on(h.DataEvents.afterAdd,(function(){e.config.multiselection?e._changePopupPosition():e._hideOptions()})),this.list.events.on(p.ListEvents.click,(function(){e.config.multiselection||e._hideOptions(),e._changePopupPosition()})),this.list.selection.events.on(m.SelectionEvents.beforeSelect,(function(t){var i=e.config.multiselection?r(r([],e.getValue(e.config.multiselection),!0),[t],!1):t;return e.events.fire(b.ComboboxEvents.beforeChange,[i])})),this.list.selection.events.on(m.SelectionEvents.afterSelect,(function(){var t=e.getValue(e.config.multiselection);e.events.fire(b.ComboboxEvents.change,[t]),e._updateSelectedItem(t)})),this.list.selection.events.on(m.SelectionEvents.beforeUnSelect,(function(t){var i=e.config.multiselection?e.getValue(e.config.multiselection).filter((function(e){return e!=t})):t;return e.events.fire(b.ComboboxEvents.beforeChange,[i])})),this.list.selection.events.on(m.SelectionEvents.afterUnSelect,(function(){var t=e.config.multiselection;if(!e.config.readOnly||t){var i=e.getValue(t);e.events.fire(b.ComboboxEvents.change,[i]),t&&e._updateSelectedItem(i)}})),this.popup.events.on(v.PopupEvents.beforeShow,(function(){if(!e.popup.isVisible()&&!e._isPopupConfiqureted)return e._configurePopup(),!1})),this.config.readOnly&&this.popup.events.on(v.PopupEvents.afterShow,(function(){if(e._state.value){var t=e.list.selection.getId();e.list.setFocus(t)}else e.list.setFocus(e.data.getId(0));e._keyListener.startNewListen((function(t){return e._findBest(t)}))}))},i.prototype._showOptions=function(){this.events.fire(b.ComboboxEvents.beforeOpen)&&(this._state.value.length&&(this._state.canDelete=!0),this._filter(),this._configurePopup()&&(this.events.fire(b.ComboboxEvents.open),this.events.fire(b.ComboboxEvents.afterOpen)))},i.prototype._configurePopup=function(){this._isPopupConfiqureted=!0;var e=this.getRootView();return!!(e&&e.refs&&e.refs.holder)&&(this.popup.isVisible()||this._updatePopup(),!0)},i.prototype._hideOptions=function(){var e=this;this.events.fire(b.ComboboxEvents.beforeClose)&&(this.config.readOnly&&this._keyListener.endListen(),this.list.setFocus(this.data.getId(0)),this.config.multiselection||this.config.readOnly||this.list.selection.contains()||(this._state.value=""),(0,s.awaitRedraw)().then((function(){return e.popup.isVisible()&&e.popup.hide()})),this.events.fire(b.ComboboxEvents.afterClose),this.events.fire(b.ComboboxEvents.close),this._filter(),this.paint())},i.prototype._filter=function(){var e=this;if(!this.config.readOnly){if(this.data.filter((function(t){return e.config.filter?e.config.filter(t,e._state.value):(0,a.isEqualString)(e._state.value,e._getItemText(t))})),this.config.multiselection)this.list.setFocus(this.data.getId(0));else{var t=this.data.getIndex(this.list.selection.getId());this.list.setFocus(this.data.getId(t>-1?t:0))}var i=this._layout.getCell("list"),n=this._layout.getCell("not-found");if(0===this.data.getLength()){this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").hide(),i.hide(),this._state.creatingState=!0;var o=this.config.newOptions?this._state.value:"";n.height=(0,y.emptyListHeight)(o,this.getRootView().refs.holder.el.offsetWidth),n.attach(y.emptyListView,o),n.show()}else{if(this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").show(),!(this._state.value&&this.data.find((function(t){return t.value===e._state.value})))&&this._state.value)if(this._state.creatingState=this.config.newOptions,i.show(),this.config.newOptions){o=this._state.value;n.height=(0,y.emptyListHeight)(o,this.getRootView().refs.holder.el.offsetWidth),n.attach(y.emptyListView,o),n.show()}else n.hide();else this._state.creatingState=!1,n.isVisible()&&(i.show(),n.hide())}}},i.prototype._findBest=function(e){var t=this,i=this.data.find((function(i){return(0,a.isEqualString)(e,t._getItemText(i))}));i&&this.list.selection.getId()!==i.id&&(this.list.setFocus(i.id),this.paint())},i.prototype._exsistId=function(e){var t=this;return e instanceof Array?e.every((function(e){return t.data.exists(e)})):this.data.exists(e)},i.prototype._draw=function(){if(!this.config)return(0,s.el)("div");var e=this.config,i=e.multiselection,n=e.labelPosition,o=e.hiddenLabel,a=e.required,l=e.disabled,u=e.css,d=e.helpMessage,h=e.readOnly,f=e.placeholder,p=i?null:this.data.getItem(this.list.selection.getId()),v=!this.list.selection.getId()||"object"==typeof this.list.selection.getId()&&0===this.list.selection.getId().length,g=(0,c.getLabelStyle)(this.config),_=!this.config.multiselection&&(this.config.readOnly||!this.popup.isVisible()),m=_&&this.config.htmlEnable&&this.config.template,y=_&&((null==p?void 0:p.icon)||(null==p?void 0:p.src))&&!this.config.template;return(0,s.el)("div",{"data-dhx-widget-id":this._uid,onkeydown:this._handlers.onkeydown,onkeyup:this._handlers.onkeyup,class:"dhx_widget dhx_combobox"+("left"===n?" dhx_combobox--label-inline":"")+(o?" dhx_combobox--sr_only":"")+(a?" dhx_combobox--required":"")+(l?" dhx_combobox--disabled":"")+(u?" ".concat(u):"")},[g?(0,s.el)("label.dhx_label.dhx_combobox__label",{style:g.style,class:d?"dhx_label--with-help":"",onclick:this._handlers.oninputclick},d?[(g.label||a)&&(0,s.el)("span.dhx_label__holder",g.label),(0,s.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,id:"dhx_label__help_".concat(this._uid)})]:g.label):null,(0,s.el)("div.dhx_combobox-input-box"+(l?".dhx_combobox-input-box--disabled":"")+(h?".dhx_combobox-input-box--readonly":"")+(this._state.currentState===b.ComboState.error?".dhx_combobox-input-box--state_error":"")+(this._state.currentState===b.ComboState.success?".dhx_combobox-input-box--state_success":""),{_ref:"holder"},[(0,s.el)("div.dhx_combobox-input__icon",{onclick:this._handlers.toggleIcon},[(0,s.el)("span"+(this.popup.isVisible()?".dxi.dxi-menu-up":".dxi.dxi-menu-down"))]),(0,s.el)("div.dhx_combobox-input-list-wrapper",{onclick:this._handlers.oninputclick},[(0,s.el)("ul.dhx_combobox-input-list",r(r([],this._drawSelectedItems(),!0),[(0,s.el)("li.dhx_combobox-input-list__item.dhx_combobox-input-list__item--input",[(m||y)&&p?(0,s.el)("div.dhx_combobox-input__template",{".innerHTML":m?this.config.template(p):null},y?[(0,t.$template)(p)]:null):null,(0,s.el)("input.dhx_combobox-input",{oninput:this._handlers.oninput,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_ref:"input",_key:this._uid,type:"text",placeHolder:v&&f?f:void 0,value:h&&p?this._getItemText(p):this._state.value,readOnly:h||l,required:a,"aria-label":h?"Select value":"Type or select value","aria-describedby":d?"dhx_label__help_".concat(this._uid):null,"aria-expanded":!0})])],!1))])])])},i.prototype._drawSelectedItems=function(){var e=this;if(!this.config.multiselection)return[];if(this.config.itemsCount){var t=this.list.selection.getId().length;return t?[(0,s.el)("li.dhx_combobox-input-list__item.dhx_combobox-tag",[(0,s.el)("span.dhx_combobox-tag__value",w(t,this.config.itemsCount)),(0,s.el)("button.dhx_button.dhx_combobox-tag__action.dhx_combobox__action-clear-all",{"aria-label":"clear all"},[(0,s.el)("span.dhx_button__icon.dxi.dxi-close-circle")])])]:[]}return this.list.selection.getId().map((function(t){var i=e.data.getItem(t);if(!i)return null;var n=e._drawImageOrIcon(i);return(0,s.el)("li.dhx_combobox-input-list__item.dhx_combobox-tag",{"data-dhx-id":t},r(r([],n||!e.config.template?[n,(0,s.el)("span.dhx_combobox-tag__value",e._getItemText(i))]:[(0,s.el)("span.dhx_combobox-tag__template",{".innerHTML":e.config.template(i)})],!0),[(0,s.el)("button.dhx_button.dhx_button--icon.dhx_combobox-tag__action.dhx_combobox__action-remove",{type:"button","aria-label":"remove"},[(0,s.el)("span.dhx_button__icon.dxi.dxi-close-circle")])],!1))}))},i.prototype._drawImageOrIcon=function(e){return e.src?(0,s.el)("img.dhx_combobox-tag__image",{src:e.src,alt:""}):e.icon?(0,s.el)("span.dhx_combobox-tag__icon",{class:e.icon}):null},i.prototype._getItemText=function(e){return e?e.value:null},i.prototype._updateSelectedItem=function(e){var t;this.config.multiselection?(this.config.selectAllButton&&!this._state.unselectActive&&this.data.getLength()===e.length?(this._layout.getCell("select-unselect-all").attach(y.unselectAllView),this._state.unselectActive=!0):this.config.selectAllButton&&this._state.unselectActive&&(this._layout.getCell("select-unselect-all").attach(y.selectAllView),this._state.unselectActive=!1),this._state.value&&(this._state.value="",this._state.canDelete=0===e.length,this._filter())):this._state.value=null!==(t=this._getItemText(this.data.getItem(e)))&&void 0!==t?t:"",this.paint()},i.prototype._changePopupPosition=function(){var e=this;this.config.multiselection&&(0,s.awaitRedraw)().then((function(){e._updatePopup()}))},i.prototype._updatePopup=function(){var e=this.getRootView().refs.holder.el;this.popup.getContainer().style.width=e.offsetWidth+"px";var t=this.data.getLength()*(this.config.itemHeight||36);this.config.listHeight=parseFloat(this.config.listHeight);var i=t<this.config.listHeight?t:this.config.listHeight;this.popup.getContainer().style.height=Number(i)+(this.config.selectAllButton&&this.config.multiselection&&this._layout.getCell("select-unselect-all").isVisible()?33:0)+(this._state.creatingState?this._layout.getCell("not-found").height:0)+"px",this.popup.show(e,{mode:"bottom",theme:this.getRootNode()})},i}(d.View);t.Combobox=x},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.List=t.MOVE_DOWN=t.MOVE_UP=void 0;var s=i(0),l=i(13),c=i(1),u=i(21),d=i(39),h=i(8),f=i(80),p=i(4),v=i(57),g=i(146);t.MOVE_UP=1,t.MOVE_DOWN=2;var _=function(e){function i(t,i){void 0===i&&(i={});var n=this,o=i.itemHeight||(i.virtual?37:null);o&&"number"==typeof o&&(o=o.toString()+"px"),(n=e.call(this,t,(0,s.extend)({itemHeight:o,keyNavigation:!0,editable:!1,selection:!0,htmlEnable:!0},i))||this)._destructed=!1,n._touch={duration:350,dblDuration:300,timer:null,start:!1,timeStamp:null};var r=n.config.data;r instanceof l.DataCollection?(n.data=r,n.events=r.events):(n.data=new l.DataCollection({}),n.events=n.data.events,r&&n.data.parse(r)),n.selection=new f.Selection({disabled:!n.config.selection,multiselection:n.config.multiselection},n.data,n.events),n.config.keyNavigation&&(n.keyManager=new u.KeyManager((function(e,t){return t==n._uid&&(!n._edited||n._edited&&"escape"!==e.key)})),n._initHotKey()),n.events.on(l.DataEvents.change,(function(e,t,i){"setPage"===t&&n.scrollTo(n.data.getId(i[0])),n.paint()})),n.events.on(l.DataEvents.filter,(function(){n.paint()})),n.events.on(d.SelectionEvents.afterUnSelect,(function(){return n.paint()})),n.events.on(d.SelectionEvents.afterSelect,(function(e){(0,s.isId)(e)&&n.config.selection&&n.setFocus(e),n.paint()})),n.events.on(v.ListEvents.afterEditEnd,n.editEnd.bind(n));var a=function(e){return function(t){n.data.setMeta(n.data.getItem(t.target),"drop",e),n.paint()}};n.events.on(l.DragEvents.canDrop,a(!0)),n.events.on(l.DragEvents.cancelDrop,a(!1));var h=function(e){return function(t){t.source.map((function(t){return n.data.setMeta(n.data.getItem(t),"drag",e)})),n.paint()}};n.events.on(l.DragEvents.dragStart,h(!0)),n.events.on(l.DragEvents.afterDrag,h(!1)),n._handlers={onmousedown:function(e){n._dragStart(e)},ontouchstart:function(e){(n._touch.timer=setTimeout((function(){n._dragStart(e)}),n._touch.duration),n._touch.timeStamp)?(n._touch.dblDuration>=n._touch.timeStamp-+e.timeStamp.toFixed()&&(e.preventDefault(),n._dblClick(e)),n._touch.timeStamp=null):n._touch.timeStamp=+e.timeStamp.toFixed();setTimeout((function(){n._touch.timeStamp=null}),n._touch.dblDuration)},ontouchmove:function(e){n._touch.start&&e.preventDefault(),n._clearTouchTimer()},ontouchend:function(){n._touch.start=!1,n._clearTouchTimer()},ondragstart:function(){return!(n.config.dragMode&&!n._edited)&&null},oncontextmenu:function(e){var t,i=null===(t=n.data.getItem((0,p.locate)(e)))||void 0===t?void 0:t.id;(0,s.isId)(i)&&n.events.fire(v.ListEvents.itemRightClick,[i,e])},onclick:function(e){var t,i=null===(t=n.data.getItem((0,p.locate)(e)))||void 0===t?void 0:t.id;(0,s.isId)(i)&&(n.selection.add(i,e.ctrlKey||e.metaKey,e.shiftKey),n.config.selection&&(n._focus=i),n.events.fire(v.ListEvents.click,[i,e]),n.paint())},ondblclick:function(e){n._dblClick(e)},onscroll:function(e){n.config.virtual&&(n._topOffset=e.target.scrollTop,n._visibleHeight=e.target.offsetHeight,n.paint())},onmouseover:function(e){var t,i=null===(t=n.data.getItem((0,p.locate)(e)))||void 0===t?void 0:t.id;(0,s.isId)(i)&&(i!==(0,p.locate)(e.relatedTarget)&&n.events.fire(v.ListEvents.itemMouseOver,[i,e]))}};var g=n.config.eventHandlers;if(g)for(var _=0,m=Object.entries(g);_<m.length;_++){var y=m[_],b=y[0],w=y[1];n._handlers[b]=(0,p.eventHandler)((function(e){return(0,p.locate)(e)}),w,n._handlers[b])}n.config.dragMode&&l.dragManager.setItem(n._uid,n),n._topOffset=n._visibleHeight=0;var x=(0,c.create)({render:function(){return n._destructed?(0,c.el)("div"):n._renderList()},hooks:{didMount:function(e){n.config.virtual&&(n._visibleHeight=e.node.el.offsetHeight)},didRedraw:function(e){return n._didRedraw(e)}}});return n.mount(t,x),n}return o(i,e),i.prototype._didRedraw=function(e){},i.prototype._dblClick=function(e){var t=(0,p.locate)(e);t&&(t=this.data.getItem(t).id,this.config.editable&&this.editItem(t),this.events.fire(v.ListEvents.doubleClick,[t,e]))},i.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},i.prototype._dragStart=function(e){var t=this;this._touch.start=!0;var i=[],n=(0,p.locateNode)(e,"data-dhx-id"),o=n&&n.getAttribute("data-dhx-id"),r=this.selection.getId();return this.config.multiselection&&r instanceof Array&&(r.map((function(e){e!==o&&t.getRootView().refs[e]&&i.push(t.getRootView().refs[e].el)})),r=a([],r,!0)),"string"==typeof r&&(r=[r]),this.config.dragMode&&!this._edited?l.dragManager.onMouseDown(e,r||[o],i):null},i.prototype.disableSelection=function(){this.selection.disable()},i.prototype.enableSelection=function(){this.selection.enable()},i.prototype.editItem=function(e){this._edited=e,this.data.getItem(this._edited)&&this.events.fire(v.ListEvents.beforeEditStart,[e])?(this.paint(),this.events.fire(v.ListEvents.afterEditStart,[e])):this._edited=null},i.prototype.editEnd=function(e,t){if(this._edited){if(null!==e){var i=this.data.getItem(t);this.data.update(t,r(r({},i),{value:e})),this._changed=!0}this._edited=null,this.paint()}},i.prototype.getFocusItem=function(){return this.data.getItem(this._focus)},i.prototype.setFocus=function(e){this._focus!=e&&this.data.exists(e)&&(this._focus=e,this.events.fire(v.ListEvents.focusChange,[this.data.getIndex(this._focus),this._focus]),this.scrollTo(e),this.paint())},i.prototype.getFocus=function(){return this._focus},i.prototype.destructor=function(){this._destructed=!0,this.events&&this.events.clear(),this.keyManager&&this.keyManager.destructor(),this.selection&&this.selection.destructor(),this.config=this.events=this.selection=this.keyManager=null,this._handlers=this._focus=this._edited=this._events=this._topOffset=this._visibleHeight=this._touch=null,this.unmount()},i.prototype.scrollTo=function(e){var t=this.getRootView();if(t&&t.node&&t.node.el&&void 0!==e){var i=this.getRootNode();this._scrollTo(e,i)}},i.prototype._scrollTo=function(e,t){if(t){var i=this.data.getIndex(e);if(-1!==i){var n=this.config.virtual,o=Math.floor(i/t.children.length)||0,r=t.children[i-t.children.length*o];if(n||r){var a=n?parseInt(this.config.itemHeight):r.clientHeight,s=n?i*a:r.offsetTop;s>=t.scrollTop+t.clientHeight-a?t.scrollTo(0,s-t.clientHeight+a):s<t.scrollTop&&t.scrollTo(0,s)}}}},i.prototype._renderItem=function(e,t){var i=this.config.itemHeight;if(e.$empty)return(0,c.el)("li",{class:"dhx_list-item",style:{height:i}});var n="";this.config.template&&(n=this.config.template(e)),e.html&&(n=e.html);var o=e.id==this._focus&&this.config.keyNavigation;if(e.id==this._edited)return(0,g.getEditor)(e,this).toHTML();var a=this.data.getMetaMap(e),s=r(r(r(r({},this._events),{class:"dhx_list-item"+(a&&a.selected?" dhx_list-item--selected":"")+(o?" dhx_list-item--focus":"")+(a&&a.drop&&!this._edited?" dhx_list-item--drophere":"")+(a&&a.drag&&!this._edited?" dhx_list-item--dragtarget":"")+(this.config.dragMode&&!this._edited?" dhx_list-item--drag":"")+(e.css?" "+e.css:""),"data-dhx-id":e.id,_ref:e.id.toString(),style:{height:i},_key:e.id}),this.getItemAriaAttrs(this,e)),{tabindex:o?0:-1});if(n)return n===e.html||this.config.htmlEnable?(s[".innerHTML"]=n,(0,c.el)("li",s)):(0,c.el)("li",s,n);if(this.config.$template)return(0,c.el)("li",s,[this.config.$template(e)]);var l=e.text||e.value;return this.config.htmlEnable?s[".innerHTML"]=l:s.class+=" dhx_list-item--text",this.config.htmlEnable?(0,c.el)("li",s):(0,c.el)("li",s,l)},i.prototype._renderList=function(){var e=this,t=this._getRange(),i=this.data.getRawData(t[0],t[1]).map((function(t,i){return e._renderItem(t,i)}));return this.config.virtual&&(i=a(a([(0,c.el)(".div",{style:{height:t[2]+"px"}})],i,!0),[(0,c.el)(".div",{style:{height:t[3]+"px"}})],!1)),(0,c.el)("ul.dhx_widget.dhx_list",r(r({style:{"max-height":this.config.height,position:"relative"},tabindex:0,class:(this.config.css?this.config.css:"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":""),"data-dhx-widget-id":this._uid},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),i)},i.prototype.moveFocus=function(e,i){var n=this.data.getLength();if(n){var o=this._focus,r=o?this.data.getIndex(o):-1;i=i||1,e===t.MOVE_DOWN?o=this.data.getId(Math.min(r+i,n-1)):e===t.MOVE_UP&&(o=this.data.getId(Math.max(r-i,0))),this.setFocus(o)}},i.prototype._getRange=function(){if(this.config.virtual){var e=this._visibleHeight||parseInt(this.config.height),t=parseInt(this.config.itemHeight),i=this.data.getRawData(0,-1).length,n=i*t,o=this._topOffset;o=Math.max(0,Math.min(o,n-e));var r=Math.floor(o/t),a=Math.min(i-r,Math.floor(e/t)+5);return this._topOffset=o,[r,a+r,r*t,n-t*(a+r)]}return[0,-1,0,0]},i.prototype._getHotkeys=function(){var e=this;return{arrowDown:function(i){e.moveFocus(t.MOVE_DOWN),e._changed&&(e._changed=!1),i.preventDefault()},arrowUp:function(i){e.moveFocus(t.MOVE_UP),e._changed&&(e._changed=!1),i.preventDefault()},escape:function(){e.editEnd(null),e._changed&&(e._changed=!1)},enter:function(t){var i;if(e._changed)e._changed=!1;else{var n=e.selection.getItem(),o=n instanceof Array?null===(i=n[0])||void 0===i?void 0:i.id:null==n?void 0:n.id;e.config.editable&&!e._edited&&(n&&o===e._focus||!n)?e.editItem(e._focus):e.selection.add(e._focus),e.events.fire(v.ListEvents.click,[e._focus,t])}},"shift+enter":function(t){e.selection.add(e._focus,!1,!0),e.events.fire(v.ListEvents.click,[e._focus,t])},"ctrl+enter":function(t){e.selection.add(e._focus,!0,!1),e.events.fire(v.ListEvents.click,[e._focus,t])},"ctrl+a":function(t){e.config.multiselection&&(t.preventDefault(),e.selection.remove(),e.data.map((function(e){return e.id})).forEach((function(t){"ctrlClick"===e.config.multiselection?e.selection.add(t,!0):e.selection.add(t)})))}}},i.prototype._initHotKey=function(){var e=this._getHotkeys();for(var t in e)this.keyManager.addHotKey(t,e[t]);for(var t in this.config.hotkeys)this.keyManager.addHotKey(t,this.config.hotkeys[t])},i.prototype.getItemAriaAttrs=function(e,t){return r(r({role:"option","aria-selected":t.$selected?"true":"false"},function(e,t){return e.config.dragMode&&!e._edited?{"aria-grabbed":Boolean(t.$dragtarget&&!e._edited).toString()}:{}}(e,t)),function(e){return e.config.editable?{"aria-roledescription":"".concat(e._edited?"Press Enter to stop editing":"Double click to edit content")}:{}}(e))},i.prototype._getListAriaAttrs=function(e,t){return{role:"listbox","aria-label":"Listbox ".concat(e.title||"",", count of options = ").concat(t,".").concat(e.editable?" Content is editable.":""),"aria-multiselectable":e.selection&&e.multiselection?"true":"false","aria-readonly":e.editable?"false":"true"}},i}(h.View);t.List=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var n=i(39),o=i(13),r=i(0),a=function(){function e(e,t,i){var n=this;if(this.config=e,this.events=i,this._data=t,this._selected=[],this._data.events.on(o.DataEvents.removeAll,(function(){n._selected=[]})),"string"==typeof this.config.multiselection){["click","ctrlClick"].includes(this.config.multiselection)||(this.config.multiselection=!1)}this._data.events.on(o.DataEvents.beforeRemove,(function(e){if(n._nextSelection=null,1===n._selected.length){var t=n._data.getIndex(e.id),i=n._data.getLength();if(i>1){var o=i==t-1?t-1:t+1;n._nextSelection=n._data.getId(o)}}})),this._data.events.on(o.DataEvents.afterRemove,(function(e){var t=n._selected.indexOf(e.id);-1!==t&&n._selected.splice(t,1),(0,r.isId)(n._nextSelection)&&(n.add(n._nextSelection),n._nextSelection=null)}))}return e.prototype.enable=function(){this.config.disabled=!1},e.prototype.disable=function(){this.remove(),this.config.disabled=!0},e.prototype.getId=function(){return this.config.multiselection?this._selected:this._selected[0]},e.prototype.getItem=function(){var e=this;return this.config.multiselection?this._selected.map((function(t){return e._data.getItem(t)})):this._selected.length?this._data.getItem(this._selected[0]):null},e.prototype.contains=function(e){return(0,r.isId)(e)?this._selected.includes(e):this._selected.length>0},e.prototype.remove=function(e,t){var i=this;(0,r.isId)(e)?this._unselectItem(e,t):(this._selected.forEach((function(e){return i._unselectItem(e,t)})),this._selected=[])},e.prototype.add=function(e,t,i,n){var o=this;if(!this.config.disabled)if(void 0!==e){var r=this.config.multiselection;i&&this._selected.length&&r?this._addMulti(e,n):this._addSingle(e,r&&("ctrlClick"!==r||t),n)}else{var a=this._data.serialize().filter((function(e){var t=e.id;return!o._selected.includes(t)}));a.forEach((function(e){var t=e.id;o._addMulti(t,n)}))}},e.prototype.destructor=function(){var e=this;this._selected.forEach((function(t){return e._unselectItem(t,!0)}))},e.prototype._addMulti=function(e,t){var i,n=this._selected[this._selected.length-1],o=this._data.getIndex(n),r=this._data.getIndex(e);for(o>r&&(o=(i=[r,o])[0],r=i[1]);o<=r;o++){var a=this._data.getId(o);this._selectItem(a,t)}},e.prototype._addSingle=function(e,t,i){var n=this;t||this._selected.forEach((function(t){t!=e&&n._unselectItem(t)})),t&&this._selected.includes(e)?this._unselectItem(e,i):this._selectItem(e,i)},e.prototype._selectItem=function(e,t){var i=this._data.getItem(e);i&&!this._data.getMeta(i,"selected")&&(t||this.events.fire(n.SelectionEvents.beforeSelect,[e]))&&(this._selected.push(e),this._data.setMeta(i,"selected",!0),t||this.events.fire(n.SelectionEvents.afterSelect,[e]))},e.prototype._unselectItem=function(e,t){(t||this.events.fire(n.SelectionEvents.beforeUnSelect,[e]))&&(this._selected=this._selected.filter((function(t){return t!==e})),this._data.setMeta(this._data.getItem(e),"selected",!1),t||this.events.fire(n.SelectionEvents.afterUnSelect,[e]))},e}();t.Selection=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={notFound:"Not Found",selectAll:"Select All",unselectAll:"Unselect All",selectedItems:"selected items",createItem:"Create"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyListHeight=t.emptyListView=t.unselectAllView=t.selectAllView=void 0;var n=i(1),o=i(81);t.selectAllView=function(){return(0,n.el)(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",o.default.selectAll)},t.unselectAllView=function(){return(0,n.el)(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",o.default.unselectAll)},t.emptyListView=function(e){return(0,n.el)("ul.dhx_list",[(0,n.el)("li.dhx_list-item.dhx_combobox-options__item".concat(e?".dhx_combobox-options__action-create-option":""),{},e?"".concat(o.default.createItem,' "').concat(e,'"'):o.default.notFound)])},t.emptyListHeight=function(e,t){var i=document.createElement("canvas").getContext("2d",{alpha:!1});i.font="normal 14px Roboto";var n=e?"".concat(o.default.createItem,' "').concat(e,'"'):o.default.notFound;return 13+20*Math.ceil(i.measureText(n).width/(t-16))}},function(e,t,i){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ComboState=t.ComboboxEvents=void 0,function(e){e.beforeChange="beforeChange",e.change="change",e.focus="focus",e.blur="blur",e.keydown="keydown",e.input="input",e.beforeOpen="beforeOpen",e.afterOpen="afterOpen",e.beforeClose="beforeClose",e.afterClose="afterClose",e.open="open",e.close="close"}(n||(t.ComboboxEvents=n={})),function(e){e[e.default=0]="default",e[e.error=1]="error",e[e.success=2]="success"}(o||(t.ComboState=o={}))},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFixedCols=t.getFixedColsHeader=void 0;var r=i(1),a=i(9),s=i(30),l=i(85),c=i(18),u=i(24);t.getFixedColsHeader=function(e,t,i){if((i!==a.Split.left||"number"==typeof e.leftSplit&&e.fixedColumns.left.length)&&(i!==a.Split.right||"number"==typeof e.rightSplit&&e.fixedColumns.right.length)){var o=e.leftSplit,s=e.rightSplit,d=e.$positions,h=e.$totalWidth,f=e.$scrollBarWidth,p=i===a.Split.right,v=p?e.fixedColumns.right:e.fixedColumns.left,g=(0,c.getTotalWidth)(v),_=(0,l.getFixedRows)(n(n({},e),{currentColumns:v,$positions:n(n({},d),{xStart:0,xEnd:p?s:o}),scroll:{top:0,left:0},filteredColumns:v}),n(n({},t),{name:"header",position:"top",shifts:{x:0,y:0}}),i),m=n(n({},t),{name:"header",position:"top"});return(0,r.el)(".dhx_".concat(m.name,"-fixed-cols"),n({onwheel:c.scrollFixedColsAndRows,class:p?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{position:"absolute",top:0,left:p?h<t.wrapper.width-f.y-u.BORDERS?h-g:t.wrapper.width-g-f.y-u.BORDERS:0,width:g,overflow:"hidden"}},{role:"rowgroup","aria-rowcount":_.length}),_.body)}},t.getFixedCols=function(e,t,i,d){if((i!==a.Split.left||"number"==typeof e.leftSplit&&e.fixedColumns.left.length)&&(i!==a.Split.right||"number"==typeof e.rightSplit&&e.fixedColumns.right.length)){var h,f=e.leftSplit,p=e.rightSplit,v=e.$totalWidth,g=e.$totalHeight,_=e.headerHeight,m=e.footerHeight,y=e.$positions,b=e.scroll,w=e.data,x=e.$scrollBarWidth,C=i===a.Split.right,E=g+_+m;h=E>t.gridBodyHeight?e.$footer?E-x.x:t.gridBodyHeight:E<t.gridBodyHeight-x.x?E:e.$footer?t.gridBodyHeight:t.gridBodyHeight-x.x;var S=C?e.fixedColumns.right:e.fixedColumns.left,I=(0,c.getTotalWidth)(S),k=C?"rightFixedCols":"leftFixedCols",M=(0,s.getCells)(n(n({},e),{filteredColumns:S,$renderFrom:k,$positions:n(n({},y),{xStart:0,xEnd:C?p:f})})),O=t.sticky,A=n(n({},t),{name:"footer",position:"bottom"}),D=(0,l.getRows)(n(n({},e),{currentColumns:S,$positions:n(n({},y),{xStart:0,xEnd:C?p:f})}),n(n({},t),{name:"footer",position:"bottom"})),P=0;D.forEach((function(e){return P+=e.attrs.style.height}));var F=(0,l.getFixedSpans)(n(n({},e),{filteredColumns:S}),n(n({},t),{name:"footer",position:"bottom"}),i),T=function(e){return{role:"rowgroup","aria-rowcount":e}},R=O?(0,r.el)(".dhx_".concat(A.name,"-fixed-cols"),n({onwheel:c.scrollFixedColsAndRows,class:C?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{position:"absolute",top:h<t.gridBodyHeight?h-P:null,left:C?v<t.wrapper.width-x.y-u.BORDERS?v-I:t.wrapper.width-I-x.y-u.BORDERS:0,bottom:h>=t.gridBodyHeight?"".concat(O?x.x:0,"px"):null}},T(D.length)),[D,(0,r.el)("span.dhx_span-spans",{class:"dhx_footer-spans",role:"presentation"},F)]):null,V=y,H=(0,s.getSpans)(n(n({},e),{$renderFrom:k}),d||(C?a.Split.right:a.Split.left));return[(0,r.el)(".dhx_grid-fixed-cols-wrap",n({style:{left:C?v<t.wrapper.width-x.y-u.BORDERS?v-I:t.wrapper.width-I-x.y-u.BORDERS:0,height:h>=t.gridBodyHeight?(O?t.gridBodyHeight:t.gridBodyHeight+_)-x.x:h,paddingTop:_,overflow:"hidden",width:I}},{role:"presentation","aria-label":"Fixed column"}),[(0,r.el)(".dhx_grid-fixed-cols",n(n({onwheel:c.scrollFixedColsAndRows,class:C?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{top:-b.top+_-1+"px",paddingTop:t.shifts.y,height:g,position:"absolute"},_flags:r.KEYED_LIST},(0,s.getHandlers)(V.yStart,V.xStart,e)),T(w.length)),o(o([],M,!0),[H&&(0,r.el)("span.dhx_span-spans",{role:"presentation"},[H])],!1)),C?(0,r.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{left:0}}):(0,r.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{right:0}})]),e.$footer?R:null]}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFixedDataRows=t.getFixedRows=t.getFixedSpans=t.getRows=void 0;var r=i(1),a=i(37),s=i(18),l=i(9),c=i(30),u=i(84),d=i(0),h=2;function f(e,t,i,n){i&&(i.toLocaleLowerCase().includes("touch")?t._events.fire(i,[e,n]):t.events.fire(i,[e,n]))}function p(e,t,i){return{onclick:[f,e,i,l.GridEvents[t+"CellClick"]],onmouseover:[f,e,i,l.GridEvents[t+"CellMouseOver"]],onmousedown:[f,e,i,l.GridEvents[t+"CellMouseDown"]],ontouchstart:[f,e,i,l.GridEvents[t+"CellMouseDown"]],ondblclick:[f,e,i,l.GridEvents[t+"CellDblClick"]],oncontextmenu:[f,e,i,l.GridEvents[t+"CellRightClick"]],ontouchmove:[f,e,i,l.GridSystemEvents[t+"CellTouchMove"]],ontouchend:[f,e,i,l.GridSystemEvents[t+"CelltouchEnd"]]}}function v(e,t,i,n,o,a,s){void 0===o&&(o=""),void 0===s&&(s=!1);var l=t.type?"dhx_".concat(t.type,"-cell"):"dhx_string-cell",c=i.content[e.content]&&i.content[e.content].toHtml(t,i),u={};i.filteredColumns.forEach((function(e){var t=!!i.content[e[n][a].content];u[e.id]=t&&i.content[e[n][a].content].toHtml(e,i)||e[n][a].text}));var d=t.template&&"string"==typeof c?t.template(c,u,t):c;return(0,r.el)(".".concat(l),{style:{class:o.trim(),padding:0}},[c&&("string"==typeof c||"number"==typeof c?(0,r.el)("div",{class:"dhx_grid-footer-cell-text",role:"presentation",".innerHTML":s?d:null},s?null:d):c)])}function g(e,t){if(!e.data||!e.filteredColumns)return[];var i,o=t.name,a="header"===o?e.headerAutoHeight:e.footerAutoHeight,l=e.$positions,c=e.currentColumns,u=function(e,t){var i=e.map((function(e){return e[t]||[{}]}));return(0,s.transpose)(i)}(c,o),d=1;return u.map((function(t,f){var g=("header"===o?e.$headerHeightMap:e.$footerHeightMap)[f];return(0,r.el)(".dhx_".concat(o,"-row"),n({style:{height:g}},{role:"row","aria-rowindex":f+1}),t.map((function(t,_){var m,y=t.css||"",b=c[_],w=l.xStart+_+1,x=(0,s.isHtmlEnable)(e,b,t),C="dxi dxi-sort-variant dhx_grid-sort-icon",E="none";if(e.sortBy&&"".concat(b.id)===e.sortBy&&!t.content){var S=e.sortDir||"asc";C+=" dhx_grid-sort-icon--".concat(S),y+=" dhx_grid-".concat(o,"-cell--sorted "),E="asc"===S?"ascending":"descending"}var I=(0,s.isSortable)(e,b)&&t.text&&"footer"!==o&&!1!==t.headerSort;I&&(y+=" dhx_grid-header-cell--sortable");var k=0===_?"dhx_first-column-cell":"",M=_===c.length-1?"dhx_last-column-cell":"";t.content||(t.align?y+=" dhx_grid-header-cell--align_".concat(t.align," "):y+=" dhx_grid-header-cell--".concat("number"===b.type||"percent"===b.type||"date"===b.type?"align_right":"align_left"," ")),y+="".concat(k," ").concat(M);var O=void 0!==b.resizable?b.resizable:e.resizable;if(O){var A=e.rightSplit&&e.$scrollBarWidth.xState&&e.fixedColumns.right.includes(b);O=(0,r.el)("div",{class:"dhx_resizer_grip_wrap","aria-hidden":"true"},[(0,r.el)("div",{class:"dhx_resizer_grip"+(A?" dhx_resizer_grip--left":" dhx_resizer_grip--right"),dhx_resized:b.id,style:{height:"".concat(100*u.length,"%")}},[(0,r.el)("div",{class:"dhx_resizer_grip_line"})])]);var D=b.header&&(null===(m=b.header[0])||void 0===m?void 0:m.colspan);D&&(i=D,d=1),i&&d!==i&&(0===f&&(O=null),d++),"footer"===o&&(O=null)}t.align&&(y+=" dhx_align-".concat(t.align));var P=function(e,i,n){var o={"aria-colindex":i};return"footer"===e||t.content?o.role="gridcell":(o.role="columnheader",o["aria-sort"]=n),o};if(t.content)return(0,r.el)(".dhx_grid-".concat(o,"-cell.dhx_grid-custom-content-cell"),n(n({class:y.trim(),"data-dhx-id":b.id,"data-dhx-text-id":t.id,_key:b.id,style:{width:b.$width,height:"footer"===o?g+h/2+"px":g+"px"}},p(b,o,e)),P(o,w,E)),[v(t,b,e,o,"",f,x),O||null]);var F,T="dhx_grid-header-cell-text_content";return a&&(T+=" dhx_grid-header-cell-text_content-auto-height"),(0,r.el)(".dhx_grid-".concat(o,"-cell"),n(n({class:y.trim(),"data-dhx-id":b.id,"data-dhx-text-id":t.id,_key:b.id,style:{width:b.$width,height:"footer"===o?g+h/2+"px":g+"px"}},p(b,o,e)),P(o,w,E)),[(0,r.el)("div.dhx_grid-header-cell-text",{role:"presentation"},[(0,r.el)("span",n(n({class:T},(F=t.text,I?{role:"button","aria-label":"Sort by ".concat(F)}:{})),{".innerHTML":x?t.text:null}),x?null:t.text),O||null]),I&&(0,r.el)("div",{class:C,"aria-hidden":"true"})])})))}))}function _(e,t,i){var o=e.columns,c=e.filteredColumns,u=(0,s.transpose)(c.map((function(e){return e[t.name]||[]}))),f=t.name,g="header"===f?e.headerAutoHeight:e.footerAutoHeight,_="header"===f?e.$headerHeightMap:e.$footerHeightMap,m=0;return u.map((function(u,y){m=0;var b=_[y];return(0,r.el)(".dhx_span-row",{class:"dhx_header-row","aria-hidden":"true"},u.map((function(u,w){var x,C=c[w];if(i===l.Split.right&&0===w&&!u.colspan){var E=(0,s.transpose)(o.map((function(e){return e[t.name]||[]})));e:for(var S=0;S<E[y].length;S++){var I=E[y][S];if(I.colspan>1)for(var k=o.slice(S,S+I.colspan),M=0;M<k.length;M++)if(k[M].id===C.id){x={cell:I,col:o[S],widthBefore:(0,a.getWidth)(k,M,0),isLastCol:S+I.colspan>=o.length};break e}}}var O=(null==x?void 0:x.cell)||u,A=(null==x?void 0:x.col)||C,D=(0,s.isHtmlEnable)(e,C,u);m+=A.hidden?0:A.$width;var P=0===w?"dhx_first-column-cell":"",F=i?1:e.fixedColumns.right.length+1,T=u.colspan&&(0,a.getReducedColspan)(o,C.id,u.colspan),R=(null==x?void 0:x.isLastCol)||w===c.length-F||(T||1)+(w-1)>=c.length-F?"dhx_last-column-cell":"",V=b,H=b*y;if(O.rowspan){for(var L=O.rowspan-1;L>0;)V+=_[y+L],L--;V-=1}if(O.rowspan||O.colspan){H=0;for(S=y-1;S>=0;S--)H+=_[S]}var j=(0,s.isSortable)(e,A)&&O.rowspan&&O.text&&"footer"!==t.name&&!1!==O.headerSort,N="dxi dxi-sort-variant dhx_grid-sort-icon";e.sortBy&&"".concat(A.id)===e.sortBy&&!O.content&&(N+=" dhx_grid-sort-icon--".concat(e.sortDir||"asc"));var $=A.align?"dhx_align-".concat(A.align):"number"!==A.type&&"percent"!==A.type&&"date"!==A.type||O.colspan?"dhx_align-left":"dhx_align-right",z="dhx_grid-header-cell ".concat(P," ").concat(R," ").concat(O.rowspan?"dhx_span-cell__rowspan":""," ").concat(O.align?"dhx_align-".concat(O.align):$," ").concat(O.css?O.css:"");j&&(z+=" dhx_grid-header-cell--sortable"),O.content||(O.align?z+=" dhx_grid-header-cell--align_".concat(O.align," "):z+=" dhx_grid-header-cell--".concat("number"===A.type||"percent"===A.type||"date"===A.type?"align_right":"align_left"," "));var B=null;O.content&&((B=v(O,A,e,f,z,y)).attrs.style=n(n({},B.attrs.style),{width:"100%",borderRight:"0"}));var W="";m-A.$width>0&&(W="var(--dhx-border)");var G="dhx_grid-header-cell-text_content";g&&(G+=" dhx_grid-header-cell-text_content-auto-height");var U=(0,r.el)("span",{class:G,".innerHTML":D?O.text:null},D?null:O.text);return O.colspan||O.rowspan?(0,r.el)(".dhx_span-cell",n({style:{width:(0,a.getWidth)(o,O.colspan,(0,d.findIndex)(o,(function(e){return e.id===A.id}))),height:V,left:m-A.$width-((null==x?void 0:x.widthBefore)||0),borderLeft:W,top:H},class:z.trim(),"data-dhx-id":A.id,"data-dhx-text-id":O.id},p(A,f,e)),[B||O.rowspan?(0,r.el)("div.dhx_grid-header-cell-text",{role:"presentation"},[U]):U,j&&(0,r.el)("div",{class:N}),i===l.Split.left&&T&&w+T>c.length||x?(0,r.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{left:((null==x?void 0:x.widthBefore)||(0,a.getWidth)(c,c.length-w,w))-h/2}}):null]):null})).filter((function(e){return e})))}))}function m(e){return{role:"rowgroup","aria-rowcount":e}}t.getRows=g,t.getFixedSpans=_,t.getFixedRows=function(e,t,i){var a,s=e.leftSplit,l=e.$totalWidth,c=g(e,t),u=_(e,t,i),d=null;if("footer"===t.name&&!t.sticky){var f=e.rightSplit,p=e.fixedColumns,v=function(i){void 0===i&&(i=!1);var o=i?p.right:p.left;return!i&&s>=0||i&&f>=0?g(n(n({},e),{currentColumns:o,$positions:n(n({},e.$positions),{xStart:0,xEnd:i?f:s})}),t):[]};d=o(o([],v(),!0),v(!0),!0)}var y,b=((a={position:"sticky"})[t.position]=0,a);return t.sticky||(b.left=-e.scroll.left,y=-e.scroll.left,b.position="relative"),(0,r.el)(".dhx_".concat(t.name,"-wrapper").concat(e.rightSplit?".dhx_grid__rows_right--fixed":""),{class:t.sticky?"":"dhx_compatible-".concat(t.name),style:n(n({},b),{left:t.sticky?y:0,height:"footer"===t.name?e[t.name+"Height"]+h/2:e[t.name+"Height"],width:t.sticky?l:t.wrapper.width-h}),role:"presentation"},[(0,r.el)(".dhx_grid-".concat(t.name).concat(s?".dhx_grid_fixed_left":""),{style:{height:"footer"===t.name?e[t.name+"Height"]+h/2:e[t.name+"Height"],left:y,paddingLeft:t.shifts.x,width:l},role:"presentation"},[(0,r.el)(".dhx_".concat(t.name,"-rows"),n({},m(o([],c,!0).length)),o([],c,!0)),(0,r.el)(".dhx_".concat(t.name,"-spans"),{style:{marginLeft:-t.shifts.x},class:"dhx_".concat(t.name,"-rows"),role:"presentation"},u),d&&(0,r.el)(".dhx_".concat(t.name,"-fixed-cols"),{style:{position:"absolute",top:0,left:e.scroll.left+"px",height:"100%"}},d)]),(0,r.el)("div",{style:{width:l},role:"presentation"})])},t.getFixedDataRows=function(e,t,i){if(!(i===l.Split.top&&"number"!=typeof e.topSplit||i===l.Split.bottom&&"number"!=typeof e.bottomSplit)){var a=e.$totalWidth,d=e.topSplit,f=e.bottomSplit,p=e.$positions,v=e.data,g=e.$totalHeight,_=e.$width,y=e.headerHeight,b=e.footerHeight,w=e.$scrollBarWidth,x=i===l.Split.bottom,C=x?e.fixedRows.bottom:e.fixedRows.top,E=x?"bottomFixedRows":"topFixedRows",S=(0,c.getCells)(n(n({},e),{data:C,$renderFrom:E,$positions:n(n({},p),{yStart:0,yEnd:x?f:d})})),I=C.reduce((function(e,t){return e+t.$height}),0),k=(0,c.getSpans)(n(n({},e),{$renderFrom:E,data:v}),x?l.Split.bottom:l.Split.top),M=(0,s.getTotalHeight)(e.fixedRows.bottom),O=function(o){return(0,u.getFixedCols)(n(n({},e),{headerHeight:0,data:C,$renderFrom:E,scroll:n(n({},e.scroll),{top:-1}),$positions:n(n({},p),{yStart:0,yEnd:x?f:d}),$totalHeight:I,$data:v}),n(n({},t),{shifts:n(n({},t.shifts),{y:0})}),o,i)||[]},A=o(o([],O(l.Split.left),!0),O(l.Split.right),!0);return[(0,r.el)(".dhx_grid-fixed-data-rows-wrap",{class:x?"dhx_grid__rows_bottom--fixed":"",style:{top:x?g+y+b<t.wrapper.height-w.x-h?g+y-M+h/2:t.wrapper.height-M-b-h/2-w.x:y,overflow:"hidden",height:I>t.wrapper.height?t.wrapper.height:I,width:a+w.y+h<_?a:_-w.y-h}},o(o([(0,r.el)(".dhx_grid-fixed-cols",n(n({onwheel:s.scrollFixedColsAndRows,style:{left:-e.scroll.left+"px",paddingLeft:t.shifts.x,position:"absolute",width:a},_flags:r.KEYED_LIST},(0,c.getHandlers)(0,p.xStart,e)),m(v.length)),[(0,r.el)(".dhx_grid-fixed-rows",{class:e.rightSplit?"dhx_grid__rows_right--fixed":""},o(o([],S,!0),[k&&(0,r.el)(".dhx_span-spans",{role:"presentation"},[k])],!1))])],A,!0),[e.bottomSplit?(0,r.el)(".dhx_grid__rows-border--frozen",{role:"presentation"}):null],!1))]}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var a=i(0),s=i(1),l=i(4),c=i(14),u=i(23),d=function(e){function t(t,i){var n=e.call(this,t,(0,a.extend)({navigationType:"click",$name:"toolbar"},i))||this;n._currentRoot=null;return n.mount(t,(0,s.create)({render:function(){return n._draw(t)}})),n}return o(t,e),t.prototype.getState=function(e){if(!(0,a.isDefined)(e)||this.data.getItem(e)){var t={};for(var i in this.data.eachChild(this.data.getRoot(),(function(e){e.twoState&&!e.group?t[e.id]=e.active:"input"!==e.type&&"selectButton"!==e.type&&"datePicker"!==e.type||(t[e.id]=e.value)}),!1),this._groups)this._groups[i].active&&(t[i]=this._groups[i].active);return(0,a.isId)(e)?t[e]:t}},t.prototype.setState=function(e){var t,i=function(i){if(n._groups&&n._groups[i])n._groups[i].active&&(n.data.update(n._groups[i].active,{active:!1}),n._groups[i].active=e[i],n.data.update(e[i],{active:!0}));else{var o=n.data.getItem(i);switch(o.type){case"input":n.data.update(i,{value:e[i]});break;case"selectButton":var r=null===(t=o.items)||void 0===t?void 0:t.find((function(t){return t.value===e[i]}));n.data.update(i,{value:e[i],icon:null==r?void 0:r.icon});break;case"datePicker":o.$calendar?o.$calendar.setValue(e[i]):n.data.update(i,{value:e[i]});break;default:n.data.update(i,{active:e[i]})}}},n=this;for(var o in e)i(o)},t.prototype.setFocus=function(e){if(this.data.getItem(e)&&"input"===this.data.getItem(e).type){var t=this.getRootNode().querySelector('[data-dhx-id="'.concat(e,'"]'));t&&t.focus()}},t.prototype._customHandlers=function(){var e=this;return{input:function(t){var i=(0,l.locate)(t),n=e.data.getItem(i);if(n){var o=t.target.value;e.data.update(i,{value:o}),"input"===n.type&&e.events.fire(u.NavigationBarEvents.input,[i,o])}},tooltip:function(t){var i=(0,l.locateNode)(t);if(i){var n=i.getAttribute("data-dhx-id"),o=e.data.getItem(n);(null==o?void 0:o.tooltip)&&(0,c.tooltip)(o.tooltip,{node:i,position:c.Position.bottom})}}}},t.prototype._getFactory=function(){return(0,u.createFactory)({widget:this,defaultType:"navItem",allowedTypes:["button","imageButton","selectButton","navItem","menuItem","separator","spacer","title","input","customHTML","datePicker","customHTMLButton"],widgetName:"toolbar"})},t.prototype._draw=function(e){var t=this,i=this.data.getLength()?this.data.reduce((function(e,t){switch(t.type){case"title":return e||20;case"button":return"small"===t.size&&(!e||e<=28)?28:e||32;default:return 32}}),0)+24:null;return(0,s.el)("nav.dhx_widget.dhx_toolbar",{style:{height:i},class:this.config.css?this.config.css:""},[(0,s.el)("ul.dhx_navbar.dhx_navbar--horizontal",r(r({"data-dhx-widget-id":this._uid,tabindex:0},function(e){return{role:"toolbar","aria-label":e||""}}(e)),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,onkeydown:this._handlers.onkeydown,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",(function(e){if(9===e.which){var i=(0,l.locateNode)(document.activeElement);if(i){var n=i.getAttribute("data-dhx-id"),o=t.data.getItem(n);(null==o?void 0:o.tooltip)&&(0,c.tooltip)(o.tooltip,{node:i,position:c.Position.bottom,force:!0})}}}),!0)}}}),this.data.map((function(e){return t._factory(e)}),this.data.getRoot(),!1))])},t.prototype._getMode=function(e,t){return e.id===t?"bottom":"right"},t.prototype._close=function(t){this._activePosition=null,this._currentRoot=null,e.prototype._close.call(this,t)},t.prototype._setRoot=function(e){this.data.getParent(e)===this.data.getRoot()&&(this._currentRoot=e)},t}(u.Navbar);t.Toolbar=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Window=void 0;var n=i(0),o=i(1),r=i(3),a=i(21),s=i(20),l=i(17),c=i(32),u=i(218),d=i(43),h=i(219),f=i(23),p=function(){function e(e){var t=this;this.config=(0,n.extend)({movable:!1,resizable:!1,closable:e.modal},e),this.config.node&&"string"==typeof this.config.node?this.config.node=document.getElementById(this.config.node):this.config.node||(this.config.node=document.body),this._uid=(0,n.uid)(),this.events=new r.EventSystem(this);var i=this._popup=document.createElement("div");i.tabIndex=1,i.setAttribute("role","dialog"),i.setAttribute("aria-modal","".concat(this.config.modal||!1)),this.config.modal||h.default.add(this._uid,this._popup),this._fullScreen=!1,this._isActive=!1,this._keyManager=new a.KeyManager((function(e,i){return i===t._uid||t.getContainer().contains(document.activeElement)})),this._initHandlers(),this._initUI(),this.config.html&&this.attachHTML(this.config.html)}return e.prototype.paint=function(){this._layout.paint()},e.prototype.isFullScreen=function(){return this._fullScreen},e.prototype.setFullScreen=function(){this._fullScreen||(this._fullScreen=!0,this.setSize(window.innerWidth,window.innerHeight),this.setPosition(window.pageXOffset,window.pageYOffset))},e.prototype.unsetFullScreen=function(){this._fullScreen&&(this._fullScreen=!1,this.setSize(this._oldSizes.width,this._oldSizes.height),this.setPosition(this._oldPosition.left,this._oldPosition.top))},e.prototype.setSize=function(e,t){this._oldSizes={width:this._popup.offsetWidth,height:this._popup.offsetHeight};var i={width:this._oldSizes.width,height:this._oldSizes.height};(0,n.isDefined)(e)&&(this.config.width=i.width=e),(0,n.isDefined)(t)&&(this.config.height=i.height=t),this._popup.style.width=i.width+"px",this._popup.style.height=i.height+"px",this.events.fire(d.WindowEvents.resize,[i,this._oldSizes,{left:!0,top:!0,bottom:!0,right:!0}])},e.prototype.getSize=function(){return{width:this._popup.offsetWidth,height:this._popup.offsetHeight}},e.prototype.setPosition=function(e,t){this._oldPosition={left:this._popup.offsetLeft,top:this._popup.offsetTop};var i={left:this._oldPosition.left,top:this._oldPosition.top};(0,n.isDefined)(e)&&(this.config.left=i.left=e),(0,n.isDefined)(t)&&(this.config.top=i.top=t),this._popup.style.left=i.left+"px",this._popup.style.top=i.top+"px",this.events.fire(d.WindowEvents.resize,[i,this._oldPosition,{left:!0,top:!0,bottom:!0,right:!0}])},e.prototype.getPosition=function(){return{left:this._popup.offsetLeft,top:this._popup.offsetTop}},e.prototype.show=function(e,t){if(void 0===e&&(e=this.config.left),void 0===t&&(t=this.config.top),this.events.fire(d.WindowEvents.beforeShow,[{left:e,top:t}])){this.isVisible()&&this.hide(),h.default.setActive(this._uid),this._popup.className+=" dhx_popup dhx_widget"+(this.config.modal?" dhx_popup--window_modal":" dhx_popup--window")+(this.config.css?" "+this.config.css:""),this._popup.style.position=this.config.modal?"fixed":"absolute",this._popup.setAttribute("data-dhx-widget-id",this._uid);var i=this._getContainerParams(),o=i.containerInnerWidth,r=i.containerInnerHeight,a=i.containerXOffset,l=i.containerYOffset,c=this.config.width="number"==typeof this.config.width&&this.config.width||"number"==typeof this.config.minWidth&&this.config.minWidth||o/2,u=this.config.height="number"==typeof this.config.height&&this.config.height||"number"==typeof this.config.minHeight&&this.config.minHeight||r/2;if(this.config.left=e=(0,n.isDefined)(e)?e:(o-c)/(this.config.modal?2:2+a),this.config.top=t=(0,n.isDefined)(t)?t:(r-u)/(this.config.modal?2:2+l),this._isActive)return this._popup.style.left=e+"px",void(this._popup.style.top=t+"px");this.config.viewportOverflow&&h.default.openFreeWindow(this.config.node),this.config.modal&&this._blockScreen(),this._popup.style.width=c+"px",this._popup.style.height=u+"px",this._popup.style.left=e+"px",this._popup.style.top=t+"px",this.config.node.appendChild(this._popup),this._popup.focus(),this._isActive=!0,this.events.fire(d.WindowEvents.afterShow,[{left:e,top:t}]),s.focusManager.setFocusId(this._uid)}},e.prototype.hide=function(){this._hide()},e.prototype._hide=function(e){this._isActive&&this.events.fire(d.WindowEvents.beforeHide,[{left:this.config.left,top:this.config.top},e])&&(this.config.viewportOverflow&&h.default.closeFreeWindow(this.config.node),this._blocker&&(this.config.node.removeChild(this._blocker),this.config.closable&&this._keyManager.removeHotKey(null,this),this._blocker=null),this.config.node.removeChild(this._popup),this._isActive=!1,this.events.fire(d.WindowEvents.afterHide,[{left:this.config.left,top:this.config.top},e]))},e.prototype.isVisible=function(){return this._isActive},e.prototype.getWidget=function(){return this._layout.getCell("content").getWidget()},e.prototype.getContainer=function(){return this.getRootView().data._container},e.prototype.attach=function(e,t){this._layout.getCell("content").attach(e,t)},e.prototype.attachHTML=function(e){this._layout.getCell("content").attachHTML(e)},e.prototype.getRootView=function(){return this._layout.getRootView()},e.prototype.destructor=function(){this._isActive&&this.hide(),this.header&&this.header.destructor(),this.footer&&this.footer.destructor(),this.events&&this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._layout&&this._layout.destructor(),this.config=this.header=this.footer=this.events=null,this._popup=this._uid=this._handlers=this._isActive=this._keyManager=this._fullScreen=this._oldSizes=this._oldPosition=null},e.prototype.fullScreen=function(){this.setFullScreen()},e.prototype._initHandlers=function(){var e=this;this._handlers={headerDblClick:function(t){return e.events.fire(d.WindowEvents.headerDoubleClick,[t])},move:function(t){3!==t.which&&(t.preventDefault(),(0,u.detectDrag)(t).then((function(t){t&&e._startDrag(t.x,t.y)})))},resize:{".dhx_window-resizer":function(t){3!==t.which&&(t.preventDefault(),h.default.setActive(e._uid),(0,u.detectDrag)(t).then((function(i){if(i){var n=t.target.classList;n.contains("dhx_window-resizer--left")?e._startResize({left:!0}):n.contains("dhx_window-resizer--right")?e._startResize({right:!0}):n.contains("dhx_window-resizer--top")?e._startResize({top:!0}):n.contains("dhx_window-resizer--bottom")?e._startResize({bottom:!0}):n.contains("dhx_window-resizer--bottom_left")?e._startResize({left:!0,bottom:!0}):n.contains("dhx_window-resizer--bottom_right")?e._startResize({bottom:!0,right:!0}):n.contains("dhx_window-resizer--top_left")?e._startResize({top:!0,left:!0}):n.contains("dhx_window-resizer--top_right")&&e._startResize({top:!0,right:!0})}})))}},setActive:function(){h.default.setActive(e._uid)}}},e.prototype._initUI=function(){var e=this,t=[],i=(this.config.header||this.config.title||this.config.closable||this.config.movable)&&!1!==this.config.header;i&&t.push({id:"header",height:"content",css:"dhx_window-header "+(this.config.movable?"dhx_window-header--movable":""),on:{mousedown:this.config.movable&&this._handlers.move,dblclick:this._handlers.headerDblClick}}),t.push({id:"content",css:i?"dhx_window-content":"dhx_window-content-without-header"}),this.config.footer&&t.push({id:"footer",height:"content",css:"dhx_window-footer"}),this.config.resizable&&t.push({id:"resizers",height:"content",css:"resizers"});var n=this._layout=new l.Layout(this._popup,{css:"dhx_window"+(this.config.modal?" dhx_window--modal":""),rows:t,on:{mousedown:this._handlers.setActive},id:this._uid});if(i){var o=this.header=new c.Toolbar;this.config.title&&(this.header.data.add({type:"title",value:this.config.title,id:"title",css:"title_max"}),this._popup.setAttribute("aria-label",this.config.title)),this.config.closable&&(this.header.data.add({type:"spacer"}),this.header.data.add({id:"close",type:"button",view:"link",size:"medium",color:"secondary",circle:!0,icon:"dxi dxi-close"}),o.events.on(f.NavigationBarEvents.click,(function(t,i){"close"===t&&e._hide(i)}))),n.getCell("header").attach(o)}if(this.config.footer){var r=this.footer=new c.Toolbar;n.getCell("footer").attach(r)}this.config.resizable&&n.getCell("resizers").attach((function(){return e._drawResizers()}))},e.prototype._drawResizers=function(){return(0,o.el)(".dhx-resizers",{onmousedown:this._handlers.resize},[(0,o.el)(".dhx_window-resizer.dhx_window-resizer--left",{_ref:"left"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--right",{_ref:"right"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--bottom",{_ref:"bottom"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--top",{_ref:"top"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--bottom_right",{_ref:"bottomRight"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--bottom_left",{_ref:"bottomLeft"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--top_right",{_ref:"topRight"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--top_left",{_ref:"topLeft"})])},e.prototype._startDrag=function(e,t){var i=this;this.config.node.classList.add("dhx_window--stop_selection");var n=e-this._popup.offsetLeft,o=t-this._popup.offsetTop,r=this._popup.offsetWidth,a=this._popup.offsetHeight,s=function(e){var t={left:i._popup.offsetLeft,top:i._popup.offsetTop},s=e.pageX-n,l=e.pageY-o;if(!i.config.viewportOverflow){var c=i._getContainerParams(),u=c.containerXOffset,h=c.containerYOffset,f=c.containerInnerWidth,p=c.containerInnerHeight;s<u?s=u:s>u+f-r&&(s=u+f-r),l<h?l=h:l>h+p-a&&(l=h+p-a)}i.config.left=s,i.config.top=l,i._popup.style.left=s+"px",i._popup.style.top=l+"px";var v={left:s,top:l};i.events.fire(d.WindowEvents.move,[v,t,{left:!0,top:!0,bottom:!0,right:!0}])},l=function(){document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",s),i.config.node.classList.remove("dhx_window--stop_selection")};document.addEventListener("mouseup",l),document.addEventListener("mousemove",s)},e.prototype._startResize=function(e){var t,i,n=this,o=100|this.config.minWidth,r=100|this.config.minHeight,a=this._popup.offsetLeft,s=this._popup.offsetTop,l=this._popup.offsetWidth,c=this._popup.offsetHeight,u=this.getRootView().refs;switch(!0){case e.bottom&&e.left:i="dhx_window-body-pointer--bottom_left",t=u.bottomLeft;break;case e.bottom&&e.right:i="dhx_window-body-pointer--bottom_right",t=u.bottomLeft;break;case e.top&&e.left:i="dhx_window-body-pointer--top_left",t=u.bottomLeft;break;case e.top&&e.right:i="dhx_window-body-pointer--top-right",t=u.right;break;case e.top:i="dhx_window-body-pointer--top",t=u.bottomLeft;break;case e.bottom:i="dhx_window-body-pointer--bottom",t=u.bottomLeft;break;case e.left:i="dhx_window-body-pointer--left",t=u.bottomLeft;break;case e.right:i="dhx_window-body-pointer--right",t=u.right}t.el.classList.add("dhx_window-resizer--active"),this.config.node.classList.add("dhx_window--stop_selection"),this.config.node.classList.add(i);var h=function(t){var i=n._getContainerParams(),u=i.containerInnerWidth,h=i.containerInnerHeight,f=i.containerXOffset,p=i.containerYOffset,v={width:n._notInNode()?t.pageX-a:t.pageX-n.config.node.offsetLeft-a,height:n._notInNode()?t.pageY-s:t.pageY-n.config.node.offsetTop-s,left:n._notInNode()?t.pageX:t.pageX-n.config.node.offsetLeft,top:n._notInNode()?t.pageY:t.pageY-n.config.node.offsetTop};e.right&&(v.width<o?v.width=o:v.width>f+u-a&&(v.width=f+u-a),n._popup.style.width=v.width+"px"),e.bottom&&(v.height<r?v.height=r:v.height>p+h-s&&(v.height=p+h-s),n._popup.style.height=v.height+"px"),e.left&&(a+l-v.left<o&&(v.left=a+l-o),v.width=a+l-v.left,n.config.left=v.left,n._popup.style.left=v.left+"px",n._popup.style.width=v.width+"px"),e.top&&(v.top<p?v.top=p:s+c-v.top<r&&(v.top=s+c-r),v.height=s+c-v.top,n.config.top=v.top,n._popup.style.top=v.top+"px",n._popup.style.height=v.height+"px"),n.config.width=n._popup.offsetWidth,n.config.height=n._popup.offsetHeight,n.events.fire(d.WindowEvents.resize,[v,{left:a,top:s,height:c,width:l},e])},f=function(){document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",h),n.config.node.classList.remove("dhx_window--stop_selection"),n.config.node.classList.remove(i),t.el.classList.remove("dhx_window-resizer--active")};document.addEventListener("mouseup",f),document.addEventListener("mousemove",h)},e.prototype._blockScreen=function(){var e=this,t=document.createElement("div");t.className="dhx_window__overlay",this.config.node.appendChild(t),this._blocker=t,this.config.closable&&(t.addEventListener("click",(function(t){return e._hide(t)})),this._keyManager.addHotKey("escape",(function(t){var i=Array.prototype.slice.call(document.querySelectorAll(".dhx_popup--window_modal")),n=Array.prototype.slice.call(document.querySelectorAll(".dhx_popup--window")),o=i.concat(n);1!==o.length?(o.sort((function(e,t){return+window.getComputedStyle(t).zIndex-+window.getComputedStyle(e).zIndex})),o[o.length-1]===e._popup&&e._hide(t)):e._hide(t)})))},e.prototype._notInNode=function(){return this.config.node===document.body||this.config.modal},e.prototype._getContainerParams=function(){var e=this._notInNode();return{containerInnerWidth:e?window.innerWidth:this.config.node.offsetWidth,containerInnerHeight:e?window.innerHeight:this.config.node.offsetHeight,containerXOffset:e?window.pageXOffset:this.config.node.scrollLeft,containerYOffset:e?window.pageYOffset:this.config.node.scrollTop}},e}();t.Window=p},function(e,t,i){"use strict";(function(e){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;var l=i(3),c=i(8),u=i(17),d=i(0),h=i(225),f=i(226),p=i(89),v=i(227),g=i(45),_=i(228),m=i(230),y=i(231),b=i(232),w=i(233),x=i(234),C=i(7),E=i(90),S=i(245),I=i(246),k=i(247),M=i(248),O=i(249),A=i(95),D=i(250),P=i(5),F=i(1),T=function(t){function i(e,i){var n=t.call(this,null,(0,d.extend)({disabled:!1,hidden:!1,css:""},i))||this;return n._isValid=!0,n._state={},n.events=new l.EventSystem(n),n.container=e,n._initUI(e),n.config.hidden&&n.hide(!0),n.config.disabled&&n.disable(),n.events.on(P.FormEvents.afterShow,(function(){n._formContainerShow()})),n.events.on(P.FormEvents.afterHide,(function(){Object.values(n._attachments).some((function(e){return!e.config.hidden}))||n._formContainerHide()})),(0,F.awaitRedraw)().then((function(){var e=n.layout.getRootNode();e&&(e.setAttribute("role","form"),n.config.title&&e.setAttribute("aria-label",n.config.title))})),n}return o(i,t),i.prototype.paint=function(){t.prototype.paint.call(this),this.layout.paint()},i.prototype.send=function(t,i,n){var o=this;if(void 0===i&&(i="POST"),this.events.fire(P.FormEvents.beforeSend))return new e((function(e,r){var a=new XMLHttpRequest;switch(a.onload=function(){a.status>=200&&a.status<300?e(a.response||a.responseText):r({status:a.status,statusText:a.statusText})},a.onloadend=function(){a.readyState===XMLHttpRequest.DONE&&200===a.status&&o.events.fire(P.FormEvents.afterSend)},a.onerror=function(){r({status:a.status,statusText:a.statusText})},"GET"===i&&(t+="?"+encodeURIComponent(JSON.stringify(o.getValue()))),a.open(i,t),n||a.setRequestHeader("Content-Type","application/json"),i){case"POST":o._send(),a.send(n?o.getValue(!0):JSON.stringify(o.getValue()));break;case"DELETE":case"PUT":a.send(n?o.getValue(!0):JSON.stringify(o.getValue()));break;default:a.send()}}))},i.prototype.clear=function(e){switch(e){case P.ClearMethod.value:this._clear();break;case P.ClearMethod.validation:this._clearValidate();break;default:this._clear(),this._clearValidate()}this.paint()},i.prototype.setValue=function(e){for(var t in e)for(var i in this._attachments)"function"==typeof this._attachments[i].setValue&&this._attachments[i].config.name===t&&this._attachments[i].setValue(e[t])},i.prototype.getValue=function(e){if(e){var t=new FormData,i=function(e){Array.isArray(n._state[e])?n._state[e].forEach((function(i,n){return t.append(e+"[".concat(n,"]"),i)})):t.append(e,n._state[e])},n=this;for(var o in this._state)i(o);return t}return r({},this._state)},i.prototype.getItem=function(e){for(var t in this._attachments)if(t==e)return this._attachments[t]},i.prototype.validate=function(e){for(var t in void 0===e&&(e=!1),this._isValid=!0,this._attachments)"function"==typeof this._attachments[t].validate&&(0,C.isVerify)(this._attachments[t].config)&&!this._attachments[t].validate(e)&&(this._isValid=!1,!e&&this.events.fire(P.FormEvents.validationFail,[t,this._attachments[t]]));return this._isValid},i.prototype.setProperties=function(e,t){if("string"==typeof e&&t&&!(0,d.isEmptyObj)(t))for(var i in this._attachments)"function"==typeof this._attachments[i].setProperties&&i===e&&this._attachments[i].setProperties(t);if("object"==typeof e&&!(0,d.isEmptyObj)(e))for(var i in this._attachments)"function"!=typeof this._attachments[i].setProperties||(0,d.isEmptyObj)(e[i])||this._attachments[i].setProperties(e[i])},i.prototype.getProperties=function(e){if(e)for(var t in this._attachments)if("function"==typeof this._attachments[t].getProperties&&t===e)return this._attachments[t].getProperties();var i={};for(var t in this._attachments)"function"==typeof this._attachments[t].getProperties&&(i[t]=this._attachments[t].getProperties());return i},i.prototype.show=function(){if(this.config.hidden||Object.values(this._attachments).some((function(e){return!e.config.hidden})))for(var e in this._formContainerShow(),this._attachments)"function"==typeof this._attachments[e].show&&this._attachments[e].show()},i.prototype.hide=function(e){if(!this.config.hidden||e)for(var t in this._formContainerHide(),this._attachments)"function"==typeof this._attachments[t].hide&&this._attachments[t].hide(e)},i.prototype.setFocus=function(e){for(var t in this._attachments){var i=this._attachments[t];"radiogroup"!==i.config.type&&"checkboxgroup"!==i.config.type||i.focus(e),i.config.name===e&&i.focus()}},i.prototype.blur=function(e){for(var t in e||this.forEach((function(e){"function"==typeof e.blur&&e.blur()})),this._attachments){var i=this._attachments[t];"radiogroup"!==i.config.type&&"checkboxgroup"!==i.config.type||i.blur(e),i.config.name===e&&i.blur()}},i.prototype.isVisible=function(e){if(!e)return!this.config.hidden;for(var t in this._attachments)if(t===e)return!this._attachments[t].config.hidden},i.prototype.disable=function(){for(var e in this.config.disabled=!0,this._attachments)"function"==typeof this._attachments[e].disable&&this._attachments[e].disable()},i.prototype.enable=function(){for(var e in this.config.disabled=!1,this._attachments)"function"==typeof this._attachments[e].enable&&this._attachments[e].enable()},i.prototype.isDisabled=function(e){if(!e)return this.config.disabled;for(var t in this._attachments)if(t===e)return this._attachments[t].config.disabled},i.prototype.forEach=function(e){for(var t=Object.values(this._attachments),i=0;i<t.length;i++)e.call(this,t[i],i,t)},i.prototype.destructor=function(){for(var e in this.unmount(),this._attachments)"function"==typeof this._attachments[e].destructor&&this._attachments[e].destructor();this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this._attachments=this._state=this._uid=this.container=this.events=this._isValid=null},i.prototype.getRootView=function(){return this.layout.getRootView()},i.prototype._addLayoutItem=function(e){var t=e.id=e.id||(0,d.uid)(),i=e.name=e.name||t.toString();e.type=e.type&&e.type.toLowerCase();var n=e.css,o=e.padding,r=a(e,["css","padding"]),s=e.width,l=e.height,c=n?n+" dhx_form-element":"dhx_form-element";switch("spacer"!==e.type&&!l&&(l="content"),r.type){case"button":case"togglegroup":r.full&&!r.width&&(c+=" dhx_button--full-gravity"),s=r.width||!r.full&&"content";break;case"text":"content"===s&&(c+=" dhx_form-element--fit-content");break;case"simplevault":r.$vaultHeight=l}this._initItemHandlers(e,i);var u={id:i,width:s,height:l,padding:o,css:c};return"fieldset"===e.type&&(u.$fieldset=!0,u.label=e.label,u.labelAlignment=e.labelAlignment,this._createLayoutConfig(e,u)),u},i.prototype._initItemHandlers=function(e,t){var i=this;switch(e.type){case"avatar":var n=this._attachments[t]=new M.Avatar(null,e);this._state[t]=n.getValue(),n.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),n.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),n.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),n.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),n.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),n.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),n.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),n.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),n.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),n.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),n.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),n.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),n.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"toggle":var o=this._attachments[t]=new A.ToggleButton(null,e);this._state[t]=o.getValue(),o.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),o.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),o.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),o.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),o.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),o.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),o.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),o.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),o.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),o.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),o.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"togglegroup":var r=this._attachments[t]=new D.ToggleGroup(null,e);this._state[t]=r.getValue(),r.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),r.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),r.events.on(P.ItemEvent.beforeHide,(function(e,n,o){if(!o)return i.events.fire(P.FormEvents.beforeHide,[t,e,n])})),r.events.on(P.ItemEvent.beforeShow,(function(e,n){return i.events.fire(P.FormEvents.beforeShow,[t,e,n])})),r.events.on(P.ItemEvent.afterHide,(function(e,n,o){!r.isVisible()&&i.layout.getCell(t).hide(),!o&&i.events.fire(P.FormEvents.afterHide,[t,e,n])})),r.events.on(P.ItemEvent.afterShow,(function(e,n){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e,n])})),r.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),r.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),r.events.on(P.ItemEvent.focus,(function(e,n){i.events.fire(P.FormEvents.focus,[t,e,n])})),r.events.on(P.ItemEvent.blur,(function(e,n){i.events.fire(P.FormEvents.blur,[t,e,n])})),r.events.on(P.ItemEvent.keydown,(function(e,n){i.events.fire(P.FormEvents.keydown,[e,t,n])}));break;case"button":var a=this._attachments[t]=new f.Button(null,e);a.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),a.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),a.events.on(P.ItemEvent.click,(function(e){e.preventDefault(),i.events.fire(P.FormEvents.click,[t,e]),i.events.fire(P.FormEvents.buttonClick,[t,e]),a.config.submit&&i.validate()&&a.config.url&&i.send(a.config.url)})),a.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),a.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),a.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),a.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),a.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),a.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),a.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"datepicker":var l=this._attachments[t]=new h.DatePicker(null,e);this._state[t]=l.getValue("Date"===e.valueFormat),l.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),l.events.on(P.ItemEvent.afterChangeProperties,(function(n){i._changeProps(t,n),i._state[t]=l.getValue("Date"===e.valueFormat),i.events.fire(P.FormEvents.afterChangeProperties,[t,n]),i.paint()})),l.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),l.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),l.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),l.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),l.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),l.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),l.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),l.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),l.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),l.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),l.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"checkbox":var c=this._attachments[t]=new p.Checkbox(null,e);this._state[t]=c.getValue(),c.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),c.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=c.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),c.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),c.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),c.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),c.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),c.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),c.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),c.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),c.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),c.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),c.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),c.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"checkboxgroup":var u=this._attachments[t]=new v.CheckboxGroup(null,e);this._state[t]=u.getValue(),u.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),u.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=u.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),u.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),u.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),u.events.on(P.ItemEvent.beforeHide,(function(e,n,o){if(!o)return i.events.fire(P.FormEvents.beforeHide,[t,e,n])})),u.events.on(P.ItemEvent.beforeShow,(function(e,n){return i.events.fire(P.FormEvents.beforeShow,[t,e,n])})),u.events.on(P.ItemEvent.afterHide,(function(e,n,o){!u.isVisible()&&i.layout.getCell(t).hide(),!o&&i.events.fire(P.FormEvents.afterHide,[t,e,n])})),u.events.on(P.ItemEvent.afterShow,(function(e,n){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e,n])})),u.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),u.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),u.events.on(P.ItemEvent.focus,(function(e,n){i.events.fire(P.FormEvents.focus,[t,e,n])})),u.events.on(P.ItemEvent.blur,(function(e,n){i.events.fire(P.FormEvents.blur,[t,e,n])})),u.events.on(P.ItemEvent.keydown,(function(e,n){i.events.fire(P.FormEvents.keydown,[e,t,n])})),u.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),u.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),u.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])}));break;case"combo":var d=this._attachments[t]=new w.Combo(null,e);this._state[t]=d.getValue(),d.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),d.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=d.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),d.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),d.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),d.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),d.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),d.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),d.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),d.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),d.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),d.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),d.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),d.events.on(P.ItemEvent.keydown,(function(e,n){i.events.fire(P.FormEvents.keydown,[e,t,n])}));break;case"input":var C=this._attachments[t]=new g.Input(null,e);this._state[t]=C.getValue(),C.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),C.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=C.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),C.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),C.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),C.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),C.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),C.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),C.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),C.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),C.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),C.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),C.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),C.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"radiogroup":var F=this._attachments[t]=new _.RadioGroup(null,e);this._state[t]=F.getValue(),F.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),F.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=F.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),F.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),F.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),F.events.on(P.ItemEvent.beforeHide,(function(e,n,o){if(!o)return i.events.fire(P.FormEvents.beforeHide,[t,e,n])})),F.events.on(P.ItemEvent.beforeShow,(function(e,n){return i.events.fire(P.FormEvents.beforeShow,[t,e,n])})),F.events.on(P.ItemEvent.afterHide,(function(e,n,o){!F.isVisible()&&i.layout.getCell(t).hide(),!o&&i.events.fire(P.FormEvents.afterHide,[t,e,n])})),F.events.on(P.ItemEvent.afterShow,(function(e,n){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e,n])})),F.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),F.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),F.events.on(P.ItemEvent.focus,(function(e,n){i.events.fire(P.FormEvents.focus,[t,e,n])})),F.events.on(P.ItemEvent.blur,(function(e,n){i.events.fire(P.FormEvents.blur,[t,e,n])})),F.events.on(P.ItemEvent.keydown,(function(e,n){i.events.fire(P.FormEvents.keydown,[e,t,n])}));break;case"select":var T=this._attachments[t]=new m.Select(null,e);this._state[t]=T.getValue(),T.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),T.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=T.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),T.events.on(P.ItemEvent.changeOptions,(function(e){i.layout.getCell(t).config.options=s([],e,!0)})),T.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),T.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),T.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),T.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),T.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),T.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),T.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),T.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),T.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),T.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),T.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"simplevault":var R=this._attachments[t]=new E.SimpleVault(null,e);this._state[t]=R.getValue(),R.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),R.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=R.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),R.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),R.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),R.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),R.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),R.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),R.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),R.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),R.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])}));break;case"slider":var V=this._attachments[t]=new x.SliderForm(null,e);this._state[t]=V.getValue(),V.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),V.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),V.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),V.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),V.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),V.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),V.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),V.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),V.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"textarea":var H=this._attachments[t]=new y.Textarea(null,e);this._state[t]=H.getValue(),H.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),H.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=H.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),H.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),H.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),H.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),H.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),H.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),H.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),H.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),H.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),H.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),H.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),H.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"text":var L=this._attachments[t]=new b.Text(null,e);this._state[t]=L.getValue(),L.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),L.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=L.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),L.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),L.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),L.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),L.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),L.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),L.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),L.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),L.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])}));break;case"timepicker":var j=this._attachments[t]=new S.TimePicker(null,e);this._state[t]=e.value&&j.getValue("timeObject"===e.valueFormat)||"",j.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),j.events.on(P.ItemEvent.afterChangeProperties,(function(n){i._changeProps(t,n),i._state[t]=j.getValue("timeObject"===e.valueFormat),i.events.fire(P.FormEvents.afterChangeProperties,[t,n]),i.paint()})),j.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),j.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),j.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),j.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),j.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),j.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),j.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),j.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),j.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),j.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),j.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])})),j.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),j.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),j.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])}));break;case"colorpicker":var N=this._attachments[t]=new I.ColorPicker(null,e);this._state[t]=N.getValue(),N.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),N.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i._state[t]=N.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),N.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),N.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),N.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),N.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),N.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),N.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),N.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),N.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),N.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),N.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),N.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"fieldset":var $=this._attachments[t]=new O.Fieldset(e);$.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),$.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()}));break;default:var z=this._attachments[t]=new k.Spacer(null,e);z.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),z.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),z.events.on(P.ItemEvent.beforeHide,(function(e){if(!e)return i.events.fire(P.FormEvents.beforeHide,[t])})),z.events.on(P.ItemEvent.beforeShow,(function(){return i.events.fire(P.FormEvents.beforeShow,[t])})),z.events.on(P.ItemEvent.afterHide,(function(e){i.layout.getCell(t).hide(),!e&&i.events.fire(P.FormEvents.afterHide,[t])})),z.events.on(P.ItemEvent.afterShow,(function(){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t])}))}},i.prototype._changeProps=function(e,t){var i=["width","height","css","padding","label","labelAlignment","align"];for(var n in t)i.includes(n)&&(this.layout.getCell(e).config[n]=t[n])},i.prototype._addLayoutItems=function(e){var t=this;return e.map((function(e){if((0,C.isBlock)(e)){var i={width:"content",height:"content"};return t._createLayoutConfig(e,i),i}return t._addLayoutItem(e)}))},i.prototype._checkLayoutConfig=function(e,t){return(0,d.isDefined)(e.css)&&(t.css=e.css),(0,d.isDefined)(e.title)&&(t.header=e.title),(0,d.isDefined)(e.padding)&&(t.padding=e.padding),(0,d.isDefined)(e.width)&&(t.width=e.width),(0,d.isDefined)(e.height)&&(t.height=e.height),(0,d.isDefined)(e.align)&&(t.align=e.align),t},i.prototype._createLayoutConfig=function(e,t){t=this._checkLayoutConfig(e,t),(0,d.isDefined)(e.rows)?t.rows=this._addLayoutItems(e.rows):(0,d.isDefined)(e.cols)&&(t.cols=this._addLayoutItems(e.cols))},i.prototype._initUI=function(e){this._attachments={};var t={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,t),this.layout=new u.Layout(e,t),(0,C.setAttacments)(this._attachments,this.layout)},i.prototype._clear=function(){for(var e in this._state={},this._attachments){var t=this._attachments[e].config.name;"function"==typeof this._attachments[e].clear&&(this._attachments[e].clear(),t?this._state[t]=this._attachments[e].getValue():this._state[e]=this._attachments[e].getValue())}},i.prototype._clearValidate=function(){for(var e in this._attachments)"function"==typeof this._attachments[e].clearValidate&&this._attachments[e].clearValidate()},i.prototype._formContainerShow=function(){(this.config.hidden=!1,this.getRootView().node)&&(this.getRootView().node.el.style.display="flex")},i.prototype._formContainerHide=function(){(this.config.hidden=!0,this.getRootView().node)&&(this.getRootView().node.el.style.display="none")},i.prototype._send=function(){for(var e in this._attachments)"function"==typeof this._attachments[e].send&&this._attachments[e].send()},i}(c.View);t.Form=T}).call(this,i(16))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Checkbox=void 0;var a=i(1),s=i(3),l=i(7),c=i(10),u=i(5),d=i(15),h=i(0),f=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;n.events=new s.EventSystem,n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","text"],n._props=r(r([],l.baseProps,!0),n._propsItem,!0),n._initView(i),n._initHandlers();return n.mount(t,(0,a.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.setProperties=function(e,t){if(void 0===t&&(t=!1),e&&!(0,h.isEmptyObj)(e)&&(t||this.events.fire(u.ItemEvent.beforeChangeProperties,[this.getProperties()]))){for(var i in e)this._props.includes(i)&&(this.config[i]=e[i]);!t&&this.events.fire(u.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){this.config.hidden&&this.events.fire(u.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(u.ItemEvent.afterShow,[this.getValue()]))},t.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(u.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(u.ItemEvent.afterHide,[this.getValue(),e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.getValue();if(!e&&!this.events.fire(u.ItemEvent.beforeValidate,[t]))return!1;var i=!(!this.config.required&&!this.config.$required||!this.config.checked);return e||(this.setValidationStatus(i?"success":"error"),this.events.fire(u.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setValue=function(e,t){void 0===t&&(t=!1),void 0!==e&&e!==this.config.checked&&(t||this.events.fire(u.ItemEvent.beforeChange,[this._getValue(e)]))&&(this.config.checked=!!e,t||(this.events.fire(u.ItemEvent.change,[this.getValue()]),(0,l.isVerify)(this.config)&&this.validate()))},t.prototype.getValue=function(){return this._getValue(this.config.checked)},t.prototype.clear=function(e){this.config.checked&&(e||this.events.fire(u.ItemEvent.beforeChange,[this._getValue(!1)]))&&(this.config.checked=!1,e||this.events.fire(u.ItemEvent.change,[this.getValue()]),(0,l.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},t.prototype.destructor=function(){this.events&&this.events.clear(),this._inGroup=this._propsItem=this._props=this._uid=this.events=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.focus=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.getRootView().refs.input.el.blur()}))},t.prototype.isChecked=function(){return!!this.config.checked},t.prototype._getValue=function(e){return"string"==typeof this.config.value?e&&this.config.value||"":!!e},t.prototype._initView=function(e){var t=this;if(this._inGroup=this.config.$group,this._inGroup){for(var i in this.config={type:e.type,id:e.id,text:"",width:"content",height:"content",padding:0},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this._handlers={onchange:function(e){var i=e.target.checked;t.events.fire(u.ItemEvent.beforeChange,[t._getValue(i)])?(t.config.checked=i,t.events.fire(u.ItemEvent.change,[t.getValue()]),(0,l.isVerify)(t.config)&&t.validate()):t.getRootView().refs.input.el.checked=!i},onfocus:function(){return t.events.fire(u.ItemEvent.focus,[t.getValue(),t.config.id])},onblur:function(){return t.events.fire(u.ItemEvent.blur,[t.getValue(),t.config.id])},onkeydown:function(e){t.events.fire(u.ItemEvent.keydown,[e,t.config.id])}}}else{for(var i in this.config={type:e.type,id:e.id,name:e.name,checked:!1,disabled:!1,required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.helpMessage&&(this._helper=new c.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(e){e.preventDefault(),e.stopPropagation(),t._helper.show(e.target,{mode:"left"===t.config.labelPosition?"bottom":"right",theme:t.getRootNode()})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),t._helper.hide()},onchange:function(e){var i=e.target.checked;t.events.fire(u.ItemEvent.beforeChange,[t._getValue(i)])?(t.config.checked=i,t.events.fire(u.ItemEvent.change,[t.getValue()]),(0,l.isVerify)(t.config)&&t.validate()):t.getRootView().refs.input.el.checked=!i},onfocus:function(){return t.events.fire(u.ItemEvent.focus,[t.getValue()])},onblur:function(){var e;return null===(e=t.events)||void 0===e?void 0:e.fire(u.ItemEvent.blur,[t.getValue()])},onkeydown:function(e){t.events.fire(u.ItemEvent.keydown,[e])}}}this.config.hidden&&(0,a.awaitRedraw)().then((function(){t.hide(!0)}))},t.prototype._initHandlers=function(){var e=this;this.events.on(u.ItemEvent.change,(function(){return e.paint()}))},t.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.checked,o=e.disabled,r=e.name,s=e.required,c=e.$required,u=e.text,d=e.label,h=e.labelWidth,f=e.helpMessage;return(0,a.el)("label.dhx_checkbox.dhx_form-group.dhx_form-group--checkbox",{class:(0,l.getFormItemCss)(this.config,(0,l.isVerify)(this.config)||!!c)},this._inGroup?[(0,a.el)(".dhx_checkbox__holder",[(0,a.el)("input.dhx_checkbox__input",{type:"checkbox",id:t,value:i||"",name:r||"",disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input"}),(0,a.el)("span.dhx_checkbox__visual-input"),(0,a.el)("span.dhx_text",[u])])]:[d||h||f||s?this._drawLabel():null,(0,a.el)(".dhx_checkbox__container",[(0,a.el)(".dhx_checkbox__holder",[(0,a.el)("input.dhx_checkbox__input",{type:"checkbox","data-dhx-id":r||t,id:t,value:i,name:r,disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input","aria-label":d||"checkbox ".concat(u||""),"aria-describedby":f?"dhx_label__help_".concat(t||this._uid):null}),(0,a.el)("span.dhx_checkbox__visual-input"),(0,a.el)("span.dhx_text",[u])]),s&&(0,l.getValidationMessage)(this.config)&&(0,a.el)("span.dhx_input__caption",(0,l.getValidationMessage)(this.config))])])},t}(d.Label);t.Checkbox=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleVault=t.FileStatus=void 0;var s,l=i(1),c=i(3),u=i(4),d=i(0),h=i(13),f=i(235),p=i(10),v=i(7),g=i(244),_=i(5),m=i(15);!function(e){e.queue="queue",e.uploaded="uploaded",e.failed="failed",e.inprogress="inprogress"}(s||(t.FileStatus=s={}));var y=function(e){function t(t,i){var n=e.call(this,t,i)||this;n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsSimpleVault=["params","headerParams","target","fieldName","singleRequest","updateFromResponse","autosend","accept","validation"],n._props=a(a(a([],v.baseProps,!0),n._propsItem,!0),n._propsSimpleVault,!0),n.events=new c.EventSystem(n),n.data=new h.DataCollection,n._uploader=new f.Uploader(r({target:"",accept:"",fieldName:"file",singleRequest:!1,updateFromResponse:!0,autosend:!1},i),n.data,n.data.events),n._initView(r(r({},n._uploader.config),i)),n._initHandlers();return n.mount(t,(0,l.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.send=function(e){this._uploader.send(e)},t.prototype.selectFile=function(){this._uploader.selectFile()},t.prototype.setValue=function(e){e.length&&(this.data.parse(e),(0,v.isVerify)(this.config)&&this.validate())},t.prototype.getValue=function(){return this.data.serialize()},t.prototype.clear=function(){0!==this.getValue().length&&this.events.fire(_.ItemEvent.beforeChange,[[]])&&(this.data.removeAll(),this.events.fire(_.ItemEvent.change,[this.getValue()]),(0,v.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"),this.paint())},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return this.config.disabled},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(_.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(_.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(_.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(_.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.validate=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=this.getValue()),!e&&!this.events.fire(_.ItemEvent.beforeValidate,[t]))return!1;var i=!!("function"==typeof this.config.validation?this.config.validation(t):t.length);return e||(this.setValidationStatus(i?"success":"error"),this.events.fire(_.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setProperties=function(e){if(e&&!(0,d.isEmptyObj)(e)&&this.events.fire(_.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsSimpleVault.includes(t)&&(this._uploader.config[t]=e[t]));this.events.fire(_.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.focus=function(){var e,t,i;null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i||i.el.focus(),this.paint()},t.prototype.blur=function(){var e,t,i;null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i||i.el.blur(),this.paint()},t.prototype.destructor=function(){this.events&&this.events.clear(),this._helper&&this._helper.destructor(),this.config=this.events=this._uid=this._helper=this._handlers=this._uploader=this.data=null,this._propsItem=this._propsSimpleVault=this._props=this._dragover=this._dragoverTimeout=null,this.unmount()},t.prototype._initView=function(e){var t;this.config=r({type:e.type,id:e.id,name:e.name,value:[],disabled:!1,hidden:!1,css:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e),(null===(t=e.value)||void 0===t?void 0:t.length)&&this.data.parse(e.value),this.paint()},t.prototype._initHandlers=function(){var e=this;this._handlers={add:function(t){e.config.disabled||(t.preventDefault(),e._uploader.selectFile())},remove:function(t){if(!e.config.disabled){var i=(0,u.locate)(t);i&&e.data.remove(i)}},ondragover:function(t){for(var i=0,n=t.dataTransfer.types;i<n.length;i++){var o=n[i];if("Files"!==o&&"application/x-moz-file"!==o)return}e._dragoverTimeout?clearTimeout(e._dragoverTimeout):e.paint(),e._dragover=!0,e._dragoverTimeout=setTimeout((function(){e._dragover=!1,e._dragoverTimeout=null,e.paint()}),150)},showHelper:function(t){t.stopPropagation(),t.preventDefault(),e._helper.show(t.target,{mode:"left"===e.config.labelPosition?"bottom":"right",theme:t.target})},hideHelper:function(t){t.preventDefault(),t.stopPropagation(),e._helper.hide()}},this._uploader.events.on("beforeUploadFile",(function(t){return!(e.config.autosend&&!e.validate(!0))&&e.events.fire(_.ItemEvent.beforeUploadFile,[t,e.config.value])})),this._uploader.events.on("uploadBegin",(function(t){e.events.fire(_.ItemEvent.uploadBegin,[t,e.config.value])})),this._uploader.events.on("uploadComplete",(function(t){e.events.fire(_.ItemEvent.uploadComplete,[t,e.config.value])})),this._uploader.events.on("uploadFail",(function(t){e.events.fire(_.ItemEvent.uploadFail,[t,e.config.value])})),this._uploader.events.on("uploadFile",(function(t,i){e.events.fire(_.ItemEvent.uploadFile,[t,e.config.value,i])})),this._uploader.events.on("uploadProgress",(function(t){e.events.fire(_.ItemEvent.uploadProgress,[t,e.config.value])})),this.data.events.on(h.DataEvents.beforeAdd,(function(t){return e.events.fire(_.ItemEvent.beforeChange,[a(a([],e.config.value,!0),[t],!1),t])})),this.data.events.on(h.DataEvents.beforeRemove,(function(t){var i=e.config.value.filter((function(e){return e.id!==t.id}));return e.events.fire(_.ItemEvent.beforeChange,[i,t])})),this.data.events.on(_.ItemEvent.change,(function(t,i,n){if(i){var o=e.config.value=e.getValue();e._uploader.isActive&&"update"===i||(e.events.fire(_.ItemEvent.change,[o,n]),(0,v.isVerify)(e.config)&&e.validate()),e.paint()}}))},t.prototype._draw=function(){var e=this;this.config.helpMessage&&(this._helper||(this._helper=new p.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));var t=this.data.getLength()?(0,l.el)("ul.dhx_simplevault__files.dhx_simplevault-files",{class:this.config.$vaultHeight?"":"dhx_simplevault-files__fixed"},this.data.map((function(t){return(0,l.el)("li.dhx_simplevault-files__item",[(0,l.el)("span.dhx_simplevault-files__item-name",t.file&&t.file.name||t.name),(0,l.el)(".dhx_button.dhx_simplevault-files__delete.dhx_button--icon.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"data-dhx-id":t.id,onclick:e._handlers.remove},[(0,l.el)("span.dxi.dxi-delete-forever")])])}))):null,i=this.config,n=i.id,o=i.helpMessage,r=i.disabled,a=i.required,s=i.label,c=i.hidden,d=i.accept,h=(0,u.getLabelStyle)(this.config),f=c?" dhx_form-group--hidden":"";return(0,l.el)(".dhx_form-group.dhx_form-group--simplevault",{class:(0,v.getFormItemCss)(this.config,(0,v.isVerify)(this.config))+f},[h&&(0,l.el)("legend.dhx_label",{class:o?"dhx_label--with-help":"",style:h.style,onclick:this._handlers.add,"aria-label":s||"select files"},o?[(h.label||a)&&(0,l.el)("span.dhx_label__holder",h.label),(0,l.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper})]:h.label),(0,l.el)(".dhx_input__wrapper",{id:this._uid},[(0,l.el)("div",{_hooks:{didInsert:function(t){e._uploader.linkDropArea(t.el)}},ondragover:this._handlers.ondragover,class:"dhx_simplevault"+(this._dragover?" dhx_simplevault--on-drag":"")},[(0,l.el)("div.dhx_simplevault-loader",[(0,l.el)("span.dhx_simplevault__icon.dxi.dxi-vault")]),(0,l.el)(".dhx_simplevault__drop-area",[(0,l.el)("input.dhx_simplevault__input",{_ref:"input",type:"file",id:n,disabled:r,accept:d}),(0,l.el)("span.dhx_simplevault__icon.dxi.dxi-vault"),(0,l.el)("span.dhx_simplevault__title",[(0,l.el)("span",g.default.simpleVaultText),(0,l.el)("br"),(0,l.el)("label.dhx_simplevault__label",{onclick:this._handlers.add,for:n}," "+g.default.simpleVaultLabel)])]),t]),(0,v.getValidationMessage)(this.config)&&(0,l.el)("span.dhx_input__caption",{},(0,v.getValidationMessage)(this.config))])])},t}(m.Label);t.SimpleVault=y},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Uploader=void 0;var n=i(0),o=i(4),r=i(13),a=i(36),s=function(){function t(e,t,i){void 0===e&&(e={}),this.config=(0,n.extend)({autosend:!0,updateFromResponse:!0,fieldName:"file",accept:""},e),this.data=t||new r.DataCollection,this.events=i||this.data.events,this.isActive=!1,this._fileInput=document.createElement("input"),this._fileInput.type="file",this._fileInput.accept=this.config.accept,this._fileInput.multiple=!0,this._initEvents(),this._dropAreas=new Map}return t.prototype.selectFile=function(){this._fileInput.click()},t.prototype.linkDropArea=function(e){var t=this,i=(0,o.toNode)(e),n=function(e){return e.preventDefault()},r=function(e){e.preventDefault(),t.parseFiles(e.dataTransfer)};i.addEventListener("dragover",n),i.addEventListener("drop",r),this._dropAreas.set(i,{dragover:n,drop:r})},t.prototype.unlinkDropArea=function(e){var t=this;if(e){var i=(0,o.toNode)(e);this._unlinkDropArea(i),this._dropAreas.delete(i)}else this._dropAreas.forEach((function(e,i){t._unlinkDropArea(i)})),this._dropAreas.clear()},t.prototype.parseFiles=function(e){if(e.items&&e.items[0]&&e.items[0].webkitGetAsEntry)this._parseAsWebkitEntry(e.items);else{for(var t=e.files,i=0;i<t.length;i++)this._addFile(t[i]);this.config.autosend&&this.send()}},t.prototype.send=function(e){var t=this;if(!this._uploadInfo||!this.isActive){var i=this.data.findAll((function(e){return e.status===a.FileStatus.queue||e.status===a.FileStatus.failed})).filter((function(e){return t.events.fire(a.UploaderEvents.beforeUploadFile,[e])}));if(i.length)if(this.isActive=!0,this._uploadInfo={files:i,count:i.length,size:i.reduce((function(e,t){return e+t.file.size}),0)},this.events.fire(a.UploaderEvents.uploadBegin,[i]),this.events.fire(a.UploaderEvents.uploadProgress,[0,0,this._uploadInfo.size]),this.config.singleRequest)this._xhrSend(i,e);else for(var n=0,o=i;n<o.length;n++){var r=o[n];this._xhrSend([r],e)}}},t.prototype.abort=function(e){if(e){var t=this.data.getItem(e);t&&t.request&&4!==t.request.readyState&&t.request.abort()}else{if(!this._uploadInfo||!this._uploadInfo.files)return;for(var i=0,n=this._uploadInfo.files;i<n.length;i++){var o=n[i];this.abort(o.id)}}},t.prototype._unlinkDropArea=function(e){var t=this._dropAreas.get(e);if(t){var i=t.dragover,n=t.drop;e.removeEventListener("dragover",i),e.removeEventListener("drop",n)}},t.prototype._initEvents=function(){var e=this;this._fileInput.addEventListener("change",(function(){for(var t=e._fileInput.files,i=0;i<t.length;i++)e._addFile(t[i]);e.config.autosend&&e.send(),e._fileInput.value=null}))},t.prototype._xhrSend=function(e,t){for(var i=this,n=this._createFormData(e,t),o=new XMLHttpRequest,r=this.config.headerParams,s=0,l=e;s<l.length;s++){var c=l[s];this.data.update(c.id,{request:o,status:a.FileStatus.inprogress,progress:0})}if(o.open("POST",this.config.target),r)for(var u in r)o.setRequestHeader(u,r[u]);o.upload.onprogress=function(t){for(var n=0,o=e;n<o.length;n++){var r=o[n];i.data.update(r.id,{progress:t.loaded/t.total,status:a.FileStatus.inprogress})}var s=i._uploadInfo.files.reduce((function(e,t){return e+t.size*t.progress}),0)||0,l=i._uploadInfo.size,c=s/i._uploadInfo.size*100||0;i.events.fire(a.UploaderEvents.uploadProgress,[c,s,l])},o.onloadend=function(){i._uploadInfo.count=i.config.singleRequest?0:i._uploadInfo.count-1;for(var t=200===o.status?a.FileStatus.uploaded:a.FileStatus.failed,n=200===o.status&&o.response?JSON.parse(o.response):null,r=0,s=e;r<s.length;r++){var l=s[r];i.data.update(l.id,{status:t}),t===a.FileStatus.uploaded?(i.config.updateFromResponse&&n&&(i.config.singleRequest&&n[l.id]?i.data.update(l.id,n[l.id]):i.config.singleRequest||i.data.update(l.id,n)),i.events.fire(a.UploaderEvents.uploadFile,[l,n])):i.events.fire(a.UploaderEvents.uploadFail,[l])}0===i._uploadInfo.count&&(i.isActive=!1,i.events.fire(a.UploaderEvents.uploadComplete,[i._uploadInfo.files]))},o.send(n)},t.prototype._parseAsWebkitEntry=function(t){for(var i=this,n=[],o=0;o<t.length;o++){var r=t[o].webkitGetAsEntry();n.push(this._traverseFileTree(r))}e.all(n).then((function(){i.config.autosend&&i.send()}))},t.prototype._createFormData=function(e,t){var i=this.config.fieldName,n=new FormData,o=this.config.params;if(t)for(var r in t)n.append(r,t[r]);if(o)for(var r in o)n.append(r,o[r]);for(var a=e.length>1?"[]":"",s=0,l=e;s<l.length;s++){var c=l[s];n.append(i+a,c.file,c.file.name),n.append(i+"_fullname"+a,c.path+c.file.name);var u="object"==typeof c.id?c.id:c.id.toString();n.append(i+"_id"+a,u)}return n},t.prototype._addFile=function(e,t){void 0===t&&(t="");var i={id:(0,n.uid)(),file:e,progress:0,status:a.FileStatus.queue,src:null,path:t};this.data.add(i)},t.prototype._traverseFileTree=function(t){var i=this;return new e((function(e){var n=0,o=function(t,r){if(t.isFile)n++,t.file((function(t){n--,i._addFile(t,r),0===n&&e()}));else if(t.isDirectory){!function(t,i){n++,t.readEntries((function(t){n--;for(var r=0,a=t;r<a.length;r++){var s=a[r];o(s,i)}0===n&&e()}))}(t.createReader(),r+t.name+"/")}};o(t,"")}))},t}();t.Uploader=s}).call(this,i(16))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeItem=t.isImage=t.getFileClassName=t.getFileType=t.FileType=t.calculateCover=t.truncateWord=t.getBasis=void 0;var n=i(46),o=["byte","kilobyte","megabyte","gigabyte"];t.getBasis=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e<1024?e+" "+n.default[o[t]]:this.getBasis(Math.round(e/1024),t+1)};var r;function a(e){return{extension:e.name.split(".").pop()||"none",mime:e.file?e.file.type:""}}function s(e,t){switch(e){case"jpg":case"jpeg":case"gif":case"png":case"bmp":case"tiff":case"pcx":case"svg":case"ico":return r.image;case"avi":case"mpg":case"mpeg":case"rm":case"move":case"mov":case"mkv":case"flv":case"f4v":case"mp4":case"3gp":case"wmv":case"webm":case"vob":return r.video;case"rar":case"zip":case"tar":case"tgz":case"arj":case"gzip":case"bzip2":case"7z":case"ace":case"apk":case"deb":case"zipx":case"cab":case"tar-gz":case"rpm":case"xar":return r.archive;case"xlr":case"xls":case"xlsm":case"xlsx":case"ods":case"csv":case"tsv":return r.table;case"doc":case"docx":case"docm":case"dot":case"dotx":case"odt":case"wpd":case"wps":case"pages":return r.document;case"wav":case"aiff":case"au":case"mp3":case"aac":case"wma":case"ogg":case"flac":case"ape":case"wv":case"m4a":case"mid":case"midi":return r.audio;case"pot":case"potm":case"potx":case"pps":case"ppsm":case"ppsx":case"ppt":case"pptx":case"pptm":case"odp":return r.presentation;case"html":case"htm":case"eml":return r.web;case"exe":return r.application;case"dmg":return r.apple;case"pdf":case"ps":case"eps":return r.pdf;case"psd":return r.psd;case"txt":case"djvu":case"nfo":case"xml":return r.text;default:switch(t.split("/")[0]){case"image":return r.image;case"audio":return r.audio;case"video":return r.video;default:return r.other}}}t.truncateWord=function(e,t){var i,n;if(void 0===t&&(t=13),e.length<=t)return e;var o=e.lastIndexOf(".");if(-1===o)n=e.substr(e.length-4),i=e.substr(0,t-7);else{var r=o-3;n=e.substr(r),i=e.substr(0,t-(e.length-r))}return i+"..."+n},t.calculateCover=function(e){var t,i,n,o,r=e.width,a=e.height,s=r/a;return s>1?(t=a,n=(r-(i=a))/2,o=0):s<1?(i=r,n=0,o=(a-(t=r))/2):(t=r,i=r,n=0,o=0),{sx:n,sy:o,sWidth:i,sHeight:t,dx:0,dy:0}},function(e){e.image="image",e.video="video",e.archive="archive",e.table="table",e.document="document",e.presentation="presentation",e.application="application",e.web="web",e.apple="apple",e.pdf="pdf",e.psd="psd",e.audio="audio",e.other="other",e.text="text"}(r||(t.FileType=r={})),t.getFileType=s,t.getFileClassName=function(e){var t=a(e),i=t.mime,n=t.extension;return s(n,i)+" extension-"+n},t.isImage=function(e){var t=a(e),i=t.mime;return s(t.extension,i)===r.image},t.removeItem=function(e,t){e.exists(t)&&(e.update(t,{$toRemove:!0}),setTimeout((function(){e.update(t,{$toRemove:!1},!0),e.remove(t)}),200))}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DataView=void 0;var a=i(0),s=i(1),l=i(31),c=i(241),u=function(e){function t(t,i){return void 0===i&&(i={}),e.call(this,t,(0,a.extend)({itemsInRow:1,gap:"0px"},i))||this}return o(t,e),t.prototype.scrollTo=function(e){var t=this.getRootView();if(t&&t.node&&t.node.el&&void 0!==e){var i=this.getRootNode();this._scrollTo(e,i)}},t.prototype._scrollTo=function(e,t){var i;if(t){var n=this.data.getIndex(e);if(-1!==n){var o=this.config.virtual,r=this.config.itemsInRow-(null===(i=t.lastElementChild)||void 0===i?void 0:i.children.length)||0,a=function(e,t,i){var n=0;if(!i)return n;for(;e+t>=i;)n++,e=e+t-i;return n}(n,r,t.children.length*this.config.itemsInRow),s=a*r,l=Math.floor((n+s)/this.config.itemsInRow),c=t.children[l-t.children.length*a];if(o||c){var u=c.children[(n+s)%this.config.itemsInRow],d=parseInt(this.config.gap.toString().replace("px",""),null);u.offsetTop>=t.clientHeight+t.scrollTop-u.clientHeight?t.scrollTop=u.offsetTop-t.clientHeight+u.clientHeight+d:u.offsetTop<t.scrollTop-d&&(t.scrollTop=u.offsetTop-d)}}}},t.prototype._didRedraw=function(e){var t=e.node.el,i=t.scrollHeight>t.offsetHeight,n=e.node.attrs.class.replace(" dhx_dataview--has-scroll",""),o=i?n+" dhx_dataview--has-scroll":n;e.node.patch({class:o})},t.prototype._renderItem=function(e,t){var i=this.config,n=i.itemsInRow,o=i.gap,a=i.template,l=i.itemHeight,u=a?a(e):e.htmlContent,d=e.id==this._focus,h=(t+1)%this.config.itemsInRow==0,f=function(e){return parseFloat(e)};if(e.id==this._edited)return(0,c.getEditor)(e,this).toHTML(h);var p=e.id.toString(),v=this.data.getMetaMap(e);return(0,s.el)("div",r(r({class:"dhx_dataview-item"+(v&&v.selected?" dhx_dataview-item--selected":"")+(d?" dhx_dataview-item--focus":"")+(v&&v.drop&&!this._edited?" dhx_dataview-item--drophere":"")+(v&&v.drag&&!this._edited?" dhx_dataview-item--dragtarget":"")+(this.config.dragMode&&!this._edited?" dhx_dataview-item--drag":"")+(f(o)?" dhx_dataview-item--with-gap":"")+(e.css?" "+e.css:"")+(h?" dhx_dataview-item--last-item-in-row":""),style:{width:"calc(".concat(100/n,"% - ").concat(f(o)," * ").concat((n-1)/n,"px)"),"margin-right":h?"":o,height:a?null:l},_key:p,"data-dhx-id":p,_ref:p},this.getDataViewItemAriaAttrs(this,e)),{tabindex:d?0:-1}),u?[(0,s.el)(".dhx_dataview-item__inner-html",{".innerHTML":u,role:"presentation"})]:e.value||e.text||e.value)},t.prototype._renderList=function(){var e=this,t=this.data.getRawData(0,-1),i=this.config,n=i.itemsInRow,o=i.css,a=i.gap,l=0,c=t.reduce((function(t,i,o){return 0===l&&t.push([]),t[t.length-1].push(e._renderItem(i,o)),l=(l+1)%n,t}),[]);return(0,s.el)("",r(r(r(r({},this._handlers),{"data-dhx-widget-id":this._uid,class:(o||"")+" dhx_widget dhx_dataview"+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":""),style:{height:this.config.height}}),this.getDataViewAriaAttrs(this.config,this.data.getLength(),c.length,n)),{tabindex:0}),c.map((function(e,t){return(0,s.el)(".dhx_dataview-row",{style:{margin:a},"aria-label":"Row ".concat(t+1)},e)})))},t.prototype._getHotkeys=function(){var t=this,i=e.prototype._getHotkeys.call(this);return i.arrowUp=function(e){t.moveFocus(l.MOVE_UP,t.config.itemsInRow),t._changed&&(t._changed=!1),e.preventDefault()},i.arrowDown=function(e){t.moveFocus(l.MOVE_DOWN,t.config.itemsInRow),t._changed&&(t._changed=!1),e.preventDefault()},i.arrowLeft=function(e){t.moveFocus(l.MOVE_UP),t._changed&&(t._changed=!1),e.preventDefault()},i.arrowRight=function(e){t.moveFocus(l.MOVE_DOWN),t._changed&&(t._changed=!1),e.preventDefault()},i},t.prototype.getDataViewItemAriaAttrs=function(e,t){return r(r({role:"option","aria-selected":t.$selected?"true":"false"},function(e,t){return e.config.dragMode&&!e._edited?{"aria-grabbed":Boolean(t.$dragtarget&&!e._edited).toString()}:{}}(e,t)),function(e){return e.config.editable?{"aria-roledescription":"".concat(e._edited?"Press Enter to stop editing":"Double click to edit content")}:{}}(e))},t.prototype.getDataViewAriaAttrs=function(e,t,i,n){return{role:"listbox","aria-label":"Dataview, ".concat(t," options on ").concat(i," rows, ").concat(n," options per row.").concat(e.editable?" Content is editable.":""),"aria-multiselectable":e.selection&&e.multiselection?"true":"false","aria-readonly":e.editable?"false":"true"}},t}(l.List);t.DataView=u},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewEvents=void 0,function(e){e.click="click",e.doubleClick="doubleclick",e.focusChange="focuschange",e.beforeEditStart="beforeEditStart",e.afterEditStart="afterEditStart",e.beforeEditEnd="beforeEditEnd",e.afterEditEnd="afterEditEnd",e.itemRightClick="itemRightClick",e.itemMouseOver="itemMouseOver",e.contextmenu="contextmenu"}(n||(t.DataViewEvents=n={}))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleButton=void 0;var s=i(5),l=i(8),c=i(1),u=i(3),d=i(7),h=i(0),f=function(e){function t(t,i){var n=e.call(this,t,r({full:!1,selected:!1,disabled:!1,hidden:!1,width:"content",height:"content",text:"",icon:"",offIcon:"",offText:"",css:"",padding:""},i))||this;n.events=new u.EventSystem,n.props=a(a([],n.config.$group?[]:d.baseProps,!0),["value","offIcon","offText","icon","text","full"],!1),n.config.hidden&&(0,c.awaitRedraw)().then((function(){n.hide(!0)})),n.initHandlers();return n.mount(t,(0,c.create)({render:function(){return n.draw()}})),n}return o(t,e),t.prototype.setValue=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),"boolean"==typeof e&&e!==this.config.selected&&(t||this.events.fire(s.ItemEvent.beforeChange,[e]))&&(this.config.selected=e,!t&&this.events.fire(s.ItemEvent.change,[this.getValue()]),this.paint())},t.prototype.getValue=function(){var e=this.config,t=e.value,i=e.selected;return"string"==typeof t?i?t:"":"number"==typeof t?i?t:0:!!i},t.prototype.isSelected=function(){return!!this.config.selected},t.prototype.show=function(){this.config.hidden&&this.events.fire(s.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(s.ItemEvent.afterShow,[this.getValue()]))},t.prototype.hide=function(e){void 0===e&&(e=!1),this.config.hidden&&!e||!this.events.fire(s.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(s.ItemEvent.afterHide,[this.getValue(),e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.focus=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.button.el.focus(),e.paint()}))},t.prototype.blur=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.button.el.blur(),e.paint()}))},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.setProperties=function(e){if(e&&!(0,h.isEmptyObj)(e)&&this.events.fire(s.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this.props.includes(t)&&(this.config[t]=e[t]);this.events.fire(s.ItemEvent.afterChangeProperties,[this.getProperties()])}},t.prototype.getProperties=function(){for(var e={},t=0,i=this.props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.destructor=function(){this.events.clear(),this.unmount()},t.prototype.draw=function(){var e=this.config,t=e.id,i=e.name,n=e.selected,o=e.disabled,r=e.hidden,a=e.text,s=e.offText,l=e.icon,u=e.offIcon,d=e.full,h=e.$group,f=e.$gap,p=e.$extraCss,v=e.css;return(0,c.el)("button.dhx_toggle",{"data-dhx-id":i||t,role:"button",type:"button","aria-pressed":n,"aria-label":a||i,disabled:o,class:(h?"":"dhx_form-group dhx_form-group--toggle ")+(n?"dhx_toggle--selected ":"")+(o?"dhx_toggle--disabled ":"")+(r?"dhx_toggle--hidden ":"")+(d?"dhx_toggle--full ":"")+(h&&p||"")+(h&&v||""),style:{marginLeft:f},onclick:this.handlers.onclick,onfocus:this.handlers.onfocus,onblur:this.handlers.onblur,onkeydown:this.handlers.onkeydown,_ref:"button"},[l&&(0,c.el)("i.dhx_toggle__icon",{class:n?l:u||l}),a&&(0,c.el)("span.dhx_toggle__text",{},n?a:s||a)])},t.prototype.initHandlers=function(){var e=this;this.handlers={onclick:function(){return e.setValue(!e.config.selected)},onfocus:function(){return e.events.fire(s.ItemEvent.focus,[e.getValue()])},onblur:function(){return e.events.fire(s.ItemEvent.blur,[e.getValue()])},onkeydown:function(t){return e.events.fire(s.ItemEvent.keydown,[t])}}},t}(l.View);t.ToggleButton=f},function(e,t,i){"use strict";
/*! @license DOMPurify 2.4.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.7/LICENSE */function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function r(e,t,i){return r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&o(r,i.prototype),r},r.apply(null,arguments)}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=Object.hasOwnProperty,c=Object.setPrototypeOf,u=Object.isFrozen,d=Object.getPrototypeOf,h=Object.getOwnPropertyDescriptor,f=Object.freeze,p=Object.seal,v=Object.create,g="undefined"!=typeof Reflect&&Reflect,_=g.apply,m=g.construct;_||(_=function(e,t,i){return e.apply(t,i)}),f||(f=function(e){return e}),p||(p=function(e){return e}),m||(m=function(e,t){return r(e,a(t))});var y,b=D(Array.prototype.forEach),w=D(Array.prototype.pop),x=D(Array.prototype.push),C=D(String.prototype.toLowerCase),E=D(String.prototype.toString),S=D(String.prototype.match),I=D(String.prototype.replace),k=D(String.prototype.indexOf),M=D(String.prototype.trim),O=D(RegExp.prototype.test),A=(y=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return m(y,t)});function D(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return _(e,t,n)}}function P(e,t,i){var n;i=null!==(n=i)&&void 0!==n?n:C,c&&c(e,null);for(var o=t.length;o--;){var r=t[o];if("string"==typeof r){var a=i(r);a!==r&&(u(t)||(t[o]=a),r=a)}e[r]=!0}return e}function F(e){var t,i=v(null);for(t in e)!0===_(l,e,[t])&&(i[t]=e[t]);return i}function T(e,t){for(;null!==e;){var i=h(e,t);if(i){if(i.get)return D(i.get);if("function"==typeof i.value)return D(i.value)}e=d(e)}return function(e){return console.warn("fallback value for",e),null}}var R=f(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),V=f(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),H=f(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),L=f(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),j=f(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),N=f(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$=f(["#text"]),z=f(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),B=f(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),W=f(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),G=f(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),U=p(/\{\{[\w\W]*|[\w\W]*\}\}/gm),q=p(/<%[\w\W]*|[\w\W]*%>/gm),X=p(/\${[\w\W]*}/gm),Y=p(/^data-[\-\w.\u00B7-\uFFFF]/),K=p(/^aria-[\-\w]+$/),J=p(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=p(/^(?:\w+script|data):/i),Q=p(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ee=p(/^html$/i),te=function(){return"undefined"==typeof window?null:window};var ie=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te(),i=function(t){return e(t)};if(i.version="2.4.7",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;var o=t.document,r=t.document,s=t.DocumentFragment,l=t.HTMLTemplateElement,c=t.Node,u=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=void 0===h?t.NamedNodeMap||t.MozNamedAttrMap:h,v=t.HTMLFormElement,g=t.DOMParser,_=t.trustedTypes,m=u.prototype,y=T(m,"cloneNode"),D=T(m,"nextSibling"),ie=T(m,"childNodes"),ne=T(m,"parentNode");if("function"==typeof l){var oe=r.createElement("template");oe.content&&oe.content.ownerDocument&&(r=oe.content.ownerDocument)}var re=function(e,t){if("object"!==n(e)||"function"!=typeof e.createPolicy)return null;var i=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(i=t.currentScript.getAttribute(o));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(_,o),ae=re?re.createHTML(""):"",se=r,le=se.implementation,ce=se.createNodeIterator,ue=se.createDocumentFragment,de=se.getElementsByTagName,he=o.importNode,fe={};try{fe=F(r).documentMode?r.documentMode:{}}catch(e){}var pe={};i.isSupported="function"==typeof ne&&le&&void 0!==le.createHTMLDocument&&9!==fe;var ve,ge,_e=U,me=q,ye=X,be=Y,we=K,xe=Z,Ce=Q,Ee=J,Se=null,Ie=P({},[].concat(a(R),a(V),a(H),a(j),a($))),ke=null,Me=P({},[].concat(a(z),a(B),a(W),a(G))),Oe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ae=null,De=null,Pe=!0,Fe=!0,Te=!1,Re=!0,Ve=!1,He=!1,Le=!1,je=!1,Ne=!1,$e=!1,ze=!1,Be=!0,We=!1,Ge=!0,Ue=!1,qe={},Xe=null,Ye=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ke=null,Je=P({},["audio","video","img","source","image","track"]),Ze=null,Qe=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",it="http://www.w3.org/1999/xhtml",nt=it,ot=!1,rt=null,at=P({},[et,tt,it],E),st=["application/xhtml+xml","text/html"],lt=null,ct=r.createElement("form"),ut=function(e){return e instanceof RegExp||e instanceof Function},dt=function(e){lt&&lt===e||(e&&"object"===n(e)||(e={}),e=F(e),ve=ve=-1===st.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ge="application/xhtml+xml"===ve?E:C,Se="ALLOWED_TAGS"in e?P({},e.ALLOWED_TAGS,ge):Ie,ke="ALLOWED_ATTR"in e?P({},e.ALLOWED_ATTR,ge):Me,rt="ALLOWED_NAMESPACES"in e?P({},e.ALLOWED_NAMESPACES,E):at,Ze="ADD_URI_SAFE_ATTR"in e?P(F(Qe),e.ADD_URI_SAFE_ATTR,ge):Qe,Ke="ADD_DATA_URI_TAGS"in e?P(F(Je),e.ADD_DATA_URI_TAGS,ge):Je,Xe="FORBID_CONTENTS"in e?P({},e.FORBID_CONTENTS,ge):Ye,Ae="FORBID_TAGS"in e?P({},e.FORBID_TAGS,ge):{},De="FORBID_ATTR"in e?P({},e.FORBID_ATTR,ge):{},qe="USE_PROFILES"in e&&e.USE_PROFILES,Pe=!1!==e.ALLOW_ARIA_ATTR,Fe=!1!==e.ALLOW_DATA_ATTR,Te=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ve=e.SAFE_FOR_TEMPLATES||!1,He=e.WHOLE_DOCUMENT||!1,Ne=e.RETURN_DOM||!1,$e=e.RETURN_DOM_FRAGMENT||!1,ze=e.RETURN_TRUSTED_TYPE||!1,je=e.FORCE_BODY||!1,Be=!1!==e.SANITIZE_DOM,We=e.SANITIZE_NAMED_PROPS||!1,Ge=!1!==e.KEEP_CONTENT,Ue=e.IN_PLACE||!1,Ee=e.ALLOWED_URI_REGEXP||Ee,nt=e.NAMESPACE||it,Oe=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Oe.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Oe.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Oe.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ve&&(Fe=!1),$e&&(Ne=!0),qe&&(Se=P({},a($)),ke=[],!0===qe.html&&(P(Se,R),P(ke,z)),!0===qe.svg&&(P(Se,V),P(ke,B),P(ke,G)),!0===qe.svgFilters&&(P(Se,H),P(ke,B),P(ke,G)),!0===qe.mathMl&&(P(Se,j),P(ke,W),P(ke,G))),e.ADD_TAGS&&(Se===Ie&&(Se=F(Se)),P(Se,e.ADD_TAGS,ge)),e.ADD_ATTR&&(ke===Me&&(ke=F(ke)),P(ke,e.ADD_ATTR,ge)),e.ADD_URI_SAFE_ATTR&&P(Ze,e.ADD_URI_SAFE_ATTR,ge),e.FORBID_CONTENTS&&(Xe===Ye&&(Xe=F(Xe)),P(Xe,e.FORBID_CONTENTS,ge)),Ge&&(Se["#text"]=!0),He&&P(Se,["html","head","body"]),Se.table&&(P(Se,["tbody"]),delete Ae.tbody),f&&f(e),lt=e)},ht=P({},["mi","mo","mn","ms","mtext"]),ft=P({},["foreignobject","desc","title","annotation-xml"]),pt=P({},["title","style","font","a","script"]),vt=P({},V);P(vt,H),P(vt,L);var gt=P({},j);P(gt,N);var _t=function(e){x(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ae}catch(t){e.remove()}}},mt=function(e,t){try{x(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){x(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ke[e])if(Ne||$e)try{_t(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},yt=function(e){var t,i;if(je)e="<remove></remove>"+e;else{var n=S(e,/^[\r\n\t ]+/);i=n&&n[0]}"application/xhtml+xml"===ve&&nt===it&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=re?re.createHTML(e):e;if(nt===it)try{t=(new g).parseFromString(o,ve)}catch(e){}if(!t||!t.documentElement){t=le.createDocument(nt,"template",null);try{t.documentElement.innerHTML=ot?ae:o}catch(e){}}var a=t.body||t.documentElement;return e&&i&&a.insertBefore(r.createTextNode(i),a.childNodes[0]||null),nt===it?de.call(t,He?"html":"body")[0]:He?t.documentElement:a},bt=function(e){return ce.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},wt=function(e){return"object"===n(c)?e instanceof c:e&&"object"===n(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},xt=function(e,t,n){pe[e]&&b(pe[e],(function(e){e.call(i,t,n,lt)}))},Ct=function(e){var t,n;if(xt("beforeSanitizeElements",e,null),(n=e)instanceof v&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof p)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore||"function"!=typeof n.hasChildNodes))return _t(e),!0;if(O(/[\u0080-\uFFFF]/,e.nodeName))return _t(e),!0;var o=ge(e.nodeName);if(xt("uponSanitizeElement",e,{tagName:o,allowedTags:Se}),e.hasChildNodes()&&!wt(e.firstElementChild)&&(!wt(e.content)||!wt(e.content.firstElementChild))&&O(/<[/\w]/g,e.innerHTML)&&O(/<[/\w]/g,e.textContent))return _t(e),!0;if("select"===o&&O(/<template/i,e.innerHTML))return _t(e),!0;if(!Se[o]||Ae[o]){if(!Ae[o]&&St(o)){if(Oe.tagNameCheck instanceof RegExp&&O(Oe.tagNameCheck,o))return!1;if(Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(o))return!1}if(Ge&&!Xe[o]){var r=ne(e)||e.parentNode,a=ie(e)||e.childNodes;if(a&&r)for(var s=a.length-1;s>=0;--s)r.insertBefore(y(a[s],!0),D(e))}return _t(e),!0}return e instanceof u&&!function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:nt,tagName:"template"});var i=C(e.tagName),n=C(t.tagName);return!!rt[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===it?"svg"===i:t.namespaceURI===et?"svg"===i&&("annotation-xml"===n||ht[n]):Boolean(vt[i]):e.namespaceURI===et?t.namespaceURI===it?"math"===i:t.namespaceURI===tt?"math"===i&&ft[n]:Boolean(gt[i]):e.namespaceURI===it?!(t.namespaceURI===tt&&!ft[n])&&!(t.namespaceURI===et&&!ht[n])&&!gt[i]&&(pt[i]||!vt[i]):!("application/xhtml+xml"!==ve||!rt[e.namespaceURI]))}(e)?(_t(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!O(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ve&&3===e.nodeType&&(t=e.textContent,t=I(t,_e," "),t=I(t,me," "),t=I(t,ye," "),e.textContent!==t&&(x(i.removed,{element:e.cloneNode()}),e.textContent=t)),xt("afterSanitizeElements",e,null),!1):(_t(e),!0)},Et=function(e,t,i){if(Be&&("id"===t||"name"===t)&&(i in r||i in ct))return!1;if(Fe&&!De[t]&&O(be,t));else if(Pe&&O(we,t));else if(!ke[t]||De[t]){if(!(St(e)&&(Oe.tagNameCheck instanceof RegExp&&O(Oe.tagNameCheck,e)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(e))&&(Oe.attributeNameCheck instanceof RegExp&&O(Oe.attributeNameCheck,t)||Oe.attributeNameCheck instanceof Function&&Oe.attributeNameCheck(t))||"is"===t&&Oe.allowCustomizedBuiltInElements&&(Oe.tagNameCheck instanceof RegExp&&O(Oe.tagNameCheck,i)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(i))))return!1}else if(Ze[t]);else if(O(Ee,I(i,Ce,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==k(i,"data:")||!Ke[e]){if(Te&&!O(xe,I(i,Ce,"")));else if(i)return!1}else;return!0},St=function(e){return e.indexOf("-")>0},It=function(e){var t,o,r,a;xt("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};for(a=s.length;a--;){var c=t=s[a],u=c.name,d=c.namespaceURI;if(o="value"===u?t.value:M(t.value),r=ge(u),l.attrName=r,l.attrValue=o,l.keepAttr=!0,l.forceKeepAttr=void 0,xt("uponSanitizeAttribute",e,l),o=l.attrValue,!l.forceKeepAttr&&(mt(u,e),l.keepAttr))if(Re||!O(/\/>/i,o)){Ve&&(o=I(o,_e," "),o=I(o,me," "),o=I(o,ye," "));var h=ge(e.nodeName);if(Et(h,r,o)){if(!We||"id"!==r&&"name"!==r||(mt(u,e),o="user-content-"+o),re&&"object"===n(_)&&"function"==typeof _.getAttributeType)if(d);else switch(_.getAttributeType(h,r)){case"TrustedHTML":o=re.createHTML(o);break;case"TrustedScriptURL":o=re.createScriptURL(o)}try{d?e.setAttributeNS(d,u,o):e.setAttribute(u,o),w(i.removed)}catch(e){}}}else mt(u,e)}xt("afterSanitizeAttributes",e,null)}},kt=function e(t){var i,n=bt(t);for(xt("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)xt("uponSanitizeShadowNode",i,null),Ct(i)||(i.content instanceof s&&e(i.content),It(i));xt("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e){var r,a,l,u,d,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((ot=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!wt(e)){if("function"!=typeof e.toString)throw A("toString is not a function");if("string"!=typeof(e=e.toString()))throw A("dirty is not a string, aborting")}if(!i.isSupported){if("object"===n(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(wt(e))return t.toStaticHTML(e.outerHTML)}return e}if(Le||dt(h),i.removed=[],"string"==typeof e&&(Ue=!1),Ue){if(e.nodeName){var f=ge(e.nodeName);if(!Se[f]||Ae[f])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)1===(a=(r=yt("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!Ne&&!Ve&&!He&&-1===e.indexOf("<"))return re&&ze?re.createHTML(e):e;if(!(r=yt(e)))return Ne?null:ze?ae:""}r&&je&&_t(r.firstChild);for(var p=bt(Ue?e:r);l=p.nextNode();)3===l.nodeType&&l===u||Ct(l)||(l.content instanceof s&&kt(l.content),It(l),u=l);if(u=null,Ue)return e;if(Ne){if($e)for(d=ue.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return(ke.shadowroot||ke.shadowrootmod)&&(d=he.call(o,d,!0)),d}var v=He?r.outerHTML:r.innerHTML;return He&&Se["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&O(ee,r.ownerDocument.doctype.name)&&(v="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+v),Ve&&(v=I(v,_e," "),v=I(v,me," "),v=I(v,ye," ")),re&&ze?re.createHTML(v):v},i.setConfig=function(e){dt(e),Le=!0},i.clearConfig=function(){lt=null,Le=!1},i.isValidAttribute=function(e,t,i){lt||dt({});var n=ge(e),o=ge(t);return Et(n,o,i)},i.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],x(pe[e],t))},i.removeHook=function(e){if(pe[e])return w(pe[e])},i.removeHooks=function(e){pe[e]&&(pe[e]=[])},i.removeAllHooks=function(){pe={}},i}();e.exports=ie},function(e,t,i){i(98),i(99),i(100),i(101),i(102),i(103),i(110),i(111),e.exports=i(112)},function(e,t){Object.values=Object.values?Object.values:function(e){var t=Object.prototype.toString.call(e);if(null==e)throw new TypeError("Cannot convert undefined or null to object");if(~["[object String]","[object Object]","[object Array]","[object Function]"].indexOf(t)){if(Object.keys)return Object.keys(e).map((function(t){return e[t]}));var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(e[n]);return i}return[]},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),o=0;o<t.length;o++){var r=t[o];if(null!=r)for(var a=Object.keys(Object(r)),s=0,l=a.length;s<l;s++){var c=a[s],u=Object.getOwnPropertyDescriptor(r,c);void 0!==u&&u.enumerable&&(n[c]=r[c])}}return n}})},function(e,t){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var o,r,a=0|t,s=Math.max(a>=0?a:n-Math.abs(a),0);for(;s<n;){if((o=i[s])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;s++}return!1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var r=t[o];if(e.call(n,r,o,t))return r;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;r<n;r++)if(t=i[r],e.call(o,t,r,i))return r;return-1})},function(e,t){String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var i=this.toString();(void 0===t||t>i.length)&&(t=i.length),t-=e.length;var n=i.indexOf(e,t);return-1!==n&&n===t}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return t=t||0,this.indexOf(e,t)===t}}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))})},function(e,t){if(Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}if("classList"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){var e=this;return{contains:function(t){return-1!==e.className.baseVal.split(" ").indexOf(t)},add:function(t){return e.setAttribute("class",e.getAttribute("class")+" "+t)},remove:function(t){var i=e.getAttribute("class").replace(new RegExp("(\\s|^)".concat(t,"(\\s|$)"),"g"),"$2");e.classList.contains(t)&&e.setAttribute("class",i)},toggle:function(e){this.contains(e)?this.remove(e):this.add(e)}}},configurable:!0}),!Object.entries){var n=Function.bind.call(Function.call,Array.prototype.reduce),o=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),r=Function.bind.call(Function.call,Array.prototype.concat);Object.entries=function(e){return n(Object.keys(e),(function(t,i){return r(t,"string"==typeof i&&o(e,i)?[[i,e[i]]]:[])}),[])}}Event.prototype.composedPath||(Event.prototype.composedPath=function(){if(this.path)return this.path;var e=this.target;for(this.path=[];null!==e.parentNode;)this.path.push(e),e=e.parentNode;return this.path.push(document,window),this.path})},function(e,t){Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1}},function(e,t,i){"use strict";i.r(t);var n,o,r=i(14),a=(i(63),["dhx_638523928_message","undefined","Please contact us at <a style='color: white;' href='mailto:contact@dhtmlx.com?subject=DHTMLX Licensing - Trial End' target='_blank'>contact@dhtmlx.com</a> or visit "," target='_blank'>dhtmlx.com</a> in order to obtain a proper license.","Your evaluation period for DHTMLX has expired.","now","1709707535000","join","<a style='color: white;' href='https://dhtmlx.com/docs/products/licenses.shtml?expand=1&utm_source=trial&utm_medium=popup&utm_campaign=second_month#suite'"]);n=a,o=149,function(e){for(;--e;)n.push(n.shift())}(++o);var s=function(e,t){return a[e-=374]};setTimeout((function(){var e,t,i=s,n=[i(382),i(380),i(377)+i(381)][i(376)]("<br>"),o=6e4;typeof i(375)!==i(379)&&setInterval((function(){var e,t=i;e=i,Date[e(374)]()-e(375)>2592e6&&Object(r.message)({text:n,icon:"dxi-close",css:t(378)})}),(e=o,t=12e4,Math.floor(Math.random()*(t-e+1))+e))}),1)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.message=void 0;var n=i(0),o=i(4),r=i(47),a=new WeakMap,s=new Map;function l(e,t){var i=document.createElement("div");return i.setAttribute("data-position",t),i.className="dhx_message-container dhx_message-container--"+t+(e===document.body?" dhx_message-container--in-body":""),i}t.message=function(e){var t;"string"==typeof e&&(e={text:e}),e.position=e.position||r.MessageContainerPosition.topRight;var i=document.createElement("div");i.className="dhx_widget dhx_message "+(e.css||""),i.setAttribute("role","alert");var c=e.text&&(0,n.uid)();c&&i.setAttribute("aria-describedby",c),e.html?i.innerHTML=e.html:(i.innerHTML='<span class="dhx_message__text" id='.concat(c,"></span>\n\t\t").concat(e.icon?'<span class="dhx_message__icon dxi '.concat(e.icon,'"></span>'):""),i.querySelector("#".concat(c)).textContent=e.text);var u=e.node?(0,o.toNode)(e.node):document.body;"static"===getComputedStyle(u).position&&(u.style.position="relative");var d=s.get(u);d?d[e.position]||(d[e.position]={stack:[],container:l(u,e.position)}):s.set(u,((t={})[e.position]={stack:[],container:l(u,e.position)},t));var h=s.get(u)[e.position],f=h.stack,p=h.container;function v(e){void 0===e&&(e=!0),i&&(!function(e,t){t&&clearTimeout(a.get(e));var i=e.parentNode,n=i.getAttribute("data-position"),o=i.parentNode,r=s.get(o);if(r){var l=r[n];if(l){var c=l.stack,u=c.indexOf(e);-1!==u&&(i.removeChild(e),c.splice(u,1),0===c.length&&o.removeChild(i))}}}(i,e),i=null)}if(0===f.length&&u.appendChild(p),f.push(i),p.appendChild(i),e.expire){var g=setTimeout((function(){return v(!1)}),e.expire);a.set(i,g)}return i.onclick=function(){return v()},{close:function(){return v()}}}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.alert=void 0;var n=i(60),o=i(61),r=i(0);t.alert=function(t){var i=t.buttons&&t.buttons[0]?t.buttons[0]:n.default.apply,a=(0,o.blockScreen)(t.blockerCss);return new e((function(e){var n="dhx_alert__".concat((0,r.uid)(),"_content"),o="dhx_alert__".concat((0,r.uid)(),"_header"),s=document.createElement("div");s.setAttribute("role","alert"),s.setAttribute("aria-modal","true"),t.text&&s.setAttribute("aria-describedby",n),t.header&&s.setAttribute("aria-labelledby",o),s.className="dhx_widget dhx_alert "+(t.css||"");var l=function(t){"Escape"!==t.key&&"Esc"!==t.key||(c(t),e(!1))};function c(e){e.preventDefault(),a(),document.body.removeChild(s),document.removeEventListener("keydown",l)}s.innerHTML="\n\t\t\t".concat(t.header?"<div id=".concat(o,' class="dhx_alert__header"> ').concat(!1!==t.htmlEnable?t.header:""," </div>"):"","\n\t\t\t").concat(t.text?"<div id=".concat(n,' class="dhx_alert__content">').concat(!1!==t.htmlEnable?t.text:"","</div>"):"",'\n\t\t\t<div class="dhx_alert__footer ').concat(t.buttonsAlignment?"dhx_alert__footer--"+t.buttonsAlignment:"",'">\n\t\t\t\t<button type="button" aria-label="confirm" class="dhx_alert__apply-button dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">').concat(i,"</button>\n\t\t\t</div>"),!1===t.htmlEnable&&(t.header&&(s.querySelector("#".concat(o)).textContent=t.header),t.text&&(s.querySelector("#".concat(n)).textContent=t.text)),document.body.appendChild(s),s.querySelector(".dhx_alert__apply-button").focus(),s.querySelector("button").addEventListener("click",(function(t){c(t),e(!0)})),document.addEventListener("keydown",l)}))}}).call(this,i(16))},function(e,t,i){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i(107),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i(48))},function(e,t,i){(function(e,t){!function(e,i){"use strict";if(!e.setImmediate){var n,o,r,a,s,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){r.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,n=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var o={callback:e,args:t};return c[l]=o,n(l),l++},h.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i(48),i(108))},function(e,t){var i,n,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new p(e,t)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.confirm=void 0;var n=i(60),o=i(61),r=i(0);t.confirm=function(t){t.buttonsAlignment=t.buttonsAlignment||"right";var i=t.buttons&&t.buttons[1]?t.buttons[1]:n.default.apply,a=t.buttons&&t.buttons[0]?t.buttons[0]:n.default.reject,s=(0,o.blockScreen)("dhx_alert__overlay-confirm "+(t.blockerCss||""));return new e((function(e){var n=document.createElement("div");n.setAttribute("role","alertdialog"),n.setAttribute("aria-modal","true");var o,l=t.header&&(0,r.uid)(),c=t.header&&(0,r.uid)();c&&n.setAttribute("aria-describedby",c),l&&n.setAttribute("aria-labelledby",l);var u=function(t){s(),n.removeEventListener("click",d),document.removeEventListener("keydown",h),document.body.removeChild(n),e(t)},d=function(e){"BUTTON"===e.target.tagName&&u(e.target.classList.contains("dhx_alert__confirm-aply"))},h=function(e){"Escape"===e.key||"Esc"===e.key?(n.querySelector(".dhx_alert__confirm-aply").focus(),u(e.target.classList.contains("dhx_alert__confirm-reject"))):"Tab"===e.key&&("aply"===o?(o="reject",n.querySelector(".dhx_alert__confirm-reject").focus()):(o="aply",n.querySelector(".dhx_alert__confirm-aply").focus()),e.preventDefault())};n.className="dhx_widget dhx_alert dhx_alert--confirm"+(t.css?" "+t.css:""),n.innerHTML="\n\t\t".concat(t.header?'<div class="dhx_alert__header" id='.concat(l,"> ").concat(!1!==t.htmlEnable?t.header:""," </div>"):"","\n\t\t").concat(t.text?'<div class="dhx_alert__content" id='.concat(c,">").concat(!1!==t.htmlEnable?t.text:"","</div>"):"",'\n\t\t\t<div class="dhx_alert__footer ').concat(t.buttonsAlignment?"dhx_alert__footer--"+t.buttonsAlignment:"",'">\n\t\t\t\t<button type="button" aria-label="reject" class="dhx_alert__confirm-reject dhx_button dhx_button--view_link dhx_button--color_primary dhx_button--size_medium">').concat(a,'</button>\n\t\t\t\t<button type="button"  aria-label="aply"class="dhx_alert__confirm-aply dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">').concat(i,"</button>\n\t\t\t</div>"),!1===t.htmlEnable&&(t.header&&(n.querySelector("#".concat(l)).textContent=t.header),t.text&&(n.querySelector("#".concat(c)).textContent=t.text)),document.body.appendChild(n),o="aply",n.querySelector(".dhx_alert__confirm-aply").focus(),n.addEventListener("click",d),document.addEventListener("keydown",h)}))}}).call(this,i(16))},function(e,t,i){"use strict";i.r(t);var n,o,r=i(14),a=(i(63),["contact@dhtmlx.com</a> or visit <a style='color: #0288d1;text-decoration: unset;' href='https://dhtmlx.com/docs/products/licenses.shtml?expand=1&utm_source=trial&utm_medium=","1709707535000","https://dhtmlx.com/docs/products/licenses.shtml?expand=1&utm_source=trial&utm_medium=popup&utm_campaign=second_month#suite","random","popup&utm_campaign=second_month#suite' target='_blank'>dhtmlx.com</a> in order to obtain a proper license.","<svg class='dhx_alert__header--icon' xmlns='http://www.w3.org/2000/sv' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='0 0 24 24'><path d='M11,15H13V17H","now","right","floor","open","_blank","Please contact us at <a style='color: #0288d1;text-decoration: unset;' href='mailto:contact@dhtmlx.com?subject=DHTMLX Licensing - Trial End' target='_blank'>","dhx_547239261_alert","16.42 16.42,20 12,20Z'></path></svg><div class='dhx_alert__header--text'>Your evaluation period for DHTMLX has expired</div>"]);n=a,o=147,function(e){for(;--e;)n.push(n.shift())}(++o);var s=function(e,t){return a[e-=257]};setTimeout((function(){var e,t,i,n=s,o=n(269)+"11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,"+n(263),a=n(261)+n(264)+n(268),l=6e4;void 0!==n(265)&&setInterval((function(){var e,t=n;e=n,Date[e(270)]()-e(265)>5184e6&&Object(r.alert)({header:o,text:a,buttonsAlignment:t(257),buttons:["check licensing"],css:t(262)}).then((function(){var e=t;window[e(259)](e(266),e(260))}))}),(e=l,t=12e4,i=n,Math[i(258)](Math[i(267)]()*(t-e+1))+e))}),1)},function(e,t){var i,n,o=["1709707535000","random","undefined","floor","now"];i=o,n=178,function(e){for(;--e;)i.push(i.shift())}(++n);var r=function(e,t){return o[e-=168]};setTimeout((function(){var e,t,i,n=r,o=6e4;typeof n(170)!==n(172)&&setInterval((function(){var e;e=n,Date[e(169)]()-e(170)>7776e6&&alert("Your evaluation period for DHTMLX has expired.\nPlease contact us at contact@dhtmlx.com or visit dhtmlx.com in order to obtain a proper license.")}),(e=o,t=12e4,i=n,Math[i(168)](Math[i(171)]()*(t-e+1))+e))}),1)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spreadsheet=t.css=t.i18n=t.setTheme=t.message=void 0;var n=i(113);Object.defineProperty(t,"css",{enumerable:!0,get:function(){return n.cssManager}});var o=i(11);i(114);var r=i(115),a=i(14);Object.defineProperty(t,"message",{enumerable:!0,get:function(){return a.message}});var s=i(1);Object.defineProperty(t,"setTheme",{enumerable:!0,get:function(){return s.setTheme}});var l=window.dhx=window.dhx||{};t.i18n=l.i18n||{},t.i18n.setLocale=r.setLocale,t.i18n.spreadsheet=t.i18n.spreadsheet||o.default,l.css=l.css||n.cssManager;var c=i(117);Object.defineProperty(t,"Spreadsheet",{enumerable:!0,get:function(){return c.Spreadsheet}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssManager=t.CssManager=void 0;var n=i(0),o=function(){function e(){this._classes={};var e=document.createElement("style");e.id="dhx_generated_styles",this._styleCont=document.head.appendChild(e)}return e.prototype.update=function(){this._styleCont.innerHTML!==this._generateCss()&&(document.head.appendChild(this._styleCont),this._styleCont.innerHTML=this._generateCss())},e.prototype.remove=function(e){delete this._classes[e],this.update()},e.prototype.add=function(e,t,i){void 0===i&&(i=!1);var n=this._toCssString(e),o=this._findSameClassId(n);return o&&t&&t!==o?(this._classes[t]=this._classes[o],t):o||this._addNewClass(n,t,i)},e.prototype.get=function(e){if(this._classes[e]){for(var t={},i=0,n=this._classes[e].split(";");i<n.length;i++){var o=n[i];if(o){var r=o.split(":");t[r[0]]=r[1]}}return t}return null},e.prototype.destructor=function(){this._classes=this._styleCont=null},e.prototype._findSameClassId=function(e){for(var t in this._classes)if(e===this._classes[t])return t;return null},e.prototype._addNewClass=function(e,t,i){var o=t||"dhx_generated_class_".concat((0,n.uid)());return this._classes[o]=e,i||this.update(),o},e.prototype._toCssString=function(e){var t="";for(var i in e){var n=e[i],o=i.replace(/[A-Z]{1}/g,(function(e){return"-".concat(e.toLowerCase())}));t+="".concat(o,":").concat(n,";")}return t},e.prototype._generateCss=function(){var e="";for(var t in this._classes){var i=this._classes[t];e+=".".concat(t,"{").concat(i,"}\n")}return e},e}();t.CssManager=o,t.cssManager=new o},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLocale=void 0,t.setLocale=function(e,t){var i=window.dhx.i18n[e];if(i)for(var n in t)i[n]=t[n]}},function(e,t,i){
/**
* Copyright (c) 2017, Leon Sorokin
* All rights reserved. (MIT Licensed)
*
* domvm.js (DOM ViewModel)
* A thin, fast, dependency-free vdom view layer
* @preserve https://github.com/leeoniya/domvm (v3.2.6, micro build)
*/
e.exports=function(){"use strict";var e=1,t=2,i=3,n=4,o=5,r="undefined"!=typeof window,a=(r?window:{}).requestAnimationFrame,s={};function l(){}var c=Array.isArray;function u(e){return null!=e}function d(e){return null!=e&&e.constructor===Object}function h(e,t,i,n){e.splice.apply(e,[i,n].concat(t))}function f(e){var t=typeof e;return"string"===t||"number"===t}function p(e){return"function"==typeof e}function v(e){return"object"==typeof e&&p(e.then)}function g(e){for(var t=arguments,i=1;i<t.length;i++)for(var n in t[i])e[n]=t[i][n];return e}function _(e,t,i){for(var n;n=t.shift();)0===t.length?e[n]=i:e[n]=e=e[n]||{}}function m(e,t){for(var i=[],n=t;n<e.length;n++)i.push(e[n]);return i}function y(e,t){for(var i in e)if(e[i]!==t[i])return!1;return!0}function b(e,t){var i=e.length;if(t.length!==i)return!1;for(var n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function w(e){if(!a)return e;var t,i,n;function o(){t=0,e.apply(i,n)}return function(){i=this,n=arguments,t||(t=a(o))}}function x(e,t,i){return function(){return e.apply(i,t)}}function C(e){var t,i,n=e.slice(),o=[];o.push(0);for(var r=0,a=e.length;r<a;++r){var s=o[o.length-1];if(e[s]<e[r])n[r]=s,o.push(r);else{for(t=0,i=o.length-1;t<i;){var l=(t+i)/2|0;e[o[l]]<e[r]?t=l+1:i=l}e[r]<e[o[t]]&&(t>0&&(n[r]=o[t-1]),o[t]=r)}}for(i=o[(t=o.length)-1];t-- >0;)o[t]=i,i=n[i];return o}function E(e,t){var i,n=0,o=t.length-1;if(o<=2147483647)for(;n<=o;){if(t[i=n+o>>1]===e)return i;t[i]<e?n=i+1:o=i-1}else for(;n<=o;){if(t[i=Math.floor((n+o)/2)]===e)return i;t[i]<e?n=i+1:o=i-1}return n==t.length?null:n}function S(e){return"o"===e[0]&&"n"===e[1]}function I(e){return"_"===e[0]}function k(e){return"style"===e}function M(e){e&&e.el&&e.el.offsetHeight}function O(e){return null!=e.node&&null!=e.node.el}function A(e,t){switch(t){case"value":case"checked":case"selected":return!0}return!1}function D(e){for(e=e||s;null==e.vm&&e.parent;)e=e.parent;return e.vm}function P(){}var F=P.prototype={constructor:P,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:!1,_lis:!1,idx:null,parent:null};function T(e){var i=new P;return i.type=t,i.body=e,i}var R={},V=/\[(\w+)(?:=(\w+))?\]/g;function H(e){var t,i,n,o,r=R[e];if(null==r)for(R[e]=r={tag:(t=e.match(/^[-\w]+/))?t[0]:"div",id:(i=e.match(/#([-\w]+)/))?i[1]:null,class:(n=e.match(/\.([-\w.]+)/))?n[1].replace(/\./g," "):null,attrs:null};o=V.exec(e);)null==r.attrs&&(r.attrs={}),r.attrs[o[1]]=o[2]||"";return r}var L=1,j=2,N=4,$=8;function z(t,i,n,o){var r=new P;r.type=e,u(o)&&(r.flags=o),r.attrs=i;var a=H(t);if(r.tag=a.tag,a.id||a.class||a.attrs){var s=r.attrs||{};if(a.id&&!u(s.id)&&(s.id=a.id),a.class&&(r._class=a.class,s.class=a.class+(u(s.class)?" "+s.class:"")),a.attrs)for(var l in a.attrs)u(s[l])||(s[l]=a.attrs[l]);r.attrs=s}var c=r.attrs;return u(c)&&(u(c._key)&&(r.key=c._key),u(c._ref)&&(r.ref=c._ref),u(c._hooks)&&(r.hooks=c._hooks),u(c._data)&&(r.data=c._data),u(c._flags)&&(r.flags=c._flags),u(r.key)||(u(r.ref)?r.key=r.ref:u(c.id)?r.key=c.id:u(c.name)&&(r.key=c.name+("radio"===c.type||"checkbox"===c.type?c.value:"")))),null!=n&&(r.body=n),r}function B(e,t,i){_(e,["refs"].concat(t.split(".")),i)}function W(e){for(;e=e.parent;)e.flags|=L}function G(e,t,i,r){if(e.type!==o&&e.type!==n){e.parent=t,e.idx=i,e.vm=r,null!=e.ref&&B(D(e),e.ref,e);var a=e.hooks,s=r&&r.hooks;(a&&(a.willRemove||a.didRemove)||s&&(s.willUnmount||s.didUnmount))&&W(e),c(e.body)&&U(e)}}function U(e){for(var i=e.body,n=0;n<i.length;n++){var o=i[n];!1===o||null==o?i.splice(n--,1):c(o)?h(i,o,n--,1):(null==o.type&&(i[n]=o=T(""+o)),o.type===t?null==o.body||""===o.body?i.splice(n--,1):n>0&&i[n-1].type===t?(i[n-1].body+=o.body,i.splice(n--,1)):G(o,e,n,null):G(o,e,n,null))}}var q={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,order:!0,lineClamp:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function X(e,t){return isNaN(t)||q[e]?t:t+"px"}function Y(e,t){var i=(e.attrs||s).style,n=t?(t.attrs||s).style:null;if(null==i||f(i))e.el.style.cssText=i;else{for(var o in i){var r=i[o];(null==n||null!=r&&r!==n[o])&&(e.el.style[o]=X(o,r))}if(n)for(var a in n)null==i[a]&&(e.el.style[a]="")}}var K=[];function J(e,t,i,n,o){if(null!=e){var r=i.hooks[t];if(r){if("d"!==t[0]||"i"!==t[1]||"d"!==t[2])return r(i,n);o?M(i.parent)&&r(i,n):K.push([r,i,n])}}}function Z(e){var t;if(K.length)for(M(e.node);t=K.shift();)t[0](t[1],t[2])}var Q=r?document:null;function ee(e){for(;null==e._node;)e=e.parentNode;return e._node}function te(e,t){return null!=t?Q.createElementNS(t,e):Q.createElement(e)}function ie(e){return Q.createTextNode(e)}function ne(e){return Q.createComment(e)}function oe(e){return e.nextSibling}function re(e){return e.previousSibling}function ae(e){var t=e.vm,i=null!=t&&J(t.hooks,"willUnmount",t,t.data),n=J(e.hooks,"willRemove",e);if((e.flags&L)===L&&c(e.body))for(var o=0;o<e.body.length;o++)ae(e.body[o]);return i||n}function se(e,t,i){var n=t._node,o=n.vm;if(c(n.body))if((n.flags&L)===L)for(var r=0;r<n.body.length;r++)se(t,n.body[r].el);else ce(n);delete t._node,e.removeChild(t),J(n.hooks,"didRemove",n,null,i),null!=o&&(J(o.hooks,"didUnmount",o,o.data,i),o.node=null)}function le(e,t){var i=t._node;if(!i._dead){var n=ae(i);null!=n&&v(n)?(i._dead=!0,n.then(x(se,[e,t,!0]))):se(e,t)}}function ce(e){for(var t=e.body,i=0;i<t.length;i++){var n=t[i];delete n.el._node,null!=n.vm&&(n.vm.node=null),c(n.body)&&ce(n)}}function ue(e){var t=e.el;if(0==(e.flags&L))c(e.body)&&ce(e),t.textContent=null;else{var i=t.firstChild;do{var n=oe(i);le(t,i)}while(i=n)}}function de(e,t,i){var n=t._node,o=null!=t.parentNode,r=t!==i&&o?null:n.vm;null!=r&&J(r.hooks,"willMount",r,r.data),J(n.hooks,o?"willReinsert":"willInsert",n),e.insertBefore(t,i),J(n.hooks,o?"didReinsert":"didInsert",n),null!=r&&J(r.hooks,"didMount",r,r.data)}function he(e,t,i){de(e,t,i?oe(i):null)}var fe={};function pe(e){g(fe,e)}function ve(e){var t=this,i=t,n=m(arguments,1).concat(i,i.data);do{var o=t.onemit,r=o?o[e]:null;if(r){r.apply(t,n);break}}while(t=t.parent());fe[e]&&fe[e].apply(t,n)}var ge=l;function _e(e){ge=e.onevent||ge,e.onemit&&pe(e.onemit)}function me(e,t,i){e[t]=i}function ye(e,t,i,n,o){var r=e.apply(o,t.concat([i,n,o,o.data]));o.onevent(i,n,o,o.data,t),ge.call(null,i,n,o,o.data,t),!1===r&&(i.preventDefault(),i.stopPropagation())}function be(e){var t,i,n=ee(e.target),o=D(n),r=e.currentTarget._node.attrs["on"+e.type];if(c(r))ye(t=r[0],i=r.slice(1),e,n,o);else for(var a in r)if(e.target.matches(a)){var s=r[a];c(s)?(t=s[0],i=s.slice(1)):(t=s,i=[]),ye(t,i,e,n,o)}}function we(e,t,i,n){if(i!==n){var o=e.el;null==i||p(i)?me(o,t,i):null==n&&me(o,t,be)}}function xe(e,t,i){"."===t[0]&&(t=t.substr(1),i=!0),i?e.el[t]="":e.el.removeAttribute(t)}function Ce(e,t,i,n,o){var r=e.el;null==i?!o&&xe(e,t,!1):null!=e.ns?r.setAttribute(t,i):"class"===t?r.className=i:"id"===t||"boolean"==typeof i||n?r[t]=i:"."===t[0]?r[t.substr(1)]=i:r.setAttribute(t,i)}function Ee(e,t,i){var n=e.attrs||s,o=t.attrs||s;if(n===o);else{for(var r in n){var a=n[r],l=A(e.tag,r),c=l?e.el[r]:o[r];a===c||(k(r)?Y(e,t):I(r)||(S(r)?we(e,r,a,c):Ce(e,r,a,l,i)))}for(var r in o)!(r in n)&&!I(r)&&xe(e,r,A(e.tag,r)||S(r))}}function Se(e,t,i,o){return e.type===n&&(t=e.data,i=e.key,o=e.opts,e=e.view),new Ge(e,t,i,o)}function Ie(e){for(var t=0;t<e.body.length;t++){var r=e.body[t],a=r.type;if(a<=i)de(e.el,ke(r));else if(a===n)a=(s=Se(r.view,r.data,r.key,r.opts)._redraw(e,t,!1)).node.type,de(e.el,ke(s.node));else if(a===o){var s;(s=r.vm)._redraw(e,t),a=s.node.type,de(e.el,s.node.el)}}}function ke(n,o){return null==n.el&&(n.type===e?(n.el=o||te(n.tag,n.ns),null!=n.attrs&&Ee(n,s,!0),(n.flags&$)===$&&n.body.body(n),c(n.body)?Ie(n):null!=n.body&&""!==n.body&&(n.el.textContent=n.body)):n.type===t?n.el=o||ie(n.body):n.type===i&&(n.el=o||ne(n.body))),n.el._node=n,n.el}function Me(e,t){return t[e.idx+1]}function Oe(e,t){return t[e.idx-1]}function Ae(e){return e.parent}window.lisMove=Te;var De=1,Pe=2;function Fe(e,t,i,n,o,r,a,s){return function(l,c,u,d,h,f){var p,v;if(null!=d[n]){if(null==(p=d[n]._node))return void(d[n]=e(d[n]));if(Ae(p)!==l)return v=e(d[n]),null!=p.vm?p.vm.unmount(!0):le(c,d[n]),void(d[n]=v)}if(d[o]==h)return Pe;if(null==d[o].el)i(c,ke(d[o]),d[n]),d[o]=t(d[o],u);else if(d[o].el===d[n])d[o]=t(d[o],u),d[n]=e(d[n]);else{if(f||p!==d[a])return f&&null!=d[n]?Te(e,t,i,n,o,c,u,p,d):De;v=d[n],d[n]=e(v),s(c,v,d[r]),d[r]=v}}}function Te(e,t,i,n,o,r,a,s,l){if(s._lis)i(r,l[o].el,l[n]),l[o]=t(l[o],a);else{var c=E(s.idx,l.tombs);s._lis=!0;var u=e(l[n]);i(r,l[n],null!=c?a[l.tombs[c]].el:c),null==c?l.tombs.push(s.idx):l.tombs.splice(c,0,s.idx),l[n]=u}}var Re=Fe(oe,Me,de,"lftSib","lftNode","rgtSib","rgtNode",he),Ve=Fe(re,Oe,he,"rgtSib","rgtNode","lftSib","lftNode",de);function He(e,t){var i=t.body,n=e.el,o=e.body,r={lftNode:o[0],rgtNode:o[o.length-1],lftSib:(i[0]||s).el,rgtSib:(i[i.length-1]||s).el};e:for(;;){for(;;){var a=Re(e,n,o,r,null,!1);if(a===De)break;if(a===Pe)break e}for(;;){var l=Ve(e,n,o,r,r.lftNode,!1);if(l===De)break;if(l===Pe)break e}Le(e,n,o,r);break}}function Le(e,t,i,n){for(var o=Array.prototype.slice.call(t.childNodes),r=[],a=0;a<o.length;a++){var s=o[a]._node;s.parent===e&&r.push(s.idx)}for(var l=C(r).map((function(e){return r[e]})),c=0;c<l.length;c++)i[l[c]]._lis=!0;for(n.tombs=l;Re(e,t,i,n,null,!0)!==Pe;);}function je(e){return e.el._node.parent!==e.parent}function Ne(e,t,i){return t[i]}function $e(e,t,i){for(;i<t.length;i++){var r=t[i];if(null!=r.vm){if(e.type===n&&r.vm.view===e.view&&r.vm.key===e.key||e.type===o&&r.vm===e.vm)return r}else if(!je(r)&&e.tag===r.tag&&e.type===r.type&&e.key===r.key&&(e.flags&~L)==(r.flags&~L))return r}return null}function ze(e,t,i){return t[t._keys[e.key]]}function Be(e,i){J(i.hooks,"willRecycle",i,e);var n=e.el=i.el,o=i.body,r=e.body;if(n._node=e,e.type!==t||r===o){null==e.attrs&&null==i.attrs||Ee(e,i,!1);var a=c(o),s=c(r),l=(e.flags&$)===$;a?s||l?We(e,i):r!==o&&(null!=r?n.textContent=r:ue(i)):s?(ue(i),Ie(e)):r!==o&&(n.firstChild?n.firstChild.nodeValue=r:n.textContent=r),J(i.hooks,"didRecycle",i,e)}else n.nodeValue=r}function We(t,r){var a=t.body,s=a.length,l=r.body,c=l.length,u=(t.flags&$)===$,d=(t.flags&j)===j,h=(t.flags&N)===N,f=!d&&t.type===e,p=!0,v=h?ze:d||u?Ne:$e;if(h){for(var g={},_=0;_<l.length;_++)g[l[_].key]=_;l._keys=g}if(f&&0===s)return ue(r),void(u&&(t.body=[]));var m,y,b=0,w=!1,x=0;if(u)var C={key:null},E=Array(s);for(_=0;_<s;_++){if(u){var S=!1,I=null;p&&(h&&(C.key=a.key(_)),m=v(C,l,x)),null!=m?(y=m.idx,!0===(I=a.diff(_,m))?((k=m).parent=t,k.idx=_,k._lis=!1):S=!0):S=!0,S&&(G(k=a.tpl(_),t,_),k._diff=null!=I?I:a.diff(_),null!=m&&Be(k,m)),E[_]=k}else{var k,M=(k=a[_]).type;if(M<=i)(m=p&&v(k,l,x))&&(Be(k,m),y=m.idx);else if(M===n){if(m=p&&v(k,l,x)){y=m.idx;var A=m.vm._update(k.data,t,_)}else A=Se(k.view,k.data,k.key,k.opts)._redraw(t,_,!1);M=A.node.type}else if(M===o){var D=O(k.vm);M=(A=k.vm._update(k.data,t,_,D)).node.type}}if(!h&&null!=m&&(y===x?++x===c&&s>c&&(m=null,p=!1):w=!0,c>100&&w&&++b%10==0))for(;x<c&&je(l[x]);)x++}u&&(t.body=E),f&&He(t,r)}function Ge(e,t,i,n){var o=this;o.view=e,o.data=t,o.key=i,n&&(o.opts=n,o.config(n));var r=d(e)?e:e.call(o,o,t,i,n);p(r)?o.render=r:(o.render=r.render,o.config(r)),o._redrawAsync=w((function(e){return o.redraw(!0)})),o._updateAsync=w((function(e){return o.update(e,!0)})),o.init&&o.init.call(o,o,o.data,o.key,n)}var Ue=Ge.prototype={constructor:Ge,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:l,refs:null,render:null,mount:qe,unmount:Xe,config:function(e){var t=this;e.init&&(t.init=e.init),e.diff&&(t.diff=e.diff),e.onevent&&(t.onevent=e.onevent),e.hooks&&(t.hooks=g(t.hooks||{},e.hooks)),e.onemit&&(t.onemit=g(t.onemit||{},e.onemit))},parent:function(){return D(this.node.parent)},root:function(){for(var e=this.node;e.parent;)e=e.parent;return e.vm},redraw:function(e){var t=this;return e?t._redraw(null,null,O(t)):t._redrawAsync(),t},update:function(e,t){var i=this;return t?i._update(e,null,null,O(i)):i._updateAsync(e),i},_update:Je,_redraw:Ke,_redrawAsync:null,_updateAsync:null};function qe(e,t){var i=this;return t?(ue({el:e,flags:0}),i._redraw(null,null,!1),e.nodeName.toLowerCase()!==i.node.tag?(ke(i.node),de(e.parentNode,i.node.el,e),e.parentNode.removeChild(e)):de(e.parentNode,ke(i.node,e),e)):(i._redraw(null,null),e&&de(e,i.node.el)),e&&Z(i),i}function Xe(e){var t=this,i=t.node;le(i.el.parentNode,i.el),e||Z(t)}function Ye(e,t,i,n){return null!=i&&(i.body[n]=t,t.idx=n,t.parent=i,t._lis=!1),e}function Ke(e,t,i){var n,o,r=null==e,a=this,s=a.node&&a.node.el&&a.node.el.parentNode,l=a.node;if(null!=a.diff&&(n=a._diff,a._diff=o=a.diff(a,a.data),null!=l)){var u=c(n)?b:y;if(n===o||u(n,o))return Ye(a,l,e,t)}s&&J(a.hooks,"willRedraw",a,a.data);var d=a.render.call(a,a,a.data,n,o);if(d===l)return Ye(a,l,e,t);if(a.refs=null,null!=a.key&&d.key!==a.key&&(d.key=a.key),a.node=d,e?(G(d,e,t,a),e.body[t]=d):l&&l.parent?(G(d,l.parent,l.idx,a),l.parent.body[l.idx]=d):G(d,null,null,a),!1!==i)if(l)if(l.tag!==d.tag||l.key!==d.key){l.vm=d.vm=null;var h=l.el.parentNode,f=oe(l.el);le(h,l.el),de(h,ke(d),f),l.el=d.el,d.vm=a}else Be(d,l);else ke(d);return s&&J(a.hooks,"didRedraw",a,a.data),r&&s&&Z(a),a}function Je(e,t,i,n){var o=this;return null!=e&&o.data!==e&&(J(o.hooks,"willUpdate",o,e),o.data=e),o._redraw(t,i,n)}function Ze(e,t,i,n){var o,r;return null==i?d(t)?o=t:r=t:(o=t,r=i),z(e,o,r,n)}var Qe="http://www.w3.org/2000/svg";function et(e,t,i,n){var o=Ze(e,t,i,n);return o.ns=Qe,o}function tt(e){var t=new P;return t.type=i,t.body=e,t}function it(e,t,i,n){this.view=e,this.data=t,this.key=i,this.opts=n}function nt(e,t,i,n){return new it(e,t,i,n)}function ot(e){this.vm=e}function rt(e){return new ot(e)}function at(t){var i=new P;return i.type=e,i.el=i.key=t,i}function st(e,t){var i=e.length,n={items:e,length:i,key:function(i){return t.key(e[i],i)},diff:function(i,n){var o=t.diff(e[i],i);if(null==n)return o;var r=n._diff;return(o===r||c(r)?b(o,r):y(o,r))||o},tpl:function(i){return t.tpl(e[i],i)},map:function(e){return t.tpl=e,n},body:function(e){for(var t=Array(i),o=0;o<i;o++){var r=n.tpl(o);r._diff=n.diff(o),t[o]=r,G(r,e,o)}e.body=t}};return n}it.prototype={constructor:it,type:n,view:null,data:null,key:null,opts:null},ot.prototype={constructor:ot,type:o,vm:null};var lt={config:_e,ViewModel:Ge,VNode:P,createView:Se,defineElement:Ze,defineSvgElement:et,defineText:T,defineComment:tt,defineView:nt,injectView:rt,injectElement:at,lazyList:st,FIXED_BODY:j,DEEP_REMOVE:L,KEYED_LIST:N,LAZY_LIST:$};function ct(e,t){ut(this,e,t)}function ut(e,t,i){if(null!=t.type){if(null!=e.vm)return;G(t,e.parent,e.idx,null),e.parent.body[e.idx]=t,Be(t,e),i&&M(t),Z(D(t))}else{var n=Object.create(e);n.attrs=g({},e.attrs);var o=g(e.attrs,t);if(null!=e._class){var r=o.class;o.class=null!=r&&""!==r?e._class+" "+r:e._class}Ee(e,n),i&&M(e)}}function dt(e,t){var i=e.body;if(c(i))for(var n=0;n<i.length;n++){var o=i[n];null!=o.vm?t.push(o.vm):dt(o,t)}return t}function ht(e){var t,i,n=arguments,o=n.length;if(o>1){var r=1;d(n[1])&&(i=n[1],r=2),t=o===r+1&&(f(n[r])||c(n[r])||i&&(i._flags&$)===$)?n[r]:m(n,r)}return z(e,i,t)}function ft(){var e=ht.apply(null,arguments);return e.ns=Qe,e}return F.patch=ct,Ue.emit=ve,Ue.onemit=null,Ue.body=function(){return dt(this.node,[])},lt.defineElementSpread=ht,lt.defineSvgElementSpread=ft,lt}()},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Spreadsheet=void 0;var s=i(64),l=i(1),c=i(3),u=i(4),d=i(8),h=i(13),f=i(52),p=i(17),v=i(32),g=i(175),_=i(41),m=i(204),y=i(205),b=i(206),w=i(207),x=i(29),C=i(209),E=i(210),S=i(12),I=i(2),k=i(58),M=i(42),O=i(211),A=i(11),D=i(212),P=i(213),F=i(6),T=i(10),R=i(23),V=i(0),H=i(214),L=i(215),j=i(216),N=i(217),$=i(25),z=i(43),B=i(44),W=i(221),G=i(20),U=i(28),q=i(19),X=i(222),Y=i(223),K=i(224),J=i(253),Z=i(14),Q=i(254),ee=i(255),te=i(256),ie=i(30),ne={decimal:".",thousands:",",currency:"$",dateFormat:"%d/%m/%Y",timeFormat:12},oe=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.container=null===t?t:(0,u.toNode)(t),n._sizes={rowsCount:1e3,colsCount:200},n._editors={},n.config=(0,I.extendConfig)({rowsCount:{validate:function(e){return e>=0},default:1e3},colsCount:{validate:function(e){return e>=0},default:26},menu:{validate:function(e){return"boolean"==typeof e},default:!1},editLine:{validate:function(e){return"boolean"==typeof e},default:!0},readonly:{validate:function(e){return"boolean"==typeof e},default:!1},autoFormat:{validate:function(e){return"boolean"==typeof e},default:!0},importModulePath:{validate:function(e){return"string"==typeof e},default:"https://cdn.dhtmlx.com/libs/excel2json/1.3/worker.js?vx"},exportModulePath:{validate:function(e){return"string"==typeof e},default:"https://cdn.dhtmlx.com/libs/json2excel/1.2/worker.js?vx"},multiSheets:{validate:function(e){return"boolean"==typeof e},default:!0},formats:{validate:function(e){return e instanceof Array},default:[]}},n.config);var o=r(r(r({},ne),{dateFormat:n.config.dateFormat||ne.dateFormat,timeFormat:n.config.timeFormat||ne.timeFormat}),n.config.localization);n.config.localization=o,n._range={cell:"",mode:0,cursor:0,editor:null,inline:0},n.events=new c.EventSystem,(0,S.initFormat)(n,n.config.localization),n._initLayout(),n._colorpicker=new s.Colorpicker(null),n._colorpickerPopup=new T.Popup,n._colorpickerPopup.attach(n._colorpicker),n._linkForm=new Q.LinkForm(n._grid,n.insertLink.bind(n),n.events),n._setEventsHandlers(),n._actionsManager=new _.ActionsManager({spreadsheet:n,editLine:n._editLine,grid:n._grid,dataStore:n._dataStore,events:n.events}),n._buffer=new C.BufferManager(n,n._grid,n._callAction,n._activePage,n._dataStore),dhx.css.add({textDecoration:"underline",color:"#163FA2"},"dhx_spreadsheet_link"),n.selection=new D.Selection(n,n._grid,n._buffer,n._activePage);var a=n._grid.getRootView();a.hooks=a.hooks||{},a.hooks.didMount=function(e){n._updateGridSizes();var t=n.selection.getFocusedCell(),i=n.getValue(t);n._editLine.setValue(i),n.config.readonly||e.node.el.addEventListener("contextmenu",(function(e){n.contextMenu.data.update("lock",{value:n.isLocked(n.selection.getSelectedCell())?A.default.unlockCell:A.default.lockCell}),n._contextMenuVisible=!0,n.contextMenu.showAt(e),e.preventDefault()})),n.container=n._layout.getRootView().node.el,a.hooks.didRedraw=function(e){n.events.fire(F.SpreadsheetEvents.gridRedraw,[e])}},n._initHotkeys();var d=n._tabbar.getRootView();d.hooks=d.hooks||{};var h=function(e){e.node.el.addEventListener("contextmenu",(function(e){n.endEdit();var t=(0,u.locate)(e);if(t&&"add-sheet"!==t&&!n.config.readonly){var i=n._sheets.getLength(),o=n.sheetContextMenu.data;n.config.multiSheets&&2===i?o.update("delete",{disabled:!0}):n.config.multiSheets&&i>2&&o.getItem("delete").disabled&&o.update("delete",{disabled:!1}),n.sheetContextMenu.showAt(e.target,"right"),n._focusedSheet=t,e.preventDefault()}}))};d.hooks.didMount=function(e){e.node&&e.node.el&&e.node.el.addEventListener("dblclick",(function(e){var t=(0,u.locate)(e);t&&"add-sheet"!==t&&!n.config.readonly&&(e.preventDefault(),n._focusedSheet=t,n.sheetContextMenu.events.fire(R.NavigationBarEvents.click,["rename",e]),n._awaitRedraw((function(){return G.focusManager.setFocusId(null)})))})),h(e)},d.hooks.didRedraw=function(e){return h(e)},n._generateGridStruct(),n.export=new H.Exporter(n,n._grid);var f=(0,l.create)({render:function(){return n._render()}});return n.mount(t,f),G.focusManager.setFocusId(n._uid),n._spanControl=new te.Merge(n._callAction.bind(n),n.config,n._grid,n.isLocked.bind(n)),n._filterForm=new ee.FilterForm(n._grid,n.setFilter.bind(n)),n}return o(t,e),t.prototype.destructor=function(){var e,t;this.unmount(),this._layout.unmount(),this.contextMenu.destructor(),this.menu.destructor(),this.toolbar.destructor(),this._editLine.destructor(),this._tabbar.destructor(),null===(e=this._searchForm)||void 0===e||e.destructor(),null===(t=this._linkForm)||void 0===t||t.destructor()},t.prototype.paint=function(){this.config.rowsCount===this._sizes.rowsCount&&this.config.colsCount===this._sizes.colsCount||this._generateGridStruct(),this._layout.paint(),this._grid.paint()},t.prototype.load=function(e,t){var i=this;if("xlsx"===t||"json"===t&&!e){if(!(0,I.isWasmSupported)())throw new Error("WebAssembly is not supported by your browser");return this._xlsxProxy=this._xlsxProxy||new j.FileProxy(this),this._xlsxProxy.load(t,e).then((function(e){i.parse(e,t)}))}return(0,h.toProxy)(e).load().then((function(e){i.parse(e,t)}))},t.prototype.parse=function(e,t){var i=this;"csv"===t&&(t=new E.CustomCsvDriver(this._grid)),"xlsx"===t&&(t=new L.XlsxDriver),this._sheets.forEach((function(e){"add-sheet"!==e.id&&(i._dataStore.removePage(e.value),i._sheets.remove(e.id))})),e=(0,h.toDataDriver)(t||"json").toJsonArray(e,this._grid),this._grid.config.columns.map((function(e){e.$cellCss={}}));var n={sheets:[]},o=this.config,s=o.multiSheets,l=o.leftSplit,c=void 0===l?-1:l,u=o.topSplit,d=void 0===u?-1:u,f=o.colsCount,p=o.rowsCount;if("sheets"in e)for(var v=0;v<(s?e.sheets.length:1);v++){(S=e.sheets[v]).name=S.name||this._generateNewSheetName(),n.sheets.push(S)}else"data"in e&&n.sheets.push(r({name:this._activeSheetName.name},e));var g=[];if("styles"in e){var _=e.styles;for(var m in _){var y=_[m],b=(0,I.convertStyles)(y),w=dhx.css.add(r({"white-space":"nowrap"},b),m);"wrap"===b.multiline&&g.push(w)}dhx.css.update()}Array.isArray(e)&&n.sheets.push({data:e,name:this._generateNewSheetName()});for(var x=0,C=n.sheets;x<C.length;x++){var S=C[x];this._dataStore.addPage(S.name),this._sheets.add({value:S.name,id:S.id})}for(var k=function(e){for(var t=M._dataStore.getPage(e.name),n=a([],e.data,!0),o=[];n.length;)o.push(n.splice(0,1e3));for(var s=M._grid.config.rowHeight,l=e.cols||[],u=e.rows||[];u.length<p;)u.push({height:s});for(;l.length<f;)l.push({width:120});var h=e.merged||[];(d||c)&&h&&(h=(h=h.filter((function(e){return(0,I.checkSpan)(e,c,d,i._grid)}))).map((function(e){var t=e.to,i=t.row,n=t.column;return r(r({},e),{to:{row:i>u.length?u.length:i,column:n>l.length?l.length:n}})}))),t.setMeta({cols:l,rows:u,merged:h}),o.forEach((function(e,n){n&&o.length-1!==n?setTimeout((function(){return i._parseCells(e,t,g)}),100):i._parseCells(e,t,g)}))},M=this,O=0,A=n.sheets;O<A.length;O++){k(S=A[O])}this._grid.data.events.fire(h.DataEvents.change),this._changeSheet(this._sheets.getId(this.config.multiSheets&&!this.config.readonly?1:0)),this._grid.paint(),this.config&&!this.config.readonly&&this.selection.setSelectedCell("A1",!1)},t.prototype._parseCells=function(e,t,i){var n,o,a;void 0===i&&(i=[]);for(var s=this.config.formats,l=void 0===s?[]:s,c=function(e){var s=r({},e),c=(0,I.getCellIds)(s.cell.toUpperCase(),u._grid),d=c.row,h=c.col,f=void 0,p=void 0,v=s.css||"",g="General"===s.format?l.find((function(e){return"common"===e.id})):l.find((function(e){return e.id===s.format||e.mask===s.format})),_=r({},(0,S.detectFormat)(s.value));p=r({},g||_),!g&&s.format&&(p=r({},(0,S.addNewFormat)((0,I.analyzeMSOFormat)(s.format),u.toolbar.data,l)||_)),s.format=p.mask;var m=(0,V.isDefined)(s.value)?(0,S.getCleanValue)(s.value,p):"";"object"==typeof s.css&&(s.css=s.css.join(" "));var y=(0,I.getStylesObject)(s.css),b=!!y["text-align"],w=(0,S.isNumeric)(m);((null===(n=s.link)||void 0===n?void 0:n.href)||!w&&"".concat(m).startsWith("http")&&1==="".concat(m).split(" ").length)&&(s.css="dhx_spreadsheet_link ".concat(v)),s.css instanceof Array&&(s.css=s.css.join(" ")),w&&"@"!==(null==p?void 0:p.mask)?(f=m,"common"===p.id&&s.value!==f&&(p.$value=s.value),b||(y["text-align"]="right",s.css=dhx.css.add((0,I.convertStyles)(y)))):f=(0,V.isDefined)(s.value)?s.value:(null===(o=s.link)||void 0===o?void 0:o.text)||(null===(a=s.link)||void 0===a?void 0:a.href)||"";var C=p.id;(C.includes("date")||C.includes("time"))&&f&&(f=(0,S.isNumeric)(f)?+f:f instanceof Date?(0,U.getExcelDateFromJs)(f):(0,U.getExcelDateFromString)(f,p)),t.setValue(d,h,f,"@"===p.mask?1:0);var E=(0,I.doesContainUrl)(f),k=s.link||(E?{href:E}:null);k&&!k.text&&f&&(k.text=f);var M=s.css;delete s.value,t.setCell(d,h,r(r({},s),{format:r({},p),css:M,editor:s.editor,link:k,$toolbarAlign:b})),i.includes(M)&&(0,x.setAutoHeightToRow)(s.cell.toUpperCase(),u._grid,t,"wrap")},u=this,d=0,h=e;d<h.length;d++){c(h[d])}},t.prototype.serialize=function(){var e=this,t={},i=[];return this._sheets.forEach((function(n){if("add-sheet"!==n.id){for(var o=n.value,r=e._dataStore.getPage(o),a=r.getMeta(),s=a.cols,l=void 0===s?[]:s,c=a.rows,u=void 0===c?[]:c,d=a.merged,h=void 0===d?[]:d,f=e._activePage.getSize(),p=f[0],v=f[1],g=r.serialize(!0),_={name:o,id:n.id,data:[],cols:l.slice(0,v).map((function(e){return{width:e.width}})),rows:u.slice(0,p).map((function(e){return{height:e.height}})),merged:h},m=function(i){var n=(0,I.getCellNameById)(e._grid,(i[0]+1).toString(),(i[1]+1).toString()),o=i[2];if(o){var r=o.value,a=o.css,s=o.format,l=o.editor,c={cell:n};if(Object.keys(o).forEach((function(e){!e.startsWith("$")&&(0,V.isDefined)(o[e])&&(c[e]=o[e])})),a){c.css=a;for(var u=0,d=a.split(" ");u<d.length;u++){var h=d[u];dhx.css.get(h)&&(t[h]=dhx.css.get(h))}}if((0,V.isDefined)(s)){var f=(0,S.getFormat)((0,S.getDefaultFormatsMap)()[s.mask]);c.format=(null==f?void 0:f.id)||s.id}(r||"number"==typeof r)&&(c.value=r),n&&(c.value||"number"==typeof c.value||a||l)&&_.data.push(c)}},y=0,b=g;y<b.length;y++){m(b[y])}i.push(_)}})),{sheets:i,styles:t,formats:this.config.formats}},t.prototype.setValue=function(e,t){if(e&&(this._checkForMissedCells(e),this.events.fire(F.SpreadsheetEvents.beforeValueChange,[e,t]))){var i=this._parseCell(e),n=i.page,o=i.cleanCell;if(n){e=o.toUpperCase();var r=(0,I.getCellIds)(o,this._grid);this._callAction({row:r.row,col:r.col,cell:e,val:t,action:F.Actions.setCellValue,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:n}),this._grid.paint()}}},t.prototype.getValue=function(e){var t=this;if(e){var i=this._parseCell(e),n=i.page,o=i.cleanCell;if(n){if(e=o.toUpperCase(),(0,I.isRangeId)(e)){var r=[];return this.eachCell((function(e){var i=(0,I.getCellIds)(e,t._grid);r.push(n.getValue(i.row,i.col))}),e),r}var a=(0,I.getCellIds)(e,this._grid);return n.getValue(a.row,a.col)}}},t.prototype.getCellIndex=function(e){return(0,I.getCellIds)(e,this._grid)},t.prototype.getFormula=function(e){var t=this,i=this._parseCell(e),n=i.page,o=i.cleanCell;if(n){if(e=o.toUpperCase(),(0,I.isRangeId)(e)){var r=[];return this.eachCell((function(e){r.push(t._getMath(e,n)||"")}),e),r}var a=this._getMath(e,n);return a?a.source:""}},t.prototype.getSheets=function(){var e=[];return this._sheets.forEach((function(t){"add-sheet"!==t.id&&e.push({name:t.value,id:t.id})})),e},t.prototype._getMath=function(e,t){if(void 0===t&&(t=this._activePage),e){var i=(0,I.getCellIds)(e,this._grid),n=i.row,o=i.col,r=(0,$.toId)(n,o,t.getID());return this._math.getMath(r)||null}},t.prototype.eachCell=function(e,t){t=t||this.selection.getSelectedCell();for(var i=0,n=(0,I.getCellsArray)(t,this._grid);i<n.length;i++){var o=n[i],r=(0,I.getCellIds)(o,this._grid),a=r.row,s=r.col;e(o,this._activePage.getValue(a,s))}},t.prototype.getStyle=function(e,t){var i=this;if(void 0===t&&(t=!0),e){var n=this._parseCell(e),o=n.page,a=n.cleanCell;if(o){if(e=a.toUpperCase(),(0,I.isRangeId)(e)){var s=[];return this.eachCell((function(e){var n=(0,I.getCellInfo)(e,o,i._grid),a=[];n.css&&(a="string"==typeof n.css?n.css.split(t?" ":"dhx_spreadsheet_link"):[n.css]);for(var l={},c=0,u=a;c<u.length;c++){var d=u[c];l=r(r({},l),dhx.css.get(d))}s.push(l)}),e),s}var l=(0,I.getCellInfo)(e,this._activePage,this._grid),c=[];l.css&&(c="string"==typeof l.css?l.css.split(t?" ":"dhx_spreadsheet_link").map((function(e){return e.trim()})):[l.css]);for(var u={},d=0,h=c;d<h.length;d++){var f=h[d];u=r(r({},u),dhx.css.get(f))}return u}}},t.prototype.setStyle=function(e,t){if(e&&t&&this.events.fire(F.SpreadsheetEvents.beforeStyleChange,[e,t])){var i=(0,I.getCellIds)(e,this._grid),n=i.row,o=i.col;Object.keys(t).length?this._callAction({val:t,row:n,col:o,cell:e,action:F.Actions.setCellStyle,groupAction:F.Actions.groupAction}):this._callAction({row:n,col:o,cell:e,action:F.Actions.removeCellStyles,groupAction:F.Actions.groupAction,dataStore:this._dataStore})}},t.prototype.setFilter=function(e,t){e&&(0,I.isRangeId)(e)&&e.includes(",")||this._callAction({val:t,cell:null!=e?e:"A1",action:F.Actions.filter})},t.prototype.getFilter=function(e){var t=this._getSheet(e)||this.getActiveSheet(),i=this._dataStore.getPage(t.name);if(i)return i.getMeta().filter},t.prototype.getFormat=function(e){var t,i=this;if(e){var n=this._parseCell(e),o=n.page,r=n.cleanCell;if(o){if(e=r.toUpperCase(),(0,I.isRangeId)(e)){var a=[];return this.eachCell((function(e){var t;a.push((null===(t=(0,I.getCellInfo)(e,o,i._grid).format)||void 0===t?void 0:t.id)||"common")}),e),a}var s=null===(t=(0,I.getCellInfo)(e,o,this._grid).format)||void 0===t?void 0:t.mask;return(0,S.getDefaultFormatsMap)()[s]||s}}},t.prototype.setFormat=function(e,t){if(e){var i=this._parseCell(e),n=i.page,o=i.cleanCell;n&&(e=o.toUpperCase(),this._callAction({val:t,cell:e,action:F.Actions.setCellFormat,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:n}))}},t.prototype.clearSheet=function(e){var t=this._getSheet(e)||this.getActiveSheet();this.events.fire(F.SpreadsheetEvents.beforeSheetClear,[t])&&(this._callAction({val:t.name,action:F.Actions.clearSheet,groupAction:F.Actions.groupAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterSheetClear,[t]))},t.prototype.clear=function(){this.events.fire(F.SpreadsheetEvents.beforeClear,[])&&(this._callAction({action:F.Actions.clear,groupAction:F.Actions.groupAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterClear,[]))},t.prototype.isLocked=function(e){var t=this;if(e){var i=this._parseCell(e),n=i.page,o=i.cleanCell;if(n){if(e=o.toUpperCase(),"start"in(0,I.getCellIds)(e,this._grid)){var r=!1;return this.eachCell((function(e){if(!r){var i=(0,I.getCellInfo)(e,n,t._grid).locked;r=i}}),e),r}return!!(0,I.getCellInfo)(e,n,this._grid).locked}}},t.prototype.lock=function(e){if(e){var t=this._parseCell(e),i=t.page,n=t.cleanCell;if(i){e=n.toUpperCase();var o=(0,I.getCellIds)(e,this._grid);this._callAction({row:o.row,col:o.col,val:!0,cell:e,action:F.Actions.lockCell,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:i}),this._grid.paint()}}},t.prototype.unlock=function(e){if(e){var t=this._parseCell(e),i=t.page,n=t.cleanCell;if(i){e=n.toUpperCase();var o=(0,I.getCellIds)(e,this._grid);this._callAction({row:o.row,col:o.col,val:!1,cell:e,action:F.Actions.lockCell,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:i}),this._grid.paint()}}},t.prototype.addRow=function(e){this.events.fire(F.SpreadsheetEvents.beforeRowAdd,[e])&&((0,I.isRangeId)(e)&&(e=e.split(":")[0]),this._callAction({cell:e,action:F.Actions.addRow,groupAction:F.Actions.groupRowAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterRowAdd,[e]))},t.prototype.deleteRow=function(e){if(this.events.fire(F.SpreadsheetEvents.beforeRowDelete,[e])){var t=(0,I.getCellIds)(e,this._grid);this._callAction({row:t.row,col:t.col,cell:e,action:F.Actions.deleteRow,groupAction:F.Actions.groupRowAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterRowDelete,[e])}},t.prototype.addColumn=function(e){this.events.fire(F.SpreadsheetEvents.beforeColumnAdd,[e])&&((0,I.isRangeId)(e)&&(e=e.split(":")[0]),this._callAction({cell:e,action:F.Actions.addColumn,groupAction:F.Actions.groupColAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterColumnAdd,[e]))},t.prototype.deleteColumn=function(e){this.events.fire(F.SpreadsheetEvents.beforeColumnDelete,[e])&&(this._callAction({cell:e,action:F.Actions.deleteColumn,groupAction:F.Actions.groupColAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterColumnDelete,[e]))},t.prototype.undo=function(){this._actionsManager.undo()},t.prototype.redo=function(){this._actionsManager.redo()},t.prototype.startEdit=function(e,t){if(!this.config.readonly&&!this._range.mode){if(this._editMode)return this._editLine.setValueAtRedactor(t);var i=this.selection.getFocusedCell();if(e||(e=i),e=e.toUpperCase(),this._checkForMissedCells(e),this.events.fire(F.SpreadsheetEvents.beforeEditStart,[e,t])&&!this.isLocked(e)){i!==e&&(this.endEdit(!0),this.selection.setSelectedCell(e,!1));var n=(0,I.getCellInfo)(e,this._activePage,this._grid),o=n.edited,r=n.link;if(this.selection.getSelectedCell()||this.selection.setSelectedCell(e,!1),r)return this._showLinkPopup(e);if(!o){var a=(0,I.getCellIds)(e,this._grid),s=a.row,l=a.col,c=(0,$.toId)(s,l,this._activePage.getID()),u=this._math.getMath(c),d=(0,I.getCellInfo)(e,this._activePage,this._grid).format;u&&!t&&(t=(0,S.getFormattedFormula)({formula:"="+u.source,format:d,store:this._math})),this._activePage.setCell(s,l,{edited:!0,nextValue:t,editorValue:t}),t&&this._editLine.setValue(t),this.events.fire(F.SpreadsheetEvents.afterEditStart,[e,t])}}}},t.prototype.endEdit=function(e){var t=this.selection.getFocusedCell(),i=(0,I.getCellInfo)(t,this._activePage,this._grid),n=i.edited,o=i.nextValue,r=i.format,a=i.value;if(n){if(!this.events.fire(F.SpreadsheetEvents.beforeEditEnd,[t,o]))return;if(o&&this._activePage.setMeta({inserted:!0}),!e&&void 0!==o){if((null==r?void 0:r.id.includes("time"))&&(0,S.isNumeric)(a))if((l=(0,U.timeStringToJS)(o))instanceof Date)(c=(0,U.excelDateToJSDate)(a)).setHours(l.getHours(),l.getMinutes(),l.getSeconds()),o=(0,U.getExcelDateFromJs)(c);var s=this.config.localization.dateFormat;if("date"===(null==r?void 0:r.id)&&(0,S.isNumeric)(a)&&(0,q.stringToDate)(o,s,!0)){var l=(0,q.stringToDate)(o,s),c=(0,U.excelDateToJSDate)(a);l.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),o=(0,U.getExcelDateFromJs)(l)}this.setValue(t,o)}var u=(0,I.getCellIds)(t,this._grid),d=u.row,h=u.col;this._activePage.setCell(d,h,{nextValue:void 0,edited:!1}),this._editLine.blur(),this.events.fire(F.SpreadsheetEvents.afterEditEnd,[t,o])}},t.prototype.addSheet=function(e){if(this.config.multiSheets){var t=e;if(t||(t=this._generateNewSheetName()),this.events.fire(F.SpreadsheetEvents.beforeSheetAdd,[t]))return this._callAction({val:t,action:F.Actions.addSheet,groupAction:F.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:this._tabbar.getSelected()[0]}),this._sheets.find((function(e){return e.value===t})).id}},t.prototype.removeSheet=function(e){var t=this._getSheet(e);!t||!this.config.multiSheets||this.config.multiSheets&&2===this._sheets.getLength()||this.events.fire(F.SpreadsheetEvents.beforeSheetRemove,[t])&&(this._callAction({action:F.Actions.deleteSheet,groupAction:F.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:t.id,val:t.name}),this.events.fire(F.SpreadsheetEvents.afterSheetRemove,[t]))},t.prototype.getActiveSheet=function(){return this._activeSheetName},t.prototype.setActiveSheet=function(e){this.endEdit(),this._changeSheet(e)},t.prototype.setValidation=function(e,t){var i=this._parseCell(e),n=i.page,o=i.cleanCell;n&&(e=o.toUpperCase(),this._callAction({val:(0,I.isRangeId)(e)?[t]:t,cell:e,action:F.Actions.setValidation,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:n}))},t.prototype.search=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t=!1),this._searchForm||(this._searchForm=new J.SearchForm(this));var n=this._activePage,o=this._getSheet(i);if((0,V.isDefined)(i)){if(!o)return;n=this._dataStore.getPage(o.name)}return this._activePage!==n&&o&&t&&this._changeSheet(o.id),t&&this._searchForm.show(n),this._searchForm.search(e,n)},t.prototype.hideSearch=function(){var e;null===(e=this._searchForm)||void 0===e||e.hide()},t.prototype.insertLink=function(e,t){e&&this._callAction({val:t,cell:e,action:F.Actions.insertLink,dataStore:this._dataStore,page:this._activePage})},t.prototype.fitColumn=function(e){this._callAction({cell:e,action:F.Actions.fitColumn,dataStore:this._dataStore,page:this._activePage})},t.prototype.sortCells=function(e,t){void 0===t&&(t=1),this._callAction({action:F.Actions.sortCells,groupAction:F.Actions.sortCells,dataStore:this._dataStore,cell:e,dir:t,page:this._activePage})},t.prototype.mergeCells=function(e,t){void 0===t&&(t=!1),this._spanControl.doAction(e,t)},t.prototype._showLinkPopup=function(e){e&&!this._contextMenuVisible&&this._linkForm.show(e,(0,I.getCellInfo)(e,this._activePage,this._grid))},t.prototype._showFilter=function(e,t){t.stopPropagation();var i=this._activePage.getMeta().filter;this._filterForm.show(e,t,i,this._activePage)},t.prototype._checkValidation=function(e){var t=(0,I.getCellInfo)(e,this._activePage,this._grid),i=t.editor,n=t.value;if(!i)return!0;var o=i.options;if("string"==typeof o){var r=(0,I.getCellIds)(o,this._grid),a=r.start,s=r.end,l=r.row,c=r.col;o=(o=l?[this._activePage.getValue(l,c)]:this._activePage.getRange(a.row,a.col,s.row,s.col)).map((function(e){return"".concat(e)}))}return"number"!=typeof n&&!n||o.includes("".concat(n))},t.prototype._renameSheet=function(e,t){var i=this._sheets.getItem(e);i&&t&&i.prevValue!==t&&this.events.fire(F.SpreadsheetEvents.beforeSheetRename,[{name:i.value,id:i.id},t])&&(this._callAction({val:t,action:F.Actions.renameSheet,groupAction:F.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:e}),this.events.fire(F.SpreadsheetEvents.afterSheetRename,[{name:i.value,id:i.id}]))},t.prototype._getSheet=function(e){return this.getSheets().find((function(t){return t.id===e}))},t.prototype._changeSheet=function(e){var t=this,i=this._sheets.getItem(e);if(i&&this.events.fire(F.SpreadsheetEvents.beforeSheetChange,[this._activeSheetName])){var n=this._activePage,o=this._grid.getScrollState();n&&n.setMeta({scroll:o});var r=this._activeSheetName?this._activeSheetName.name:null,a=this._editLine.isCellExpected("A1",!1,this._range.inline&&this._range.editor||null),s=this.selection&&this.selection.getFocusedCell(),l=(0,I.getCellInfo)(s,this._activePage,this._grid);l&&l.edited&&!a&&this.endEdit(),this._activePage=this._dataStore.getPage(i.value),this._activeSheetName={name:i.value,id:e},this._tabbar.select(e);var c=this._activePage.getMeta()&&this._activePage.getMeta();if(this._activePage&&!c.toolbarId&&this._activePage.setMeta({toolbarId:e}),a&&!this._editMode||a&&this._editMode.page!==this._activePage)this._activePage.setMeta({selectedCells:null,focusedCell:null}),this._editMode=this._editMode||{page:n,cell:s,pageName:r};else if(a&&this._editMode&&this._editMode.page===this._activePage){var u=this._editLine.getValue();this._editMode=null,this._editLine.setValue(u),this._awaitRedraw((function(){t._editLine.focus(),t.events.fire(F.SpreadsheetEvents.editLineInput,[u]),t._editLine.setCursor(a)}))}else this._editLine.setCellMath(),this._editMode=null;(null==n?void 0:n.getMeta().filter)!==c.filter&&this._filterForm.applyFilter(this._activePage),this.events.fire(F.SpreadsheetEvents.afterSheetChange,[this._activeSheetName]),this._grid.paint(),this._awaitRedraw((function(){t._updateGridSizes(),t._updateGridState(),t.selection.getSelectedCell()||t._editMode||t.selection.setSelectedCell("A1",!1),G.focusManager.setFocusId(t._uid)}))}},t.prototype._callAction=function(e){var t={dataStore:this._dataStore,page:this._activePage,cell:this.selection.getFocusedCell()};if(e&&!this.config.readonly)if(Array.isArray(e))this._actionsManager.execute(e);else{var i=e.page||this._activePage,n=e.cell;if(null==n?void 0:n.includes("!")){var o=n.split("!");if(n=o[1],!(i=this._dataStore.getPage(o[0])))return}(e=r(r({},e),{cell:n,page:i})).dataStore=this._dataStore,(0,I.isRangeId)(e.cell)&&e.groupAction?this._actionsManager.execute(e.groupAction,r(r({},t),e)):this._actionsManager.execute(e.action,r(r({},t),e))}},t.prototype._initLayout=function(){this._grid=new f.Grid(null,{rowHeight:32,headerRowHeight:32,headerSort:!1,tooltip:!1,sortable:!1,leftSplit:1+(this.config.leftSplit||0),topSplit:this.config.topSplit||0}),this.menu=new g.Menu(null,{navigationType:"click"}),this.menu.data.parse((0,y.getMenuStruct)(this.config)),this.toolbar=new v.Toolbar;var e=(0,b.getToolbarStruct)(this.config.toolbarBlocks,this.config);this.toolbar.data.parse(e),this.contextMenu=new g.ContextMenu,this.contextMenu.data.parse((0,m.getContextMenuStruct)()),this.sheetContextMenu=new g.ContextMenu,this.sheetContextMenu.data.parse((0,m.getSheetsContextMenuStruct)(this.config.multiSheets)),this._tabbar=new v.Toolbar(null,{css:"dhx-sheets-toolbar"}),this._sheets=this._tabbar.data,this._sheets.parse([{value:"sheet1"}]),this._dataStore=(0,N.initMathStore)(this._sheets),this._math=this._dataStore.getStore(),this._editLine=new w.EditLine(null,{events:this.events,grid:this._grid,store:this._activePage,spreadsheet:this,math:this._math}),this.config.multiSheets&&!this.config.readonly&&this._sheets.add({icon:"dxi dxi-plus",id:"add-sheet"},0);var t=this._layout=new p.Layout(null,{height:"100%",rows:[{id:"menu",css:"menu_wrapper",height:"content"},{id:"toolbar",css:"toolbar_wrapper",height:"content"},{id:"editLine",css:"editLine_wrapper",height:"content"},{id:"grid",css:"dhx-spreadsheet-grid dhx_layout-cell--gravity"},{id:"tabbar",css:"sheetbar_wrapper",height:"content"}]});t.getCell("menu").attach(this.menu,this),t.getCell("toolbar").attach(this.toolbar,this),t.getCell("grid").attach(this._grid,this),t.getCell("editLine").attach(this._editLine,this),t.getCell("tabbar").attach(this._tabbar,this);var i=this.config.multiSheets&&!this.config.readonly?1:0;this._dataStore.getPage(this._sheets.getItem(this._sheets.getId(i)).value).setMeta({leftSplit:this.config.leftSplit}),this._changeSheet(this._sheets.getId(i)),this.config.editLine&&!this.config.readonly||t.getCell("editLine").hide(),this.config.menu&&!this.config.readonly||t.getCell("menu").hide(),!this.config.readonly&&e&&e.length||t.getCell("toolbar").hide(),this.config.multiSheets||t.getCell("tabbar").hide()},t.prototype._generateGridStruct=function(){for(var e=this,t=this.serialize(),i=this.config,n=i.rowsCount,o=i.colsCount,s=[],c=1;c<=n;c++){for(var u={id:"".concat(c),$index:c},d=1;d<=o;d++)u[d]="";s.push(u)}var h,f=[{id:"$index",width:40,header:[{text:"",css:"dxi dxi-select-all"}],htmlEnable:!0,editable:!1,align:"right",template:function(e,t){return(0,x.getIndexRowCell)(t.$index)}}],p=!1,v=function(t){var i=t.el;e._range.editor=i,e._range.inline=1,i.focus(),i.setSelectionRange(i.value.length,i.value.length),e._range.cursor=i.value.length,i.addEventListener("blur",(function(t){e._range.cursor=i.selectionStart,function(t){requestAnimationFrame((function(){p&&setTimeout((function(){e._restoreFocus(t)}))}))}(t)})),i.addEventListener("focus",(function(){e._range.inline=1})),p=!0},g=function(){e._range.editor=null,p=!1},_=function(t,i){p&&e.events.fire(F.SpreadsheetEvents.cellInput,[t,i.target.value])};this.events.on(F.SpreadsheetEvents.gridRedraw,(function(){h=null}));var m=function(t,i,n){var o,s;h||(h=e.selection.getFocusedCell());var c=n.$letter+i.$index,u=(0,I.getCellIds)(c,e._grid),d=e._activePage.getCell(u.row,u.col)||{},f=e._activePage.getMeta().filter,p=!1,m=!1;if(f){var y=f.cell,b=f.rules,w=(0,I.getCellIds)(y,e._grid),x=w.start,C=w.end;if(x.row===u.row&&u.col>=x.col&&u.col<=C.col){var E=(0,I.getCellNameById)(e._grid,x.row+1,C.col+1);p=!0;var k=b[(0,I.getCellsArray)("".concat(y.split(":")[0],":").concat(E),e._grid).indexOf(c)]||{},M=k.condition,O=k.exclude;m=!(!M&&!O)}}var A=d,D=A.locked,F=A.edited,T=A.nextValue,R=A.editor,H=A.css,L=A.format,j=A.link,N=e._activePage.getValue(u.row,u.col,"@"===(null==L?void 0:L.mask)),$=F&&(0,V.isDefined)(T)?T:N;if(h&&F){var z=null==L?void 0:L.id;if((null==z?void 0:z.includes("date"))&&!e._editors[z]&&(e._editors[z]=new P.DateEditor(e.endEdit.bind(e),(0,U.getDHXDateFormat)(null==L?void 0:L.mask),e.events)),(null==z?void 0:z.includes("time"))&&!e._editors[z]&&(e._editors[z]=new Y.TimeEditor(e.endEdit.bind(e),(0,U.getDHXDateFormat)(null==L?void 0:L.mask),e.events)),"select"===(null==R?void 0:R.type)){e._editors.select||(e._editors.select=new X.SelectEditor(e.endEdit.bind(e),e.events));var B=R.options;e._editors.select.setValue("string"==typeof B?e.getValue(B.replace(/=|\$/g,"")):B)}var W={oninput:[_,c],_hooks:{didInsert:v.bind(e),didRemove:g.bind(e)},class:H,_key:"selection_input","data-dhx-id":"cell_input",value:null==T?L?(0,S.getFormattedValue)($,L):$:T};return e._editors[z]?e._editors[z].toHTML(r(r({},W),{format:L})):"select"===(null===(o=d.editor)||void 0===o?void 0:o.type)?e._editors.select.toHTML(W):(0,l.el)("input.dhx_cell_input",W)}var G=[],q=!R||e._checkValidation(c);if(j&&!j.text){var K=j.href;"".concat($).split(" ").forEach((function(e){e===K?(G.push((0,l.el)("span",{class:H||""},[K])),G.push(" ")):G.push("".concat(e," "))}))}else if(j){var J=j.text,Z=j.href,Q=J||Z;G.push((0,l.el)("span.dhx_spreadsheet_link",{class:H},[L?(0,S.getFormattedValue)(Q,L):Q]))}else G.push(L?(0,S.getFormattedValue)($,L):$);return(0,l.el)(".dhx_spreadsheet_cell",{class:H},a(a([D&&(0,l.el)(".dhx_lock_icon.dxi.dxi-key")],G,!0),["select"===(null===(s=d.editor)||void 0===s?void 0:s.type)?[(0,l.el)(".dxi.dxi-menu-down.dhx_spreadsheet_cell_icon.drop-down",{onclick:function(){return e.startEdit(c)}}),(0,l.el)(".dhx_spreadsheet_cell-placeholder")]:null,p&&[(0,l.el)(".dxi.dxi-filter-variant.dhx_spreadsheet_cell_icon.filter".concat(m?"-filtered":""),{onclick:function(t){return e._showFilter(c,t)},ondblclick:function(t){return e._showFilter(c,t)}}),(0,l.el)(".dhx_spreadsheet_cell-placeholder")],!q&&(0,l.el)(".dhx_spreadsheet_cell-not_valid")],!1))};for(c=1;c<=o;c++){var y=(0,I.getLetterFromNumber)(c);f.push({id:"".concat(c),width:120,$letter:y,type:"string",header:[{text:(0,x.getHeaderCell)(y,c,!this.config.readonly),align:"center"}],htmlEnable:!0,template:m})}this._grid.setColumns(f),this._grid.data.parse(s),this.parse(t),this._sizes.rowsCount=this.config.rowsCount,this._sizes.colsCount=this.config.colsCount},t.prototype._checkForMissedCells=function(e){e.includes("!")&&(e=e.split("!")[1]);var t=(0,I.isRangeId)(e)?(0,I.getRangeIndexes)(e,this._grid).end:(0,I.getCellIndex)(e,this._grid);(t.row>this.config.rowsCount||t.col>this.config.colsCount)&&(this.config.rowsCount=Math.max(this.config.rowsCount,t.row+1),this.config.colsCount=Math.max(this.config.colsCount,t.col),this._generateGridStruct())},t.prototype._generateNewSheetName=function(){var e=this._sheets.findAll((function(e){return e.value&&e.value.startsWith("sheet")}));return e.length?(e=e.map((function(e){return+e.value.split("sheet")[1]})).filter((function(e){return!!e})),"sheet".concat(Math.max.apply(Math,e)+1)):"sheet1"},t.prototype._updateGridSizes=function(){var e=this._activePage.getSize(),t=e[0],i=e[1],n=this._grid.config.columns,o=this._grid.data.getLength(),a=this._activePage.getMeta(),s=a.cols,l=a.rows,c=this._grid.config.rowHeight,u=this._grid.data.getInitialData();if(i!==n.length||s.length!==i||t!==o||l!==o){for(;l.length<t;)l.push({height:c});for(var d=[],h=0;h<l.length;h++){for(var f=r(r({},u[h]),{id:"".concat(h+1),$index:h+1,height:l[h].height||c}),p=0;p<=i;p++)f[p]="";d.push(f)}for(;s.length<i;)s.push({width:120});var v=[n[0]],g=n[n.length-1];for(h=0;h<s.length;h++){var _=(0,I.getLetterFromNumber)(v.length);v.push({id:"".concat(v.length),width:s[h].width||120,$letter:_,type:"string",header:[{text:(0,x.getHeaderCell)(_,v.length,!this.config.readonly),align:"center"}],htmlEnable:!0,template:g.template})}this._grid.setColumns(v),this._grid.data.parse(d);var m=this.selection.getFocusedCell();if(m){var y=(0,I.getCellIds)(m,this._grid),b=y.col,w=(f=y.row)>l.length-1,C=b>s.length-1;if(C||w){var E=(0,I.getCellNameById)(this._grid,w?l.length:f+1,C?s.length:b+1);this.selection.setSelectedCell(E,!1)}}}},t.prototype._updateGridState=function(){var e=this;this._grid.config.spans=[];var t=this._activePage.getMeta(),i=t.scroll,n=void 0===i?{x:0,y:0}:i,o=t.cols,s=t.rows,l=t.merged,c=void 0===l?[]:l,u=this._grid.config.columns,d=u[0],h=u.slice(1),f=n.x,p=n.y;this._grid.scroll(f,p),h.forEach((function(e,t){e.width=o[t]?o[t].width:e.width})),this._grid.setColumns(a([d],h,!0)),this._grid.data.forEach((function(t,i){if(s[i]){var n=s[i].height;t.height!==n&&e._grid.data.update(t.id,{height:n})}})),this._grid.config.spans=c.map((function(t){var i=t.from,n=t.to,o=i.row,a=i.column,s=+n.row-+o+1,l=+n.column-+a+1;return(0,ie.normalizeSpan)({row:"".concat(+o+1),column:"".concat(+a+1),rowspan:s>1?s:void 0,colspan:l>1?l:void 0},r({},e._grid.config),e._grid.data)})),this.selection._removeHeadersCss(),this.selection._setHeadersCss()},t.prototype._updateToolbar=function(e){void 0===e&&(e=this.selection.getFocusedCell()),e===this.selection.getFocusedCell()&&(0,M.updateToolbar)(this.toolbar,this.menu,this._activePage,this._grid)},t.prototype._setEventsHandlers=function(){var e=this;this.events.on(F.SpreadsheetEvents.editLineInput,(function(t){G.focusManager.setFocusId(e._uid);var i=e.selection.getFocusedCell();e.events.fire(F.SpreadsheetEvents.cellInput,[i,t])})),this.events.on(F.SpreadsheetEvents.editLineFocus,(function(){var t=e.selection.getFocusedCell();e.startEdit(t),e._range.inline=0,requestAnimationFrame((function(){e._editLine.focus()}))})),this.events.on(F.SpreadsheetEvents.cellInput,(function(t,i){if(!e.isLocked(t)){var n=(0,I.getCellIds)(t,e._grid),o=n.row,r=n.col;e._activePage.setCell(o,r,{nextValue:i}),e._grid.paint()}})),this._grid.events.on(f.GridEvents.cellMouseDown,(function(){e.contextMenu._close(),e.sheetContextMenu._close()})),this._grid.events.on(f.GridEvents.scroll,(function(){e._linkForm.hideInfo()})),this.events.on(F.SpreadsheetEvents.afterPopupHide,(function(){G.focusManager.setFocusId(e._uid)})),this.events.on(F.SpreadsheetEvents.afterAction,(function(t,i){var n;switch(t){case F.Actions.resizeRow:var o=e._grid.data.map((function(t){return{height:t.$height||e._grid.config.rowHeight,changedByUser:t.changedByUser}}));e._activePage.setMeta({rows:o});break;case F.Actions.resizeCol:var a=e._activePage,s=a.getMeta().cols,c=e._grid.config.columns.slice(1).map((function(e,t){return r(r({},s[t]),{width:e.width})}));a.setMeta({cols:c});var u=(0,I.getCellsArray)(i.cell,e._grid)[0],d=(0,I.getCellIds)(u,e._grid).col,h=(s[d]||{}).wrappedRows,f=!1;(null==h?void 0:h.size)&&h.forEach((function(t,i){var n=(0,I.getCellNameById)(e._grid,t+1,d+1),o=!!(0,x.setAutoHeightToRow)(n,e._grid,e._activePage,"wrap");f=f||o})),f&&e._updateGridSizes();break;case F.Actions.insertLink:e.selection.setFocusedCell(e.selection.getFocusedCell(),!1);break;case F.Actions.filter:case F.Actions.merge:case F.Actions.unmerge:e._updateToolbar(e.selection.getFocusedCell());break;case F.Actions.sortCells:e._activePage.getMeta().filter&&(null===(n=e._filterForm)||void 0===n||n.applyFilter(e._activePage));break;case F.Actions.setCellValue:case F.Actions.setCellFormat:var p=i.cell,v=i.page;if(p&&v){var g=(0,I.getCellInfo)(p,v,e._grid),_=g.css,m=void 0===_?"":_,y=g.$toolbarAlign,b=g.format;if(!y){var w=(0,I.getCellIds)(p,e._grid),C=w.row,E=w.col,S=v.getValue(C,E),k=dhx.css.get(m)||{};m=dhx.css.add((0,I.convertStyles)(r(r({},k),{"text-align":"number"==typeof S&&"text"!==(null==b?void 0:b.id)?"right":"left"}))),v.setCell(C,E,{css:m})}}break;case F.Actions.groupAction:(0,l.awaitRedraw)().then((function(){e._updateGridState()}))}e._syncEditLine()})),this.events.on(F.SpreadsheetEvents.beforeAction,(function(t,i){var n=e._grid.getScrollState();switch(e._activePage.setMeta({scroll:n}),t){case F.Actions.sortCells:return e._spanControl.checkBeforeAction(i.cell,e._activePage,A.default.sort);case F.Actions.filter:return e._spanControl.checkBeforeAction(i.cell,e._activePage,A.default.filter);default:return!0}})),this.events.on(F.SpreadsheetEvents.beforeSelectionSet,(function(t){var i=e._range;if(i.mode)return!0;var n=e._editLine.isCellExpected(t,!1,i.inline&&i.editor||null);return n>0?(i.cursor=n,i.cell=e.selection.getFocusedCell(),i.mode=1,!0):!e.config.readonly&&(e._linkForm.hide(),e._linkForm.hideInfo(),void(!e._editMode&&e.endEdit()))})),this.events.on(F.SpreadsheetEvents.afterSelectionSet,(function(t){var i,n=e._range;!n.mode&&e._editMode&&e._editLine.setCellMath(),1===n.mode&&(n.mode=2,!e._editMode&&e.selection.setSelectedCell(n.cell,!1),n.mode=0,n.cursor=e._editLine.isCellExpected(t,!0,n.inline?n.editor:null,n.cell),n.cell=""),e._grid.paint();var o=(0,I.getCellIds)(t,e._grid),r=o.row,a=o.col,s=e._activePage.getCell(r,a)||{},l=s.link;if((null==l?void 0:l.href)&&e._awaitRedraw((function(){var i;e._contextMenuVisible||(null===(i=e._linkForm)||void 0===i?void 0:i.isVisible())||e._linkForm.showInfo(t,s)})),!e._checkValidation(t)){if((0,I.isRangeId)(t))return;var c=(0,I.getCellIds)(t,e._grid),u=c.row,d=c.col,h=null===(i=e.getRootNode())||void 0===i?void 0:i.querySelector('[aria-rowindex = "'.concat(u+1,'"].dhx_grid-row [aria-colindex = "').concat(d+2,'"]'));new Z.tooltip("Invalid value",{node:h,position:Z.Position.right,force:!0,margin:2,css:"dhx_spreadsheet-invalid-tooltip"})}})),this.events.on(F.SpreadsheetEvents.afterFocusSet,(function(t){e._range.mode||e._editMode||e._syncEditLine(t)})),this.events.on(F.SpreadsheetEvents.afterStyleChange,(function(t){e._updateToolbar(t)})),this.events.on(F.SpreadsheetEvents.afterFormatChange,(function(t){e._updateToolbar(t)})),this.events.on(F.SpreadsheetEvents.afterEditStart,(function(){e._grid.paint()})),this.events.on(F.SpreadsheetEvents.afterEditEnd,(function(t){var i;e._grid.paint();var n=(0,I.getCellInfo)(t,e._activePage,e._grid).format;null===(i=e._editors[null==n?void 0:n.id])||void 0===i||i.hidePopup()})),this._tabbar.events.on(R.NavigationBarEvents.click,(function(t){"add-sheet"===t?e.addSheet():e._changeSheet(t)})),this.sheetContextMenu.events.on(R.NavigationBarEvents.click,(function(t){if("delete"===t)e.removeSheet(e._focusedSheet);else{var i=e._tabbar.data.getItem(e._focusedSheet);e._tabbar.data.update(i.id,{type:"input"}),e._awaitRedraw((function(){var t=e._tabbar.getRootNode().querySelector("input");t.focus(),t.onkeyup=function(n){"Enter"===n.key&&t.blur(),"Escape"===n.key&&e._sheets.update(i.id,{type:"navItem",value:i.prevValue})}}))}})),this.sheetContextMenu.events.on(R.NavigationBarEvents.afterHide,(function(){e._focusedSheet=null})),this._tabbar.events.on(R.NavigationBarEvents.inputFocus,(function(t){var i=e._sheets.getItem(t);e._sheets.update(t,{prevValue:i.value})})),this._tabbar.events.on(R.NavigationBarEvents.inputBlur,(function(t){var i=e._sheets.getItem(t),n=i.value;if(e._sheets.find((function(e){return e.value===n&&e.id!==i.id}))){e._getErrorWindow();var o=A.default.renameSheetAlert.split("$name"),r=o[0],a=o[1];return e._errorAlert.attachHTML("<p>".concat(r,"<b>").concat(n,"</b>").concat(a,"</p>")),e._errorAlert.show(),e._errorAlert.footer.events.on(R.NavigationBarEvents.click,(function(){return e._errorAlert.hide()})),e._errorAlert.events.on(z.WindowEvents.afterHide,(function(){e._sheets.update(i.id,{value:i.prevValue}),e._tabbar.getRootNode().querySelector("input").focus()})),!1}e._sheets.update(t,{type:"navItem",value:i.prevValue}),e._renameSheet(t,n)})),this.toolbar.events.on(R.NavigationBarEvents.click,(function(t,i){"format"!==t&&"valign"!==t&&"halign"!==t&&"multiline"!==t&&(e.endEdit(),e._handleAction(t,i))})),this.contextMenu.events.on(R.NavigationBarEvents.click,(function(t,i){e.endEdit(),e._handleAction(t,i)})),this.contextMenu.events.on(R.NavigationBarEvents.afterHide,(function(){e._contextMenuVisible=!1,e.contextMenu.hide("fit-col"),e.contextMenu.show("link")})),this._grid.events.on(f.GridEvents.headerCellClick,(function(t,i){if(i.target.className.includes("dhx_header_icon"))return e.contextMenu.hide("link"),e.contextMenu.show("fit-col"),void e.contextMenu.showAt(i)})),this.menu.events.on(R.NavigationBarEvents.click,(function(t,i){"format"!==t&&"valign"!==t&&"halign"!==t&&(e.endEdit(),e._handleAction(t,i))})),this._colorpicker.events.on(s.ColorpickerEvents.change,(function(t){var i;e._colorpickerPopup.hide();var n=e.selection.getSelectedCell();e._silencedColorChange||e.setStyle(n,((i={})[e._colorpickerTarget]=t,i)),e._silencedColorChange=!1,requestAnimationFrame((function(){G.focusManager.setFocusId(e._uid),e._activeInput&&(e._activeInput.focus(),e._activeInput=null)}))})),this.events.on(F.SpreadsheetEvents.editLineBlur,(function(t,i){e._restoreFocus(i)})),this.events.on(F.SpreadsheetEvents.groupFill,(function(t,i){e._fillCells(t,i)}))},t.prototype._syncEditLine=function(e){void 0===e&&(e=this.selection.getFocusedCell());var t=(0,I.getCellIds)(e,this._grid),i=t.row,n=t.col,o=this._activePage.getValue(i,n,!0);(0,S.isNumeric)(o)||o||(o="");var r=(0,I.getCellInfo)(e,this._activePage,this._grid);(0,M.updateToolbar)(this.toolbar,this.menu,this._activePage,this._grid);var a=r.format;this._editLine.setValue((null==o?void 0:o.toString().startsWith("="))?(0,S.getFormattedFormula)({formula:"".concat(o),format:a,store:this._math}):(0,S.getFormattedValue)(o,a)),r&&r.locked&&this._editLine.lock(),this._grid.paint()},t.prototype._getErrorWindow=function(){return this._errorAlert||(this._errorAlert=new B.Window({footer:!0,modal:!0,closable:!0,width:350,height:240,title:A.default.alertTitle}),this._errorAlert.footer.data.parse([{type:"button",view:"flat",size:"medium",color:"primary",value:A.default.ok,id:"ok"}])),this._errorAlert},t.prototype._awaitRedraw=function(e){var t=this;(0,l.awaitRedraw)().then((function(){t.getRootView()&&e()}))},t.prototype._handleAction=function(e,t){var i,n=this.selection.getSelectedCell(),o=this.selection.getFocusedCell(),r="";-1!==(0,V.findIndex)(this.config.formats,(function(t){return t.id===e}))&&(r=e,e="format");var a="",s="",l="";if("".concat(e).includes("align")){var c="".concat(e).split("-");e=c[0],a=c[1]}if("".concat(e).endsWith("sort")){c="".concat(e).split("-");e=c[1],s=c[0]}if("".concat(e).includes("multiline")){c="".concat(e).split("-");e=c[0],l=c[1]}switch(e){case"undo":this._actionsManager.undo();break;case"redo":this._actionsManager.redo();break;case"color":case"background":this._colorpickerTarget=e;var d=(0,I.getCellInfo)(n,this._activePage,this._grid),h=(0,I.getStylesObject)(d.css)[e]||{background:"#FFFFFF",color:"#4C4C4C"}[e];this._silencedColorChange=!0,this._colorpicker.setValue("white"===h?"#FFFFFF":(0,V.rgbToHex)(h));var f=(0,u.locateNode)(t,"data-dhx-id");this._colorpickerPopup.show(f);break;case"halign":this.setStyle(n,{"text-align":a});break;case"valign":this.setStyle(n,{"vertical-align":a});break;case"multiline":this.setStyle(n,{multiline:l});break;case"font-weight-bold":case"font-style-italic":case"text-decoration-line-through":case"text-decoration-underline":if(!n)return;for(var p=e.includes("line-through")?["text-decoration","line-through"]:e.split("-"),v=p.pop(),g=p.join("-"),_=0,m=n.split(",");_<m.length;_++){var y=m[_];v=(0,M.getToggledValue)(this._activePage,y,g,v,this._grid),this.setStyle(y,((i={})[g]=v,i))}break;case"clear-value":this.setValue(n,"");break;case"clear-styles":this.setStyle(n,{});break;case"clear-all":if(!n)return;this._callAction([{cell:n,action:F.Actions.setCellStyle,groupAction:(0,I.isRangeId)(n)?F.Actions.groupAction:null,val:"",dataStore:this._dataStore,page:this._activePage},{cell:n,action:F.Actions.setCellValue,groupAction:(0,I.isRangeId)(n)?F.Actions.groupAction:null,val:"",page:this._activePage,dataStore:this._dataStore},{cell:n,action:F.Actions.setValidation,groupAction:(0,I.isRangeId)(n)?F.Actions.groupAction:null,val:null,page:this._activePage,dataStore:this._dataStore}]);break;case"lock":if(!n)return;for(var b=0,w=n.split(",");b<w.length;b++){y=w[b];this.isLocked(y)?this.unlock(y):this.lock(y)}break;case"remove-row":this.deleteRow(o);break;case"add-row":this.addRow(o);break;case"remove-col":this.deleteColumn(o);break;case"add-col":this.addColumn(o);break;case"fit-col":this.fitColumn(n.split(":")[0]);break;case"help":window.open("https://docs.dhtmlx.com/spreadsheet/user_guide.html");break;case"format":this.setFormat(n,r),this.paint();break;case"export-xlsx":this.export.xlsx();break;case"import-xlsx":this.load("","xlsx");break;case"validation":this._validationForm||(this._validationForm=new K.ValidationForm(this.events,this.setValidation.bind(this),this._grid)),this._validationForm.show(n,(0,I.getCellInfo)(n,this._activePage,this._grid));break;case"sort":this.sortCells(n,"asc"===s?1:-1);break;case"search":this.search("",!0);break;case"link":this._contextMenuVisible=!1,this._showLinkPopup(o);break;case"filter":var x=this._activePage.getMeta().filter;this.setFilter(n,x?null:[]);break;case"merge":this.mergeCells(n,this.toolbar.data.getItem("merge").active)}},t.prototype._parseCell=function(e){var t=this._activePage,i=e;if(e.includes("!")){var n=e.split("!");i=n[1],t=this._dataStore.getPage(n[0])}return{cleanCell:i,page:t}},t.prototype._fillCells=function(e,t){var i=this,n=[e],o=[t];if((0,I.isRangeId)(e)){var s=(0,k.getCellsDiff)(e.split(":")[1],t.split(":")[1],this._grid).isLargerByX?"row":"col";n=(0,I.getRangeMatrix)(e,this._grid,s).map((function(e){return e.length>1?e[0]+":"+e[e.length-1]:e[0]})),o=(0,I.getRangeMatrix)(t,this._grid,s).map((function(e){return e.length>1?e[0]+":"+e[e.length-1]:e[0]}))}var l=this._activePage.getMeta().merged,c=[],u=[],d=n.reduce((function(e,t,n){var a,s,d=o[n];if((0,I.isRangeId)(t))s=[],i.eachCell((function(e){var t,n=(0,I.getCellIds)(e,i._grid),o=n.row,a=n.col;if(!(null===(t=i._grid)||void 0===t?void 0:t.isRowHidden(o+1))){var c=r({},i._activePage.getCell(o,a)),u=i._activePage.getValue(o,a,!0);c.value=!(0,V.isDefined)(u)||(0,I.doesContainUrl)(u)?"":u;var d=(0,I.isCellSpaned)(e,l);d&&d.from.row===o&&d.from.column===a&&(c.span=(0,I.isCellSpaned)(e,l)),s.push(c)}}),t);else{var h=t,f=(0,I.getCellIds)(h,i._grid),p=r({},i._activePage.getCell(f.row,f.col)),v=i._activePage.getValue(f.row,f.col,!0);p.value=(0,U.getExcelDateFromString)(v,p.format)||"";var g=(null===(a=p.format)||void 0===a?void 0:a.id)||(0,S.getDefaultFormats)()[0].id,_=(0,I.isCellSpaned)(h,l);s=g.includes("date")||g.includes("time")||_?[p]:(0,I.doesContainUrl)(v)?"":v,_&&_.from.row===f.row&&_.from.column===f.col&&(p.span=(0,I.isCellSpaned)(h,l))}if(Array.isArray(s)){if(t===d)return e;var m=(0,k.getAutoFilledCells)(s,t,d,i._math,i._grid);d=m.cells,s=m.value,c.push.apply(c,m.spans)}var y=i.getStyle(t,!1),b=i.getFormat(t),w=[],x=[];if(i.eachCell((function(e){var t=(0,I.getCellInfo)(e,i._activePage,i._grid),n=t.editor,o=t.link;w.push(null==n?void 0:n.options),x.push(o||null)}),t),i.eachCell((function(e){u.push({cell:e,action:F.Actions.unmerge,groupAction:F.Actions.unmerge,page:i._activePage})}),d),e.push({cell:d,action:F.Actions.setCellFormat,groupAction:(0,I.isRangeId)(d)?F.Actions.groupAction:null,val:b,page:i._activePage},{cell:d,action:F.Actions.setCellStyle,groupAction:(0,I.isRangeId)(d)?F.Actions.groupAction:null,val:y,page:i._activePage,replace:!0},{cell:d,action:F.Actions.setValidation,groupAction:F.Actions.groupAction,val:w,page:i._activePage}),"string"==typeof s&&s.startsWith("=")){var C=(0,I.getCellIds)(t,i._grid);i.eachCell((function(t){var n=(0,I.getCellIds)(t,i._grid),o=i._math.transposeMath(s,n.row-C.row,n.col-C.col);e.push({cell:t,action:F.Actions.setCellValue,groupAction:null,val:o,page:i._activePage})}),d)}else e.push({cell:d,action:F.Actions.setCellValue,groupAction:(0,I.isRangeId)(d)?F.Actions.groupAction:null,val:s,page:i._activePage});return e.push({cell:d,action:F.Actions.insertLink,groupAction:F.Actions.groupAction,val:x,page:i._activePage}),e}),[]),h=[];c.forEach((function(e){h.push({cell:e,action:F.Actions.merge,groupAction:F.Actions.merge,page:i._activePage,$autofill:!0})})),this._callAction(a(a(a([],u,!0),d,!0),h,!0))},t.prototype._restoreFocus=function(e){var t,i,n=this,o=this._editLine.getRootView().node,r=o&&o.el,a=this._range.cell||this.selection.getFocusedCell(),s=(0,I.getCellIds)(a,this._grid).col<=this.config.leftSplit;if(!a||(0,I.getCellInfo)(a,this._activePage,this._grid).edited&&!s){var l=G.focusManager.getFocusId();if(l!==this._uid&&l!==this._grid._uid&&(null===(t=this._editLine._suggest)||void 0===t?void 0:t.isVisible())&&l!==(null===(i=this._editLine._suggest._list)||void 0===i?void 0:i._uid)&&l!==this._tabbar._uid)return this._colorpickerTarget?void(this._activeInput=e.target):void this.endEdit();var c=e.target,u=e.relatedTarget;if(!(r&&r.contains(u)||r&&r.contains(c)&&u&&"cell_input"===u.getAttribute("data-dhx-id")||"cell_input"===(null==u?void 0:u.getAttribute("data-dhx-id"))&&"cell_input"===c.getAttribute("data-dhx-id"))){var d=c;d.focus(),setTimeout((function(){var e=n._range.cursor||d.value.length;d.selectionStart>e&&d.setSelectionRange(e,e)}),100)}}},t.prototype._initHotkeys=function(){var e=this;if(!this.config.readonly){this.keyManager=new O.KeyManager((function(t,i){return i===e._uid||i===e._grid._uid||i===e.toolbar._uid}));var t=(0,W.getKeysHandlers)(this,this._grid,this._buffer,this._editLine);for(var i in t)this.keyManager.addHotKey(i,t[i]);for(var i in this.config.hotkeys)this.keyManager.addHotKey(i,this.config.hotkeys[i])}},t.prototype._render=function(){return(0,l.el)(".dhx_widget.dhx-spreadsheet",{dhx_widget_id:this._uid,_key:this._uid},[(0,l.inject)(this._layout.getRootView())])},t}(d.View);t.Spreadsheet=oe},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Colorpicker=void 0;var a=i(1),s=i(3),l=i(4),c=i(8),u=i(0),d=i(49),h=i(65),f=i(50),p=i(66),v=i(62),g=i(14),_=i(119),m=i(120),y=i(21),b=i(20),w=i(0),x=function(e){function t(t,i){var n=e.call(this,t,i)||this;n._setPaletteGrip=function(e){var t=n.getRootView().refs.picker_palette.el.getBoundingClientRect(),i=e.targetTouches?e.targetTouches[0].clientX:e.clientX,o=(e.targetTouches?e.targetTouches[0].clientY:e.clientY)-t.top,r=i-t.left,a=(0,m.calculatePaletteGrip)(t,o,r),s=a.s,l=a.v;n._pickerState.hsv.s=s,n._pickerState.hsv.v=l,n.paint()},n._setRangeGrip=function(e){var t=n.getRootView().refs[n._activeRange].el.getBoundingClientRect(),i=(e.targetTouches?e.targetTouches[0].clientX:e.clientX)-t.left,o=(0,m.calculateRangeGrip)(t,i),r=o.h,a=o.alpha,s=o.rangeLeft;switch(n._activeRange){case"hue_range":n._pickerState.hsv.h=r,n._pickerState.hueRangeLeft=s;break;case"alpha_range":n._pickerState.alpha=a,n._pickerState.alphaRangeLeft=s}n.paint()},n._onColorClick=function(e,t){var i=t.data.color.toUpperCase();n.events.fire(p.ColorpickerEvents.beforeChange,[i])&&(n._selected=i,n._focusColor(i),n.events.fire(p.ColorpickerEvents.change,[n._selected]),n.events.fire(p.ColorpickerEvents.colorChange,[n._selected]))},n._container=t,n.config=(0,u.extend)({css:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:h.palette,width:"238px",mode:"palette",transparency:!0},n.config),n.config.palette||(n.config.palette=h.palette),n.config.customColors&&(n.config.customColors=n.config.customColors.map((function(e){return e.toUpperCase()}))),n._pickerState={hsv:{h:0,s:1,v:1},customHex:"",alpha:1},n.events=new s.EventSystem(n),n._setHandlers(),n._keyManager=new y.KeyManager((function(e,t){return t===n._uid})),n._initHotKey();var o=(0,a.create)({render:function(){return n._getContent()}});return n.mount(n._container,o),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this._selected=this._handlers=this._pickerState=this._inputTimeout=null,this.unmount()},t.prototype.clear=function(){this.events.fire(p.ColorpickerEvents.beforeChange,[""])&&(this._selected="",this.events.fire(p.ColorpickerEvents.change,[this._selected,"clear"]),this.paint())},t.prototype.setValue=function(e){e=this.config.transparency||9!==e.length?e:e.slice(0,-2),this.events.fire(p.ColorpickerEvents.beforeChange,[e])&&(this._focusColor(e)||b.focusManager.getFocusId()===this._uid)&&(this.events.fire(p.ColorpickerEvents.change,[this._selected]),this.events.fire(p.ColorpickerEvents.colorChange,[this._selected]))},t.prototype.setFocus=function(e){this._focusColor(e)&&this.paint()},t.prototype.getValue=function(){return this._selected||""},t.prototype.getCustomColors=function(){return this.config.customColors},t.prototype.setCustomColors=function(e){this.config.customColors=e.map((function(e){return e.toUpperCase()})),this.paint()},t.prototype.setCurrentMode=function(e){"palette"!==e&&"picker"!==e||(this.config.mode=e,this.events.fire(p.ColorpickerEvents.modeChange,[e]),this.events.fire(p.ColorpickerEvents.viewChange,[e]),this.paint())},t.prototype.getCurrentMode=function(){return this.config.mode},t.prototype.getView=function(){return this.getCurrentMode()},t.prototype.setView=function(e){this.setCurrentMode(e)},t.prototype.focusValue=function(e){this.setFocus(e)},t.prototype._setHandlers=function(){var e=this;this._handlers={click:{".dhx_palette__cell":this._onColorClick},mousedown:function(t){e._pickerMove(t)},touchstart:function(t){e._pickerMove(t)},buttonsClick:function(t){if(e.setCurrentMode("palette"),"cancel"!==t){var i=e._pickerState.alpha,n=1!==i?(0,d.alphaToHex)(i):"",o=e._pickerState.background+n;"apply"!==t||e.config.customColors.includes(o)||(e.setValue(o),e.events.fire(p.ColorpickerEvents.apply,[]),e.events.fire(p.ColorpickerEvents.selectClick,[]))}else e.events.fire(p.ColorpickerEvents.cancelClick,[])},customColorClick:function(){e.setView("picker")},oninput:function(t){var i=(0,l.locate)(t);switch(e._inputTimeout&&clearTimeout(e._inputTimeout),i){case"hex_input":e._inputTimeout=setTimeout((function(){var i=t.target.value;-1===i.indexOf("#")&&(i="#".concat(i)),e._pickerState.customHex=i,(0,d.isHex)(i)&&(e._pickerState.hsv=(0,d.HexToHSV)(i),e._pickerState.alpha=(0,d.getAlpha)(i),e.paint())}),100);break;case"alpha_input":e._pickerState.customHex="";var n=parseInt(t.target.value);n>100&&(n=Math.trunc(n/10)),n>=0&&(e._pickerState.alpha=n/100,e.paint())}},contextmenu:{".dhx_palette__cell":function(t,i){t.preventDefault();var n=e.config.customColors.indexOf(i.data.color);-1!==n&&e._removeCustomColor(n),e.paint()}},mouseover:{".dhx_palette__cell":function(e){e.target&&(0,v.tooltip)(f.default.rightClickToDelete,{node:e.target,position:g.Position.bottom})},".dhx_colorpicker-custom-colors__picker":function(e){e.target&&(0,v.tooltip)(f.default.addNewColor,{node:e.target,position:g.Position.bottom})}}},this.events.on(p.ColorpickerEvents.change,(function(){e.paint()})),this.events.on(p.ColorpickerEvents.colorChange,(function(){e.paint()}))},t.prototype._pickerMove=function(e){var t=this,i=(0,l.locate)(e);this._pickerState.customHex="","picker_palette"===i?this._setPaletteGrip(e):(this._activeRange=i,this._setRangeGrip(e));var n="picker_palette"===i?this._setPaletteGrip:this._setRangeGrip,o=e.targetTouches?"touchmove":"mousemove",r=e.targetTouches?"touchend":"mouseup";document.addEventListener(o,n),document.addEventListener(r,(function(){document.removeEventListener(o,n),t._activeRange=null})),this.paint()},t.prototype._focusColor=function(e){if(void 0===e||e.length<4)return!1;var t=e.toUpperCase();if(!(0,d.isHex)(t))return!1;var i=this.config.palette.reduce((function(e,i){return e||(i.forEach((function(i){i.toUpperCase()!==t||(e=!0)})),e)}),!1),n=h.grayShades.includes(t);if(!i&&!n){var o=this.getCustomColors();o.includes(t.toUpperCase())||o.push(t.toUpperCase())}return this._selected=t||null,this._pickerState.hsv=(0,d.HexToHSV)(t),this._pickerState.alpha=(0,d.getAlpha)(t),!0},t.prototype._removeCustomColor=function(e){this.config.customColors.splice(e,1)},t.prototype._getCells=function(e,t){var i=this;return void 0===t&&(t=""),e.reduce((function(e,n){var o=(i._selected||"").toUpperCase()===n.toUpperCase()?"dhx_palette__cell--selected":"";return e.push((0,a.el)(".dhx_palette__cell",{class:"".concat(o," ").concat(t),_data:{color:n},style:"background:".concat(n),tabindex:0})),e}),[])},t.prototype._getGrayShades=function(){return(0,a.el)(".dhx_palette__row",this._getCells(h.grayShades))},t.prototype._getPalette=function(){var e=this;return this.config.palette.reduce((function(t,i){return t.push((0,a.el)(".dhx_palette__col",e._getCells(i))),t}),[])},t.prototype._getContent=function(){var e;return e=this.config.pickerOnly?[(0,_.getPicker)(this,this._pickerState,this._handlers)]:"palette"===this.config.mode?r(r([this.config.grayShades&&this._getGrayShades()],this._getPalette(),!0),[!this.config.paletteOnly&&(0,a.el)(".dhx_colorpicker-custom-colors",{onmouseover:this._handlers.mouseover},[(0,a.el)(".dhx_colorpicker-custom-colors__header",[f.default.customColors]),(0,a.el)(".dhx_palette--custom.dhx_palette__row",r(r([],this._getCells(this.config.customColors,"dhx_custom-color__cell"),!0),[(0,a.el)(".dhx_colorpicker-custom-colors__picker",{class:"dxi dxi-plus",onclick:this._handlers.customColorClick,onmouseover:this._handlers.mouseover,tabindex:0})],!1))])],!1):[(0,_.getPicker)(this,this._pickerState,this._handlers)],(0,a.el)(".dhx_widget.dhx_colorpicker",{class:this.config.css,style:{width:this.config.width},"data-dhx-widget-id":this._uid},[(0,a.el)(".dhx_palette",{onclick:this._handlers.click,oncontextmenu:this._handlers.contextmenu},e)])},t.prototype._initHotKey=function(){var e=this,t={enter:function(t){if((0,l.locateNodeByClassName)(t,"dhx_palette__cell")){var i=(0,w.rgbToHex)(t.target.style.background);if(!e.events.fire(p.ColorpickerEvents.beforeChange,[i]))return;e._selected=i,e.events.fire(p.ColorpickerEvents.change,[e._selected]),e.events.fire(p.ColorpickerEvents.colorChange,[e._selected])}(0,l.locateNodeByClassName)(t,"dhx_colorpicker-custom-colors__picker")&&e.setCurrentMode("picker")}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t}(c.View);t.Colorpicker=x},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePaletteGrip=t.getPicker=void 0;var n=i(49),o=i(1),r=i(50);t.getPicker=function(e,t,i){var a=(0,n.HSVtoRGB)(t.hsv);t.background=(0,n.RGBToHex)(a);var s=t.background,l=t.hsv,c=t.customHex,u=t.alpha,d=(0,n.RGBToHex)((0,n.HSVtoRGB)({h:l.h,s:1,v:1})),h=e.getRootView(),f=h.refs?h.refs.picker_palette.el.getBoundingClientRect():{height:200,width:218,x:0,y:0},p=f.height-2,v=f.width-2,g=p-l.v*p-4,_=l.s*v-4,m=f.width-6,y=m-(360-l.h)/360*m,b=u*m,w=1!==u?(0,n.alphaToHex)(u):"",x=(0,n.isHex)(c)?c.replace("#",""):s.replace("#","")+w,C=Math.round(100*u),E=e.config.transparency;return(0,o.el)(".dhx_colorpicker-picker",{},[(0,o.el)(".dhx_colorpicker-picker__palette",{style:{height:132,background:d},onmousedown:i.mousedown,ontouchstart:i.touchstart,"data-dhx-id":"picker_palette",_ref:"picker_palette"},[(0,o.el)(".dhx_palette_grip",{style:{top:g,left:_},tabindex:0})]),(0,o.el)(".dhx_colorpicker-range.dhx_colorpicker-range--hue",{onmousedown:i.mousedown,ontouchstart:i.touchstart,"data-dhx-id":"hue_range",_key:"hue_range",_ref:"hue_range"},[(0,o.el)(".dhx_colorpicker-range__grip.dhx_colorpicker-range__grip--hue",{style:{left:y},tabindex:0})]),E?(0,o.el)(".dhx_colorpicker-range.dhx_colorpicker-range--alpha",{onmousedown:i.mousedown,ontouchstart:i.touchstart,"data-dhx-id":"alpha_range",_key:"alpha_range",_ref:"alpha_range"},[(0,o.el)(".dhx_colorpicker-range__substrate"),(0,o.el)(".dhx_colorpicker-range__background",{style:{backgroundImage:"linear-gradient(to right, transparent, ".concat(s,")")}}),(0,o.el)(".dhx_colorpicker-range__grip.dhx_colorpicker-range__grip--alpha",{style:{left:1!==u?b:null},tabindex:0})]):null,(0,o.el)(".dhx_colorpicker-value",[(0,o.el)(".dhx_colorpicker-value__color",{style:{background:s+(0,n.alphaToHex)(u)}}),(0,o.el)(".dhx_colorpicker-value__input-wrapper.dhx_colorpicker-value__input-wrapper--hex",[(0,o.el)("input",{class:"dhx_colorpicker-value__input dhx_colorpicker-value__input--hex",style:{width:E?112:100},value:x,oninput:i.oninput,maxlength:E?"9":"7",_key:"hex_input","data-dhx-id":"hex_input","aria-label":"type color in HEX format"})]),E?(0,o.el)(".dhx_colorpicker-value__input-wrapper.dhx_colorpicker-value__input-wrapper--alpha",[(0,o.el)("input",{class:"dhx_colorpicker-value__input dhx_colorpicker-value__input--alpha",value:C,oninput:i.oninput,maxlength:"3",_key:"alpha_input","data-dhx-id":"alpha_input","aria-label":"type opacity in percent"})]):null]),(0,o.el)(".dhx_colorpicker-picker__buttons",[!e.config.pickerOnly&&(0,o.el)("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_link dhx_button--color_primary",onclick:[i.buttonsClick,"cancel"]},r.default.cancel),(0,o.el)("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_flat dhx_button--color_primary",onclick:[i.buttonsClick,"apply"]},r.default.select)])])},t.calculatePaletteGrip=function(e,t,i){var n=e.refs.picker_palette.el.getBoundingClientRect(),o=n.height,r=n.width;t=t<0?0:t>o?o:t,i=i<0?0:i>r?r:i;var a=Math.round(i/(r/100)),s=100-Math.round(t/(o/100));this._pickerState.hsv.s=a/100,this._pickerState.hsv.v=s/100}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRangeGrip=t.calculatePaletteGrip=void 0,t.calculatePaletteGrip=function(e,t,i){var n=e.height,o=e.width;return t=t<0?0:t>n?n:t,i=i<0?0:i>o?o:i,{s:Math.round(i/(o/100))/100,v:(100-Math.round(t/(n/100)))/100}},t.calculateRangeGrip=function(e,t){var i=e.width;return t=t<0?0:t>i?i:t,{h:Math.round(t/i*360),alpha:Number((t/i).toFixed(2)),rangeLeft:t}}},function(e,t,i){"use strict";(function(e){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var o=i(0),r=i(27),a=i(26),s=i(0),l=function(){function t(e,t){this._parent=e,this._changes=t}return t.prototype.load=function(e,t){var i=this;if(!e.config||this._parent.events.fire(a.DataEvents.beforeLazyLoad,[]))return this._parent.loadData=e.load().then((function(e){return e?i.parse(e,t):[]})).catch((function(e){i._parent.events.fire(a.DataEvents.loadError,[e])}))},t.prototype.parse=function(e,t){var i=this;if(void 0===t&&(t=a.DataDriver.json),"json"!==t||(0,r.hasJsonOrArrayStructure)(e)||this._parent.events.fire(a.DataEvents.loadError,["Uncaught SyntaxError: Unexpected end of input"]),!((e=(t=(0,r.toDataDriver)(t)).toJsonArray(e))instanceof Array)){var l=e.total_count-1,c=e.from;if(e=e.data,0!==this._parent.getLength())return e.forEach((function(e,t){var a=c+t,l=i._parent.getId(a);if((0,o.isId)(l)){var u=i._parent.getItem(l);if(u&&u.$empty){var d=e.id||u.id;(0,s.isDefined)(e.id)&&i._parent.changeId(l,d,!0),i._parent.update(d,n(n({},e),{$empty:void 0}),!0)}}else(0,r.dhxWarning)("item not found")})),this._parent.events.fire(a.DataEvents.afterLazyLoad,[c,e.length]),this._parent.events.fire(a.DataEvents.change),e;for(var u=[],d=0,h=0;d<=l;d++)d>=c&&d<=c+e.length-1?(u.push(e[h]),h++):u.push({$empty:!0});e=u}return this._parent.getInitialData()&&this._parent.removeAll(),this._parent.$parse(e),e},t.prototype.save=function(t){for(var i=this,n=this._getUniqueOrder(),o=function(n){if(n.saving||n.pending)(0,r.dhxWarning)("item is saving");else{var o=a._findPrevState(n.id);if(o&&o.saving){var s=new e((function(e,a){o.promise.then((function(){n.pending=!1,e(i._setPromise(n,t))})).catch((function(e){i._removeFromOrder(o),i._setPromise(n,t),(0,r.dhxWarning)(e),a(e)}))}));a._addToChain(s),n.pending=!0}else a._setPromise(n,t)}},a=this,s=0,l=n;s<l.length;s++){o(l[s])}n.length&&this._parent.saveData.then((function(){i._saving=!1}))},t.prototype.updateChanges=function(e){this._changes=e},t.prototype._setPromise=function(e,t){var i,n=this;switch(e.status){case"remove":i="delete";break;case"add":i="insert";break;default:i=e.status}return e.promise=t.save(e.obj,i),e.promise.then((function(){n._removeFromOrder(e)})).catch((function(t){e.saving=!1,e.error=!0,(0,r.dhxError)(t)})),e.saving=!0,this._saving=!0,this._addToChain(e.promise),e.promise},t.prototype._addToChain=function(e){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then((function(){return e})):this._parent.saveData=e},t.prototype._findPrevState=function(e){for(var t=0,i=this._changes.order;t<i.length;t++){var n=i[t];if(n.id===e)return n}return null},t.prototype._removeFromOrder=function(e){this._changes.order=this._changes.order.filter((function(t){return!(0,r.isEqualObj)(t,e)}))},t.prototype._getUniqueOrder=function(){return this._changes.order.reduce((function(e,t){var i=e.findIndex((function(e){return e.id===t.id})),n=i>-1?e[i]:null;return n&&!1===n.saving&&"add"===n.status?"remove"===t.status?e.splice(i,1):n.obj=t.obj:n&&!1===n.saving&&"update"===n.status?e.splice(i,1,t):e.push(t),e}),[])},t}();t.Loader=l}).call(this,i(16))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLDriver=void 0;var n=i(123);function o(e,t){t=t||{};var i=e.attributes;if(i&&i.length)for(var n=0;n<i.length;n++)t[i[n].name]=i[n].value;var r=e.childNodes;for(n=0;n<r.length;n++)if(1===r[n].nodeType){var a=r[n].tagName;t[a]?("function"!=typeof t[a].push&&(t[a]=[t[a]]),t[a].push(o(r[n],{}))):t[a]=o(r[n],{})}return t}var r=function(){function e(){}return e.prototype.toJsonArray=function(e){return this.getRows(e)},e.prototype.toJsonObject=function(e){var t;return"string"==typeof e&&(t=this._fromString(e)),o(t)},e.prototype.serialize=function(e){return(0,n.jsonToXML)(e)},e.prototype.getFields=function(e){return e},e.prototype.getRows=function(e){if("string"==typeof e&&(e=this._fromString(e)),e){var t=e.childNodes&&e.childNodes[0]&&e.childNodes[0].childNodes;return t&&t.length?this._getRows(t):null}return[]},e.prototype._getRows=function(e){for(var t=[],i=0;i<e.length;i++)"item"===e[i].tagName&&t.push(this._nodeToJS(e[i]));return t},e.prototype._fromString=function(e){try{return(new DOMParser).parseFromString(e,"text/xml")}catch(e){return null}},e.prototype._nodeToJS=function(e){var t={};if(this._haveAttrs(e))for(var i=e.attributes,n=0;n<i.length;n++){var o=i[n],r=o.name,a=o.value;t[r]=this._toType(a)}if(3===e.nodeType)return t.value=t.value||this._toType(e.textContent),t;var s=e.childNodes;if(s)for(n=0;n<s.length;n++){var l=s[n],c=l.tagName;c&&("items"===c&&l.childNodes?t[c]=this._getRows(l.childNodes):this._haveAttrs(l)?t[c]=this._nodeToJS(l):t[c]=this._toType(l.textContent))}return t},e.prototype._toType=function(e){return"false"===e||"true"===e?"true"===e:e},e.prototype._haveAttrs=function(e){return e.attributes&&e.attributes.length},e}();t.XMLDriver=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonToXML=void 0;var n=4;function o(e){return" ".repeat(e)}function r(e,t){void 0===t&&(t=n);var i=o(t)+"<item>\n";for(var a in e)Array.isArray(e[a])?(i+=o(t+n)+"<".concat(a,">\n"),i+=e[a].map((function(e){return r(e,t+2*n)})).join("\n")+"\n",i+=o(t+n)+"</".concat(a,">\n")):i+=o(t+n)+"<".concat(a,">").concat(e[a],"</").concat(a,">\n");return i+=o(t)+"</item>"}t.jsonToXML=function(e,t){void 0===t&&(t="root");for(var i='<?xml version="1.0" encoding="iso-8859-1"?>\n<'.concat(t,">"),n=0;n<e.length;n++)i+="\n"+r(e[n]);return i+"\n</".concat(t,">")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sort=void 0;var n=i(27),o=function(){function e(){}return e.prototype.sort=function(e,t,i){this._createSorter(t),i===t&&(t=null),(i||t)&&this._sort(e,i,t)},e.prototype._createSorter=function(e){var t=this;e&&!e.rule&&(e.rule=function(i,o){var r,a,s=null!==(r=t._checkVal(e.as,i[e.by]))&&void 0!==r?r:"",l=null!==(a=t._checkVal(e.as,o[e.by]))&&void 0!==a?a:"";return(0,n.naturalCompare)(s.toString(),l.toString())})},e.prototype._checkVal=function(e,t){return e?e.call(this,t):t},e.prototype._sort=function(e,t,i){var n=this,o={asc:1,desc:-1};return e.sort((function(e,r){var a=0;return t&&(a=t.rule.call(n,e,r)*(o[t.dir]||o.asc)),0===a&&i&&(a=i.rule.call(n,e,r)*(o[i.dir]||o.asc)),a}))},e}();t.Sort=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeCollection=void 0;var a=i(0),s=i(67),l=i(33),c=i(27),u=i(26);function d(e,t,i,n){void 0!==n&&-1!==n&&e[i]&&e[i][n]?e[i].splice(n,0,t):(e[i]||(e[i]=[]),e[i].push(t))}var h=function(e){function t(t,i){var n,o=e.call(this,t,i)||this;o._childs={};var r=o._root=t&&t.rootId||"_ROOT_"+(0,a.uid)();return o._childs=((n={})[r]=[],n),o._initChilds=null,o}return o(t,e),t.prototype.add=function(e,t,i){var n,o=this;if(void 0===t&&(t=-1),void 0===i&&(i=this._root),this.events.fire(u.DataEvents.beforeAdd,[e]))return"object"!=typeof e&&(e={value:e}),n=Array.isArray(e)?e.map((function(e,n){return o._add(e,t,i,n)})):this._add(e,t,i),this._reapplyFilters(!1),n},t.prototype.getRoot=function(){return this._root},t.prototype.getParent=function(e,t){if(void 0===t&&(t=!1),!this._pull[e])return null;var i=this._pull[e].parent;return t?this._pull[i]:i},t.prototype.getItems=function(e){return this._childs&&this._childs[e]?this._childs[e]:[]},t.prototype.getLength=function(e){return void 0===e&&(e=this._root),this._childs[e]?this._childs[e].length:null},t.prototype.removeAll=function(t){var i;if((0,a.isId)(t)){if(this._childs[t])for(var n=0,o=r([],this._childs[t],!0);n<o.length;n++){var s=o[n];this.remove(s.id)}}else{e.prototype.removeAll.call(this);var l=this._root;this._initChilds=null,this._childs=((i={})[l]=[],i)}},t.prototype.getIndex=function(e){var t=this.getParent(e);return t&&this._childs[t]?(0,a.findIndex)(this._childs[t],(function(t){return t.id===e})):-1},t.prototype.sort=function(e){var t=this;if(e){for(var i in this._childs)this._sort.sort(this._childs[i],e);if(this._initChilds&&Object.keys(this._initChilds).length)for(var i in this._initChilds)this._sort.sort(this._initChilds[i],e)}else this._childs={},this._parse_data(Object.keys(this._pull).map((function(e){return t._pull[e]}))),this._reapplyFilters(!1);this.events.fire(u.DataEvents.change,[void 0,"sort",e])},t.prototype.filter=function(e,t,i){if((null==t?void 0:t.$restore)&&(e=this._normalizeFilters(e||this._filters)),!(e&&(null==t?void 0:t.add)||(this.restoreOrder(),null==t?void 0:t.$restore)))for(var n in this._filters){var o=this._filters[n],r=o.rule,s=o.config;(null==s?void 0:s.permanent)?this._applyFilter(r,s):delete this._filters[n]}var l;if(e&&!(null==t?void 0:t.$restore))l=(null==t?void 0:t.id)||(0,a.uid)(),t||(t={}),t.type=t.type||u.TreeFilterType.all,this._filters[l]={rule:e,config:t},this._applyFilter(e,t);else for(var n in e)this._applyFilter(e[n],this._filters[n].config);if(!i){var c=this._getPureFilters(this._filters);this.events.fire(u.DataEvents.filter,[(0,a.isEmptyObj)(c)?null:c])}return l},t.prototype.restoreOrder=function(){this._initChilds&&(this._childs=this._initChilds,this._initChilds=null)},t.prototype.copy=function(e,t,i,n){var o=this;return void 0===i&&(i=this),void 0===n&&(n=this._root),e instanceof Array?e.map((function(e,r){return o._copy(e,t,i,n,r)})):this._copy(e,t,i,n)},t.prototype.move=function(e,t,i,n){var o=this;return void 0===i&&(i=this),void 0===n&&(n=this._root),e instanceof Array?e.map((function(e,r){return o._move(e,t,i,n,r)})):this._move(e,t,i,n)},t.prototype.forEach=function(e,t,i){if(void 0===t&&(t=this._root),void 0===i&&(i=1/0),this.haveItems(t)&&!(i<1))for(var n=this._childs[t],o=0;o<n.length;o++)e.call(this,n[o],o,n),this.haveItems(n[o].id)&&this.forEach(e,n[o].id,--i)},t.prototype.eachChild=function(e,t,i,n){if(void 0===i&&(i=!0),void 0===n&&(n=function(){return!0}),this.haveItems(e))for(var o=0;o<this._childs[e].length;o++)t.call(this,this._childs[e][o],o),i&&n(this._childs[e][o])&&this.eachChild(this._childs[e][o].id,t,i,n)},t.prototype.getNearId=function(e){return e},t.prototype.loadItems=function(e,t){var i=this;if(void 0===t&&(t=u.DataDriver.json),this.events.fire(u.DataEvents.beforeItemLoad,[e])){var n=this.config.autoload.toString(),o=n+(n.includes("?")?"&id=".concat(e):"?id=".concat(e));new l.DataProxy(o).load().then((function(n){n=(t=(0,c.toDataDriver)(t)).toJsonArray(n),i._parse_data(n,e),i.events.fire(u.DataEvents.change),i.events.fire(u.DataEvents.afterItemLoad,[e])})).catch((function(e){i.events.fire(u.DataEvents.loadError,[e])}))}},t.prototype.refreshItems=function(e,t){void 0===t&&(t=u.DataDriver.json),this.removeAll(e),this.loadItems(e,t)},t.prototype.eachParent=function(e,t,i){void 0===i&&(i=!1);var n=this.getItem(e);if(n&&(i&&t.call(this,n),n.parent!==this._root)){var o=this.getItem(n.parent);t.call(this,o),this.eachParent(n.parent,t)}},t.prototype.haveItems=function(e){return e in this._childs},t.prototype.canCopy=function(e,t){if(e===t)return!1;var i=!0;return this.eachParent(t,(function(t){return t.id===e?i=!1:null})),i},t.prototype.serialize=function(e,t){void 0===e&&(e=u.DataDriver.json);var i=this._serialize(this._root,t),n=(0,c.toDataDriver)(e);if(n)return n.serialize(i)},t.prototype.getId=function(e,t){if(void 0===t&&(t=this._root),this._childs[t]&&this._childs[t][e])return this._childs[t][e].id},t.prototype.map=function(e,t,i){void 0===t&&(t=this._root),void 0===i&&(i=!0);var n=[];if(!this.haveItems(t))return n;for(var o=0;o<this._childs[t].length;o++)if(n.push(e.call(this,this._childs[t][o],o,this._childs)),i){var r=this.map(e,this._childs[t][o].id,i);n=n.concat(r)}return n},t.prototype.getRawData=function(t,i,n,o,r){var a;return r=null!=r?r:this._root,this._childs[r]?(a=r===this._root?e.prototype.getRawData.call(this,t,i,this._childs[r]):this._childs[r],2===o?this.flatten(a):a):[]},t.prototype.flatten=function(e){var t=this,i=[];return e.forEach((function(e){i.push(e);var n=t._childs[e.id];n&&e.$opened&&(i=i.concat(t.flatten(n)))})),i},t.prototype._add=function(t,i,n,o){void 0===i&&(i=-1),void 0===n&&(n=this._root),this._setParent(t,n),o>0&&-1!==i&&(i+=1);var r=e.prototype._add.call(this,t,i);if(Array.isArray(t.items))for(var a=0,s=t.items;a<s.length;a++){var l=s[a];this.add(l,-1,t.id)}return r},t.prototype._setParent=function(e,t){e.parent=e.parent?e.parent.toString():t;var i=this._pull[e.parent];i&&!i.items&&(i.items=[])},t.prototype._copy=function(e,t,i,n,o){if(void 0===i&&(i=this),void 0===n&&(n=this._root),!this.exists(e))return null;var r=this._childs[e];if(o&&(t=-1===t?-1:t+o),i===this&&!this.canCopy(e,n))return null;var s=(0,c.copyWithoutInner)(this.getItem(e),{items:!0});if(i.exists(e)&&(s.id=(0,a.uid)()),(0,c.isTreeCollection)(i)){if(this.exists(e)&&(s.parent=n,i!==this&&n===this._root&&(s.parent=i.getRoot()),i.add(s,t),e=s.id),r)for(var l=0,u=r;l<u.length;l++){var d=u[l].id,h=this.getIndex(d);"string"==typeof e&&this.copy(d,h,i,e)}return e}i.add(s,t)},t.prototype._move=function(e,t,i,n,o){if(void 0===i&&(i=this),void 0===n&&(n=this._root),!this.exists(e))return null;if(o&&(t=-1===t?-1:t+o),i!==this){if(!(0,c.isTreeCollection)(i))return i.add((0,c.copyWithoutInner)(this.getItem(e)),t),void this.remove(e);var r=this.copy(e,t,i,n);return this.remove(e),r}if(!this.canCopy(e,n))return null;var a=this.getParent(e),s=this.getIndex(e),l=this._childs[a].splice(s,1)[0];return l.parent=n,this._childs[a].length||delete this._childs[a],this.haveItems(n)||(this._childs[n]=[]),-1===t?t=this._childs[n].push(l):this._childs[n].splice(t,0,l),this.events.fire(u.DataEvents.change,[e,"update",this.getItem(e)]),e},t.prototype._reset=function(t){var i;if((0,a.isId)(t))for(var n=0,o=r([],this._childs[t],!0);n<o.length;n++){var s=o[n];this.remove(s.id)}else{e.prototype._reset.call(this);var l=this._root;this._initChilds=null,this._childs=((i={})[l]=[],i)}},t.prototype._removeCore=function(e){if(this._pull[e]){var t=this.getParent(e);this._childs[t]=this._childs[t].filter((function(t){return t.id!==e})),t===this._root||this._childs[t].length||delete this._childs[t],this._initChilds&&this._initChilds[t]&&(this._initChilds[t]=this._initChilds[t].filter((function(t){return t.id!==e})),t===this._root||this._initChilds[t].length||delete this._initChilds[t]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter((function(t){return t.id!==e}))),this._fastDeleteChilds(this._childs,e),this._initChilds&&this._fastDeleteChilds(this._initChilds,e)}},t.prototype._addToOrder=function(t,i,n){var o=this._childs,r=this._initChilds,a=i.parent;this._pull[i.id]=i,i.parent&&this._pull[i.parent]&&this._pull[i.parent].items&&!this._pull[i.parent].items.find((function(e){return e.id===i.id}))&&this._pull[i.parent].items.push(i),e.prototype._addToOrder.call(this,t,i,n),d(o,i,a,n),r&&d(r,i,a,n)},t.prototype._parse_data=function(e,t){var i;void 0===t&&(t=this._root);for(var n=this._order.length,o=0,r=e;o<r.length;o++){var s=r[o];this.config.init&&(s=this.config.init(s)),s&&"object"!=typeof s&&(s={value:s}),s.id=null!==(i=s.id)&&void 0!==i?i:(0,a.uid)(),s.parent=void 0===s.parent||null===s.parent||s.parent&&s.$items?t:s.parent,this._pull[s.id]&&(0,c.dhxError)("Item ".concat(s.id," already exist")),this._pull[s.id]=s,this._order[n++]=s,this._childs[s.parent]||(this._childs[s.parent]=[]),this._childs[s.parent].push(s),s.items&&s.items instanceof Object&&this._parse_data(s.items,s.id)}},t.prototype._fastDeleteChilds=function(e,t){if(this._pull[t]&&delete this._pull[t],e[t]){for(var i=0;i<e[t].length;i++)this._fastDeleteChilds(e,e[t][i].id);delete e[t]}},t.prototype._recursiveFilter=function(e,t,i,n,o){var r=this,a=this._childs[i];if(a){var s=function(e){switch(t.type){case u.TreeFilterType.all:return!0;case u.TreeFilterType.level:return n===t.level;case u.TreeFilterType.leafs:return!r.haveItems(e.id)}};if("function"==typeof e){var l=function(t){return s(t)&&e(t)};(c=a.filter(l)).length?o[i]=c:i===this._root&&(o[i]=[])}else{var c;l=function(t){var i,n=!0;for(var o in e)if(e[o].by&&""!==e[o].match&&(n=e[o].compare?e[o].compare(t[e[o].by],e[o].match,t):-1!==(null===(i=t[e[o].by])||void 0===i?void 0:i.toString().toLocaleLowerCase().indexOf(e[o].match.toString().toLowerCase()))),!n)break;return s(t)&&n};(c=a.filter(l)).length?o[i]=c:i===this._root&&(o[i]=[])}for(var d=0,h=a;d<h.length;d++){var f=h[d];this._recursiveFilter(e,t,f.id,n+1,o)}}},t.prototype._serialize=function(e,t){var i=this;return void 0===e&&(e=this._root),this.map((function(e){var n={};for(var o in e)"parent"===o||"items"===o||o.startsWith("$")||(n[o]=e[o]);return t&&(n=t(n)),i.haveItems(e.id)&&(n.items=i._serialize(e.id,t)),n}),e,!1)},t.prototype._applyFilter=function(e,t){var i=this;if(e&&("function"==typeof e||!(0,a.isEmptyObj)(e))){var n;this._initOrder||(this._initOrder=this._order),this._initChilds||(this._initChilds=this._childs);var o={};if("function"!=typeof e)if(n={},(0,a.isDefined)(e.by))n[e.by]=e;else for(var r in e)n[r]=e[r];else n=e;this._recursiveFilter(n,t,this._root,0,o),Object.keys(o).forEach((function(e){for(var t=i.getParent(e),n=i.getItem(e);t;)o[t]||(o[t]=[]),n&&!o[t].find((function(e){return e.id===n.id}))&&o[t].push(n),n=i.getItem(t),t=i.getParent(t)})),this._childs=o}},t.prototype._normalizeFilters=function(e){var t={};for(var i in e)t[i]=e[i].rule;return t},t}(s.DataCollection);t.TreeCollection=h},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.dragManager=void 0;var r=i(4),a=i(52),s=i(159),l=i(26),c=i(27),u=i(0);var d=function(){function e(){var e=this;this._transferData={},this._canMove=!0,this._isDrag=!1,this._onMouseMove=function(t){if(e._transferData.start){var i=t.targetTouches?t.targetTouches[0].pageX:t.pageX,n=t.targetTouches?t.targetTouches[0].pageY:t.pageY,o=e._transferData,r=o.x,a=o.y,s=o.start,l=o.componentId;if(!e._transferData.ghost){if(Math.abs(r-i)<3&&Math.abs(a-n)<3)return;var c=e._onDragStart(s,l,t);if(!c)return void e._endDrop(t);e._transferData.ghost=c,document.body.appendChild(e._transferData.ghost)}e._moveGhost(i,n),e._onDrag(t)}},this._onMouseUp=function(t){e._transferData.x&&(e._transferData.ghost?(e._removeGhost(),e._onDrop(t)):e._endDrop(t),t.targetTouches?(document.removeEventListener("touchmove",e._onMouseMove),document.removeEventListener("touchend",e._onMouseUp)):(document.removeEventListener("mousemove",e._onMouseMove),document.removeEventListener("mouseup",e._onMouseUp)))}}return e.prototype.setItem=function(e,t){s.collectionStore.setItem(e,t)},e.prototype.onMouseDown=function(e,t,i){if(1===e.which||e.targetTouches){e.targetTouches?(document.addEventListener("touchmove",this._onMouseMove,!1),document.addEventListener("touchend",this._onMouseUp,!1)):(document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp));var n=(0,r.locateNode)(e,"data-dhx-id"),a=n&&n.getAttribute("data-dhx-id"),s=(0,r.locate)(e,"data-dhx-widget-id");if(Array.isArray(t)&&t.includes(a)?(this._transferData.source=o([],t,!0),this._itemsForGhost=i):(this._transferData.source=[a],this._itemsForGhost=null),a&&s){var l=(0,r.getBox)(n),c=l.left,u=l.top,d=e.targetTouches?e.targetTouches[0].pageX:e.pageX,h=e.targetTouches?e.targetTouches[0].pageY:e.pageY;this._transferData.initXOffset=d-c,this._transferData.initYOffset=h-u,this._transferData.x=d,this._transferData.y=h,this._transferData.componentId=s,this._transferData.start=a,this._transferData.item=n}}},e.prototype.isDrag=function(){return this._isDrag},e.prototype.cancelCanDrop=function(e){this._canMove=!1,this._isDrag=!1;var t=this._transferData,i=t.start,n=t.source,o=t.target,r=t.dropComponentId,a={start:i,source:n,target:o},c=s.collectionStore.getItem(r);c&&o&&c.events.fire(l.DragEvents.cancelDrop,[a,e]),this._transferData.dropComponentId=null,this._transferData.target=null},e.prototype._moveGhost=function(e,t){this._transferData.ghost&&(this._transferData.ghost.style.left=e-this._transferData.initXOffset+"px",this._transferData.ghost.style.top=t-this._transferData.initYOffset+"px")},e.prototype._removeGhost=function(){document.body.removeChild(this._transferData.ghost)},e.prototype._onDrop=function(e){if(this._canMove){var t=this._transferData,i=t.start,n=t.source,o=t.target,r=t.dropComponentId,a={start:i,source:n,target:o,dropPosition:t.dropPosition},c=s.collectionStore.getItem(r),u=c&&c.config;if(c&&"source"!==u.dragMode){if(c.events.fire(l.DragEvents.beforeDrop,[a,e])){var d={id:o,component:c},h={id:i,component:this._transferData.component,newId:null};this._move(h,d),h.newId&&h.component!==d.component&&(a.start=h.newId),d.component.events.fire(l.DragEvents.afterDrop,[a,e])}this._endDrop(e)}else this._endDrop(e)}else this._endDrop(e)},e.prototype._onDragStart=function(e,t,i){var n=s.collectionStore.getItem(t),o=n.config,r=this._transferData,a={start:r.start,source:r.source,target:r.target};if("target"===o.dragMode||n._pregroupData)return null;var c=function(e,t,i){void 0===i&&(i=!1);var n=e.getBoundingClientRect(),o=document.createElement("div"),r=e.cloneNode(!0),a=window.getComputedStyle(e.parentElement).fontSize;return r.style.width=n.width+"px",r.style.height=n.height+"px",r.style.maxHeight=n.height+"px",r.style.opacity="0.8",r.style.fontSize=a,i&&t&&t.length||o.appendChild(r),t&&t.length&&t.forEach((function(e,t){var r=e.cloneNode(!0);r.style.width=n.width+"px",r.style.height=n.height+"px",r.style.maxHeight=n.height+"px",r.style.top=12*(t+1)-n.height-n.height*t+"px",r.style.left=12*(t+1)+"px",r.style.opacity="0.6",r.style.zIndex="".concat(-t-1),i||(r.style.fontSize=a,r.style.overflow="hidden"),o.appendChild(r)})),o.className="dhx_drag-ghost",o}(this._transferData.item,this._itemsForGhost,"row"===o.dragItem||"column"===o.dragItem||"both"===o.dragItem);return n.events.fire(l.DragEvents.beforeDrag,[a,i,c])&&(0,u.isId)(e)?(n.events.fire(l.DragEvents.dragStart,[a,i]),this._isDrag=!0,this._toggleTextSelection(!0),this._transferData.component=n,this._transferData.dragConfig=o,c):null},e.prototype._onDrag=function(e){var t=e.targetTouches?e.targetTouches[0].clientX:e.clientX,i=e.targetTouches?e.targetTouches[0].clientY:e.clientY,n=document.elementFromPoint(t,i),o=(0,r.locate)(n,"data-dhx-widget-id"),a=s.collectionStore.getItem(o);if(a){var u=!!(0,r.locateNodeByClassName)(n,"dhx_grid-header")||!!(0,r.locateNodeByClassName)(n,"dhx_grid-footer"),d=a.config.columns?a.config:void 0,h=d&&("both"===d.dragItem||"column"===d.dragItem);if(!u||h){var f=(0,r.locate)(n,"data-dhx-id"),p=(0,r.locate)(n,"data-dhx-root-id");if(!f&&!p)return this.cancelCanDrop(e),this._transferData.dropComponentId=o,this._transferData.target=null,void this._canDrop(e);var v=this._transferData,g=v.dropComponentId,_=v.start,m=v.source,y=v.target,b=v.componentId,w=v.dropPosition;if("complex"===a.config.dropBehaviour){var x=function(e){var t=e.clientY,i=(0,r.locateNode)(e);if(!i)return null;var n=i.childNodes[0];if(n){var o=n.getBoundingClientRect();return(t-o.top)/o.height}}(e);this._transferData.dropPosition=x<=.25?"top":x>=.75?"bottom":"in"}else if((y===f||!f&&y===p)&&g===o)return;var C={id:_,component:this._transferData.component};if("source"!==a.config.dragMode)if(C.component.events.fire(l.DragEvents.dragOut,[{start:_,source:m,target:y},e]),o!==b||!(0,c.isTreeCollection)(C.component.data)||(0,c.isTreeCollection)(C.component.data)&&C.component.data.canCopy(C.id,f))this.cancelCanDrop(e),this._transferData.target=f||p,this._transferData.dropComponentId=o,C.component.events.fire(l.DragEvents.dragIn,[{start:_,source:m,target:y,dropPosition:w},e])&&this._canDrop(e);else this.cancelCanDrop(e)}else this._canMove&&this.cancelCanDrop(e)}else this._canMove&&this.cancelCanDrop(e)},e.prototype._move=function(e,t){var i=e.component,r=t.component,s=e.component.data,l=t.component.data,d=0,h=t.id,f=(0,c.isTreeCollection)(l)?t.component.config.dropBehaviour:void 0,p=e.component.config.columns?e.component.config:void 0,v=p&&("both"===p.dragItem||"column"===p.dragItem)&&p.columns.map((function(e){return e.id})).filter((function(i){return i===e.id||i===t.id})).length;if(v&&e.component===t.component){if(e.id===t.id)return;var g=(_=i.config.columns.map((function(e){return n({},e)}))).findIndex((function(t){return t.id===e.id}));if(-1===(b=_.findIndex((function(e){return e.id===t.id}))))return;return _.splice(b,0,_.splice(g,1)[0]),i.setColumns(_),void i.paint()}if(v&&e.component instanceof a.ProGrid&&t.component instanceof a.ProGrid){g=(_=i.config.columns.map((function(e){return n({},e)}))).findIndex((function(t){return t.id===e.id}));var _,m=r.config.columns.map((function(e){return n({},e)})),y=r.data.getLength(),b=m.findIndex((function(e){return e.id===t.id})),w=[],x=e.id;i.data.forEach((function(t){var i;w.push(((i={id:t.id})[x]=t[e.id],i))})),y?i.data.forEach((function(e,t){var i=r.data.getItem(e.id);i?r.data.update(i.id,n(n({},i),w[t])):r.data.add(w[t])})):r.data.parse(w);var C=_.splice(g,1)[0];return m.find((function(e){return e.id===x}))||m.splice(b,0,C),r.setColumns(m),r.paint(),i.setColumns(_),void i.paint()}var E=t.id===r.config.rootParent;switch(f){case"child":break;case"sibling":h=l.getParent(h),d=l.getIndex(t.id)+1;break;case"complex":var S=this._transferData.dropPosition;E?(h=t.id,d=l.getLength()):"top"===S?(h=l.getParent(h),d=l.getIndex(t.id)):"bottom"===S&&(h=l.getParent(h),d=l.getIndex(t.id)+1);break;default:(0,u.isId)(t.id)?e.component===t.component&&l.getIndex(e.id)<l.getIndex(t.id)?d=l.getIndex(t.id)-1:(l.getIndex(e.id)>-1&&(e.newId=(0,u.uid)()),d=l.getIndex(t.id)):d=-1}if(this._transferData.dragConfig.dragCopy)this._transferData.source instanceof Array&&this._transferData.source.length>1?this._transferData.source.map((function(e){s.copy(e,d,l,h),d>-1&&d++})):s.copy(e.id,d,l,h);else if(this._transferData.source instanceof Array&&this._transferData.source.length>1)s.move(this._transferData.source,d,l,h);else if(r instanceof a.Grid&&!r.config.columns.length){var I=i.data.getItem(e.id);r.data.parse([n({},I)]),r.setColumns(o([],i.config.columns,!0)),r.paint(),i.data.remove(e.id),i.paint()}else s.move(e.id,d,l,h,e.newId)},e.prototype._endDrop=function(e){if(this._toggleTextSelection(!1),this._transferData.component){var t=this._transferData,i={start:t.start,source:t.source,target:t.target};this._transferData.component.events.fire(l.DragEvents.afterDrag,[i,e])}this.cancelCanDrop(e),this._canMove=!0,this._transferData={},this._transferData.target=null,this._transferData.dropComponentId=null},e.prototype._canDrop=function(e){this._canMove=!0;var t=this._transferData,i={start:t.start,source:t.source,target:t.target,dropPosition:t.dropPosition},n=s.collectionStore.getItem(this._transferData.dropComponentId);n&&this._transferData.target&&(n instanceof a.Grid&&(i.dragItem=this._transferData.item.classList.contains("dhx_grid-row")?"row":"column"),n.events.fire(l.DragEvents.canDrop,[i,e]))},e.prototype._toggleTextSelection=function(e){e?document.body.classList.add("dhx_no-select"):document.body.classList.remove("dhx_no-select")},e}(),h=window.dhxHelpers=window.dhxHelpers||{};h.dragManager=h.dragManager||new d,t.dragManager=h.dragManager},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Exporter=void 0;var r=i(18),a=i(13),s=i(0),l=i(19),c=i(4),u=i(1);var d=function(){function e(e,t,i){this._name=e,this._version=t,this._view=i}return e.prototype.pdf=function(e){this._rawExport(e,"pdf",this._view)},e.prototype.png=function(e){this._rawExport(e,"png",this._view)},e.prototype.xlsx=function(e){return this._export(e)},e.prototype.csv=function(e){var t;void 0===e&&(e={}),e=n({asFile:!0,rowDelimiter:"\n",columnDelimiter:",",skipHeader:0},e),t="getRoot"in this._view.data&&e.flat?this.getFlatCSV(e):this._getCSV(e);var i=e.name||"grid_export";return e.asFile&&(0,s.downloadFile)(t,"".concat(i,".csv"),"text/csv"),t},e.prototype._export=function(e){void 0===e&&(e={});for(var t=this._view.config.columns.filter((function(e){return!e.hidden})),i={},n=(0,r.transpose)(t.map((function(e){return e.header.map((function(e){return e.text||" "}))}))),o=[],a={default:{color:"#000000",background:"#FFFFFF",fontSize:14,bold:!1}},s=[],c={},u=this._view.data.serialize().map((function(e,n){i[e.id]=n;var o=t.map((function(t,i){if(c[t.id]=i,e[t.id]instanceof Date){var n=t.format||"%M %d %Y";"string"==typeof e[t.id]?e[t.id]=(0,l.getFormattedDate)(n,(0,l.stringToDate)(e[t.id],n)):"object"==typeof e[t.id]&&(e[t.id]=(0,l.getFormattedDate)(n,e[t.id]))}return e[t.id]||i||!e.$groupName?(0,r.removeHTMLTags)(e[t.id]):"^ ".concat(e.$groupName)}));return o})),d=[],h=this._view.content,f=function(e){if(e.footer){var n=e.id,l=p._view.data.serialize().reduce((function(e,t){return void 0===t[n]||""===t[n]||isNaN(t[n])||e.push(parseFloat(t[n])),e}),[]),c=l;if("tree"===p._view.config.type){var u=p._view.data;c=u.serialize().reduce((function(e,t){if(0===t.$level)if(void 0===t[n]||""===t[n]||isNaN(t[n])){var i=0;u.eachChild(t.id,(function(e){u.haveItems(e.id)||(i+=parseFloat(e[n]))})),e.push(i)}else e.push(parseFloat(t[n])||0);return e}),[])}if(e.footer[0].content){var f=h[e.footer[0].content].calculate(l,c);d.push((null==f?void 0:f.toString())||" ")}else d.push(e.footer[0].css||e.footer[0].text||" ")}var v="number"===e.type||"percent"===e.type?"right":e.align;for(var g in o.push({width:e.$width,align:v}),e.$cellCss){var _=e.$cellCss[g].trim(),m=_.split("").reduce((function(e,t){var i=(e<<5)-e+t.charCodeAt(0);return Math.abs(i&i)}),0).toString();if(!a[m]){var y=document.body,b=(0,r.getStyleByClass)(_,y,"dhx_grid-row",a.default);b&&(a[m]=b)}a[m]&&s.push([i[g],t.indexOf(e),m])}},p=this,v=0,g=t;v<g.length;v++){f(g[v])}d.length&&u.push(d);var _={name:e.name||"data",columns:o,header:n,data:u,styles:{cells:s,css:a}};if(e.url){var m=document.createElement("form");m.setAttribute("target","_blank"),m.setAttribute("action",e.url),m.setAttribute("method","POST"),m.style.visibility="hidden";var y=document.createElement("textarea");y.setAttribute("name","data"),y.value=JSON.stringify(_),m.appendChild(y),document.body.appendChild(m),m.submit(),setTimeout((function(){m.parentNode.removeChild(m)}),100)}return _},e.prototype.getFlatCSV=function(e){var t=this._view.data,i=t.getRoot(),n=this._view.config.columns[0],r=t.getMaxLevel(),s="";t.eachChild(i,(function(i){var o=function(e,t){for(var i=[],o=0;o<=r;o++)if(e&&e[n.id]){i[e.$level]=e[n.id];var a=t.getParent(e.id,!0);e=a&&a.id?a:null}else i[o]="";return i}(i,t).join(e.columnDelimiter);s+=o+Object.keys(i).reduce((function(t,n,o){return"id"===n||"parent"===n||n.startsWith("$")||0===o?t:t+e.columnDelimiter+(null===i[n]?"":i[n])}),""),s+=e.rowDelimiter}));var l=this._export(e),c=function(e,t){for(var i=0;i<e.length;i++)e[i]=t;return e}(new Array(r+1),""),u=l.header.map((function(e){return e.splice.apply(e,o([0,1],c,!1)),e}));return new a.CsvDriver(e).serialize(u,!0)+e.rowDelimiter+s},e.prototype._getCSV=function(e){var t=this._export(e),i=t.header,n=new a.CsvDriver(e);return n.serialize(i,!0)+"\n"+n.serialize(t.data,!0)},e.prototype._rawExport=function(e,t,i){var o;void 0===e&&(e={});var r=document.createElement("div");r.setAttribute("style","display: none;");var a=i.config,l=a.$headerHeight,d=void 0===l?0:l,h=a.$footerHeight,f=void 0===h?0:h,p=a.$totalHeight,v=void 0===p?0:p,g=a.$footer,_=a.columns,m="",y=i.config.exportStyles;if(("boolean"==typeof e.exportStyles||Array.isArray(e.exportStyles))&&(y=e.exportStyles),e.url=e.url||"https://export.dhtmlx.com/"+this._name+"/"+t+"/"+this._version,"pdf"===t){var b=e.pdf;e.pdf=n(n({},b),{printBackground:!1,format:null!==(o=null==b?void 0:b.format)&&void 0!==o?o:"A4"})}var w=i.config.$totalWidth,x=v+d;g&&(x+=f);for(var C=[],E=0;E<_.length;E++){var S=_[E];C.push(n(n({},S),{width:S.$width}))}var I=n(n({},i.config),{width:w,height:x,columns:C,data:i.data.getRawData(0,-1,null,2),keyNavigation:!1,selection:!1,resizable:!1}),k=new i.constructor(r,(0,s.getCloneObject)(I));(0,u.awaitRedraw)().then((function(){!0===y?m="".concat((0,c.getPageLinksCss)(),"<style>").concat((0,c.getPageInlineCss)(),"</style>"):Array.isArray(y)&&y.length&&(m="".concat((0,c.getPageLinksCss)(y)));var i=r.children[0];null==i||i.setAttribute("data-dhx-theme",e.theme||"light"),"png"===t&&(null==i||i.setAttribute("style","width: ".concat(w,"px;")));var n="\n\t\t\t\t\t".concat(m,"\n\t\t\t\t\t").concat(r.innerHTML,"\n\t\t\t\t"),o=document.createElement("form");o.setAttribute("method","POST"),o.setAttribute("action",e.url),o.innerHTML='<input type="hidden" name="raw"><input type="hidden" name="config">',o.childNodes[0].value=n,o.childNodes[1].value=JSON.stringify(e),document.body.appendChild(o),o.submit(),setTimeout((function(){var e,t;k.destructor(),null===(e=r.parentNode)||void 0===e||e.removeChild(r),null===(t=o.parentNode)||void 0===t||t.removeChild(o)}),100)})).catch((function(){var e;k.destructor(),null===(e=r.parentNode)||void 0===e||e.removeChild(r)}))},e}();t.Exporter=d},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var o=i(1),r=i(13),a=i(0),s=i(3),l=i(9),c=i(20),u=i(24),d=i(24),h=i(18),f=function(){function e(e,t,i,n){this._grid=e,this.config=t,this._gridId=n,this._selectedCell,this._selectedCells=[],this._type=["cell","row","complex"].includes(this._grid.config.selection)&&this._grid.config.selection||"complex",this._multiselection=!!e.config.multiselection,this.events=i||new s.EventSystem(this),this._init()}return e.prototype.setCell=function(e,t,i,r){var a,s,l,u,d,h,f,p,v,g,_,m,y=this;void 0===i&&(i=!1),void 0===r&&(r=!1);var b="tree"===this._grid.config.type;if(this._gridId&&c.focusManager.getFocusId()!==this._gridId&&c.focusManager.setFocusId(this._gridId),"row"===this._type&&(null===(l=this._selectedCells[0])||void 0===l?void 0:l.row.id)===((null==e?void 0:e.id)||e)||"row"!==this._type&&(null===(u=this._selectedCells[0])||void 0===u?void 0:u.row.id)===((null==e?void 0:e.id)||e)&&(null===(d=this._selectedCells[0])||void 0===d?void 0:d.column.id)===((null==t?void 0:t.id)||t))i&&(this._removeCell(null===(h=this._selectedCells[0])||void 0===h?void 0:h.row,null===(f=this._selectedCells[0])||void 0===f?void 0:f.column),(0,o.awaitRedraw)().then((function(){y._grid.paint(),y._setBrowserFocus()})));else if(!(this.config.disabled||this._grid.config.$editable||!this._multiselection&&this._selectedCells.length&&!this._removeCell(null===(p=this._selectedCell)||void 0===p?void 0:p.row,null===(v=this._selectedCell)||void 0===v?void 0:v.column))){if(this._multiselection){if(i||r||this._removeCells(),this._selectedCells.find((function(i){return"row"===y._type?i.row.id===((null==e?void 0:e.id)||e):i.row.id===((null==e?void 0:e.id)||e)&&i.column.id===((null==t?void 0:t.id)||t)})))return void this.removeCell((null==e?void 0:e.id)||e,(null==t?void 0:t.id)||t);r&&this._selectedCells.length>1&&!b&&n([],this._selectedCells,!0).forEach((function(e,t){var i=e.row,n=e.column;t>0&&y.removeCell(i.id,n.id)}))}e=this._grid.data.getItem(e&&e.id||e);var w=null===(_=null===(g=this._grid.config)||void 0===g?void 0:g.columns)||void 0===_?void 0:_.filter((function(e){return!e.hidden}));if(t||(t=null==w?void 0:w[0]),(t=this._grid.getColumn(t.id||t))&&e){if(this._multiselection&&r&&this._selectedCells.length&&!b){var x=null===(m=this._selectedCells)||void 0===m?void 0:m[0],C=this._grid.data.getIndex(x.row.id),E=this._grid.data.getIndex(e.id);if(C>E&&(C=(a=[E,C])[0],E=a[1]),"cell"===this._type||"complex"===this._type){var S=w.map((function(e){return e.id})),I=S.indexOf(x.column.id),k=S.indexOf(t.id);if(-1!==I&&-1!==k){I>k&&(I=(s=[k,I])[0],k=s[1]);var M=w.slice(I,k+1);this._grid.data.mapRange(C,E,(function(e){M.forEach((function(t){-1===y._findIndex({row:e,column:t})&&y._setCell(e,t)}))}))}}else this._grid.data.mapRange(C,E,(function(e){-1===y._findIndex({row:e,column:t})&&y._setCell(e,t)}))}else this._setCell(e,t);(0,o.awaitRedraw)().then((function(){y._grid.paint(),y._setBrowserFocus()}))}}},e.prototype.removeCell=function(e,t){var i=this;if(e&&t&&("cell"===this._type||"complex"===this._type)){var n=this._selectedCells.find((function(i){var n=i.row,o=i.column;return n.id==e&&o.id==t}));n&&this._removeCell(n.row,n.column)}else if(e){this._selectedCells.filter((function(t){return t.row.id==e})).forEach((function(e){var t=e.row,n=e.column;i._removeCell(t,n)}))}else this._removeCells();(0,o.awaitRedraw)().then((function(){i._grid.paint()}))},e.prototype.getCell=function(){return this._selectedCell},e.prototype.getCells=function(){return this._selectedCells},e.prototype.disable=function(){this.removeCell(),this.config.disabled=!0,this._grid.paint()},e.prototype.enable=function(){this.config.disabled=!1,this._grid.paint()},e.prototype.toHTML=function(){var e=this;if(!this._isUnselected()){if(this._multiselection){var t=[],i={};return this._selectedCells.forEach((function(n,o,r){var a=e._normalizeCell(n);t.push(e._toHTML(a.row,a.column,o===r.length-1||"cell"===e._type||"complex"===e._type,i[n.row.id])),i[n.row.id]=!0})),t}var n=this._normalizeCell(this._selectedCell);return this._toHTML(n.row,n.column,!0)}},e.prototype._setCell=function(e,t){e&&t&&(0,a.isDefined)(e.id)&&(0,a.isDefined)(t.id)&&this.events.fire(l.GridSelectionEvents.beforeSelect,[e,t])&&(this._selectedCell={row:e,column:t},this._multiselection?this._selectedCells.push(this._selectedCell):this._selectedCells=[this._selectedCell],this.events.fire(l.GridSelectionEvents.afterSelect,[e,t]))},e.prototype._removeCell=function(e,t,i){var n,o;if(void 0===i&&(i=!1),!(e&&t&&(0,a.isDefined)(e.id)&&(0,a.isDefined)(t.id)))return!1;if(!i&&!this.events.fire(l.GridSelectionEvents.beforeUnSelect,[e,t]))return!1;var r=this._selectedCells.findIndex((function(i){return i.row.id===e.id&&i.column.id===t.id}));return this._selectedCells.splice(r,1),this._selectedCell&&t.id===this._selectedCell.column.id&&e.id===this._selectedCell.row.id&&(this._selectedCell=null===(n=this._selectedCells)||void 0===n?void 0:n[(null===(o=this._selectedCells)||void 0===o?void 0:o.length)-1]),!i&&this.events.fire(l.GridSelectionEvents.afterUnSelect,[e,t]),!0},e.prototype._removeCells=function(e){var t=this;void 0===e&&(e=!1),n([],this._selectedCells,!0).forEach((function(i){t._removeCell(null==i?void 0:i.row,null==i?void 0:i.column,e)}))},e.prototype._init=function(){var e=this;this._grid.events.on(l.GridEvents.cellClick,(function(t,i,n){e.setCell(t,i,n.ctrlKey||n.metaKey,n.shiftKey)})),this._grid.data.events.on(r.DataEvents.beforeRemove,(function(t){var i,n;if(t&&e._selectedCell&&e._selectedCell.row&&e._selectedCell.row.id===t.id){var o=void 0,s=e._grid.data.getIndex(t.id);if(e._grid.data instanceof r.TreeCollection){var l=e._grid.data.getItems(t.parent);o=(null===(i=l[s+1])||void 0===i?void 0:i.id)||(null===(n=l[s-1])||void 0===n?void 0:n.id)||t.parent}else o=e._grid.data.getId(s+1)||e._grid.data.getId(s-1);(0,a.isId)(o)&&(e.setCell(o),e._grid.paint())}})),this._grid.data.events.on(r.DataEvents.removeAll,(function(){e._removeCells()})),this._grid.data.events.on(r.DataEvents.load,(function(){e._removeCells(!0)}))},e.prototype._toHTML=function(e,t,i,n){var r,s,c,d,f,p,v,g,_,m,y,b,w;void 0===i&&(i=!1),void 0===n&&(n=!1);var x=this._grid.data.getRawData(0,-1,null,2);if(-1===(0,a.findIndex)(x,(function(t){return t.id==e.id})))return null;var C,E,S,I,k=this._grid.config,M=k.topSplit,O=k.bottomSplit,A=k.$totalWidth,D=k.$totalHeight,P=k.columns,F=null==P?void 0:P.filter((function(e){return!e.hidden})),T={left:(0,u.getCurrFixedCols)(this._grid.config,l.Split.left),right:(0,u.getCurrFixedCols)(this._grid.config,l.Split.right)},R=this._grid.data.getLength(),V={top:M?this._grid.data.getRawData(0,M):[],bottom:O?this._grid.data.getRawData(R-O,R):[]},H={left:null===(r=null==T?void 0:T.left)||void 0===r?void 0:r.map((function(e){return e.id})),right:null===(s=null==T?void 0:T.right)||void 0===s?void 0:s.map((function(e){return e.id}))},L={top:V.top.map((function(e){return e.id})),bottom:V.bottom.map((function(e){return e.id}))},j=null===(c=null==T?void 0:T.left)||void 0===c?void 0:c.reduce((function(e,t){return e+(t.$width||0)}),0),N=null===(d=null==T?void 0:T.right)||void 0===d?void 0:d.reduce((function(e,t){return e+(t.$width||0)}),0),$=V.top.reduce((function(e,t){return e+t.$height}),0),z=V.bottom.reduce((function(e,t){return e+t.$height}),0),B=this._grid.getCellRect(e.id,t.id),W=this._grid.getScrollState(),G=B.y,U=null===(f=L.top)||void 0===f?void 0:f.includes(e.id),q=null===(p=H.left)||void 0===p?void 0:p.includes(t.id),X=T.left.length&&j>B.x-W.x,Y=V.top.length&&$>B.y-W.y,K=B.width,J=B.height-1,Z=null,Q=null,ee=X?j+W.x:B.x;if(X&&(K-=(q?(0,h.getTotalWidth)(T.left.slice(0,F.indexOf(t))):j)-(B.x-W.x)),Y&&(J-=(U?(0,h.getTotalHeight)(V.top.slice(0,x.indexOf(e))):$)-(B.y-W.y)-1,G+=B.height-J),U)if(G=B.y+W.y,(ie=this._grid.getSpan(e.id,t.id))&&ie.rowspan>1){var te=x.indexOf(e);Z=(0,h.getTotalHeight)(V.top.slice(te,te+ie.rowspan))}else J=M===L.top.indexOf(e.id)+1?B.height-1:B.height;if(q)if(ee=B.x+W.x,(ie=this._grid.getSpan(e.id,t.id))&&ie.colspan>1){te=null==F?void 0:F.indexOf(t);Q=(0,h.getTotalWidth)(T.left.slice(te,te+ie.colspan))}else K=T.left.length===H.left.indexOf(t.id)+1?B.width-1:B.width;if((null===(v=T.right)||void 0===v?void 0:v.length)||O){var ie=this._grid.getSpan(e.id,t.id),ne=this._getReverseScrollState(W);if((null===(g=T.right)||void 0===g?void 0:g.length)&&(C=(null===(_=H.right)||void 0===_?void 0:_.includes(t.id))||ie&&F.indexOf(t)+(ie.colspan||1)>F.length-T.right.length,(E=A-N<ne.x+B.x+B.width)&&!C&&(K-=ne.x+B.x+B.width-A+N),C))if(ie&&!(null===(m=H.right)||void 0===m?void 0:m.includes(ie.column))){te=F.length-F.indexOf(t)-(ie.colspan||1);var oe=A-N;ee=B.x+ne.x<oe+1?B.x:oe-ne.x+1,Q=(0,h.getTotalWidth)(te?T.right.slice(0,-te):T.right)-1,K=B.width-ne.x}else{var re=(null===(y=H.right)||void 0===y?void 0:y.indexOf(t.id))?0:1;ee=B.x-ne.x+re,K=B.width-re}if(O&&(S=L.bottom.includes(e.id)||ie&&x.indexOf(e)+(ie.rowspan||1)>x.length-O,(I=D-z<ne.y+B.y+B.height)&&!S&&(J-=ne.y+B.y+B.height-D+z),S))if(ie&&!L.bottom.includes(ie.row)){var ae=D-z;re=(te=x.length-x.indexOf(e)-(ie.rowspan||1))?0:1;G=B.y+ne.y<ae?B.y:ae-ne.y,Z=(0,h.getTotalHeight)(te?V.bottom.slice(0,-te):V.bottom)-re,J=B.height-ne.y-re}else G=B.y-ne.y,J=B.height-(O===L.bottom.indexOf(e.id)+1?1:0)}var se=null;"row"!==this._type&&"complex"!==this._type||n||(se=(0,o.el)(".dhx_grid-selected-row",{style:{width:(null===(b=T.left)||void 0===b?void 0:b.length)?A-W.x:A,height:J,minHeight:Z,minWidth:Q,display:J<0&&!Z?"none":"flex",top:G,left:(null===(w=T.left)||void 0===w?void 0:w.length)?W.x:0,position:"absolute"}}));var le=null;return"cell"!==this._type&&"complex"!==this._type||!i||(le=(0,o.el)(".dhx_grid-selected-cell",{style:{width:K,height:J,top:G,minHeight:Z,minWidth:Q,left:ee,position:"absolute",display:K<0&&!Q||J<0&&!Z?"none":"flex",borderLeft:X&&!q?"none":null,borderRight:E&&!C?"none":null,borderTop:Y&&!U?"none":null,borderBottom:I&&!S?"none":null}})),(0,o.el)(".dhx_grid-selection",{style:{zIndex:20}},[se,le])},e.prototype._isUnselected=function(){return!this._selectedCell||!this._selectedCell.row||!this._selectedCell.column||0===this._selectedCells.length},e.prototype._findIndex=function(e){var t=this;void 0===e&&(e=this._selectedCell);var i=-1;return this._selectedCells.some((function(n,o){if("cell"===t._type||"complex"===t._type){if((0,a.compare)(n.row,e.row)&&(0,a.compare)(n.column,e.column))return i=o,!0}else if("row"===t._type&&(0,a.compare)(n.row,e.row))return i=o,!0})),i},e.prototype._setBrowserFocus=function(){var e=this._grid.getRootView().data.getRootNode();if(e){var t=e.querySelector(".dhx_grid_data");if(t&&this._selectedCell&&this._selectedCell.row&&this._selectedCell.column){var i=t.querySelector('[data-dhx-id="'.concat(this._selectedCell.row.id,'"]')),n=this._grid.getSpan(this._selectedCell.row.id,this._selectedCell.column.id);if(i){var o=n?e.querySelector(".dhx_span-spans"):null,r=o?o.querySelector('[data-dhx-col-id="'.concat(n.column,'"][data-dhx-id="').concat(n.row,'"]')):i.querySelector('[data-dhx-col-id="'.concat(this._selectedCell.column.id,'"]'));r&&(r.tabIndex=0,r.focus({preventScroll:!0}))}}}},e.prototype._getReverseScrollState=function(e){var t,i=(0,d.calcScrollBarWidth)(this._grid.config,!!(null===(t=this._grid.scrollView)||void 0===t?void 0:t.config.enable)),n=this._grid.config.$totalWidth-this._grid.config.$width+u.BORDERS+i.y,o=this._grid.config.$totalHeight-this._grid.config.$height+this._grid.config.$headerHeight+this._grid.config.$footerHeight+u.BORDERS+i.x;return{x:n>0?n-e.x:0,y:o>0?o-e.y:0}},e.prototype._normalizeCell=function(e){var t=e.row,i=e.column,n=this._grid.getSpan(t.id,i.id);return{row:n&&t.id!==n.row?this._grid.data.getItem(n.row):t,column:n&&i.id!==n.column?this._grid.config.columns.find((function(e){return e.id===n.column})):i}},e}();t.Selection=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditor=void 0;var n,o=i(9),r=i(130),a=i(131),s=i(132),l=i(143),c=i(144),u=i(151),d={cell:{row:null,col:null},editor:null,gridId:null};t.getEditor=function(e,t,i){var h="boolean"===t.type?"checkbox":i.$editable.editorType;if(void 0===h&&(h=i.autoHeight?"textarea":"input"),d.cell.row===e.id&&d.cell.col===t.id&&d.gridId===i.gridId&&i.$editable.editor)return d.editor;switch("checkbox"!==h&&(d={cell:{row:e.id,col:t.id},editor:d.editor,gridId:i.gridId}),n||(n=function(){d={cell:{row:null,col:null},editor:null,gridId:null}},i.events.on(o.GridEvents.afterEditEnd,n)),h){case"input":default:return d.editor=new r.InputEditor(e,t,i);case"textarea":return d.editor=new u.TextAreaEditor(e,t,i);case"select":return d.editor=new a.SelectEditor(e,t,i);case"datePicker":return d.editor=new s.DateEditor(e,t,i);case"checkbox":return new l.CheckboxEditor(e,t,i);case"multiselect":case"combobox":return d.editor=new c.ComboboxEditor(e,t,i)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputEditor=void 0;var n=i(1),o=i(9),r=i(0),a=function(){function e(e,t,i){this.prevValue="",this._config=i,this._cell={row:e,col:t},this.type=t.type,this._initHandlers()}return e.prototype.endEdit=function(e){if(this._config.$editable){var t;if(!e&&(t=this._input.value,"number"===this.type))if(t=parseFloat(t),Number.isNaN(t))t="";else{var i=this._cell.col.editorConfig,n=parseFloat(null==i?void 0:i.min),a=parseFloat(null==i?void 0:i.max);(0,r.isDefined)(null==i?void 0:i.min)&&t<n&&(t=n),(0,r.isDefined)(null==i?void 0:i.max)&&t>a&&(t=a)}this._config.events.fire(o.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(o.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus()}},e.prototype.toHTML=function(e){return(0,r.isDefined)(e)&&(this.type="string"),e=null!=e?e:this._cell.row[this._cell.col.id],this._input&&(e=this._input.value),this._config.$editable.editor=this,(0,n.el)("input.dhx_cell-editor.dhx_cell-editor__input",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",onblur:this._handlers.onBlur,oninput:this._handlers.onInput,value:e})},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onInput:function(){if("number"===e.type){var t=e._input.value;e.isValidWord(t)?e.prevValue=t:e._input.value=e.prevValue,!e.prevValue.length||"-"===e.prevValue||e.isCorrectRange(parseFloat(e.prevValue))?e._input.classList.remove("dhx_cell-editor__input--not-valid"):e._input.classList.add("dhx_cell-editor__input--not-valid")}},didInsert:function(t){e._input=t.el,e._input.focus()}}},e.prototype.isValidWord=function(e){var t,i=null===(t=e[e.length-1])||void 0===t?void 0:t.toLocaleLowerCase(),n=function(e,t){return e.toLocaleLowerCase().split(t.toLocaleLowerCase()).length-1};return!e.length||"-"===e||!isNaN(Number(e))&&e.trim().length===e.length||e.replace("-","").length>1&&"e"===i&&!n(this.prevValue,"e")||e.replace("-","").length>1&&"e"===i&&1===n(e,"e")},e.prototype.isCorrectRange=function(e){var t=!0,i=this._cell.col.editorConfig,n=parseFloat(null==i?void 0:i.min),o=parseFloat(null==i?void 0:i.max);return(0,r.isDefined)(null==i?void 0:i.min)&&(0,r.isDefined)(null==i?void 0:i.max)?t=e>=n&&e<=o:(0,r.isDefined)(null==i?void 0:i.min)?t=e>n:(0,r.isDefined)(null==i?void 0:i.max)&&(t=e<o),t},e}();t.InputEditor=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectEditor=void 0;var n=i(1),o=i(9),r=i(22),a=function(){function e(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}return e.prototype.endEdit=function(e){var t;this._config.$editable&&(e||(t=this._input.value),this._config.events.fire(o.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("keydown",this._handlers.onkeydown),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(o.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus())},e.prototype.toHTML=function(){var e=(0,r.getEditorOptions)(this._cell.col,this._cell.row).map((function(e){return"string"==typeof e?{id:"".concat(e),value:e}:e}))||[],t=this._cell.row[this._cell.col.id];this._input&&(t=this._input.options[this._input.selectedIndex].value);var i=e.map((function(e){return(0,n.el)("option",{selected:e.id.toString()===(null==t?void 0:t.toString()),value:e.id},e.value)}));return this._config.$editable.editor=this,(0,n.el)("select.dhx_cell-editor.dhx_cell-editor__select",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor"},i)},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onkeydown:function(t){"Escape"===t.key&&e.endEdit()},didInsert:function(t){var i=t.el;e._input=i,i.focus(),i.addEventListener("blur",e._handlers.onBlur),i.addEventListener("keydown",e._handlers.onkeydown)}}},e}();t.SelectEditor=a},function(e,t,i){"use strict";var n=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.DateEditor=void 0;var o=i(1),r=i(9),a=i(38),s=i(19),l=i(10),c=function(){function e(e,t,i){var n=this;this._config=i,this._cell={row:e,col:t},this._calendar=new a.Calendar(null,this._cleanConfig(t));var o=this._cell.row[this._cell.col.id],r=this._calendar.config.dateFormat;((0,s.stringToDate)(o,r,!0)||o instanceof Date)&&(this._calendar.setValue(o),this._value=this._calendar.getValue(),this._cell.row[this._cell.col.id]=this._value),this._popup=new l.Popup,this._popup.attach(this._calendar),this._calendar.events.on(a.CalendarEvents.change,(function(){n.endEdit(!1,!0)})),this._popup.events.on(l.PopupEvents.afterHide,(function(){n.endEdit()})),this._initHandlers()}return e.prototype.endEdit=function(e,t){var i=this;if(this._handlers&&this._config.$editable){var n=this._calendar.config.dateFormat,a=this._cell.row[this._cell.col.id],l=this._input.value;if(!e){if(a instanceof Date||t)return this._value=this._calendar.getValue(),this._input.value=this._value,void this._popup.hide();!(0,s.stringToDate)(l,n,!0)&&l||(!a||l.length!==a.length)&&a&&l||(this._value=l)}this._config.events.fire(r.GridEvents.beforeEditEnd,[this._value,this._cell.row,this._cell.col])?(this._input.removeEventListener("focus",this._handlers.onFocus),this._input.removeEventListener("change",this._handlers.onChange),document.removeEventListener("mousedown",this._handlers.onOuterClick),(0,o.awaitRedraw)().then((function(){i._popup.destructor(),i._calendar.destructor()})),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(r.GridEvents.afterEditEnd,[this._value,this._cell.row,this._cell.col])):this._input.focus()}},e.prototype.toHTML=function(){var e=this._cell.row[this._cell.col.id];return this._config.$editable.editor=this,document.addEventListener("mousedown",this._handlers.onOuterClick),(0,o.el)("input.dhx_cell-editor.dhx_cell-editor__input.dhx_cell-editor__datepicker",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",value:e})},e.prototype._cleanConfig=function(e){var t=e.editorConfig||{},i=(t.value,t.range,t.dateFormat,n(t,["value","range","dateFormat"]));return i.dateFormat=e.format,i},e.prototype._initHandlers=function(){var e=this;this._handlers={onFocus:function(){(0,o.awaitRedraw)().then((function(){e._popup.show(e._input,{centering:!0,mode:"bottom",theme:e._input})}))},onChange:function(){e.endEdit()},onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.contains(t.target),n=e._popup&&e._popup.getRootNode()&&e._popup.getRootNode().contains(t.target);i||n||e._popup.hide()}},didInsert:function(t){var i=t.el;e._input=i,e._input.addEventListener("focus",e._handlers.onFocus),e._input.addEventListener("change",e._handlers.onChange),i.focus(),i.setSelectionRange(i.value.length,i.value.length)}}},e}();t.DateEditor=c},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Calendar=void 0;var s=i(0),l=i(1),c=i(3),u=i(8),d=i(53),h=i(142),f=i(19),p=i(77),v=i(4),g=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,(0,s.extend)({weekStart:"sunday",thisMonthOnly:!1,dateFormat:window&&window.dhx&&window.dhx.dateFormat,width:"250px"},i))||this;switch(n._selected=[],n.events=new c.EventSystem,n.config.disabledDates=n.config.disabledDates||n.config.block,n.config.mode=n.config.mode||n.config.view,n.config.dateFormat||(n.config.timePicker?12===n.config.timeFormat?n.config.dateFormat="%d/%m/%y %h:%i %A":n.config.dateFormat="%d/%m/%y %H:%i":n.config.dateFormat="%d/%m/%y"),n.config.value&&n._setSelected(n.config.value),n.config.date?n._currentDate=f.DateHelper.toDateObject(n.config.date,n.config.dateFormat):n._getSelected()?n._currentDate=f.DateHelper.copy(n._getSelected()):n._currentDate=new Date,n.config.mode){case"month":n._currentViewMode="month";break;case"year":n._currentViewMode="year";break;case"timepicker":n._currentViewMode=n.config.timePicker?"timepicker":"calendar";break;default:n._currentViewMode="calendar"}if(n._initHandlers(),n.config.timePicker){n._timepicker=new d.Timepicker(null,{timeFormat:n.config.timeFormat,controls:!0});var o=n._getSelected()||new Date;n._timepicker.setValue(o),n._time=n._timepicker.getValue(),n._timepicker.events.on(d.TimepickerEvents.afterClose,(function(){n._timepicker.setValue(n._time),n.showDate(null,"calendar")})),n._timepicker.events.on(d.TimepickerEvents.afterApply,(function(){var e=n._timepicker.getValue(!0),t=e.hour,i=e.minute,o=e.AM,r=n._getSelected(),a=f.DateHelper.withHoursAndMinutes(n._getSelected()||new Date,t,i,o);n.events.fire(p.CalendarEvents.beforeChange,[a,r,!0])&&(n._selected[n._selected.length-1]=a,n.events.fire(p.CalendarEvents.change,[a,r,!0])),n._time=n._timepicker.getValue(),n.showDate(null,"calendar")}))}return n.mount(t,(0,l.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.setValue=function(e){if(!e||e instanceof Array&&0===e.length)return!1;var t=e instanceof Array?e[0]:e,i=f.DateHelper.toDateObject(t,this.config.dateFormat),n=f.DateHelper.copy(this._getSelected());return!!this.events.fire(p.CalendarEvents.beforeChange,[i,n,!1])&&(this._selected=[],this._setSelected(e),this._timepicker&&(this._timepicker.setValue(i),this._time=this._timepicker.getValue()),this.showDate(this._getSelected()),this.events.fire(p.CalendarEvents.change,[i,n,!1]),this.paint(),!0)},t.prototype.getValue=function(e){var t=this;return void 0===e&&(e=!1),this._selected[0]?this.config.range?e?this._selected.map((function(e){return f.DateHelper.copy(e)})):this._selected.map((function(e){return(0,f.getFormattedDate)(t.config.dateFormat,e)})):e?f.DateHelper.copy(this._selected[0]):(0,f.getFormattedDate)(this.config.dateFormat,this._selected[0]):""},t.prototype.getCurrentMode=function(){return this._currentViewMode},t.prototype.showDate=function(e,t){e&&(this._currentDate=f.DateHelper.copy(e)),t&&(this._currentViewMode=t),this.paint()},t.prototype.destructor=function(){this._linkedCalendar&&this._unlink(),this._timepicker&&this._timepicker.destructor(),this.events&&this.events.clear(),this.config=this.events=null,this._uid=this._selected=this._currentDate=this._currentViewMode=this._handlers=this._timepicker=this._time=null,this.unmount()},t.prototype.clear=function(){var e=this.getValue(!0);this.events.fire(p.CalendarEvents.beforeChange,["",e,!1])&&(this.config.timePicker&&(this._timepicker.clear(),this._time=this._timepicker.getValue()),this._selected=[],this.showDate(null,this.config.mode),this.events.fire(p.CalendarEvents.change,[this.getValue(!0),e,!1,"clear"]))},t.prototype.link=function(e){var t=this;this._linkedCalendar&&this._unlink(),this._linkedCalendar=e;var i=this.getValue(!0),n=e.getValue(!0),o=i&&f.DateHelper.dayStart(i),r=n&&f.DateHelper.dayStart(n);this.config.$rangeMark&&this._linkedCalendar.config.$rangeMark||(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=function(e){if(o&&r)return e>=o&&e<=r&&function(e){if(f.DateHelper.isSameDay(r,o))return null;var t="dhx_calendar-day--in-range";return f.DateHelper.isSameDay(e,o)&&(t+=" dhx_calendar-day--first-date"),f.DateHelper.isSameDay(e,r)&&(t+=" dhx_calendar-day--last-date"),t}(e)}),this.config.disabledDates&&this._linkedCalendar.config.disabledDates||(this.config.disabledDates=function(e){if(r)return e>r},this._linkedCalendar.config.disabledDates=function(e){if(o)return e<o}),this.config.thisMonthOnly=!0,e.config.thisMonthOnly=!0,this.events.on(p.CalendarEvents.change,(function(e){o=e?f.DateHelper.dayStart(e):null,t._linkedCalendar.paint()}),"link"),this._linkedCalendar.events.on(p.CalendarEvents.change,(function(e){r=e?f.DateHelper.dayStart(e):null,t.paint()}),"link"),this._linkedCalendar.paint(),this.paint()},t.prototype._unlink=function(){this._linkedCalendar&&(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=null,this.config.disabledDates=this._linkedCalendar.config.disabledDates=null,this.events.detach(p.CalendarEvents.change,"link"),this._linkedCalendar.events.detach(p.CalendarEvents.change,"link"),this._linkedCalendar.paint(),this._linkedCalendar=null)},t.prototype._setSelected=function(e){var t=this,i=e instanceof Array?e[0]:e,n=f.DateHelper.toDateObject(i,this.config.dateFormat);if(e instanceof Array&&this.config.range){var o=[];e.forEach((function(e,i){i<2&&o.push(f.DateHelper.toDateObject(e,t.config.dateFormat))})),2===o.length&&o[0]<o[1]?o.forEach((function(e){return t._selected.push(e)})):this._selected[0]=o[0]}else this._selected[0]=n},t.prototype._getSelected=function(){return this._selected[this._selected.length-1]},t.prototype._draw=function(){switch(this._currentViewMode){case"calendar":return this.events.fire(p.CalendarEvents.modeChange,["calendar"]),this._drawCalendar();case"month":return this.events.fire(p.CalendarEvents.modeChange,["month"]),this._drawMonthSelector();case"year":return this.events.fire(p.CalendarEvents.modeChange,["year"]),this._drawYearSelector();case"timepicker":return this.events.fire(p.CalendarEvents.modeChange,["timepicker"]),this._drawTimepicker()}},t.prototype._initHandlers=function(){var e=this,t={Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Left:"ArrowLeft",Esc:"Escape",Spacebar:"Space"},i=function(t){void 0===t&&(t=!1);var i=0;switch(e._currentViewMode){case"calendar":i=t?-7:7;break;case"month":case"year":i=t?-4:4}return i};this._handlers={onkeydown:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(n,o){switch(function(e){var i;if(e.which>=48&&e.which<=57||e.which>=65&&e.which<=90)i=String.fromCharCode(e.which);else{var n=32===e.which?e.code:e.key;i=(0,v.isIE)()&&t[n]||n}return i}(n)){case"Enter":e._selectDate(n,o);break;case"ArrowLeft":e._moveBrowseFocus(n,o,-1);break;case"ArrowRight":e._moveBrowseFocus(n,o,1);break;case"ArrowUp":e._moveBrowseFocus(n,o,i(!0));break;case"ArrowDown":e._moveBrowseFocus(n,o,i())}}},onclick:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(t,i){e._selectDate(t,i)},".dhx_calendar-action__cancel":function(){e.showDate(e._getSelected(),"calendar"),e.events.fire(p.CalendarEvents.cancelClick,[])},".dhx_calendar-action__show-month":function(){return e.showDate(null,"month")},".dhx_calendar-action__show-year":function(){return e.showDate(null,"year")},".dhx_calendar-action__next":function(){var t;switch(e._currentViewMode){case"calendar":t=f.DateHelper.addMonth(e._currentDate,1);break;case"month":t=f.DateHelper.addYear(e._currentDate,1);break;case"year":t=f.DateHelper.addYear(e._currentDate,12)}e.showDate(t)},".dhx_calendar-action__prev":function(){var t;switch(e._currentViewMode){case"calendar":t=f.DateHelper.addMonth(e._currentDate,-1);break;case"month":t=f.DateHelper.addYear(e._currentDate,-1);break;case"year":t=f.DateHelper.addYear(e._currentDate,-12)}e.showDate(t)},".dhx_calendar-action__show-timepicker":function(){e._currentViewMode="timepicker",e.paint()}},onmouseover:{".dhx_calendar-day":function(t,i){e.events.fire(p.CalendarEvents.dateMouseOver,[new Date(i.attrs._date),t]),e.events.fire(p.CalendarEvents.dateHover,[new Date(i.attrs._date),t])}}}},t.prototype._getData=function(e){var t,i=this;switch(this._isSelectedInCurrentRange=!1,this.config.weekStart){case"saturday":t=-1;break;case"monday":t=1;break;default:t=0}for(var n=[],o=6,r=f.DateHelper.weekStart(f.DateHelper.monthStart(e),t);o--;){for(var a=f.DateHelper.getWeekNumber(r),s=0,l=7,c=[],u=function(){var t=f.DateHelper.isWeekEnd(r),n=e.getMonth()===r.getMonth(),o=d.config.disabledDates&&d.config.disabledDates(r),a=[];if(d.config.range&&d._selected[0]&&d._selected[1]){var l=function(){if(i._selected[0]&&i._selected[1]){var e=f.DateHelper.dayStart(i._selected[0]),t=f.DateHelper.dayStart(i._selected[1]);return r>=e&&r<=t&&(f.DateHelper.isSameDay(i._selected[0],i._selected[1])?null:"dhx_calendar-day--in-range")}};d.config.$rangeMark=l}if(t&&a.push("dhx_calendar-day--weekend"),n||(d.config.thisMonthOnly?(s++,a.push("dhx_calendar-day--hidden")):a.push("dhx_calendar-day--muffled")),d.config.mark){var u=d.config.mark(r);u&&a.push(u)}d.config.$rangeMark&&((l=d.config.$rangeMark(r))&&a.push(l));o&&(t?a.push("dhx_calendar-day--weekend-disabled"):a.push("dhx_calendar-day--disabled")),d._selected.forEach((function(e,t){if(e&&f.DateHelper.isSameDay(e,r)){i._isSelectedInCurrentRange=!0;var n="dhx_calendar-day--selected";i.config.range&&(n+=" dhx_calendar-day--selected-".concat(0===t?"first ":"last")),a.push(n)}})),c.push({date:r,day:r.getDate(),css:a.join(" ")}),r=f.DateHelper.addDay(r)},d=this;l--;)u();n.push({weekNumber:a,days:c,disabledWeekNumber:7===s})}return n},t.prototype._drawCalendar=function(){var e,t=this,i=this._currentDate,n=this.config,o=n.weekStart,s=n.thisMonthOnly,c=n.css,u=n.timePicker,d=n.width;switch(o){case"saturday":e=a([f.locale.daysShort[6]],f.locale.daysShort.slice(0,-1),!0);break;case"monday":e=a(a([],f.locale.daysShort.slice(1),!0),[f.locale.daysShort[0]],!1);break;default:e=f.locale.daysShort}for(var h,p=e.map((function(e){return(0,l.el)(".dhx_calendar-weekday",e)})),v=this._getData(i),g=!0,_=this._getSelected(),m=function(e){var i={role:"button",tabindex:-1,"aria-pressed":"false"};return e&&(t._isSelectedInCurrentRange?function(e){return e&&_&&e.getTime()===_.getTime()}(e.date)&&(i.tabindex=0,i["aria-pressed"]="true"):g&&(i.tabindex=0),g=!1),i},y=[],b=[],w=0,x=v;w<x.length;w++){var C=x[w],E=C.days.map((function(e){return(0,l.el)("div.dhx_calendar-day",r({class:e.css,_date:e.date},m(e)),e.day)}));!this.config.weekNumbers||C.disabledWeekNumber&&s||b.push((0,l.el)("div",{class:"dhx_calendar-week-number"},C.weekNumber)),y=y.concat(E)}this.config.weekNumbers&&(h=(0,l.el)(".dhx_calendar__week-numbers",b));var S="dhx_calendar dhx_widget"+(c?" "+c:"")+(u?" dhx_calendar--with_timepicker":"")+(this.config.weekNumbers?" dhx_calendar--with_week-numbers":"");return(0,l.el)("div",r({class:S,style:{width:this.config.weekNumbers?parseInt(d.toString())+48+"px":d}},this._handlers),[(0,l.el)(".dhx_calendar__wrapper",[this._drawHeader((0,l.el)("button.dhx_calendar-action__show-month.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},f.locale.months[i.getMonth()]+" "+i.getFullYear())),this.config.weekNumbers&&(0,l.el)(".dhx_calendar__dates-wrapper",[(0,l.el)(".dhx_calendar__weekdays",p),(0,l.el)(".dhx_calendar__days",y),h]),!this.config.weekNumbers&&(0,l.el)(".dhx_calendar__weekdays",p),!this.config.weekNumbers&&(0,l.el)(".dhx_calendar__days",y),u?(0,l.el)(".dhx_timepicker__actions",[(0,l.el)("button.dhx_calendar__timepicker-button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__show-timepicker",{type:"button"},[(0,l.el)("span.dhx_button__icon.dxi.dxi-clock-outline"),(0,l.el)("span.dhx_button__text",this._time)])]):null])])},t.prototype._drawMonthSelector=function(){var e=this._currentDate,t=e.getMonth(),i=this._getSelected()?this._getSelected().getFullYear():null,n=this.config,o=n.css,a=n.timePicker,s=n.weekNumbers,c=n.width,u=n.mode,d="dhx_calendar dhx_widget"+(o?" "+o:"")+(a?" dhx_calendar--with_timepicker":"")+(s?" dhx_calendar--with_week-numbers":""),h=!0,p=i===e.getFullYear(),v=function(e){return p&&t===e};return(0,l.el)("div",r({class:d,style:{width:s?parseInt(c.toString())+48+"px":c}},this._handlers),[(0,l.el)(".dhx_calendar__wrapper",[this._drawHeader((0,l.el)("button.dhx_calendar-action__show-year.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},e.getFullYear())),(0,l.el)(".dhx_calendar__months",f.locale.monthsShort.map((function(e,t){return(0,l.el)("div",r(r({class:"dhx_calendar-month"+(v(t)?" dhx_calendar-month--selected":"")},function(e,t){var i={role:"button",tabindex:-1,"aria-pressed":"false"};return e&&(p?v(t)&&(i.tabindex=0,i["aria-pressed"]="true"):h&&(i.tabindex=0),h=!1),i}(e,t)),{_date:t}),e)}))),"month"!==u?(0,l.el)(".dhx_calendar__actions",[(0,l.el)("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},f.locale.cancel)]):null])])},t.prototype._drawYearSelector=function(){var e=this,t=this._currentDate,i=f.DateHelper.getTwelweYears(t),n=this.config,o=n.css,a=n.timePicker,s=n.weekNumbers,c=n.width,u=n.mode,d="dhx_calendar dhx_widget"+(o?" "+o:"")+(a?" dhx_calendar--with_timepicker":"")+(s?" dhx_calendar--with_week-numbers":""),h=!0,p=this._getSelected()&&i.includes(this._getSelected().getFullYear()),v=function(t){return e._getSelected()&&t===e._getSelected().getFullYear()};return(0,l.el)("div",r({class:d,style:{width:s?parseInt(c.toString())+48+"px":c}},this._handlers),[(0,l.el)(".dhx_calendar__wrapper",[this._drawHeader((0,l.el)("button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},i[0]+"-"+i[i.length-1])),(0,l.el)(".dhx_calendar__years",i.map((function(e){return(0,l.el)("div",r({class:"dhx_calendar-year"+(v(e)?" dhx_calendar-year--selected":""),_date:e},function(e){var t={role:"button",tabindex:-1,"aria-pressed":"false"};return e&&(p?v(e)&&(t.tabindex=0,t["aria-pressed"]="true"):h&&(t.tabindex=0),h=!1),t}(e)),e)}))),"year"!==u&&"month"!==u?(0,l.el)(".dhx_calendar__actions",[(0,l.el)("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},f.locale.cancel)]):null])])},t.prototype._drawHeader=function(e){return(0,l.el)(".dhx_calendar__navigation",[(0,l.el)("button.dhx_calendar-navigation__button.dhx_calendar-action__prev"+h.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"prev",type:"button"},[(0,l.el)(".dhx_button__icon.dxi.dxi-chevron-left")]),e,(0,l.el)("button.dhx_calendar-navigation__button.dhx_calendar-action__next"+h.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"next",type:"button"},[(0,l.el)(".dhx_button__icon.dxi.dxi-chevron-right")])])},t.prototype._drawTimepicker=function(){var e=this.config,t=e.css,i=e.weekNumbers,n=e.width;return(0,l.el)(".dhx_widget.dhx-calendar",{class:t?" "+t:"",style:{width:i?parseInt(n.toString())+48+"px":n}},[(0,l.inject)(this._timepicker.getRootView())])},t.prototype._selectDate=function(e,t){var i=t.attrs._date,n=f.DateHelper.copy(this._getSelected());switch(this._currentViewMode){case"calendar":var o=this.config.timePicker?f.DateHelper.mergeHoursAndMinutes(i,this._getSelected()||this._currentDate):i;if(!this.events.fire(p.CalendarEvents.beforeChange,[o,n,!0]))return;this.config.range&&1===this._selected.length&&this._selected[0]<o?this._selected.push(o):(this._selected=[],this._selected[0]=o),t.el.blur(),this.showDate(this._getSelected()),this.events.fire(p.CalendarEvents.change,[i,n,!0]);break;case"month":if("month"!==this.config.mode)f.DateHelper.setMonth(this._currentDate,i),this.showDate(null,"calendar"),this.events.fire(p.CalendarEvents.monthSelected,[i]);else{var r=f.DateHelper.fromYearAndMonth(this._currentDate.getFullYear()||this._getSelected().getFullYear(),i);if(!this.events.fire(p.CalendarEvents.beforeChange,[r,n,!0]))return;this._currentDate=r,this._selected[0]=r,this.events.fire(p.CalendarEvents.change,[this._getSelected(),n,!0]),this.events.fire(p.CalendarEvents.monthSelected,[i]),this.paint()}break;case"year":if("year"!==this.config.mode)f.DateHelper.setYear(this._currentDate,i),this.showDate(null,"month"),this.events.fire(p.CalendarEvents.yearSelected,[i]);else{r=f.DateHelper.fromYear(i);if(!this.events.fire(p.CalendarEvents.beforeChange,[r,n,!0]))return;this._currentDate=r,this._selected[0]=r,this.events.fire(p.CalendarEvents.change,[this._getSelected(),n,!0]),this.events.fire(p.CalendarEvents.yearSelected,[i]),this.paint()}}},t.prototype._moveBrowseFocus=function(e,t,i){if(t){var n=t.parent.body[t.idx+i];if(n){var o=n.el;o&&(e.target.tabIndex=-1,o.tabIndex=0,o.focus({preventScroll:!0}))}}},t}(u.View);t.Calendar=g},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Timepicker=void 0;var a=i(0),s=i(1),l=i(3),c=i(8),u=i(17),d=i(73),h=i(140),f=i(141),p=i(76),v=i(4);function g(e,t){return isNaN(e)?0:Math.min(t,Math.max(0,e))}var _=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,(0,a.extend)({timeFormat:24,controls:!1,valueFormat:"string",actions:!1},i))||this;return n.events=new l.EventSystem(n),n._time={hour:0,minute:0,AM:!0},12===n.config.timeFormat&&(n._time.hour=12),n.config.controls=n.config.controls||n.config.actions,n.config.value&&n._setValue(n.config.value),n._initUI(t),n._initHandlers(),n._initEvents(),n}return o(t,e),t.prototype.getValue=function(e){return 12===this.config.timeFormat&&(this._time.hour=this._time.hour%12||12),this._getValue(this._time,e)},t.prototype.setValue=function(e){this._setValue(e),this._hoursSlider.setValue(this._time.hour),this._minutesSlider.setValue(this._time.minute),this._inputsView.paint()},t.prototype.clear=function(){24===this.config.timeFormat?this.setValue("00:00"):this.setValue("12:00AM")},t.prototype.destructor=function(){this._minutesSlider&&this._minutesSlider.destructor(),this._hoursSlider&&this._hoursSlider.destructor(),this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this.events=null,this._handlers=this._time=this._inputsView=this._minutesSlider=this._hoursSlider=null,this.unmount()},t.prototype.getRootView=function(){return this.layout.getRootView()},t.prototype._getValue=function(e,t){var i=e.hour,n=e.minute,o=e.AM;if(t){var r={hour:i,minute:n};return 12===this.config.timeFormat&&(r.AM=o),r}return(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)+(12===this.config.timeFormat?o?"AM":"PM":"")},t.prototype._setValue=function(e){var t,i=0,n=0;if("number"==typeof e&&(e=new Date(e)),e instanceof Date)i=e.getMinutes(),n=e.getHours();else if(Array.isArray(e))n=g(e[0],23),i=g(e[1],59),e[2]&&"pm"===e[2].toLowerCase()&&(t=!0);else if("string"==typeof e){var o=e.match(/\d+/g);n=g(+o[0],23),i=g(+o[1],59),e.toLowerCase().includes("pm")&&(t=!0)}else"object"==typeof e&&e.hasOwnProperty("hour")&&e.hasOwnProperty("minute")&&(n=e.hour,i=e.minute,t=!e.AM);return t&&n<12&&(n+=12),12===this.config.timeFormat&&!(0,f.isTimeCheck)(e)&&n>=12&&(t=!0),this._time={hour:n,minute:i,AM:!t}},t.prototype._initUI=function(e){var t=this,i={gravity:!1,css:"dhx_widget dhx_timepicker "+(this.config.css?this.config.css:"")+(this.config.controls?" dhx_timepicker--with-controls":""),rows:[{id:"timepicker",css:"dhx_timepicker__inputs"},{id:"hour-slider",css:"dhx_timepicker__hour"},{id:"minute-slider",css:"dhx_timepicker__minute"}]};this.config.controls&&(i.rows.unshift({id:"close-action",css:"dhx_timepicker__close"}),i.rows.push({id:"save-action",css:"dhx_timepicker__save"}));var n=this.layout=new u.Layout(e,i),o=(0,s.create)({render:function(){return t._draw()}}),r=this._inputsView=(0,c.toViewLike)(o),a=this._minutesSlider=new d.Slider(null,{min:0,max:59,step:1,tooltip:!1,labelPosition:"top",label:h.default.minutes,value:this.config.value?this._time.minute:0}),l=this._hoursSlider=new d.Slider(null,{min:0,max:23,step:1,tooltip:!1,labelPosition:"top",label:h.default.hours,value:this.config.value?12===this._time.hour&&this._time.AM?0:this._time.hour:0});if(n.getCell("timepicker").attach(r),n.getCell("hour-slider").attach(l),n.getCell("minute-slider").attach(a),this.config.controls){n.getCell("save-action").attach((function(){return(0,s.el)("button.dhx_timepicker__button-save.dhx_button.dhx_button--view_flat.dhx_button--color_primary.dhx_button--size_small.dhx_button--circle.dhx_button--width_full",{onclick:t._outerHandlers.save,type:"button"},h.default.save)})),n.getCell("close-action").attach((function(){return(0,s.el)("button.dhx_timepicker__button-close.dhx_button.dhx_button--view_link.dhx_button--size_medium.dhx_button--view_link.dhx_button--color_secondary.dhx_button--icon.dhx_button--circle",{_ref:"close",onclick:t._outerHandlers.close,type:"button","aria-label":"close timepicker"},[(0,s.el)("span.dhx_button__icon.dxi.dxi-close")])}))}},t.prototype._initHandlers=function(){var e=this,t=function(t){var i=g(parseInt(t.value,10),59);t.value=i.toString(),e._minutesSlider.setValue(i)},i=function(t){var i=g(parseInt(t.value,10),23);t.value=i.toString(),e._hoursSlider.setValue(i)};this._handlers={onchange:{".dhx_timepicker-input--hour":function(e){return i(e.target)},".dhx_timepicker-input--minutes":function(e){return t(e.target)}},oninput:{".dhx_timepicker-input--hour":function(e){((0,v.isSafari)()||(0,v.isFirefox)())&&i(e.target)},".dhx_timepicker-input--minutes":function(e){((0,v.isSafari)()||(0,v.isFirefox)())&&t(e.target)}}},this._outerHandlers={close:function(){e.events.fire(p.TimepickerEvents.beforeClose,[e.getValue(e._isTimeObj())])&&(e.events.fire(p.TimepickerEvents.afterClose,[e.getValue(e._isTimeObj())]),e.events.fire(p.TimepickerEvents.close,[]))},save:function(){e.events.fire(p.TimepickerEvents.beforeApply,[e.getValue(e._isTimeObj())])&&(e.events.fire(p.TimepickerEvents.afterApply,[e.getValue(e._isTimeObj())]),e.events.fire(p.TimepickerEvents.apply,[e.getValue()]),e.events.fire(p.TimepickerEvents.save,[e._time]))}}},t.prototype._initEvents=function(){var e=this;this._hoursSlider.events.on(d.SliderEvents.beforeChange,(function(t){if(!(t<e._hoursSlider.config.min||t>e._hoursSlider.config.max)){var i=r({},e._time);12===e.config.timeFormat?(i.AM=t<12,i.hour=t%12||12):i.hour=t;var n=e._isTimeObj();return e.events.fire(p.TimepickerEvents.beforeChange,[e._getValue(i,n)])}})),this._hoursSlider.events.on(d.SliderEvents.change,(function(t){if(!(t<e._hoursSlider.config.min||t>e._hoursSlider.config.max)){12===e.config.timeFormat?(e._time.AM=t<12,e._time.hour=t%12||12):e._time.hour=t;var i=e._isTimeObj();e.events.fire(p.TimepickerEvents.change,[e.getValue(i)]),e._inputsView.paint()}})),this._minutesSlider.events.on(d.SliderEvents.beforeChange,(function(t){if(!(t<e._minutesSlider.config.min||t>e._minutesSlider.config.max)){var i=r(r({},e._time),{minute:t}),n=e._isTimeObj();return e.events.fire(p.TimepickerEvents.beforeChange,[e._getValue(i,n)])}})),this._minutesSlider.events.on(d.SliderEvents.change,(function(t){if(!(t<e._minutesSlider.config.min||t>e._minutesSlider.config.max)){e._time.minute=t;var i=e._isTimeObj();e.events.fire(p.TimepickerEvents.change,[e.getValue(i)]),e._inputsView.paint()}}))},t.prototype._draw=function(){return(0,s.el)(".dhx_timepicker-inputs",r({},this._handlers),[(0,s.el)("input.dhx_timepicker-input.dhx_timepicker-input--hour",{_key:"hour",_ref:"hour",value:this.getValue(!0).hour.toString().length>1?this.getValue(!0).hour:"0"+this.getValue(!0).hour,"aria-label":"hours"}),(0,s.el)("span.dhx_timepicker-delimer",":"),(0,s.el)("input.dhx_timepicker-input.dhx_timepicker-input--minutes",{_key:"minute",value:this.getValue(!0).minute.toString().length>1?this.getValue(!0).minute:"0"+this.getValue(!0).minute,"aria-label":"minutes"}),12===this.config.timeFormat?(0,s.el)(".dhx_timepicker-ampm",this._time.AM?"AM":"PM"):null])},t.prototype._isTimeObj=function(){var e;return"timeobject"===(null===(e=this.config.valueFormat)||void 0===e?void 0:e.toLowerCase())},t}(c.View);t.Timepicker=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMarginSize=t.getBlockRange=void 0,t.getBlockRange=function(e,t,i){return void 0===i&&(i=!0),i?{min:e.left+window.pageXOffset,max:t.right+window.pageXOffset}:{min:e.top+window.pageYOffset,max:t.bottom+window.pageYOffset}},t.getMarginSize=function(e){return e&&("space"===e.type||"wide"===e.type)?12:0}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProLayout=void 0;var r=i(54),a=i(137),s=function(e){function t(t,i){return e.call(this,t,i)||this}return o(t,e),t.prototype._createCell=function(e){var i;return e.rows||e.cols||e.views?(e.parent=this._root,i=new t(this,e)):i=new a.ProCell(this,e),this._root._all[i.id]=i,e.init&&e.init(i,e),i},t}(r.Layout);t.ProLayout=s},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProCell=void 0;var a=i(0),s=i(1),l=i(34),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.scrollView=new l.ScrollView((function(){return n._getFirstRootView()})),n}return o(t,e),t.prototype._getFirstRootView=function(e){return void 0===e&&(e=this),e.getParent()&&e.getParent().getRootView()?e.getParent().getRootView():this._getFirstRootView(e.getParent())},t.prototype.toVDOM=function(e){var t,i;if(null===this.config&&(this.config={}),!this.config.hidden){var n,o=this.config.$fieldset,l=this._calculateStyle(),c=(0,a.isDefined)(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:"".concat(this.config.padding,"px")}:"",u=this.config.full||this.config.html?l:r(r({},l),c),d=this._checkProgress()?this._getProgressBar():null;if(!this.config.html)if(this._ui){var h=this._ui.getRootView();h.render&&(h=(0,s.inject)(h)),n=h?[this.scrollView.render(h)]:h||null}else n=e?this.scrollView.render([e]):e||null;var f=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?(0,s.el)(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),r(r({},this._resizerHandlers),{_ref:"resizer_"+this._uid}),[(0,s.el)("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,p={};if(this.config.on)for(var v in this.config.on)p["on"+v]=this.config.on[v];var g="",_=this.config.cols||this.config.rows;if(this.config.type&&_)switch(this.config.type){case"line":g=" dhx_layout-line";break;case"wide":g=" dhx_layout-wide";break;case"space":g=" dhx_layout-space"}var m=(0,s.el)(".dhx_layout-cell-content",{_key:"".concat(this._uid,"_html"),style:c},[(0,s.el)(".dhx_layout-cell-inner_html",{".innerHTML":this.config.html})]),y=o?(0,s.el)("fieldset.dhx_form-fieldset",{class:this.config.$disabled?" dhx_form-fieldset--disabled":"",style:c,disabled:this.config.$disabled},[(0,s.el)("legend.dhx_form-fieldset-legend",{class:"dhx_form-fieldset-legend--".concat(this.config.labelAlignment||"left")},this.config.label),(0,s.el)(".dhx_layout-cell-content",{class:this._getCss(!1)},[n])]):this.config.full?[(0,s.el)("div",{tabindex:this.config.collapsable?"0":"-1",class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&(0,s.el)("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&(0,s.el)(".dhx_layout-cell-header__image-wrapper",[(0,s.el)("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&(0,s.el)("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?(0,s.el)("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):(0,s.el)("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:(0,s.el)("div",{style:r(r({},c),{height:"calc(100% - ".concat(this.config.headerHeight||37,"px)")}),class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?g:"")},this.config.html?[(0,s.el)("div",{".innerHTML":this.config.html,class:"dhx_layout-cell dhx_layout-cell-inner_html"})]:n)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?n:[this.config.collapsed?null:this.scrollView&&this.scrollView.config.enable?this.scrollView.render([m],this._uid):m],b=(0,s.el)("div",r(r(((t={_key:this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,t["data-cell-id"]=null!==(i=this.config.id)&&void 0!==i?i:null,t),p),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?g:""),style:o?l:u}),y||d?[y,d]:null);return f?[b,f]:b}},t}(i(72).Cell);t.ProCell=c},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var a=i(0),s=i(1),l=i(3),c=i(21),u=i(8),d=i(10),h=i(75),f=i(4);function p(e,t,i){return e<t?t:e>i?i:e}var v=function(e){function t(t,i){var n=e.call(this,t,(0,a.extend)({mode:"horizontal",min:0,max:100,step:1,tooltip:!0},i))||this;n._disabled=!1,n.config.helpMessage=n.config.helpMessage||n.config.help,void 0!==n.config.thumbLabel&&(n.config.tooltip=n.config.thumbLabel),n.config.labelInline&&(n.config.labelPosition="left"),n.events=new l.EventSystem(n),n._axis="horizontal"===n.config.mode?"clientX":"clientY",n._initStartPosition(),n._keyManager=new c.KeyManager((function(){var e,t;return document.activeElement===(null===(t=null===(e=n.getRootView().refs)||void 0===e?void 0:e[n._isExtraActive?"extraRunner":"runner"])||void 0===t?void 0:t.el)})),n._initHotkeys();var o=(0,s.create)({render:function(){return n._draw()},hooks:{didMount:function(){return n._calcSliderPosition()},didRedraw:function(){return n._calcSliderPosition()}}});return n._initHandlers(),n.mount(t,o),n}return o(t,e),t.prototype.disable=function(){this._disabled=!0,this.paint()},t.prototype.enable=function(){this._disabled=!1,this.paint()},t.prototype.isDisabled=function(){return this._disabled},t.prototype.focus=function(e){this.getRootView().refs[e?"extraRunner":"runner"].el.focus()},t.prototype.blur=function(){this.getRootView().refs[this._isExtraActive?"extraRunner":"runner"].el.blur()},t.prototype.getValue=function(){var e;if(this.config.range){var t=this._getValue(this._currentPosition),i=this._getValue(this._extraCurrentPosition);e=t<i?[t,i]:[i,t]}else e=[this._getValue(this._currentPosition)];return e},t.prototype.setValue=function(e){var t=this._getValue(this._currentPosition);if(Array.isArray(e)&&e.length>1){var i=this._getValue(this._extraCurrentPosition);this.events.fire(h.SliderEvents.beforeChange,[e[0],t,!1])&&(this._setValue(e[0],!1),this.events.fire(h.SliderEvents.change,[e[0],t,!1])),this.events.fire(h.SliderEvents.beforeChange,[e[1],i,!0])&&(this._setValue(e[1],!0),this.events.fire(h.SliderEvents.change,[e[1],i,!0]))}else{if(e=parseFloat(e),isNaN(e))throw new Error("Wrong value type, for more info check documentation https://docs.dhtmlx.com/suite/slider__api__slider_setvalue_method.html");this.events.fire(h.SliderEvents.beforeChange,[e,t,!1])&&(this._setValue(e),this.events.fire(h.SliderEvents.change,[e,t,!1]))}this.paint()},t.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),this._tooltip=null,this.unmount()},t.prototype._calcSliderPosition=function(){var e=this.getRootView();if(e){var t=e.refs.track.el.getBoundingClientRect();this._offsets={left:t.left+window.pageXOffset,top:t.top+window.pageYOffset},this._length="horizontal"===this.config.mode?t.width:t.height}},t.prototype._initHotkeys=function(){var e=this,t={arrowLeft:function(t){t.preventDefault(),e._move(-e.config.step,t.target.classList.contains("dhx_slider__thumb--extra"))},arrowRight:function(t){t.preventDefault(),e._move(e.config.step,t.target.classList.contains("dhx_slider__thumb--extra"))},arrowUp:function(t){t.preventDefault(),e._move(e.config.step,t.target.classList.contains("dhx_slider__thumb--extra"))},arrowDown:function(t){t.preventDefault(),e._move(-e.config.step,t.target.classList.contains("dhx_slider__thumb--extra"))}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t.prototype._move=function(e,t){void 0===t&&(t=!1),this.config.inverse&&(e=-e);var i=this.config,n=i.max,o=i.min,r=t?this._getValue(this._extraCurrentPosition):this._getValue(this._currentPosition),a=r+e;(a>n||a<o)&&(a=r),this.events.fire(h.SliderEvents.beforeChange,[a,r,t])&&(this._setValue(r+e,t),this.events.fire(h.SliderEvents.change,[a,r,t]),this.paint())},t.prototype._initStartPosition=function(){var e=this.config,t=e.max,i=e.min,n=e.range,o=function(e,t,i){var n;return(n=void 0===e?[]:Array.isArray(e)?e:"string"==typeof e?e.split(",").map((function(e){return parseInt(e,10)})):[e])[0]=void 0===n[0]?t:p(n[0],t,i),n[1]=void 0===n[1]?i:p(n[1],t,i),n}(this.config.value,this.config.min,this.config.max),r=o[0],a=o[1];this._currentPosition=(r-i)/(t-i)*100,n&&(this._extraCurrentPosition=(t-a)/(t-i)*100),this._currentPosition=(r-i)/(t-i)*100,n&&(this._extraCurrentPosition=(a-i)/(t-i)*100),this._isInverse()&&(this._currentPosition=100-this._currentPosition,n&&(this._extraCurrentPosition=100-this._extraCurrentPosition))},t.prototype._getValue=function(e){this._isInverse()&&(e=100-e);var t=this.config,i=t.min,n=t.max,o=t.step;if(100===e)return n;if(0===e)return i;var r=e*(n-i)/100,a=r%o,s=a>=o/2?o:0;return+(Number(i)+Number(r)-a+s).toFixed(5)},t.prototype._setValue=function(e,t){void 0===t&&(t=!1);var i=this.config,n=i.max,o=i.min;if(e>n||e<o)return!1;var r=(e-o)/(n-o)*100,a=this._isInverse()?100-r:r;t?this._extraCurrentPosition=a:this._currentPosition=a},t.prototype._initHandlers=function(){var e=this,t=function(t){t.cancelable&&t.preventDefault();var i=((t.targetTouches?t.targetTouches[0][e._axis]:t[e._axis])-e._getBegining())/e._length*100;if(e._findNewDirection){if(Math.abs(e._currentPosition-i)<1)return;i>e._currentPosition?e._possibleRange=[e._currentPosition,100]:e._possibleRange=[0,e._currentPosition],e._findNewDirection=null}e._inSide(i)&&e._updatePosition(i,e._isExtraActive),e.paint()},i=function(n){e.events.fire(h.SliderEvents.mouseup,[n]),setTimeout((function(){e._isMouseMoving=!1,e.paint()}),4),n.targetTouches?(document.removeEventListener("touchend",i),document.removeEventListener("touchmove",t)):(document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",t))},n=function(t){var i;if(!e._disabled&&3!==t.which)if(e.events.fire(h.SliderEvents.mousedown,[t]),e._isMouseMoving=!0,t.target.classList.contains("dhx_slider__thumb--extra")?(e._isExtraActive=!0,i=e._extraCurrentPosition):(e._isExtraActive=!1,i=e._currentPosition),e._findNewDirection=null,e.config.range){var n=e._currentPosition>e._extraCurrentPosition?[e._currentPosition,e._extraCurrentPosition]:[e._extraCurrentPosition,e._currentPosition],o=n[0],r=n[1];e._currentPosition===e._extraCurrentPosition?(e._findNewDirection=i,e._possibleRange=[0,100]):e._possibleRange=i<o?[0,o]:[r,100]}else e._possibleRange=[0,100]};this.config.helpMessage&&(this._helper=new d.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(t){t.preventDefault(),t.stopPropagation(),e._helper.show(t.target,{theme:t.target})},onmousedown:function(e){n(e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)},ontouchstart:function(o){e._setTooltip(o),e._mouseIn=!1,n(o),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",i),e.paint()},ontouchend:function(t){e._setTooltip(t),e._mouseIn=!1,e.paint()},onlabelClick:function(){e.getRootView().refs.runner.el.focus()},onclick:function(t){if(!e._disabled&&!e._isMouseMoving&&3!==t.which){var i=(t[e._axis]-e._getBegining())/e._length*100,n=e.getRootView().refs;if(e.config.range)Math.abs(e._currentPosition-i)<Math.abs(e._extraCurrentPosition-i)?(e._updatePosition(i,!1),n.runner.el.focus()):(e._updatePosition(i,!0),n.extraRunner.el.focus());else e._updatePosition(i,!1),n.runner.el.focus();e.paint()}},onmouseover:function(t){e._setTooltip(t),e._mouseIn=!0,e.paint()},onmouseout:function(t){e._setTooltip(t),e._mouseIn=!1,e.paint()},onfocus:function(t){e._setTooltip(t),e._focusIn=!0,e.events.fire(h.SliderEvents.focus,[]),e.paint()},onblur:function(t){e._setTooltip(t),e._focusIn=!1,e.events.fire(h.SliderEvents.blur,[]),e.paint()},onkeydown:function(t){e.events.fire(h.SliderEvents.keydown,[t])}}},t.prototype._getBegining=function(){return"horizontal"===this.config.mode?this._offsets.left-window.pageXOffset:this._offsets.top-window.pageYOffset},t.prototype._inSide=function(e){var t=this._possibleRange;return e<t[0]?(this._updatePosition(t[0],this._isExtraActive),!1):!(e>t[1])||(this._updatePosition(t[1],this._isExtraActive),!1)},t.prototype._updatePosition=function(e,t){void 0===t&&(t=!1),e>100&&(e=100),e<0&&(e=0);var i=this.config,n=i.max,o=i.min,r=t?this._extraCurrentPosition:this._currentPosition,a=this._getValue(r),s=this._getValue(e);if(a!==s&&this.events.fire(h.SliderEvents.beforeChange,[s,a,t])){var l=(s-o)/(n-o)*100,c=this._isInverse()?100-l:l;t?this._extraCurrentPosition=c:this._currentPosition=c,this.events.fire(h.SliderEvents.change,[s,a,t])}},t.prototype._getRunnerStyle=function(e){var t;void 0===e&&(e=!1);var i="horizontal"===this.config.mode?"left":"top",n=e?this._extraCurrentPosition:this._currentPosition;return(t={})[i]=n+"%",t},t.prototype._isInverse=function(){return this.config.inverse&&"horizontal"===this.config.mode||!this.config.inverse&&"vertical"===this.config.mode},t.prototype._getRunnerCss=function(e){return void 0===e&&(e=!1),"dhx_slider__thumb"+(e?" dhx_slider__thumb--extra":"")+(this._isMouseMoving&&(e&&this._isExtraActive||!e&&!this._isExtraActive)?" dhx_slider__thumb--active":"")+(this._disabled?" dhx_slider__thumb--disabled":"")+(this._isNullable(e?this._extraCurrentPosition:this._currentPosition)&&!this.config.range?" dhx_slider__thumb--nullable":"")},t.prototype._draw=function(){var e=this.config,t=e.labelPosition,i=e.mode,n=e.hiddenLabel,o=e.tick,a=e.majorTick,l=e.css,c=e.helpMessage,u=(0,f.getLabelStyle)(r(r({},this.config),{required:!1}));return!this._tooltip||this._mouseIn&&this._focusIn&&this._isMouseMoving||document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),(0,s.el)("div",{class:"dhx_slider dhx_slider--mode_"+i+("left"===t?" dhx_slider--label-inline":"")+(n?" dhx_slider--label_sr":"")+(o?" dhx_slider--ticks":"")+(a?" dhx_slider--major-ticks":"")+(l?" "+l:"")+(this._disabled?" dhx_slider--disabled":""),style:{paddingBottom:this.config.tick?"16px":null}},[u?(0,s.el)("label.dhx_label.dhx_slider__label",{style:u.style,class:c?"dhx_label--with-help":"",onclick:this._handlers.onlabelClick},c?[u.label&&(0,s.el)("span.dhx_label__holder",u.label),(0,s.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper})]:u.label):null,this._drawSlider()])},t.prototype._drawSlider=function(){return(0,s.el)(".dhx_widget.dhx_slider__track-holder",{"data-dhx-widget-id":this._uid},[(0,s.el)(".dhx_slider__track",{_ref:"track",onmouseover:this._handlers.onmouseover,onmouseout:this._handlers.onmouseout,onclick:this._handlers.onclick},[this._getDetector(),(0,s.el)("div",{_ref:"runner",class:this._getRunnerCss(),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(),tabindex:0}),this.config.tooltip&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip():null,this.config.tooltip&&this.config.range&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip(!0):null,this.config.range?(0,s.el)("div",{_ref:"extraRunner",class:this._getRunnerCss(!0),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(!0),tabindex:0}):null]),this.config.tick?this._drawTicks():null])},t.prototype._getDetector=function(){var e,t,i;if(this._disabled)return(0,s.el)(".dhx_slider__range");var n="horizontal"===this.config.mode?"left":"top",o="horizontal"===this.config.mode?"width":"height";if(this.config.range){var r=this._currentPosition>this._extraCurrentPosition?[this._currentPosition,this._extraCurrentPosition]:[this._extraCurrentPosition,this._currentPosition],a=r[0],l=r[1];return(0,s.el)(".dhx_slider__range",{style:(e={},e[n]=l+"%",e[o]=a-l+"%",e)})}return this._isInverse()?(0,s.el)(".dhx_slider__range",{style:(t={},t[n]=this._currentPosition+"%",t[o]=100-this._currentPosition+"%",t)}):(0,s.el)(".dhx_slider__range",{style:(i={},i[n]=0,i[o]=this._currentPosition+"%",i)})},t.prototype._drawTooltip=function(e){if(void 0===e&&(e=!1),"none"!==this._activeTooltip&&this.getRootView()){var t="extraTooltip"===this._activeTooltip?this._extraCurrentPosition:this._currentPosition,i="horizontal"===this.config.mode?"left":"top",n="";(e&&this._isExtraActive||!e&&!this._isExtraActive)&&(n+=" dhx_slider__thumb-label--active"),this._tooltip||(this._tooltip=document.createElement("div"));var o="tooltip"===this._activeTooltip?this.getRootView().refs.runner.el.getBoundingClientRect():this.getRootView().refs.extraRunner.el.getBoundingClientRect();this._tooltip.className="dhx_slider__thumb-label"+n,this._tooltip.style.left=o.x+("left"===i?6:-30)+window.pageXOffset+"px",this._tooltip.style.top=o.y+("left"===i?-30:6)+window.pageYOffset+"px",this._tooltip.innerText=this._getValue(t).toString(),document.body.appendChild(this._tooltip)}},t.prototype._getTicks=function(){for(var e=this.config,t=e.max,i=e.min,n=e.step,o=e.tick,r=e.majorTick,a=t-i,s=n*o/a,l=[],c=0,u=0;c<1;){var d=+(Number(i)+c*a).toFixed(5),h=u%r==0;l.push({position:(this._isInverse()?100*(1-c):100*c)+"%",isMultiple:h,label:h&&"function"==typeof this.config.tickTemplate?this.config.tickTemplate(d):null}),c+=s,u++}return l.push({position:(this._isInverse()?0:100)+"%",isMultiple:!0,label:"function"==typeof this.config.tickTemplate?this.config.tickTemplate(t):null}),l},t.prototype._drawTicks=function(){var e="horizontal"===this.config.mode?"left":"top";return(0,s.el)(".dhx_slider__ticks-holder",this._getTicks().map((function(t){var i;return(0,s.el)("div",{class:"dhx_slider__tick"+(t.isMultiple?" dhx_slider__tick--major":""),style:(i={},i[e]=t.position,i)},void 0!==t.label?[(0,s.el)(".dhx_slider__tick-label",t.label)]:null)})))},t.prototype._isNullable=function(e){return this._isInverse()?100===e:0===e},t.prototype._setTooltip=function(e){e.target.classList.contains("dhx_slider__thumb--extra")?this._activeTooltip="extraTooltip":e.target.classList.contains("dhx_slider__thumb")?this._activeTooltip="tooltip":this._activeTooltip="none"},t}(u.View);t.Slider=v},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;var a=i(0),s=i(1),l=i(3),c=i(4),u=i(8),d=i(74),h=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,null,(0,a.extend)({},t))||this,n=i._popup=document.createElement("div");return n.className="dhx_widget dhx_popup"+(i.config.css?" "+i.config.css:""),n.style.position="absolute",n.setAttribute("role","dialog"),n.setAttribute("aria-modal","true"),n.setAttribute("aria-live","polite"),i.config.theme&&i._setTheme(i.config.theme),i.mount(n,(0,s.create)({render:function(){return i.toVDOM()}})),i._clickEvent=function(e){return i.events.fire(d.PopupEvents.click,[e])},i.events=t.events||new l.EventSystem(i),i._isActive=!1,i}return o(t,e),t.prototype.show=function(e,t,i){var n=this;void 0===t&&(t={}),this.events.fire(d.PopupEvents.beforeShow,[e])&&(e=(0,c.toNode)(e),this._isActive?this._setPopupSize(e,t):(i&&this.attach(i),t.theme&&this._setTheme(t.theme),this._popup.style.left="0",this._popup.style.top="0",(0,s.awaitRedraw)().then((function(){n._setPopupSize(e,t),n._popup.style.position="fixed",document.body.appendChild(n._popup),n._isActive=!0})).then((function(){n._popup.style.position="absolute",n.events.fire(d.PopupEvents.afterShow,[e]),n._outerClickDestructor=n._detectOuterClick(e)}))))},t.prototype.hide=function(){this._hide(!1,null)},t.prototype.isVisible=function(){return this._isActive},t.prototype.attach=function(e,t){return this._html=null,"object"==typeof e?this._ui=e:"string"==typeof e?this._ui=new window.dhx[e](null,t):"function"==typeof e&&(e.prototype instanceof u.View?this._ui=new e(null,t):this._ui={getRootView:function(){return e(t)}}),this.paint(),this._ui},t.prototype.attachHTML=function(e){this._html=e,this.paint()},t.prototype.getWidget=function(){return this._ui},t.prototype.getContainer=function(){return this.getRootView().refs.content.el},t.prototype.toVDOM=function(){var e;return this._html?e=(0,s.el)(".dhx_popup__inner-html-content",{".innerHTML":this._html}):(e=this._ui?this._ui.getRootView():null)&&e.render&&(e=(0,s.inject)(e)),(0,s.el)("div",{class:"dhx_popup-content",tabindex:0,onclick:this._clickEvent,_key:this._uid,_ref:"content"},[e])},t.prototype.destructor=function(){this.hide(),this._outerClickDestructor&&this._outerClickDestructor(),this._popup=null},t.prototype._setTheme=function(e){var t;if("string"==typeof e)this._popup.setAttribute("data-dhx-theme",e);else{var i=null===(t=null==e?void 0:e.closest("[data-dhx-theme]"))||void 0===t?void 0:t.getAttribute("data-dhx-theme");i&&this._popup.setAttribute("data-dhx-theme",i)}},t.prototype._setPopupSize=function(e,t,i){var n=this;void 0===i&&(i=3);var o=this._popup.getBoundingClientRect(),a=o.width,s=o.height;if(this._timeout&&(clearTimeout(this._timeout),this._timeout=null),!i||0!==a&&0!==s){var l=(0,c.fitPosition)(e,r(r({centering:!0,mode:"bottom"},t),{width:a,height:s})),u=l.left,d=l.top;if(this._popup.style.left=u,this._popup.style.top=d,t.indent&&0!==t.indent)switch(t.mode){case"top":this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)-parseInt(t.indent.toString(),null)+"px";break;case"bottom":default:this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px";break;case"left":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)-parseInt(t.indent.toString(),null)+"px";break;case"right":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px"}}else this._timeout=setTimeout((function(){n._isActive&&(n._setPopupSize(e,t,i-1),n._timeout=null)}))},t.prototype._detectOuterClick=function(e){var t=this,i=!1,n=new WeakMap,o=function(r){var a=r.target,s=document.querySelectorAll(".dhx_popup");for(i?s.forEach((function(e){return n.has(e)||n.set(e,t._popup)})):(i=Boolean(s.length))&&s.forEach((function(e){return n.set(e,!0)}));a;){if(a===e||a===t._popup||n.get(a)===t._popup)return;a=a.parentNode}t._hide(!0,r)&&document.removeEventListener("mousedown",o)};return document.addEventListener("mousedown",o),function(){return document.removeEventListener("mousedown",o)}},t.prototype._hide=function(e,t){if(this._isActive)return!!this.events.fire(d.PopupEvents.beforeHide,[e,t])&&(document.body.removeChild(this._popup),this._isActive=!1,this._outerClickDestructor&&(this._outerClickDestructor(),this._outerClickDestructor=null),this.events.fire(d.PopupEvents.afterHide,[t]),!0)},t}(u.View);t.Popup=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={hours:"Hours",minutes:"Minutes",save:"Save"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeCheck=void 0,t.isTimeCheck=function(e){return/(^12:[0-5][0-9]?AM$)/i.test(e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkButtonClasses=void 0,t.linkButtonClasses=".dhx_button.dhx_button--view_link.dhx_button--icon.dhx_button--size_medium.dhx_button--color_secondary"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxEditor=void 0;var n=i(0),o=i(1),r=i(9),a=function(){function e(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}return e.prototype.endEdit=function(){var e=this._checked;this._config.events.fire(r.GridEvents.beforeEditEnd,[e,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(r.GridEvents.afterEditEnd,[e,this._cell.row,this._cell.col])):this._input.checked=!e},e.prototype.toHTML=function(){void 0===this._checked&&(this._checked=this._cell.row[this._cell.col.id]);var e=(0,n.uid)();return(0,o.el)("div.dhx_checkbox.dhx_cell-editor__checkbox",[(0,o.el)("label",{style:{display:"none"},for:e},this._checked||"false"),(0,o.el)("input.dhx_checkbox__input",{type:"checkbox",_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor","data-dhx-checked":(!!this._checked).toString(),checked:this._checked,id:e,style:{userSelect:"none"}}),(0,o.el)("span.dhx_checkbox__visual-input")])},e.prototype._initHandlers=function(){var e=this;this._handlers={onClick:function(){var t=!e._input.checked;e._config.events.fire(r.GridEvents.beforeEditStart,[e._cell.row,e._cell.col,"checkbox"])?(e._checked=t,e._config.events.fire(r.GridEvents.afterEditStart,[e._cell.row,e._cell.col,"checkbox"]),e.endEdit()):e._input.checked=!t},didInsert:function(t){e._checkbox=t.el.parentNode.lastChild,e._input=t.el.parentNode.querySelector("input"),t.el.parentNode.addEventListener("click",e._handlers.onClick)}}},e}();t.CheckboxEditor=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ComboboxEditor=void 0;var o=i(1),r=i(9),a=i(56),s=i(20),l=i(22),c=function(){function e(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}return e.prototype.endEdit=function(e){var t=this;if(this._config.$editable){var i;if(!e){var n=this._input.getValue();i="multiselect"===this._cell.col.editorType?n.split(",").join(", "):n}if(this._config.events.fire(r.GridEvents.beforeEditEnd,[i,this._cell.row,this._cell.col])){var o=(0,l.getEditorOptions)(this._cell.col,this._cell.row);this._input.popup.hide(),document.removeEventListener("mousedown",this._handlers.onOuterClick),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),s.focusManager.setFocusId(this._config.gridId),null==i||i.toString().split(", ").forEach((function(e){var i=o.find((function(t){return"string"==typeof t?t===e:t.id.toString()===e}));e&&!i&&(t._cell.col.$customOptions||(t._cell.col.$customOptions=[]),t._cell.col.$customOptions.push(t._input.data.getItem(e)))})),this._config.$editable=null,this._config.events.fire(r.GridEvents.afterEditEnd,[i,this._cell.row,this._cell.col])}else this._input.focus()}},e.prototype.toHTML=function(){var e=this,t=(0,l.getEditorOptions)(this._cell.col,this._cell.row).map((function(e){return"string"==typeof e?{id:"".concat(e),value:e}:e}))||[];if(!this._input){this._input=new a.Combobox(null,n({itemHeight:37,css:"dhx_cell-editor__combobox",multiselection:"multiselect"===this._cell.col.editorType,htmlEnable:this._cell.col.htmlEnable},this._cell.col.editorConfig)),this._input.data.parse(t);var i=this._cell.row[this._cell.col.id],r="multiselect"===this._cell.col.editorType?((null==i?void 0:i.toString())||"").split(", "):i;this._input.setValue(r),this._input.events.on("keydown",this._handlers.onkeydown),this._input.data.events.on("beforeAdd",(function(t){if(t.id!==t.value)return e._input.addOption({id:t.value,value:t.value},!0),!1}))}return document.addEventListener("mousedown",this._handlers.onOuterClick),this._config.$editable.editor=this,(0,o.awaitRedraw)().then((function(){var t=e._input.getRootView().refs.holder.el;e._input.popup.getContainer().style.width=t.offsetWidth+"px",e._input.popup.show(t)})),s.focusManager.setFocusId(this._input._uid),(0,o.inject)(this._input.getRootView())},e.prototype._initHandlers=function(){var e=this;this._handlers={onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.getRootNode()&&e._input.getRootNode().contains(t.target),n=e._input.popup&&e._input.popup.getRootNode()&&e._input.popup.getRootNode().contains(t.target);i||n||e.endEdit()}},onkeydown:function(t){"Escape"!==t.key&&"Tab"!==t.key||e.endEdit()}}},e}();t.ComboboxEditor=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CODES=void 0,t.KEY_CODES={BACKSPACE:8,ENTER:13,ESC:27,DOWN_ARROW:40,UP_ARROW:38,LEFT_ARROW:37,RIGHT_ARROW:39}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditor=void 0;var n=i(147);t.getEditor=function(e,t){return new n.InputEditor(e,t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputEditor=void 0;var n=i(1),o=i(57),r=function(){function e(e,t){var i=this;this._list=t,this._config=t.config,this._item=e,this._list.events.on(o.ListEvents.focusChange,(function(e,t){i._mode&&t!==i._item.id&&i.endEdit()})),this._initHandlers()}return e.prototype.endEdit=function(){if(this._input){var e=this._input.value;this._list.events.fire(o.ListEvents.beforeEditEnd,[e,this._item.id])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),this._input.removeEventListener("keydown",this._handlers.onKeyDown),this._handlers={},this._mode=!1,this._list.events.fire(o.ListEvents.afterEditEnd,[e,this._item.id])):this._input.focus()}},e.prototype.toHTML=function(){this._mode=!0;var e=this._config.itemHeight;return(0,n.el)(".dhx_input__wrapper",{role:"presentation"},[(0,n.el)("div.dhx_input__container",{role:"presentation"},[(0,n.el)("input.dhx_input",{class:this._item.css?" "+this._item.css:"",style:{height:e,width:"100%",padding:"8px 12px"},_hooks:{didInsert:this._handlers.didInsert},_key:this._item.id,"data-dhx-id":this._item.id})])])},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onChange:function(){e.endEdit()},onKeyDown:function(t){"Enter"===t.key&&e._item.value===e._input.value&&e.endEdit(),"Escape"===t.key&&(e._input.value=e._item.value,e.endEdit())},didInsert:function(t){var i=t.el;e._input=i,i.focus(),i.value=e._item.value,i.setSelectionRange(0,i.value.length),i.addEventListener("change",e._handlers.onChange),i.addEventListener("blur",e._handlers.onBlur),i.addEventListener("keydown",e._handlers.onKeyDown)}}},e}();t.InputEditor=r},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProList=void 0;var s=i(1),l=i(34),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.scrollView=new l.ScrollView((function(){return n.getRootView()})),n.paint(),n}return o(t,e),t.prototype.destructor=function(){e.prototype.destructor.call(this),this.scrollView=null},t.prototype.scrollTo=function(e){var t,i,n=this.getRootView();if(n&&n.node&&n.node.el&&void 0!==e){var o=(null===(t=this.scrollView)||void 0===t?void 0:t.config.enable)?null===(i=this.getRootNode())||void 0===i?void 0:i.querySelector(".scroll-view"):this.getRootNode();this._scrollTo(e,o)}},t.prototype._renderList=function(){var e=this,t=this._getRange(),i=this.data.getRawData(t[0],t[1]).map((function(t,i){return e._renderItem(t,i)}));this.config.virtual&&(i=a(a([(0,s.el)(".div",{style:{height:t[2]+"px"}})],i,!0),[(0,s.el)(".div",{style:{height:t[3]+"px"}})],!1));var n=this.scrollView&&this.scrollView.config.enable,o=(this.config.css?this.config.css:"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":"")+(n?" dhx_list--scroll-view":"");return(0,s.el)("ul.dhx_widget.dhx_list",r(r({style:{"max-height":this.config.height,position:"relative"},class:o,"data-dhx-widget-id":this._uid},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),n?[].concat(this.scrollView.render(i)):i)},t}(i(79).List);t.ProList=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyListener=void 0;var n=function(){function e(){var e=this;this._sequence="",document.addEventListener("keydown",(function(t){if(e._isActive){var i=t.key;"Backspace"===i&&e._sequence.length>0&&(e._sequence=e._sequence.slice(0,e._sequence.length-1),e._change()),i.length<2&&(e._sequence+=i,e._change())}}))}return e.prototype.startNewListen=function(e){this._isActive=!0,this._sequence="",this._currentAction=e},e.prototype.endListen=function(){this._currentAction=null,this.reset(),this._isActive=!1},e.prototype.reset=function(){this._sequence=""},e.prototype._change=function(){this._currentAction(this._sequence),this._addClearTimeout()},e.prototype._addClearTimeout=function(){var e=this;this._clearTimeout&&clearTimeout(this._clearTimeout),this._clearTimeout=setTimeout((function(){e.reset(),e._clearTimeout=null}),2e3)},e}();t.KeyListener=n},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProCombobox=void 0;var r=i(78),a=i(31),s=i(17),l=i(82),c=function(e){function t(t,i){return e.call(this,t,i)||this}return o(t,e),t.prototype._createLayout=function(){var e=this.list=new a.ProList(null,{$template:r.$template,template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!0,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data}),t=this._layout=new s.ProLayout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});t.getCell("list").attach(e),this.config.multiselection&&this.config.selectAllButton&&t.getCell("select-unselect-all").attach(l.selectAllView)},t}(r.Combobox);t.ProCombobox=c},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TextAreaEditor=void 0;var o=i(1),r=i(9),a=i(0),s=i(22),l=function(){function e(e,t,i){this._config=i,this._cell={row:e,col:t},this.type=this._cell.col.type,this._width=this._cell.col.$width;var n=0;this._config.firstColId===this._cell.col.id&&this._cell.row.hasOwnProperty("$level")&&(n=(0,s.getTreeCellWidthOffset)(this._cell.row)),this._width-=n-4,this._initHandlers()}return e.prototype.endEdit=function(e){var t;this._config.$editable&&(e||(t=this._editor.value,"number"===this.type&&(t=parseFloat(t),Number.isNaN(t)&&(t=""))),this._config.events.fire(r.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(r.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._editor.focus())},e.prototype.toHTML=function(e){(0,a.isDefined)(e)&&(this.type="string"),e=null!=e?e:this._cell.row[this._cell.col.id],this._editor&&(e=this._editor.value),this._config.$editable.editor=this;var t=void 0!==this._cell.row.height||this._cell.col.htmlEnable?"dhx_cell-editor dhx_cell-editor__textarea_constant-height":"dhx_cell-editor dhx_cell-editor__textarea";return(0,o.el)("textarea",{_hooks:{didInsert:this._handlers.didInsert},_ref:"textarea",_key:"cell_editor","data-dhx-id":"cell_editor",value:e,onblur:this._handlers.onBlur,oninput:this._handlers.onInput,class:t,style:{width:this._width}})},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onInput:function(t){var i;if(void 0===e._cell.row.height&&!e._cell.col.htmlEnable){var n=e._getCurrentHeight(e._editor.value,{width:e._cell.col.$width-2,maxHeight:e._config.rowHeight});e._cell.row[e._cell.col.id]=e._editor.value;var o=(0,s.getCalculatedRowHeight)((0,s.getMaxRowHeight)(e._cell.row,e._config.columns)),a=(0,s.getCalculatedRowHeight)((0,s.getMaxRowHeight)(((i={})[e._cell.col.id]=e._cell.row[e._cell.col.id],i),e._config.columns));if(e._minHeight=o===a?e._config.rowHeight:o,n>=e._minHeight&&n!==e._prevHeight){if(!e._config.events.fire(r.GridEvents.beforeRowResize,[e._cell.row,t,n]))return;e._config.events.fire(r.GridEvents.afterRowResize,[e._cell.row,t,n])}e._prevHeight=n}},didInsert:function(t){e._editor=t.el,e._editor.focus()}}},e.prototype._getCurrentHeight=function(e,t){t=n({width:100,maxHeight:40,lineHeight:20},t);var i=document.createElement("textarea");i.className="dhx_cell-editor dhx_cell-editor__textarea",i.value=e,i.style.width="".concat(t.width,"px"),i.style.lineHeight="".concat(t.lineHeight,"px"),i.style.maxHeight="".concat(t.maxHeight,"px"),i.style.boxSizing="border-box",document.body.appendChild(i);var o=this._getElementHeight(i),r=i.value.split("\n").length,a=Math.round(o/t.lineHeight),s=o<t.maxHeight?t.maxHeight:o;return document.body.removeChild(i),1===r&&r===a?t.maxHeight:s},e.prototype._getElementHeight=function(e){return e.scrollHeight},e}();t.TextAreaEditor=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContent=void 0;var n=i(1),o=i(22),r=i(0),a=i(153),s=i(154),l=i(155);function c(e,t){var i=t[e.id];if("combobox"===e.editorType){var n=(0,o.getEditorOptions)(e,t).find((function(e){return e instanceof Object&&e.id==i}));return parseFloat(n?n.value:i)}return"multiselect"===e.editorType?NaN:parseFloat(i)}function u(e,t,i,n){if(e&&t&&i){var o=n?n(e.id,t.data):t.data.reduce((function(t,i){var n=c(e,i);return isNaN(n)||t.push(n),t}),[]),r=o;return"tree"===t.type&&(r=t.data.reduce((function(i,n){if(0===n.$level){var o=c(e,n);if(isNaN(o)){var r=0;t.datacollection.eachChild(n.id,(function(i){if(!t.datacollection.haveItems(i.id)){var n=c(e,i);isNaN(n)||(r+=n)}})),i.push(r)}else i.push(o)}return i}),[])),i(o,r)}}t.getContent=function(){return{inputFilter:{element:{},toHtml:function(e,t){var i=this,n=(0,r.uid)(),o=e.id.toString(),a=this.element[o];return a?a.value=this.value[o]:((a=new l.InputFilter(e,t,n,this.value[o])).events.on("change",(function(e){i.value[o]=e})),this.element[o]=a),a.toHTML()},match:function(e){var t=e.val,i=e.match,n=e.col;if(!(0,r.isDefined)(t))return!1;var a=[];(a.push((0,o.toFormat)(t,n.type,n.format)),n.format)&&((l=n.format.lastIndexOf("#"))>0&&a.push((0,o.toFormat)(t,n.type,n.format.slice(l))));for(var s="",l=0;l<i.length;l++){var c=i.charCodeAt(l);s+=c>32&&c<48||63===c||c>90&&c<95||124===c?"\\"+i[l]:i[l]}return a.some((function(e){return new RegExp("".concat(s),"i").test(e)}))},value:{}},selectFilter:{element:{},toHtml:function(e,t){var i=this,n=e.id.toString(),o=this.element[n];return o?(o.value=this.value[n],o.data=e.$activeFilterData||e.$uniqueData):((o=new s.SelectFilter(e,t,e.$uniqueData,this.value[n])).events.on("change",(function(e){i.value[n]=e})),this.element[n]=o),o.toHTML()},match:function(e){var t=e.val,i=e.match,n=e.col,r=(0,o.toFormat)(t,n.type,n.format);return!i||(r||"boolean"==typeof r)&&r.toString()==i},value:{}},comboFilter:{element:{},toHtml:function(e,t){var i=this,o=e.id.toString(),r=this.element[o];if(r)r.data=e.$uniqueData;else{var s=e.header.filter((function(e){return void 0!==e.filterConfig}))[0];(r=new a.ComboFilter(e,t,e.$uniqueData,this.value[o],s)).events.on("change",(function(e){i.value[o]=e})),this.element[o]=r}return(0,n.inject)(r.getFilter().getRootView())},match:function(e){var t=e.val,i=e.match,n=void 0===i?"":i,r=e.multi,a=void 0!==r&&r,s=e.col,l=(0,o.toFormat)(t,s.type,s.format);if(Array.isArray(n)){for(var c=void 0,u=function(e){if(c=a&&"string"==typeof l?l.split(", ").some((function(t){return t===n[e]})):n[e]===l)return"break"},d=0;d<n.length;d++){if("break"===u(d))break}return!n||!n.length||c}return void 0===n||l===n},destroy:function(){this.value={};var e=this.element;for(var t in e)e[t].destructor(),delete e[t]},value:{}},sum:{calculate:function(e,t){return e.length?t.reduce((function(e,t){var i=e+parseFloat(t)||0;return parseFloat(i.toFixed(12))}),0):null},toHtml:function(e,t){var i=u(e,t,this.calculate);return e.format||"percent"===e.type?(0,o.toFormat)(i,e.type,e.format):(0,r.isDefined)(i)?i:null}},avg:{calculate:function(e,t){return e.length?t.reduce((function(e,t){return e+t}),0)/e.length:null},toHtml:function(e,t){var i=u(e,t,this.calculate);return e.format||"percent"===e.type?(0,o.toFormat)(i,e.type,e.format):(0,r.isDefined)(i)?i.toFixed(3):null}},min:{calculate:function(e){return e.length?Math.min.apply(Math,e):null},toHtml:function(e,t){var i=u(e,t,this.calculate);return e.format||"percent"===e.type||"number"===e.type?(0,o.toFormat)(i,e.type,e.format):(0,r.isDefined)(i)?i.toFixed(3):null}},max:{calculate:function(e){return e.length?Math.max.apply(Math,e):null},toHtml:function(e,t){var i=u(e,t,this.calculate);return e.format||"percent"===e.type||"number"===e.type?(0,o.toFormat)(i,e.type,e.format):(0,r.isDefined)(i)?i.toFixed(3):null}},count:{calculate:function(e,t){return t.length},validate:function(e,t){return t.reduce((function(t,i){return(0,r.isDefined)(i[e])&&""!==i[e]&&(isNaN(i)?t.push(1):t.push(i)),t}),[])},toHtml:function(e,t){return u(e,t,this.calculate,this.validate)}}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComboFilter=void 0;var n=i(56),o=i(3),r=i(13),a=i(0),s=i(9),l=function(){function e(e,t,i,n,r){var a;this.events=new o.EventSystem,this._silentMode=!1,this.column=e,this.config=t,this.data=i,this.value=n,this.filterConfig=(null==r?void 0:r.filterConfig)||{},(this.column.htmlEnable||(null===(a=this.config)||void 0===a?void 0:a.htmlEnable)&&!1!==this.column.htmlEnable)&&(this.filterConfig.readonly=!0,this.filterConfig.template||(this.filterConfig.template=function(e){return e.value})),this.initFilter(),this.config&&this.initHandlers()}return e.prototype.initFilter=function(){this._filter=new n.Combobox(null,Object.assign({},this.filterConfig)),this.data&&this._filter.data&&this._setData()},e.prototype.initHandlers=function(){var e,t,i,n=this,o=this.column.id.toString();this.config.events.on(r.DataEvents.load,(function(){return n._setData()}),this),this._filter.events.on("change",(function(e){var t,i;e&&((Array.isArray(e)?e.find((function(e){return n._filter.data.getItem(e)})):n._filter.data.getItem(e))&&(i=n._filter.config.multiselection?n._filter.list.selection.getItem().map((function(e){if(e&&n._filter.data.getItem(e.id))return e.value})):n._filter.list.selection.getItem().value));n.value=i,null===(t=n.config.events)||void 0===t||t.fire(s.GridEvents.filterChange,[n.value,o,"comboFilter",n._silentMode]),n._silentMode&&void 0===n.value&&(n._silentMode=!1)})),this.config.events.on(s.GridEvents.filterChange,(function(e){return n.events.fire(s.HeaderFilterEvent.change,[e])}),this),this._filter.popup.events.on("afterHide",(function(){n.filterConfig.multiselection||n._filter.list.selection.getItem()||n.clear()})),this._filter.popup.events.on("afterShow",(function(){!n.filterConfig.multiselection&&(""===n.value||n.filterConfig.readonly&&void 0!==n.value)&&n.clear()})),null===(e=this.config.events)||void 0===e||e.on(s.GridEvents.scroll,(function(){var e;n._isFocused&&(null===(e=n._filter.getRootView().refs)||void 0===e?void 0:e.input)&&n._filter.focus()}),this),null===(t=this.config.events)||void 0===t||t.on(s.GridEvents.headerCellMouseDown,(function(e){e.id!==n.column.id&&n.blur()}),this),null===(i=this.config.events)||void 0===i||i.on(s.GridEvents.cellMouseDown,(function(){return n.blur()}),this),this.config.events.on(r.DataEvents.change,(function(e,t){n.column.hidden||"add"!==t&&"update"!==t&&"remove"!==t||("add"!==t&&n._checkValue(),n._setData(!0))}),this),this.config.events.on(r.DataEvents.removeAll,(function(){n.clear(!0),n._setData()}),this),this.config.events.on(s.GridEvents.afterRowShow,(function(){return n._setData(!0)}),this),this.config.events.on(s.GridEvents.afterRowHide,(function(){n.column.hidden||(n._checkValue(),n._setData(!0))}),this),this.config.events.on(r.DataEvents.filter,(function(e){n.column.hidden||(!e||(0,r.isOnlyPermanentFilters)(e)?n.clear(!0):n._checkValue(),n.filterConfig.multiselection&&n._filter.popup.isVisible()||n._setData(!0))}),this),this.config.events.on(s.GridEvents.afterColumnShow,(function(){n.filterConfig.multiselection||(n._checkValue(),n._setData())}),this),this.config.events.on(s.GridEvents.afterColumnHide,(function(){n.filterConfig.multiselection||n._setData()}),this)},e.prototype.getFilter=function(){return this._filter},e.prototype.setValue=function(e,t){var i,n,o=this;if(this.filterConfig.multiselection||!Array.isArray(e))if((0,a.isDefined)(e)){if((null==e?void 0:e.length)||""===e){var r=this.filterConfig.multiselection&&Array.isArray(e)?e.map((function(e){var t;return null===(t=o._filter.data.find((function(t){return t.value===e})))||void 0===t?void 0:t.id})):null===(n=this._filter.data.find((function(t){return t.value===e})))||void 0===n?void 0:n.id;this._filter.setValue(r,t)}}else t&&(this._silentMode=!0),this._filter.clear(),this.filterConfig.multiselection||void 0===this.value||(this.value=void 0,null===(i=this.config.events)||void 0===i||i.fire(s.GridEvents.filterChange,[this.value,this.column.id,"comboFilter"]))},e.prototype.clear=function(e){void 0!==this.value&&this.setValue(null,e)},e.prototype.focus=function(){var e;this._isFocused=!0,(null===(e=this._filter.getRootView().refs)||void 0===e?void 0:e.input)&&this._filter.focus()},e.prototype.blur=function(){var e;this._isFocused=!1,(null===(e=this._filter.getRootView().refs)||void 0===e?void 0:e.input)&&this._filter.blur()},e.prototype.destructor=function(){var e=this.config.events;if(e)for(var t in e.events)this.config.events.detach(t,this);this.events.clear(),this._filter&&this._filter.destructor(),this.config=this.filterConfig=this.data=this.column=this.value=this.events=null},e.prototype._setData=function(e){var t=this;void 0===e&&(e=!1);var i=function(){var e=t.column.$activeFilterData||t.column.$uniqueData;t._filter.data.parse(e.map((function(e){return{value:e}})))};void 0===this.value?i():e&&this.filterConfig.multiselection&&(i(),this.setValue(this.value,!0))},e.prototype._checkValue=function(){if(void 0!==this.value)for(var e=Array.isArray(this.value)?this.value:[this.value],t=function(t){if(i.column.$uniqueData.includes(t))return"continue";if(e.length>1){var n=i._filter.data.find((function(e){return e.value===t}));i._filter.list.selection.remove(n.id)}else i.clear();return"break"},i=this,n=0,o=e;n<o.length;n++){if("break"===t(o[n]))break}},e}();t.ComboFilter=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectFilter=void 0;var n=i(1),o=i(3),r=i(9),a=function(){function e(e,t,i,n){this.events=new o.EventSystem,this.column=e,this.config=t,this.data=i,this.value=n||"",this.initHandlers(),this.toHTML()}return e.prototype.toHTML=function(){var e,t=this;return(0,n.el)("label.dhx_grid-filter__label.dxi.dxi-menu-down",{_ref:"".concat(this.column.id,"_filter")},[(0,n.el)("select.dxi.dxi-menu-down",{type:"text",class:"dhx_input dhx_grid-filter dhx_grid-filter--select",onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_key:this.column.id},[(0,n.el)("option",{value:"",_key:0},""),null===(e=this.value?[this.value]:this.data)||void 0===e?void 0:e.map((function(e){return""!==(e=null!=e?e:"")&&(0,n.el)("option",{_key:e,value:e,selected:t.value===e.toString()},e)}))])])},e.prototype.getFilter=function(){return this.toHTML()},e.prototype.setValue=function(e,t){var i;this.value=e||"",this.events.fire(r.HeaderFilterEvent.change,[e]),null===(i=this.config.events)||void 0===i||i.fire(r.GridEvents.filterChange,[this.value,this.column.id,"selectFilter",t])},e.prototype.clear=function(e){this.setValue("",e)},e.prototype.focus=function(){var e,t,i,n;this._isFocused=!0;var o=null===(n=null===(i=null===(t=null===(e=this.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(this.column.id,"_filter")])||void 0===n?void 0:n.el;o&&o.focus()},e.prototype.blur=function(){var e,t,i,n;this._isFocused=!1;var o=null===(n=null===(i=null===(t=null===(e=this.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(this.column.id,"_filter")])||void 0===n?void 0:n.el;o&&o.blur()},e.prototype.initHandlers=function(){var e,t,i,o=this;this._handlers={onchange:function(e){var t,i,n,r,a=(null===(t=e.target)||void 0===t?void 0:t.value)||(null===(n=null===(i=e.composedPath())||void 0===i?void 0:i[0])||void 0===n?void 0:n.value)||(null===(r=e.explicitOriginalTarget)||void 0===r?void 0:r.value);o.setValue(a)},onfocus:function(){o._isFocused=!0},onblur:function(){o._isFocused=!1}},null===(e=this.config.events)||void 0===e||e.on(r.GridEvents.scroll,(function(){var e,t,i,r,a=null===(r=null===(i=null===(t=null===(e=o.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(o.column.id,"_filter")])||void 0===r?void 0:r.el;o._isFocused&&a&&(0,n.awaitRedraw)().then((function(){a.focus()}))})),null===(t=this.config.events)||void 0===t||t.on(r.GridEvents.headerCellMouseDown,(function(e){e.id!==o.column.id&&o.blur()})),null===(i=this.config.events)||void 0===i||i.on(r.GridEvents.cellMouseDown,(function(){return o.blur()}))},e}();t.SelectFilter=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputFilter=void 0;var n=i(1),o=i(3),r=i(9),a=function(){function e(e,t,i,n){this.events=new o.EventSystem,this.column=e,this.config=t,this.id=i,this.value=n||"",this.initHandlers(),this.toHTML()}return e.prototype.toHTML=function(){return(0,n.el)("div.dhx_grid-filter__label.dxi.dxi-magnify",{"aria-label":"Type to search",_ref:"".concat(this.column.id,"_filter")},[(0,n.el)("label",{style:{display:"none"},"aria-label":"Type to search",for:this.id},"Type to search"),(0,n.el)("input",{type:"text",class:"dhx_input dhx_grid-filter",oninput:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_key:this.column.id,id:this.id,value:this.value})])},e.prototype.getFilter=function(){return this.toHTML()},e.prototype.setValue=function(e,t){var i;this.value=e||"",this.events.fire(r.HeaderFilterEvent.change,[this.value]),null===(i=this.config.events)||void 0===i||i.fire(r.GridEvents.filterChange,[this.value,this.column.id,"inputFilter",t])},e.prototype.clear=function(e){this.setValue("",e)},e.prototype.focus=function(){var e,t,i,n,o;this._isFocused=!0;var r=null===(n=null===(i=null===(t=null===(e=this.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(this.column.id,"_filter")])||void 0===n?void 0:n.el;r&&(null===(o=r.querySelector("input"))||void 0===o||o.focus())},e.prototype.blur=function(){var e,t,i,n,o;this._isFocused=!1;var r=null===(n=null===(i=null===(t=null===(e=this.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(this.column.id,"_filter")])||void 0===n?void 0:n.el;r&&(null===(o=r.querySelector("input"))||void 0===o||o.blur())},e.prototype.initHandlers=function(){var e,t,i,o=this;this._handlers={onchange:function(e){o._inputDelay&&clearTimeout(o._inputDelay),o._inputDelay=setTimeout((function(){var t,i,n,r,a=(null===(t=e.target)||void 0===t?void 0:t.value)||(null===(n=null===(i=e.composedPath())||void 0===i?void 0:i[0])||void 0===n?void 0:n.value)||(null===(r=e.explicitOriginalTarget)||void 0===r?void 0:r.value);o.setValue(a)}),500)},onfocus:function(){o._isFocused=!0},onblur:function(){o._isFocused=!1}},null===(e=this.config.events)||void 0===e||e.on(r.GridEvents.scroll,(function(){var e,t,i,r,a=null===(r=null===(i=null===(t=null===(e=o.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(o.column.id,"_filter")])||void 0===r?void 0:r.el;o._isFocused&&a&&(0,n.awaitRedraw)().then((function(){var e;null===(e=a.querySelector("input"))||void 0===e||e.focus()}))})),null===(t=this.config.events)||void 0===t||t.on(r.GridEvents.headerCellMouseDown,(function(e){e.id!==o.column.id&&o.blur()})),null===(i=this.config.events)||void 0===i||i.on(r.GridEvents.cellMouseDown,(function(){return o.blur()}))},e}();t.InputFilter=a},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.startResize=void 0;var o=i(0),r=i(9),a=i(24);t.startResize=function(e,t,i,s){var l,c=e.config.rightSplit;i.targetTouches&&i.preventDefault();var u=i.targetTouches?i.targetTouches[0].clientX:i.clientX,d=e.config.columns.filter((function(e){return!e.hidden})),h=c?d.slice(-c).map((function(e){return e.id})):[],f=!!(null===(l=e.scrollView)||void 0===l?void 0:l.config.enable),p=c?(0,a.calcScrollBarWidth)(e.config,f).xState:null,v=0;e.config.$resizing=t;var g=function(i){var s=(0,o.findIndex)(d,(function(e){return e.id===t})),l=i.targetTouches?i.targetTouches[0].clientX:i.clientX,g=l-e.getRootNode().getBoundingClientRect().left,_=(0,a.calcScrollBarWidth)(e.config,f);if(!(e.config.leftSplit===s+1&&g>=e.config.$width-_.y-2||c&&h.includes(t)&&_.xState!==p)){v=v||d[s].$width;var m,y=d[s].minWidth||40,b=d[s].maxWidth,w=l-u,x=n([],d,!0),C=v+(p&&h.includes(t)?-w:w);b&&C>=b||C<=y?(C<=y&&(m=y),C>=b&&(m=b)):m=C,x[s].$width=m,x[s].$fixed=!0,e.events.fire(r.GridEvents.resize,[d[s],i]),e.paint()}},_=function(){i.targetTouches?(document.removeEventListener("touchmove",g),document.removeEventListener("touchend",_)):(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",_)),s()};i.targetTouches?(document.addEventListener("touchmove",g),document.addEventListener("touchend",_)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",_)),e.paint()}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeysHandlers=t.selectionMove=void 0;var o=i(9),r=i(4),a=i(18),s=i(0);function l(e,t,i,n,o,a,s){if(void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),!t.config.$editable&&t.config.selection&&!(0,r.locateNodeByClassName)(e,"dhx_grid-header-cell")){e&&e.preventDefault();var l=t.selection.getCell(),c=t.config.columns.filter((function(e){return!e.hidden}));if(t.data.filter((function(e){return!e.hidden})),l)if("vertical"===i)if(o){var u=1===n?t.data.getItem(t.data.getId(t.data.getLength()-1)):t.data.getItem(t.data.getId(0));t.selection.setCell(u.id,l.column.id,a,s),t.scrollTo(u.id.toString(),l.column.id.toString())}else{if((d=t.data.getIndex(l.row.id.toString()))+n>=0&&d+n<t.data.getLength()){u=t.data.getItem(t.data.getId(d+n));t.selection.setCell(u.id,l.column.id,a,s),t.scrollTo(u.id.toString(),l.column.id.toString())}}else if(o){u=1===n?c[c.length-1]:c[0];t.selection.setCell(l.row.id,u.id,a,s),t.scrollTo(l.row.id.toString(),u.id.toString())}else{var d;(d=c.indexOf(l.column))+n>=0&&d+n<c.length&&(t.selection.setCell(l.row.id,c[d+n].id,a,s),t.scrollTo(l.row.id.toString(),c[d+n].id.toString()))}}}function c(e,t){var i=e.selection.getCell(),n=i&&e.getSpan(i.row.id,i.column.id);if(n){if("up"===t||"down"===t){var o=(0,s.findIndex)(e.config.data,(function(e){return e.id===n.row})),r=(0,s.findIndex)(e.config.data,(function(e){return e.id===i.row.id}));return"up"===t?o-r-1:o+(n.rowspan||1)-r}var a=e.config.columns.filter((function(e){return!e.hidden}));o=(0,s.findIndex)(a,(function(e){return e.id===n.column})),r=(0,s.findIndex)(a,(function(e){return e.id===i.column.id}));return"left"===t?o-r-1:o+(n.colspan||1)-r}return"down"===t||"right"===t?1:-1}t.selectionMove=l,t.getKeysHandlers=function(e){var t,i,s,u="cell"===e.config.selection||"complex"===e.config.selection||!0===e.config.selection,d={};if(e.getRootView()){var h=null===(s=null===(i=null===(t=e.getRootView())||void 0===t?void 0:t.refs)||void 0===i?void 0:i.grid_body)||void 0===s?void 0:s.el;if(!h)return;d={pageUp:function(e){e.preventDefault(),h.scrollTop-=h.clientHeight},pageDown:function(e){e.preventDefault(),h.scrollTop+=h.clientHeight},home:function(e){e.preventDefault(),h.scrollTop=0},end:function(e){e.preventDefault(),h.scrollTop+=h.scrollHeight}}}return n({enter:function(t){var i=(0,r.locateNodeByClassName)(t,"dhx_grid-header-cell");if(i){var n=i.getAttribute("data-dhx-id"),s=t.target.getAttribute("dhx_resized");if(n){var l=e.getColumn(n);l&&(0,a.isSortable)(e.config,l)&&!s&&e.events.fire(o.GridEvents.afterSort,[n])}}if(u){var c=e.selection.getCell();if(c&&(!1!==c.column.editable&&e.config.editable||c.column.editable))if(e.config.$editable)e.editEnd();else if("boolean"===c.column.type){if(!e.events.fire(o.GridEvents.beforeEditStart,[c.row,c.column,"checkbox"]))return;if(e.events.fire(o.GridEvents.afterEditStart,[c.row,c.column,"checkbox"]),!e.events.fire(o.GridEvents.beforeEditEnd,[!c.row[c.column.id],c.row,c.column]))return;e.events.fire(o.GridEvents.afterEditEnd,[!c.row[c.column.id],c.row,c.column])}else e.editCell(c.row.id,c.column.id,c.column.editorType)}else e.config.$editable&&e.editEnd()},space:function(t){var i,n=e.selection.getCell();if(u&&(null!==(i=null==n?void 0:n.column.editable)&&void 0!==i?i:e.config.editable)&&!e.config.$editable&&n&&"boolean"===n.column.type){if(t.preventDefault(),!e.events.fire(o.GridEvents.beforeEditStart,[n.row,n.column,"checkbox"]))return;if(e.events.fire(o.GridEvents.afterEditStart,[n.row,n.column,"checkbox"]),!e.events.fire(o.GridEvents.beforeEditEnd,[!n.row[n.column.id],n.row,n.column]))return;e.events.fire(o.GridEvents.afterEditEnd,[!n.row[n.column.id],n.row,n.column])}},escape:function(){e.config.$editable&&e.editEnd(!0)},tab:function(t){if(e.config.selection&&!(0,r.locateNodeByClassName)(t,"dhx_grid-header-cell")){e.config.$editable&&e.editEnd();var i=e.selection.getCell(),n=e.config.columns.filter((function(e){return!e.hidden}));if(i){var o=n.indexOf(i.column)+1;if(o>=0&&o<n.length)t&&t.preventDefault(),e.selection.setCell(i.row.id,n[o].id),e.scrollTo(i.row.id.toString(),n[o].id.toString());else if(o>=0){var a=e.data.getIndex(i.row.id.toString())+1;a<e.data.getLength()&&(t&&t.preventDefault(),e.selection.setCell(e.data.getId(a),n[0].id),e.scrollTo(e.data.getId(a).toString(),n[0].id.toString()))}}}},"shift+tab":function(t){if(e.config.selection&&!(0,r.locateNodeByClassName)(t,"dhx_grid-header-cell")){e.config.$editable&&e.editEnd();var i=e.selection.getCell(),n=e.config.columns.filter((function(e){return!e.hidden}));if(i){var o=n.indexOf(i.column)-1;if(o>=0&&o<n.length)t&&t.preventDefault(),e.selection.setCell(i.row.id,n[o].id),e.scrollTo(i.row.id.toString(),n[o].id.toString());else if(o<e.data.getLength()){var a=e.data.getIndex(i.row.id.toString())-1;a>=0&&(t&&t.preventDefault(),e.selection.setCell(e.data.getId(a),n[n.length-1].id),e.scrollTo(e.data.getId(a).toString(),n[n.length-1].id.toString()))}}}},arrowUp:function(t){l(t,e,"vertical",c(e,"up"))},"ctrl+arrowUp":function(t){l(t,e,"vertical",-1,!0)},"shift+arrowUp":function(t){e.config.multiselection&&l(t,e,"vertical",-1,!1,!1,!0)},"ctrl+shift+arrowUp":function(t){e.config.multiselection&&l(t,e,"vertical",-1,!0,!1,!0)},arrowDown:function(t){l(t,e,"vertical",c(e,"down"))},"ctrl+arrowDown":function(t){l(t,e,"vertical",1,!0)},"shift+arrowDown":function(t){e.config.multiselection&&l(t,e,"vertical",1,!1,!1,!0)},"ctrl+shift+arrowDown":function(t){e.config.multiselection&&l(t,e,"vertical",1,!0,!1,!0)},arrowRight:function(t){l(t,e,"horizontal",c(e,"right"))},"ctrl+arrowRight":function(t){l(t,e,"horizontal",1,!0)},"shift+arrowRight":function(t){e.config.multiselection&&l(t,e,"horizontal",1,!1,!1,!0)},"ctrl+shift+arrowRight":function(t){e.config.multiselection&&l(t,e,"horizontal",1,!0,!1,!0)},arrowLeft:function(t){l(t,e,"horizontal",c(e,"left"))},"ctrl+arrowLeft":function(t){l(t,e,"horizontal",-1,!0)},"shift+arrowLeft":function(t){e.config.multiselection&&l(t,e,"horizontal",-1,!1,!1,!0)},"ctrl+shift+arrowLeft":function(t){e.config.multiselection&&l(t,e,"horizontal",-1,!0,!1,!0)}},d)}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProGrid=void 0;var s=i(71),l=i(9),c=i(13),u=i(4),d=i(22),h=i(24),f=i(1),p=i(34),v=i(18),g=function(e){function t(t,i){var n,o,a=this;return(a=e.call(this,t,r({autoHeight:!1,headerAutoHeight:null!==(n=null==i?void 0:i.headerAutoHeight)&&void 0!==n?n:null==i?void 0:i.autoHeight,footerAutoHeight:null!==(o=null==i?void 0:i.footerAutoHeight)&&void 0!==o?o:null==i?void 0:i.autoHeight},i))||this).scrollView=new p.ScrollView((function(){return a.getRootView()}),{scrollHandler:function(e){return a.events.fire(l.GridEvents.scroll,[{y:e.target.scrollTop,x:e.target.scrollLeft}])}}),a}return o(t,e),t.prototype._createView=function(){var e=this;return(0,f.create)({render:function(t,i){return e._destructed?(0,f.el)("div"):(0,h.proRender)(t,i,e._htmlEvents,e.selection,e._uid)},hooks:this._initHooks()},this)},t.prototype._setEventHandlers=function(){var t=this;e.prototype._setEventHandlers.call(this),this.events.on(l.GridEvents.headerCellMouseDown,(function(e,i){var n,o=(0,u.locateNodeByClassName)(i,"dhx_header-row"),r=o&&o.getAttribute("aria-rowindex");(null===(n=e.header[Number(r)-1])||void 0===n?void 0:n.content)||(i.targetTouches?t._touch.timer=setTimeout((function(){t._dragStartColumn(i,e)}),t._touch.duration):t._dragStartColumn(i,e))})),this._events.on(l.GridSystemEvents.headerCellTouchMove,(function(e,i){t._touch.start&&i.preventDefault(),t._clearTouchTimer()})),this._events.on(l.GridSystemEvents.headerCellTouchEnd,(function(){t._touch.start=!1,t._clearTouchTimer()})),this.events.on(l.GridEvents.afterResizeEnd,(function(){t.config.autoHeight&&(t.config.data=t.data.map((function(e){var i=(0,d.getMaxRowHeight)(e,t.config.columns);return e.$height=(0,d.getCalculatedRowHeight)(i,{rowHeight:t.config.rowHeight}),e})))})),this.events.on(l.GridEvents.afterRowResize,(function(e,i,n){var o=t.data.getItem(e.id),r=o.id,a=o.height,s=o.$height;a&&a!==s&&t.data.update(r,{height:n}),t.data.update(r,{$height:n},!0),t.config.data=t.data.map((function(e){return e})),t.paint()})),this.events.on(l.GridEvents.scroll,(function(){t._lazyLoad()})),this.events.on(c.DataEvents.dataRequest,(function(e,i){var n=t.data.dataProxy;n&&n.config&&t._prepareDataFromTo(t.data,e,i)}))},t.prototype.getNormalizeContentHeight=function(e,t,i){var n,o,r=0,a=this.content[e.content],s=e.content&&"function"==typeof a.calculate&&a.toHtml(t,i).toString(),l=e.text||s||"";if(e.colspan){var c=null===(n=i.columns)||void 0===n?void 0:n.findIndex((function(e){return e.id===t.id})),u=c+e.colspan,h=null===(o=i.columns)||void 0===o?void 0:o.slice(c,u);null==h||h.forEach((function(e){r+=e.$width}))}else r+=t.$width;return(0,d.measureTextHeight)({text:l,width:r-24,htmlEnable:(0,v.isHtmlEnable)(i,t,e),font:"bold 14px Arial"})+16},t.prototype._prepareData=function(e){var t=this;return this._normalizeDataType(),this._adjustColumns(),e.map((function(e){if(t.config.autoHeight&&void 0===e.height){var i=t.config.columns.filter((function(e){return!e.hidden})),n=(0,d.getMaxRowHeight)(e,i);e.$height=(0,d.getCalculatedRowHeight)(n,{rowHeight:t.config.rowHeight})||t.config.rowHeight}else e.$height=e.height||t.config.rowHeight;return e}))},t.prototype._prepareDataFromTo=function(e,t,i){var n=this;return e.mapRange(t,i,(function(e){var t=(0,d.getMaxRowHeight)(e,n.config.columns);return e.$height=(0,d.getCalculatedRowHeight)(t,{rowHeight:n.config.rowHeight})||n.config.rowHeight,e}))},t.prototype._dragStart=function(e){if(this.config.dragMode&&("row"===this.config.dragItem||"both"===this.config.dragItem)&&!this.config.$editable){var t=this.getColumn(e.target.getAttribute("data-dhx-col-id"));if(!1===(null==t?void 0:t.draggable))return;var i=(0,u.locateNode)(e,"data-dhx-id"),n=i&&i.getAttribute("data-dhx-id");e.targetTouches&&(this._touch.start=!0);var o=[n];if(this.config.multiselection&&(o=a(a([],o,!0),this.selection.getCells().map((function(e){return e.row.id})),!0)).length>1){for(var r=this.data.getInitialData(),s={},l=function(e){var t=o[e],i=null==r?void 0:r.findIndex((function(e){return e.id==t}));s[i]=t},d=0;d<o.length;d++)l(d);o=a([],Object.values(s),!0)}return c.dragManager.onMouseDown(e,o,[this._getRowGhost(o)])}},t.prototype._lazyLoad=function(){var e,t,i=this,n=this.data.dataProxy;if(n&&n.config){var o=this.data.getRawData(0,-1,null,2);if(!o.length)return;var r,a=(0,h.getRenderConfig)(this,o,{width:this.config.$width,height:this.config.$height}),s=n.config.limit,l=s,u=a.currentRows,d=u[0],f=u[u.length-1],p=this.data.getIndex(f.id),v=function(e){for(var t=1;t<u.length;t++)if("firstFilledRow"===e&&!u[t].$empty&&u[t-1].$empty||"firstEmptyRow"===e&&u[t].$empty&&!u[t-1].$empty)return i.data.getIndex(u[t].id)};if(d.$empty)if(f.$empty)r=this.data.getIndex(d.id);else{var g=v("firstFilledRow"),_=g-l;_<0&&(_=0);for(var m=_;m<g;m++)if(this.data.getItem(this.data.getId(m)).$empty){r=m,l=g-m;break}}else f.$empty?r=v("firstEmptyRow"):(r=null!==(e=v("firstEmptyRow"))&&void 0!==e?e:this.data.getIndex(d.id),l=(null!==(t=v("firstFilledRow"))&&void 0!==t?t:p)-r);!this.data.isDataLoaded(r,p)&&this.data.events.fire(c.DataEvents.beforeLazyLoad,[])&&(n.updateUrl(null,{from:r,limit:l}),n.config.limit=s,this.data.load(n).then((function(){i.config.autoHeight&&i._prepareDataFromTo(i.data,r,p)})))}},t.prototype._getColumnGhost=function(e){var t=this._container||(0,u.toNode)(this._uid),i=t.querySelector(".dhx_header-row"),n=i.querySelector('.dhx_grid-header-cell[data-dhx-id="'.concat(e.id,'"]')),o=Array.from(i.childNodes).indexOf(n)+1,r=t.querySelectorAll('.dhx_grid-header-cell[data-dhx-id="'.concat(e.id,'"]:not(.dhx_span-cell)')),a=t.querySelectorAll(".dhx_grid_data .dhx_grid-cell:nth-child(".concat(o,")")),s=document.createElement("div");return r.forEach((function(e){return s.appendChild(e.cloneNode(!0))})),a.forEach((function(e){return s.appendChild(e.cloneNode(!0))})),s},t.prototype._dragStartColumn=function(e,t){var i=e.target,n=function(e){return e.classList.contains("dhx_grid-custom-content-cell")};n(i.parentElement)||n(i.parentElement.parentElement)||!(t.draggable||"column"===this.config.dragItem&&!1!==t.draggable||"both"===this.config.dragItem&&!1!==t.draggable)||(0,u.locateNodeByClassName)(e,"dhx_resizer_grip_wrap")||(e.targetTouches&&(this._touch.start=!0),c.dragManager.onMouseDown(e,[t.id],[this._getColumnGhost(t)]))},t}(s.Grid);t.ProGrid=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectionStore=void 0;var n=i(0),o=function(){function e(){this._store={}}return e.prototype.setItem=function(e,t){this._store[e]=t},e.prototype.getItem=function(e){return(0,n.isId)(e)&&this._store[e]?this._store[e]:null},e}(),r=window.dhxHelpers=window.dhxHelpers||{};r.collectionStore=r.collectionStore||new o,t.collectionStore=r.collectionStore},function(e,t,i){"use strict";(function(e){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.LazyDataProxy=void 0;var r=i(33),a=i(0),s=i(51),l=function(t){function i(e,i){var n=t.call(this,e)||this;return n.config=(0,a.extend)({from:0,limit:50,delay:50,prepare:0},i),n.updateUrl(e,{from:n.config.from,limit:n.config.limit}),n}return o(i,t),i.prototype.load=function(){var t=this;return new e((function(e,i){t._timeout?(clearTimeout(t._timeout),t._timeout=setTimeout((function(){s.ajax.get(t.url,{responseType:"text"}).then(e).catch(i),t._cooling=!0}),t.config.delay),t._cooling&&(e(null),t._cooling=!1)):(s.ajax.get(t.url,{responseType:"text"}).then(e).catch(i),t._cooling=!0,t._timeout=setTimeout((function(){})))}))},i}(r.DataProxy);t.LazyDataProxy=l}).call(this,i(16))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var n=i(3),o=i(39),r=i(26),a=i(0),s=function(){function e(e,t,i){var o=this;this.events=i||new n.EventSystem(this),this._data=t,this.config=e,this._data.events.on(r.DataEvents.removeAll,(function(){o._selected=null})),this._data.events.on(r.DataEvents.change,(function(){if((0,a.isId)(o._selected)){var e=o._data.getNearId(o._selected);e!==o._selected&&(o._selected=null,e&&o.add(e))}}))}return e.prototype.getId=function(){return this._selected},e.prototype.getItem=function(){return(0,a.isId)(this._selected)?this._data.getItem(this._selected):null},e.prototype.remove=function(e){return e=null!=e?e:this._selected,!(0,a.isDefined)(e)||!!this.events.fire(o.SelectionEvents.beforeUnSelect,[e])&&(this._data.update(e,{$selected:!1},!0),this._selected=null,this.events.fire(o.SelectionEvents.afterUnSelect,[e]),!0)},e.prototype.add=function(e){this._selected!==e&&!this.config.disabled&&this._data.exists(e)&&(this.remove(),this._addSingle(e))},e.prototype.enable=function(){this.config.disabled=!1},e.prototype.disable=function(){this.remove(),this.config.disabled=!0},e.prototype._addSingle=function(e){this.events.fire(o.SelectionEvents.beforeSelect,[e])&&(this._selected=e,this._data.update(e,{$selected:!0},!0),this.events.fire(o.SelectionEvents.afterSelect,[e]))},e}();t.Selection=s},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Navbar=void 0;var a=i(0),s=i(1),l=i(3),c=i(14),u=i(4),d=i(21),h=i(8),f=i(13),p=i(40);var v=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._isContextMenu=!1,n._documentHaveListener=!1,n.config=(0,a.extend)({rootId:"string"==typeof t&&t||n._uid},i),n._rootItem={},Array.isArray(n.config.data)?(n.events=new l.EventSystem(n),n.data=new f.TreeCollection({rootId:n.config.rootId},n.events)):n.config.data&&n.config.data.events?(n.data=n.config.data,n.events=n.data.events,n.events.context=n):(n.events=new l.EventSystem(n),n.data=new f.TreeCollection({rootId:n.config.rootId},n.events)),n._documentClick=function(e){if(n._documentHaveListener){var t=(0,u.locateNode)(e),i=n.data.getRoot(),o=t&&t.getAttribute("data-dhx-id"),r=n.data.getParent(o),a="ontouchstart"in window||navigator.msMaxTouchPoints;document.removeEventListener("click",n._documentClick),n._documentHaveListener=!1,((!a||t)&&n._isContextMenu||i!==r&&r&&n.data.getItem(o))&&r&&n.data.getItem(o)&&(!n._isContextMenu||i===(0,u.locate)(e,"data-dhx-widget-id"))||n._close(e)}},n._currentRoot=n.data.getRoot(),n._factory=n._getFactory(),n._initHandlers(),n._keyManager=new d.KeyManager((function(e,t){return t===n._uid})),n._initEvents(),Array.isArray(n.config.data)&&n.data.parse(n.config.data),n}return o(t,e),t.prototype.paint=function(){e.prototype.paint.call(this),this._isContextMenu&&!this._vpopups&&this._init(),this._vpopups&&this._vpopups.redraw()},t.prototype.disable=function(e){var t=this;void 0!==e?this._setProp(e,"disabled",!0):this.data.forEach((function(e){var i=e.id;return t._setProp(i,"disabled",!0)}))},t.prototype.enable=function(e){var t=this;void 0!==e?this._setProp(e,"disabled",!1):this.data.forEach((function(e){var i=e.id;return t._setProp(i,"disabled",!1)}))},t.prototype.isDisabled=function(e){var t=this.data.getItem(e);if(t)return t.disabled||!1},t.prototype.show=function(e){var t=this;void 0!==e?this._setProp(e,"hidden",!1):this.data.forEach((function(e){var i=e.id;return t._setProp(i,"hidden",!1)}))},t.prototype.hide=function(e){var t=this;void 0!==e?this._setProp(e,"hidden",!0):this.data.forEach((function(e){var i=e.id;return t._setProp(i,"hidden",!0)}))},t.prototype.destructor=function(){this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._vpopups&&this._vpopups.node&&this._vpopups.unmount(),this.unmount()},t.prototype.select=function(e,t){var i=this;if(void 0===t&&(t=!0),!(0,a.isId)(e))throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com");t&&this.unselect(),this.data.update(e,{active:!0}),this.data.eachParent(e,(function(e){i.data.update(e.id,{active:!0})}))},t.prototype.unselect=function(e){var t=this;(0,a.isId)(e)?(this.data.update(e,{active:!1}),this.data.eachChild(e,(function(e){t.data.update(e.id,{active:!1})}))):this.data.forEach((function(e){t.data.update(e.id,{active:!1})}))},t.prototype.isSelected=function(e){if((0,a.isId)(e)&&this.data.getItem(e))return!!this.data.getItem(e).active},t.prototype.getSelected=function(){var e=[];return this.data.forEach((function(t){t.active&&e.push(t.id)})),e},t.prototype._customHandlers=function(){return{}},t.prototype._close=function(e){var t=this;this._popupActive&&this.events.fire(p.NavigationBarEvents.beforeHide,[this._activeMenu,e])&&(this._activeParents&&this._activeParents.forEach((function(e){return t.data.exists(e)&&t.data.update(e,{$activeParent:!1})})),"click"===this.config.navigationType&&(this._isActive=!1),clearTimeout(this._currentTimeout),this._popupActive=!1,this._activeMenu=null,this._vpopups.node&&this._vpopups.unmount(),this._vpopups=null,this.events.fire(p.NavigationBarEvents.afterHide,[e]),this.paint())},t.prototype._init=function(){var e,t=this;if(!this._isContextMenu||this._activePosition){var i=this.getRootNode()||document.documentElement,n=null===(e=null==i?void 0:i.closest("[data-dhx-theme]"))||void 0===e?void 0:e.getAttribute("data-dhx-theme");this._vpopups=(0,s.create)({render:function(){var e;return(0,s.el)("div",{"data-dhx-widget-id":t._uid,"data-dhx-theme":n||"light",class:"dhx_".concat(null===(e=t.config)||void 0===e?void 0:e.$name,"--popup-menu ").concat(t._isContextMenu?" dhx_context-menu":""," ").concat(t.config.css?t.config.css.split(" ").map((function(e){return t._isContextMenu?e:e+"--popup-menu"})).join(" "):""),onmousemove:t._handlers.onmousemove,onmouseleave:t._handlers.onmouseleave,onclick:t._handlers.onclick,onmousedown:t._handlers.onmousedown,onkeydown:t._handlers.onkeydown},t._drawPopups())}}),this._vpopups.mount(document.body)}},t.prototype._initHandlers=function(){var e=this;this._isActive="click"!==this.config.navigationType,this._handlers=r({onkeydown:function(t){var i=(0,u.locate)(t)||void 0;(0,u.locateNode)(t,"data-dhx-widget-id").contains(document.activeElement)&&e.events.fire(p.NavigationBarEvents.keydown,[t,i])},onmousemove:function(t){if(e._isActive){var i=(0,u.locateNode)(t);if(i){var n=i.getAttribute("data-dhx-id");if(e._activeMenu!==n){if(e.data.haveItems(n)){e._vpopups||e._init();var o=(0,u.getRealPosition)(i);e.data.update(n,{$position:o},!1)}e._activeItemChange(n,t)}}}},onmouseleave:function(t){if("click"!==e.config.navigationType)if(e._popupActive){var i=(0,u.locateNode)(t,"data-dhx-id","relatedTarget");if(i){var n=i.getAttribute("data-dhx-id");if(e.data.getItem(n)||(e._close(t),e._activeItemChange(null,t)),e.data.haveItems(n)){e._vpopups||e._init();var o=(0,u.getRealPosition)(i);e.data.update(n,{$position:o},!1),e._activeItemChange(n,t)}}else e._close(t),e._activeItemChange(null,t)}else e._activeItemChange(null,t)},onclick:function(t){var i=(0,u.locateNode)(t);if(i){var n=i.getAttribute("data-dhx-id");if(!e.isDisabled(n)){var o=e.data.getItem(n);if(!(null==o?void 0:o.multiClick))if(e.data.haveItems(n)){if(e._vpopups||e._init(),n===e._currentRoot)return;e._isActive||(e._isActive=!0),e._setRoot(n);var r=(0,u.getRealPosition)(i);e.data.update(n,{$position:r},!1),e._activeItemChange(n,t),e.events.fire(p.NavigationBarEvents.click,[n,t])}else switch(null==o?void 0:o.type){case"input":case"title":break;case"menuItem":case"selectButton":e._onMenuItemClick(n,t);break;case"imageButton":case"button":case"customButton":case"customHTML":case"navItem":o.twoState&&e.data.update(o.id,{active:!o.active}),e.events.fire(p.NavigationBarEvents.click,[n,t]),e._close(t);break;default:e._close(t)}}}},onmousedown:function(t){var i=(0,u.locateNode)(t);if(i){var n=i.getAttribute("data-dhx-id"),o=e.data.getItem(n);if(null==o?void 0:o.multiClick){var r,a=365,s=function(){e.events.fire(p.NavigationBarEvents.click,[n,t]),a>50&&(a-=55),r=setTimeout(s,a)},l=function(){clearTimeout(r),document.removeEventListener("mouseup",l)};s(),document.addEventListener("mouseup",l)}}}},this._customHandlers())},t.prototype._initEvents=function(){var e=this,t=null;[p.DataEvents.change,p.DataEvents.filter].forEach((function(i){e.events.on(i,(function(){return e.paint(),t&&clearTimeout(t),void(t=setTimeout((function(){var i={};e.data.eachChild(e.data.getRoot(),(function(e){e.group&&(e.twoState=!0,function(e,t){e[t.group]?(t.active&&(e[t.group].active=t.id),e[t.group].elements.push(t.id)):e[t.group]={active:t.active?t.id:null,elements:[t.id]}}(i,e))}),!0),e._groups=i,e._resetHotkeys(),t=null,e.paint()}),100))}))})),this.events.on(p.NavigationBarEvents.click,(function(t){var i=e.data.getItem(t),n=e.data.getItem(null==i?void 0:i.parent);if(n&&"selectButton"===n.type&&e.data.update(i.parent,{value:i.value,icon:i.icon}),null==i?void 0:i.group){var o=e._groups[i.group];o.active&&e.data.update(o.active,{active:!1}),o.active=i.id,e.data.update(i.id,{active:!0})}})),this.events.on(p.NavigationBarEvents.inputChange,(function(t,i){e.data.update(t,{value:i})})),this._customInitEvents()},t.prototype._getMode=function(e,t,i){return void 0===i&&(i=!1),e.parent===t?"bottom":"right"},t.prototype._drawMenuItems=function(e,t){var i=this;return void 0===t&&(t=!0),this.data.map((function(e){return i._factory(e,t)}),e,!1)},t.prototype._setRoot=function(e){},t.prototype._getParents=function(e,t){var i=[],n=!1,o=this.data.getItem(e),r=o&&o.disabled;return this.data.eachParent(e,(function(e){e.id===t?(i.push(e.id),n=!0):n||i.push(e.id)}),!r),this._isContextMenu&&this._activePosition&&i.push(t),i},t.prototype._listenOuterClick=function(){this._documentHaveListener||(document.addEventListener("click",this._documentClick,!0),this._documentHaveListener=!0)},t.prototype._customInitEvents=function(){},t.prototype._drawPopups=function(){var e=this,t=this._activeMenu;if(!this._isContextMenu&&!t)return null;var i=this.getRootNode(),n=i&&i.offsetParent&&i.offsetParent.offsetParent,o=(0,c.getZIndex)(n),a=this._currentRoot,l=this._getParents(t,a);return this._activeParents=l,l.forEach((function(t){return e.data.exists(t)&&e.data.update(t,{$activeParent:!0},!1)})),l.map((function(t){if(!e.data.haveItems(t))return null;var i=e.data.getItem(t)||e._rootItem;return e._popupActive=!0,(0,s.el)("ul",r({class:"dhx_widget dhx_menu"+(e.config.menuCss?" "+e.config.menuCss:""),_key:t,_hooks:{didInsert:function(n){var s=n.el.getBoundingClientRect(),l=s.width,c=s.height,d=e._isContextMenu&&e._activePosition&&t===a?e._activePosition:i.$position,h=e._getMode(i,a,d===e._activePosition),f=(0,u.calculatePosition)(d,{mode:h,auto:!0,width:l,height:c});i.$style=r(r({},f),{zIndex:e._activePosition&&e._activePosition.zIndex||o}),n.patch({style:i.$style})},didRecycle:function(n,s){if(e._isContextMenu&&e._activePosition&&t===a){var l=s.el.getBoundingClientRect(),c=l.width,d=l.height,h=(0,u.calculatePosition)(e._activePosition,{mode:e._getMode(i,a,!0),width:c,height:d});i.$style=r(r({},h),{zIndex:e._activePosition.zIndex||o}),s.patch({style:i.$style})}}},tabindex:0,style:i.$style||{position:"absolute"}},function(e){return{role:"menu","aria-labeledby":e.id,"aria-live":"polite"}}(i)),e._drawMenuItems(t))})).reverse()},t.prototype._onMenuItemClick=function(e,t){var i=this.data.getItem(e);i.disabled||(i.twoState&&this.data.update(i.id,{active:!i.active}),this.events.fire(p.NavigationBarEvents.click,[e,t]),this._close(t))},t.prototype._activeItemChange=function(e,t){var i=this;if(this._activeParents){var n=this._getParents(e,this._currentRoot);this._activeParents.forEach((function(e){i.data.exists(e)&&!n.includes(e)&&i.data.update(e,{$activeParent:!1},!1)}))}(0,a.isId)(e)&&!this._documentHaveListener&&this._listenOuterClick(),(0,a.isId)(e)&&this.data.haveItems(e)?(this._activeMenu===e&&this._popupActive||this.events.fire(p.NavigationBarEvents.openMenu,[e]),clearTimeout(this._currentTimeout),this.paint()):(clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout((function(){return i.paint()}),400)),this._activeMenu=e},t.prototype._resetHotkeys=function(){var e=this;this._keyManager.removeHotKey(null,this),this.data.map((function(t){t.hotkey&&e._keyManager.addHotKey(t.hotkey,(function(){return e._onMenuItemClick(t.id,null)}))}))},t.prototype._setProp=function(e,t,i){var n,o=this;Array.isArray(e)?e.forEach((function(e){var n;return o.data.update(e,((n={})[t]=i,n))})):this.data.update(e,((n={})[t]=i,n))},t}(h.View);t.Navbar=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFactory=void 0;var n=i(164),o=i(165),r=i(166),a=i(167),s=i(168),l=i(169),c=i(170),u=i(171),d=i(172),h=i(173),f=i(35);t.createFactory=function(e){for(var t=e.defaultType,i=e.allowedTypes,p=e.widgetName,v=e.widget,g=new Set,_=0,m=i;_<m.length;_++){var y=m[_];g.add(y)}var b=v.config,w=v.events,x=v.data;return function(e,i){if(e.hidden)return null;if(!(e.type&&"button"!==e.type&&"navItem"!==e.type&&"menuItem"!==e.type||e.value||e.icon||e.html))return null;e.type=e.type||t,g&&!g.has(e.type)&&(e.type=t),"imageButton"===e.type&&"ribbon"!==p&&(e.active=!1),i&&"spacer"!==e.type&&"separator"!==e.type&&"customHTML"!==e.type&&(e.type="menuItem"),x.haveItems(e.id)&&function(e,t,i){switch(e){case"sidebar":case"context-menu":t.$openIcon="right";break;case"toolbar":t.parent===i.getRoot()?t.$openIcon="right":t.$openIcon="bottom";break;case"menu":t.parent!==this.data.getRoot()&&(t.$openIcon="right");break;case"ribbon":var n=i.getItem(t.parent);n&&"block"!==t.type&&("block"===n.type?t.$openIcon="bottom":t.$openIcon="right")}}(p,e,x),"toolbar"===p&&e.items&&e.items.forEach((function(e){e.type||(e.type="menuItem")}));var v="customHTML"!==e.type&&function(e,t,i,f){switch(e.type){case"navItem":case"selectButton":return(0,o.navItem)(e,i,f.collapsed);case"button":return(0,n.button)(e,i);case"title":return(0,d.title)(e,i);case"separator":return(0,c.separator)(e,i);case"spacer":return(0,u.spacer)(e,i);case"input":return(0,s.input)(e,t,i);case"imageButton":return(0,a.imageButton)(e,i);case"menuItem":return(0,l.menuItem)(e,i,f.asMenuItem);case"customHTMLButton":return(0,r.customHTMLButton)(e,i,f.asMenuItem);case"datePicker":return(0,h.datePicker)(e,t,i);default:throw new Error("unknown item type "+e.type)}}(e,w,p,{asMenuItem:i,collapsed:"sidebar"!==p||b.collapsed});return(0,f.navbarComponentMixin)(p,e,i,v)}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.button=void 0;var o=i(1),r=i(35);t.button=function(e,t){var i=e.icon&&!e.value,a=i?" dhx_navbar-count--absolute":" dhx_navbar-count--button-inline";return(0,o.el)("button.dhx_button",n({class:(0,r.getNavbarButtonCSS)(e,t),"data-dhx-id":e.id,disabled:e.disabled,type:"button"},function(e){var t=e.active||e.$activeParent,i={"aria-disabled":e.disabled?"true":"false","aria-label":e.value||e.tooltip||e.id||""+" ".concat(e.count||"")};return e.items&&(i.id=e.id,i["aria-haspopup"]="menu",t&&(i["aria-expanded"]="true")),i}(e)),[e.icon?(0,r.getIcon)(e.icon,"button"):null,e.html?(0,o.el)("div.dhx_button__text",{".innerHTML":e.html}):e.value&&(0,o.el)("span.dhx_button__text",e.value),e.count>0&&(0,r.getCount)(e,a,i),e.value&&e.$openIcon?(0,o.el)("span.dhx_button__icon.dhx_button__icon--menu.dxi.dxi-menu-right",{"aria-hidden":"true"}):null,e.loading&&(0,o.el)("span.dhx_button__loading",{"aria-hidden":"true"},[(0,o.el)("span.dhx_button__loading-icon.dxi.dxi-loading")])])}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.navItem=void 0;var o=i(1),r=i(35);t.navItem=function(e,t,i){var a=" dhx_"+t+"-button";return(0,o.el)("button",n({class:"dhx_button"+a+(e.active||e.$activeParent?a+"--active":"")+(e.disabled?a+"--disabled":"")+(e.$openIcon?a+"--select":"")+(e.circle?a+"--circle":"")+(e.size?" "+a+"--"+e.size:"")+(!e.value&&e.icon?a+"--icon":"")+(e.css?" "+e.css:""),"data-dhx-id":e.id,disabled:e.disabled,type:"button"},function(e){var t={"aria-disabled":e.disabled?"true":"false","aria-label":e.value||" "},i=e.active||e.$activeParent;return"selectButton"===e.type||e.items?(t.id=e.id,t["aria-haspopup"]="menu",i&&(t["aria-expanded"]="true")):((e.twoState||i)&&(t["aria-pressed"]=i?"true":"false"),!e.value&&e.icon&&e.tooltip&&(t["aria-label"]="".concat(e.tooltip," ").concat(e.count||""))),t}(e)),[e.icon&&(0,o.el)("span",{class:e.icon+a+"__icon","aria-hidden":"true"}),e.html&&(0,o.el)("div",{class:a.trim()+"__html",".innerHTML":e.html}),!e.html&&e.value&&(0,o.el)("span",{class:a.trim()+"__text"},e.value),e.count>0&&(0,r.getCount)(e,a+"__count",i),e.$openIcon&&(0,o.el)("span.dxi.dxi-menu-right",{class:a+"__caret","aria-hidden":"true"})])}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.customHTMLButton=void 0;var o=i(1);t.customHTMLButton=function(e,t,i){var r=i?" dhx_button dhx_menu-button":" dhx_button dhx_nav-menu-button";return(0,o.el)("button",n({class:"dhx_custom-button"+r+(e.$activeParent?r+"--active":""),"data-dhx-id":e.id,type:"button",".innerHTML":e.html},function(e){var t={"aria-disabled":e.disabled?"true":"false"};return(e.twoState||e.active||e.$activeParent)&&(t["aria-pressed"]=e.active||e.$activeParent?"true":"false"),t}(e)),e.html?"":e.value)}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.imageButton=void 0;var o=i(1),r=i(35);t.imageButton=function(e,t){var i="dhx_"+t+"-button-image",a="ribbon"===t;return(0,o.el)("button.dhx_button",n({class:i+(e.size?" "+i+"--"+e.size:"")+(!e.value&&e.src?" "+i+"--icon":"")+(a&&e.$openIcon?" "+i+"--select":"")+(e.active?" "+i+"--active":""),"data-dhx-id":e.id,type:"button"},function(e){var t={"aria-disabled":e.disabled?"true":"false"};return(e.twoState||e.active)&&(t["aria-pressed"]=e.active?"true":"false"),!e.value&&e.src&&e.tooltip&&(t["aria-label"]="".concat(e.tooltip," ").concat(e.count||"")),t}(e)),[a&&e.value&&e.$openIcon&&(0,o.el)("span.dxi.dxi-menu-right",{class:i+"__caret","aria-hidden":"true"}),e.html?(0,o.el)("div",{class:i+"__text",".innerHTML":e.html}):e.value&&(0,o.el)("span",{class:i+"__text"},e.value),e.src&&(0,o.el)("span",{class:i+"__image",style:{backgroundImage:"url(".concat(e.src,")")},role:"presentation"}),e.count>0&&(0,r.getCount)(e,i+"__count",!0)])}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.input=void 0;var n=i(1),o=i(40);function r(e,t){e.fire(o.NavigationBarEvents.inputBlur,[t])}function a(e,t){e.fire(o.NavigationBarEvents.inputFocus,[t])}function s(e,t,i){e.fire(o.NavigationBarEvents.inputChange,[t,i.target.value])}t.input=function(e,t,i){return(0,n.el)(".dhx_form-group.dhx_form-group--no-message-holder"+(e.hiddenLabel?".dhx_form-group--label_sr":".dhx_form-group--inline")+".dhx_".concat(i,"__input"),{style:{width:e.width?e.width:"200px"},role:"presentation"},[e.label&&(0,n.el)("label.dhx_label",{for:e.id,style:{maxWidth:e.hiddenLabel?null:"100%"}},e.label),(0,n.el)(".dhx_input__wrapper",{role:"presentation"},[(0,n.el)("input.dhx_input",{id:e.id,placeholder:e.placeholder,class:e.icon?"dhx_input--icon-padding":"",autocomplete:e.autocomplete?"on":"off",value:e.value,disabled:e.disabled,onblur:[r,t,e.id],onfocus:[a,t,e.id],onchange:[s,t,e.id],"data-dhx-id":e.id,_hooks:{didInsert:function(i){t&&t.fire(o.NavigationBarEvents.inputCreated,[e.id,i.el])}},_key:e.id,"aria-label":e.label||e.helpMessage||"type ".concat(e.placeholder?"text like "+e.placeholder:"text")}),e.icon?(0,n.el)(".dhx_input__icon",{class:e.icon,"aria-hidden":"true"}):null])])}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.menuItem=void 0;var o=i(1),r=i(35),a=i(0);t.menuItem=function(e,t,i){var s=i?" dhx_menu-button":" dhx_nav-menu-button",l=(0,a.isDefined)(e.count);return(0,o.el)("button",n({class:"dhx_button"+s+(e.disabled?s+"--disabled":"")+(e.active||e.$activeParent?s+"--active":""),disabled:e.disabled,"data-dhx-id":e.id,type:"button"},function(e){var t={role:"menuitem","aria-disabled":e.disabled?"true":"false"};return e.items&&(t["aria-haspopup"]="true"),t}(e)),i?[e.icon||e.value||e.html?(0,o.el)("span.dhx_menu-button__block.dhx_menu-button__block--left",[e.icon&&(0,o.el)("span.dhx_menu-button__icon",{class:e.icon}),e.html?(0,o.el)("div.dhx_menu-button__text",{".innerHTML":e.html}):e.value&&(0,o.el)("span.dhx_menu-button__text",e.value)]):null,l||e.hotkey||e.items?(0,o.el)("span.dhx_menu-button__block.dhx_menu-button__block--right",[l&&(0,r.getCount)(e," dhx_menu-button__count",!1),e.hotkey&&(0,o.el)("span.dhx_menu-button__hotkey",e.hotkey),e.items&&(0,o.el)("span.dhx_menu-button__caret.dxi.dxi-menu-right")]):null]:[e.icon&&(0,o.el)("span.dhx_menu-button__icon",{class:e.icon}),e.html?(0,o.el)("div.dhx_menu-button__text",{".innerHTML":e.html}):e.value&&(0,o.el)("span.dhx_nav-menu-button__text",e.value),l&&(0,r.getCount)(e," dhx_menu-button__count",!1)])}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.separator=void 0,t.separator=function(e,t){return null}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spacer=void 0,t.spacer=function(e,t){return null}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.title=void 0;var n=i(1);t.title=function(e,t){return(0,n.el)("span",{class:"dhx_navbar-title dhx_navbar-title--"+t,"data-dhx-id":e.id,".innerHTML":e.html,"aria-label":e.value||""},e.html?null:e.value)}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.datePicker=void 0;var o=i(1),r=i(38),a=i(10),s=i(40),l=i(19),c=i(4);function u(e,t,i){var n=i.target;n&&(n.value=t.$calendar.getValue()),e.fire(s.NavigationBarEvents.inputBlur,[null==t?void 0:t.id])}function d(e,t,i){(0,o.awaitRedraw)().then((function(){return t.$popup.show(i.target,{theme:i.target})})),e.fire(s.NavigationBarEvents.inputFocus,[null==t?void 0:t.id])}function h(e,t,i){var n=i.target.value,o=e.$calendar.config.dateFormat;return n.length?(0,l.stringToDate)(n,o,!0)&&e.$calendar.setValue((0,l.stringToDate)(n,o)):e.$calendar.clear(),t.fire(s.NavigationBarEvents.input,[(0,c.locate)(i),n]),!1}t.datePicker=function(e,t,i){e.$popup||(e.$popup=new a.Popup),e.$calendar||(e.$calendar=new r.Calendar(null,n(n({},e),{css:"dhx_widget--bordered"})),e.$popup.attach(e.$calendar),e.$calendar.events.on("change",(function(i,n,o){var r;o&&e.$popup.isVisible()&&e.$popup.hide();var a="date"===(null===(r=e.valueFormat)||void 0===r?void 0:r.toLowerCase());t.fire(s.NavigationBarEvents.inputChange,[e.id,e.$calendar.getValue(a)])})));var l=e.$calendar.getValue();return e.mode&&"calendar"!==e.mode&&e.$calendar.showDate(void 0,e.mode),(0,o.el)(".dhx_form-group.dhx_form-group--no-message-holder"+(e.hiddenLabel?".dhx_form-group--label_sr":".dhx_form-group--inline")+".dhx_".concat(i,"__input"),{style:{width:e.width?e.width:"200px"},role:"presentation"},[e.label&&(0,o.el)("label.dhx_label",{for:e.id,style:{maxWidth:e.hiddenLabel?null:"100%"}},e.label),(0,o.el)(".dhx_input__wrapper",{role:"presentation"},[(0,o.el)("input.dhx_input",{id:e.id,placeholder:e.placeholder,class:e.icon?"dhx_input--icon-padding":"",value:l,disabled:e.disabled,onblur:[u,t,e],onfocus:[d,t,e],oninput:[h,e,t],"data-dhx-id":e.id,readOnly:!0!==e.editable,_hooks:{didInsert:function(i){t&&t.fire(s.NavigationBarEvents.inputCreated,[e.id,i.el])}},_key:e.id,"aria-label":e.label||e.helpMessage||"type ".concat(e.placeholder?"text like "+e.placeholder:"text")}),e.icon?(0,o.el)(".dhx_input__icon",{class:e.icon,"aria-hidden":"true"}):null])])}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProToolbar=void 0;var a=i(86),s=i(34),l=i(1),c=i(4),u=i(14),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.scrollView=new s.ScrollView((function(){return n.getRootView()})),n}return o(t,e),t.prototype._draw=function(e){var t=this,i=this.data.getLength()?this.data.reduce((function(e,t){switch(t.type){case"title":return e||20;case"button":return"small"===t.size&&(!e||e<=28)?28:e||32;default:return 32}}),0)+24:null,n=[(0,l.el)("ul.dhx_navbar.dhx_navbar--horizontal",r(r({"data-dhx-widget-id":this._uid,tabindex:0},function(e){return{role:"toolbar","aria-label":e||""}}(e)),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,onkeydown:this._handlers.onkeydown,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",(function(e){if(9===e.which){var i=(0,c.locateNode)(document.activeElement);if(i){var n=i.getAttribute("data-dhx-id"),o=t.data.getItem(n);(null==o?void 0:o.tooltip)&&(0,u.tooltip)(o.tooltip,{node:i,position:u.Position.bottom,force:!0})}}}),!0)}}}),this.data.map((function(e){return t._factory(e)}),this.data.getRoot(),!1))];return(0,l.el)("nav.dhx_widget.dhx_toolbar",{style:{height:i},class:this.config.css?this.config.css:""},this.scrollView&&this.scrollView.config.enable?[].concat(this.scrollView.render(n)):n)},t}(a.Toolbar);t.ProToolbar=d},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(176),t),o(i(177),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenu=void 0;var r=i(0),a=i(4),s=i(14),l=i(23),c=function(e){function t(t,i){var n=e.call(this,t,(0,r.extend)({$name:"context-menu"},i))||this;return n._isContextMenu=!0,n}return o(t,e),t.prototype.showAt=function(e,t){if(void 0===t&&(t="bottom"),e instanceof MouseEvent)this._close(e),this._changeActivePosition({left:window.pageXOffset+e.x+1,right:window.pageXOffset+e.x+1,top:window.pageYOffset+e.y,bottom:window.pageYOffset+e.y,zIndex:(0,s.getZIndex)(e.target)},t);else if(window.TouchEvent&&e instanceof TouchEvent)this._close(e),this._changeActivePosition({left:window.pageXOffset+e.touches[0].clientX,right:window.pageXOffset+e.touches[0].clientX,top:window.pageYOffset+e.touches[0].clientY,bottom:window.pageYOffset+e.touches[0].clientY,zIndex:(0,s.getZIndex)(e.target)},t);else if(e instanceof HTMLElement||"string"==typeof e){var i=(0,a.toNode)(e);this._changeActivePosition((0,a.getRealPosition)(i),t)}},t.prototype._getFactory=function(){return(0,l.createFactory)({widget:this,defaultType:"menuItem",allowedTypes:["menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"context-menu"})},t.prototype._close=function(t){var i=this;this.events.on(l.NavigationBarEvents.afterHide,(function(){i._activeMenu=null,i._changeActivePosition(null,null)})),e.prototype._close.call(this,t)},t.prototype._getMode=function(e,t,i){return i?this._mode:"right"},t.prototype._changeActivePosition=function(e,t){this._activePosition=e,this._mode=t,this._listenOuterClick(),this.paint()},t}(l.Navbar);t.ContextMenu=c},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;var r=i(0),a=i(1),s=i(23),l=function(e){function t(t,i){var n=e.call(this,t,(0,r.extend)({$name:"menu"},i))||this;return n.mount(t,(0,a.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype._getFactory=function(){return(0,s.createFactory)({widget:this,defaultType:"menuItem",allowedTypes:["menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"menu-nav"})},t.prototype._draw=function(){return(0,a.el)("ul.dhx_widget",{"data-dhx-widget-id":this._uid,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,onkeydown:this._handlers.onkeydown,class:"dhx_menu-nav "+(this.config.css?this.config.css:"")},this._drawMenuItems(this.data.getRoot(),!1))},t}(s.Navbar);t.Menu=l},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.AddColumn=void 0;var o=i(2),r=i(29),a=function(){function e(e){var t;this.config=e,this._sheetName=null===(t=e.spreadsheet)||void 0===t?void 0:t.getActiveSheet().name}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.dataStore,a=e.spreadsheet,s=e.grid;if(t){this._index||(this._index=(0,o.getCellIndex)(t,s).col-1);var l=i.getPage(this._sheetName);l.addColumn(this._index,1);var c=l.getMeta(),u=c.cols,d=c.merged,h=void 0===d?[]:d;this._prev={cols:n([],u,!0)};var f=u.slice(0,this._index),p=u.slice(this._index);l.setMeta({cols:n(n(n([],f,!0),[{width:120}],!1),p,!0)}),a._updateGridSizes(),(0,r.updateSpans)(1,0,this._index,l)&&(this._prev.merged=n([],h,!0),a._updateGridState())}},e.prototype.undo=function(){var e=this.config,t=e.dataStore,i=e.spreadsheet,n=t.getPage(this._sheetName);n.removeColumn(this._index,1),n.setMeta(this._prev),i._updateGridSizes(),this._prev.merged&&i._updateGridState()},e}();t.AddColumn=a},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.AddRow=void 0;var o=i(2),r=i(29),a=function(){function e(e){var t;this.config=e,this._sheetName=null===(t=e.spreadsheet)||void 0===t?void 0:t.getActiveSheet().name}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,a=e.dataStore,s=e.spreadsheet;if(t){this._index||(this._index=(0,o.getCellIds)(t,i).row);var l=a.getPage(this._sheetName);l.addRow(this._index,1);var c=l.getMeta(),u=c.rows,d=c.merged,h=void 0===d?[]:d;this._prev={rows:n([],u,!0)};var f=u.slice(0,this._index),p=u.slice(this._index);l.setMeta({rows:n(n(n([],f,!0),[{height:null==i?void 0:i.config.rowHeight}],!1),p,!0)}),s._updateGridSizes(),(0,r.updateSpans)(0,1,this._index,l)&&(this._prev.merged=n([],h,!0),s._updateGridState())}},e.prototype.undo=function(){var e=this.config,t=e.dataStore,i=e.spreadsheet,n=t.getPage(this._sheetName);n.removeRow(this._index,1),n.setMeta(this._prev),i._updateGridSizes(),this._prev.merged&&i._updateGridState()},e}();t.AddRow=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddSheet=void 0;var n=i(6),o=function(){function e(e){this.config=e,this._store=e.dataStore}return e.prototype.do=function(){var e=this.config,t=e.sheets,i=e.val;if(!t.find((function(e){return e.value===i}))){this._store.addPage(i);for(var o=[],r=[],a=0;a<this.config.spreadsheet.config.colsCount;a++)o.push({width:120});for(a=0;a<this.config.spreadsheet.config.rowsCount;a++)r.push({height:this.config.spreadsheet._grid.config.rowHeight});this._store.getPage(i).setMeta({focusedCell:{cell:"A1"},selectedCells:["A1"],cols:o,rows:r});var s=this.config.spreadsheet.getActiveSheet().id,l=t.getIndex(s);this._id=t.add({value:i,id:this._id||null},l+1),this.config.spreadsheet.events.fire(n.SpreadsheetEvents.afterSheetAdd,[{name:i,id:this._id}]),this.config.id=this._id,this.config.spreadsheet._changeSheet(this._id),this.config.grid.paint()}},e.prototype.undo=function(){this._store.removePage(this.config.val),this.config.sheets.remove(this._id),this.config.spreadsheet._changeSheet(this.config.prev)},e}();t.AddSheet=o},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteColumn=void 0;var o=i(2),r=i(29),a=i(11),s=function(){function e(e){var t;this.config=e,this._sheetName=null===(t=e.spreadsheet)||void 0===t?void 0:t.getActiveSheet().name}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,s=e.spreadsheet,l=e.dataStore;if(t){var c=(0,o.getCellIds)(t,i).col;this._index||(this._index=c);var u=l.getPage(this._sheetName),d=u.getMeta(),h=d.cols,f=d.merged;if(1===h.length)return(0,o.showAlert)(a.default.removeAlert.replace("$name",a.default.col));var p=u.getSize()[0];this._cells=u.getCellRange(0,c,p-1,c),u.removeColumn(this._index,1),this._prev={cols:n([],h,!0)};var v=h.slice(0,this._index),g=h.slice(this._index+1),_=n(n([],v,!0),g,!0);u.setMeta({cols:_});var m=(0,r.updateSpans)(-1,0,this._index,u);s._updateGridSizes(),m&&(this._prev.merged=n([],f,!0),s._updateGridState())}},e.prototype.undo=function(){var e=this.config,t=e.dataStore,i=e.spreadsheet,n=t.getPage(this._sheetName);n.addColumn(this._index,1);for(var o=0;o<this._cells.length;o++)this._cells[o]&&n.setCell(o,this._index,this._cells[o]);n.setMeta(this._prev),i._updateGridSizes(),this._prev.merged&&i._updateGridState()},e}();t.DeleteColumn=s},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteRow=void 0;var o=i(2),r=i(29),a=i(11),s=function(){function e(e){var t;this.config=e,this._sheetName=null===(t=e.spreadsheet)||void 0===t?void 0:t.getActiveSheet().name}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.dataStore,s=e.grid,l=e.spreadsheet;if(t){var c=(0,o.getCellIds)(t,s).row;this._row||(this._row=c);var u=i.getPage(this._sheetName),d=u.getSize()[1];this._cells=u.getCellRange(c,0,c,d-1),u.removeRow(this._row,1);var h=u.getMeta(),f=h.rows,p=h.merged,v=void 0===p?[]:p;if(1===f.length)return(0,o.showAlert)(a.default.removeAlert.replace("$name",a.default.row));this._prev={rows:n([],f,!0)};var g=f.slice(0,this._row),_=f.slice(this._row+1),m=n(n([],g,!0),_,!0);u.setMeta({rows:m}),l._updateGridSizes(),(0,r.updateSpans)(0,-1,this._row,u)&&(this._prev.merged=n([],v,!0),l._updateGridState())}},e.prototype.undo=function(){var e=this.config,t=e.dataStore,i=e.spreadsheet,n=t.getPage(this._sheetName);n.addRow(this._row,1);for(var o=0;o<this._cells.length;o++)this._cells[o]&&n.setCell(this._row,o,this._cells[o]);n.setMeta(this._prev),i._updateGridSizes(),this._prev.merged&&i._updateGridState()},e}();t.DeleteRow=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteSheet=void 0;var o=function(){function e(e){this.config=e,this._store=e.dataStore,this._deletedSheet=n({},e.sheets.getItem(e.prev))}return e.prototype.do=function(){var e=this.config,t=e.sheets,i=e.spreadsheet,n=e.val,o=this._store.getPage(n);this._data=o?o.serialize(!0):[],this._sheetMeta=o?o.getMeta():{},this._store.removePage(n);var r=this._index=t.getIndex(this._deletedSheet.id);n===i.getActiveSheet().name&&i._changeSheet(t.getId(1===r?r+1:r-1)),t.remove(this._deletedSheet.id),this.config.grid.paint()},e.prototype.undo=function(){var e=this.config,t=e.sheets,i=e.spreadsheet,n=e.val;this._store.addPage(n),t.add(this._deletedSheet,this._index);var o=this._store.getPage(n);o.setMeta(this._sheetMeta),o.parse(this._data),this._store.getStore().recalculate(!0,o.getContext()),i._changeSheet(this._deletedSheet.id),this.config.grid.paint()},e}();t.DeleteSheet=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupAction=void 0;var o=i(2),r=i(6),a=i(41),s=function(){function e(e){this.config=e,this._actions=[]}return e.prototype.do=function(){var e=this,t=this.config,i=t.spreadsheet,s=t.grid,l=t.action,c=i.events;if(!this._actions.length){var u=this.config.val,d=0;if(Array.isArray(u)&&(u=u[d]),!c.fire(r.SpreadsheetEvents.beforeAction,[l,(0,o.cleanActionConfig)(this.config)]))return;i.eachCell((function(t){var i=(0,o.getCellIds)(t,s),r=i.row,l=i.col;if(!(null==s?void 0:s.isRowHidden(r+1))){var c=(0,o.getCellIds)(t,s),h=new a.actions[e.config.action](n(n({},e.config),{row:r||c.row,col:l||c.col,cell:t,val:u}));e._actions.push(h),Array.isArray(e.config.val)&&(d+1>=e.config.val.length?d=0:d+=1,u=e.config.val[d])}}),this.config.cell)}for(var h=0,f=this._actions;h<f.length;h++){f[h].do()}c.fire(r.SpreadsheetEvents.afterAction,[l,(0,o.cleanActionConfig)(this.config)])},e.prototype.undo=function(){var e=this.config,t=e.spreadsheet,i=e.action,n=t.events;if(n.fire(r.SpreadsheetEvents.beforeAction,[i,(0,o.cleanActionConfig)(this.config)])){for(var a=0,s=this._actions;a<s.length;a++){s[a].undo()}var l=this.config.cell.split(":")[0];setTimeout((function(){t.selection.setSelectedCell(l,!1)})),n.fire(r.SpreadsheetEvents.afterAction,[i,(0,o.cleanActionConfig)(this.config)])}},e}();t.GroupAction=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupColAction=void 0;var o=i(2),r=i(41),a=function(){function e(e){this.config=e,this._actions=[]}return e.prototype.do=function(){var e=this,t=this.config,i=t.spreadsheet,a=t.grid,s=t.cell;if(!this._actions.length){var l=(0,o.getCellIds)(s,a).start.row,c=s.split(":")[0];i.eachCell((function(t){var i=(0,o.getCellIds)(t,a),s=i.row,u=i.col;if(s===l){var d=new r.actions[e.config.action](n(n({},e.config),{row:s,col:u,cell:c}));e._actions.push(d)}}),this.config.cell)}for(var u=this._actions.length-1;u>=0;u--)this._actions[u].do()},e.prototype.undo=function(){for(var e=0;e<this._actions.length;e++)this._actions[e].undo()},e}();t.GroupColAction=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupRowAction=void 0;var o=i(2),r=i(41),a=function(){function e(e){this.config=e,this._actions=[]}return e.prototype.do=function(){var e=this,t=this.config,i=t.cell,a=t.grid,s=t.spreadsheet;if(!this._actions.length){var l=(0,o.getCellIds)(i,a).start.col,c=i.split(":")[0];s.eachCell((function(t){var i=(0,o.getCellIds)(t,a),s=i.row,u=i.col;if(u===l){var d=new r.actions[e.config.action](n(n({},e.config),{row:s,col:u,cell:c}));e._actions.push(d)}}),this.config.cell)}for(var u=this._actions.length-1;u>=0;u--)this._actions[u].do()},e.prototype.undo=function(){for(var e=this._actions.length-1;e>=0;e--)this._actions[e].undo()},e}();t.GroupRowAction=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LockCell=void 0;var n=i(2),o=i(6),r=function(){function e(e){this.config=e,this._store=e.dataStore,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.val,i=e.cell,r=e.grid,a=(0,n.getCellIds)(i,r),s=a.row,l=a.col;this._page.setCell(s,l,{locked:t}),t?this.config.editLine.lock():this.config.editLine.unlock(),this.config.spreadsheet.events.fire(o.SpreadsheetEvents.afterFocusSet,[i])},e.prototype.undo=function(){var e=this.config,t=e.val,i=e.cell,r=e.grid,a=(0,n.getCellIds)(i,r),s=a.row,l=a.col;this._page.setCell(s,l,{locked:!t}),this.config.spreadsheet.events.fire(o.SpreadsheetEvents.afterFocusSet,[i]),t?this.config.editLine.unlock():this.config.editLine.lock()},e}();t.LockCell=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveCellStyles=void 0;var n=i(2),o=i(6),r=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,r=(0,n.getCellIds)(t,i),a=r.row,s=r.col,l=(0,n.getCellInfo)(t,this._page,i);l.locked||(this.config.prev=l.css,this._page.setCell(a,s,{css:""}),this.config.spreadsheet.events.fire(o.SpreadsheetEvents.afterStyleChange,[t,{}]),this.config.grid.paint())},e.prototype.undo=function(){var e=this.config,t=e.cell,i=e.grid,r=(0,n.getCellIds)(t,i),a=r.row,s=r.col;(0,n.getCellInfo)(t,this._page,i).locked||(this._page.setCell(a,s,{css:this.config.prev}),this.config.spreadsheet.events.fire(o.SpreadsheetEvents.afterStyleChange,[t,{}]))},e}();t.RemoveCellStyles=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenameSheet=void 0;var n=function(){function e(e){this.config=e,this.page=e.activePage}return e.prototype.do=function(){var e=this.config,t=e.sheets,i=e.dataStore,n=e.val,o=e.prev,r=t.getItem(o),a=this.config.spreadsheet.getActiveSheet().name;r.prevValue||t.update(r.id,{prevValue:r.value}),a===r.prevValue&&(this.config.spreadsheet._activeSheetName={name:n,id:r.id}),i.renamePage(r.prevValue,n),t.update(o,{value:n,prevValue:r.prevValue}),this.config.grid.paint(),this.config.spreadsheet.selection.setFocusedCell(this.config.spreadsheet.selection.getFocusedCell(),!1)},e.prototype.undo=function(){var e=this.config,t=e.sheets,i=e.dataStore,n=e.val,o=e.prev,r=t.getItem(o);i.renamePage(n,r.prevValue),this.config.spreadsheet.getActiveSheet().name===n&&(this.config.spreadsheet._activeSheetName={name:n,id:r.id}),t.update(o,{value:r.prevValue,prevValue:r.prevValue}),this.config.grid.paint(),this.config.spreadsheet.selection.setFocusedCell(this.config.spreadsheet.selection.getFocusedCell(),!1)},e}();t.RenameSheet=n},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SetCellFormat=void 0;var o=i(12),r=i(2),a=i(6),s=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e,t=this.config,i=t.cell,s=t.grid,l=t.spreadsheet,c=this.config.val,u=(0,r.getCellIds)(i,s),d=u.row,h=u.col,f=n({},(0,o.getFormat)(c));c=f&&f.mask||c;var p=(0,r.getCellInfo)(i,this._page,s);if(!p.locked&&(null==l?void 0:l.events.fire(a.SpreadsheetEvents.beforeFormatChange,[i,c]))){var v=p.format;this.config.prev=null===(e=p.format)||void 0===e?void 0:e.id;var g=l.getFormula(i),_=p.value;"@"!==(null==v?void 0:v.mask)&&"@"===c&&this._page.setValue(d,h,"".concat(g?"="+g:_||""),1),"@"===(null==v?void 0:v.mask)&&"@"!==c&&this._page.setValue(d,h,g?"="+g:_,0),this._page.setCell(d,h,{format:n({},f||(0,o.getFormat)("common"))}),l.events.fire(a.SpreadsheetEvents.afterFormatChange,[i,c]),null==s||s.paint()}},e.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this.config.val=t,this.config.prev=e,this.do(),this.config.val=e,this.config.prev=t},e}();t.SetCellFormat=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SetCellStyle=void 0;var r=i(29),a=i(2),s=i(6),l=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e,t,i=this.config,l=i.cell,c=i.val,u=void 0===c?"":c,d=i.grid;if(l){var h=(0,a.getCellIds)(l,d),f=h.row,p=h.col,v=(0,a.getCellInfo)(l,this._page,d),g=v.locked,_=v.$toolbarAlign,m=v.css||"";if(!g){var y,b=_;if("string"!=typeof u){y=u.multiline;var w=(0,a.getStylesObject)(null==m?void 0:m.split("dhx_spreadsheet_link").join(" "));Array.isArray(u)&&(u=u[0]);var x=void 0;"string"!=typeof u&&(b=!!u["text-align"],u=x=this.config.replace?dhx.css.add(n({},u)):dhx.css.add(n(n({},w),(0,a.convertStyles)(u)))),u=(m.includes("dhx_spreadsheet_link")?"dhx_spreadsheet_link ":"")+x}if(null===(e=this.config.spreadsheet)||void 0===e?void 0:e.events.fire(s.SpreadsheetEvents.beforeStyleChange,[l,dhx.css.get(u)])){if(y){var C=this._page.getMeta();this._page_rows=o([],C.rows,!0),this._page_cols=o([],C.cols,!0),(0,r.setAutoHeightToRow)(l,this.config.grid,this._page,y)&&this.config.spreadsheet._updateGridState()}this.config.prev=m,this._page.setCell(f,p,{css:u,$toolbarAlign:b}),this.config.spreadsheet.events.fire(s.SpreadsheetEvents.afterStyleChange,[l,dhx.css.get(u)]),null===(t=this.config.grid)||void 0===t||t.paint()}}}},e.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this.config.val=t||"",this.config.prev=e||"",this.do(),this._page_rows&&(this._page.setMeta({rows:this._page_rows,cols:this._page_cols}),this.config.spreadsheet._updateGridState()),this.config.val=e,this.config.prev=t},e}();t.SetCellStyle=l},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SetCellValue=void 0;var r=i(25),a=i(29),s=i(12),l=i(2),c=i(6),u=i(0);var d=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,d=(0,l.getCellIds)(t,i),h=d.row,f=d.col,p=this.config.val,v=this.config.spreadsheet;if(!(null==v?void 0:v.isLocked(t))&&(null==v?void 0:v.events.fire(c.SpreadsheetEvents.beforeValueChange,[t,p]))){var g=v.getFormula(t);this.config.prev=g?"="+g:v.getValue(t);var _=(0,l.getCellInfo)(t,this._page,i),m=_.format;if(m||(m=n({},(0,s.getDefaultFormats)().filter((function(e){return"common"===e.id}))[0])),this._prevCell=n(n({},_),{format:n({},_.format)}),"common"===m.id&&(m.$value=(0,u.isDefined)(p)?p:""),"string"==typeof p&&p.startsWith("=")&&"@"!==(null==m?void 0:m.mask)){for(var y=p.split("").reduce((function(e,t){return"("===t?e+1:e}),0),b=p.split("").reduce((function(e,t){return")"===t?e+1:e}),0);b<y;)p+=")",b++;var w=(0,s.getFormatRule)(m.mask),x=null==w?void 0:w.decimalSeparator;""===(null==w?void 0:w.thousandsSeparator)&&"."===x||(p=function(e,t){for(var i=t._math.parse(e).code,n=t.config.localization,o=n.decimal,a=n.thousands,s="",l=0;l<i.length;l+=3){var c=i[l],u=e.substr(i[l+1],i[l+2]);if(c!==r.T_OPERATOR&&c!==r.T_SPACE||u!==o&&u!==a||i[l+3]!==r.T_NUMBER||i[l-3]!==r.T_NUMBER||(u=u===o?".":""),c===r.T_TEXT)return s+'"'.concat(u,'"');c!==r.T_DATA&&c!==r.T_PAGE&&(s+=u)}return s}(p,v));try{this._page.setValue(+h,+f,p)}catch(e){}}else{var C=(0,s.getCleanValue)(p,m),E="number"==typeof C,S=m.id;this._page.setValue(+h,+f,C,"text"===S||"common"===S&&!E?1:0)}var I=(0,l.getCellInfo)(t,this._page,i).css,k=void 0===I?"":I,M=(dhx.css.get(k)||{}).multiline,O={};if(M){var A=this._page.getMeta();this._page_rows=o([],A.rows,!0),this._page_cols=o([],A.cols,!0),(0,a.setAutoHeightToRow)(t,this.config.grid,this._page,M)&&this.config.spreadsheet._updateGridState()}var D=(0,l.doesContainUrl)(p);D&&(O={css:(0,l.isURL)(p)?"dhx_spreadsheet_link ".concat(k):k,link:{href:D}}),p||(O={css:null==k?void 0:k.split("dhx_spreadsheet_link ").join(""),link:null}),"common"===m.id&&(m.$value="string"==typeof p&&!D&&p.startsWith("=")?null:(0,u.isDefined)(p)?"".concat(p):""),this._page.setCell(h,f,n({nextValue:void 0,edited:!1,format:m},O)),this._page.setMeta({inserted:!0}),null==i||i.paint(),null==v||v.events.fire(c.SpreadsheetEvents.afterValueChange,[this.config.cell,p])}},e.prototype.undo=function(){var e=this,t=this.config,i=t.cell,o=t.grid,r=(0,l.getCellIds)(i,o),a=r.row,s=r.col;this._page_rows&&(this._page.setMeta({rows:this._page_rows,cols:this._page_cols}),this.config.spreadsheet._updateGridState());var c=this._prevCell.value;setTimeout((function(){var t=e._page.getCell(a,s),i={};Object.keys(t).forEach((function(e){i[e]=void 0})),e._page.setCell(a,s,n(n(n({},i),e._prevCell),{value:(0,u.isDefined)(c)?c:"",nextValue:void 0,edited:!1,editorValue:void 0})),null==o||o.paint()}))},e}();t.SetCellValue=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clear=void 0;var n=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this.config.spreadsheet;this._data=e.serialize(),e.parse([])},e.prototype.undo=function(){this.config.spreadsheet.parse(this._data)},e}();t.Clear=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClearSheet=void 0;var n=function(){function e(e){this.config=e,this._store=e.dataStore}return e.prototype.do=function(){var e=this.config,t=e.val,i=e.spreadsheet;this._page=this._store.getPage(t),this._data=this._page?this._page.serialize(!0):[],this._page.parse([]),i._math.recalculate(),i.selection.setFocusedCell(i.selection.getSelectedCell(),!1),i._grid.paint()},e.prototype.undo=function(){var e=this.config.spreadsheet;this._page.parse(this._data),this._store.getStore().recalculate(!0,this._page.getContext()),e.selection.setFocusedCell(e.selection.getSelectedCell(),!1),e._math.recalculate(),e._grid.paint()},e}();t.ClearSheet=n},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeCol=void 0;var r=i(2),a=i(6),s=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this,t=this.config,i=t.grid,s=t.cell,l=t.mouseEvent;if(this._colsAfterResize)i.setColumns(this._colsAfterResize);else{var c=l.clientX,u=s.split(":"),d=u[0],h=u[1],f=(0,r.getCellIds)(d,i),p=(0,r.getCellIds)(h||d,i);this._prevCols=i.config.columns.map((function(e){return n({},e)}));var v=o([],i.config.columns,!0),g=i.getRootNode();g.style.cursor="col-resize";for(var _=[],m=f.col+1;m<=p.col+1;m++){var y=v[m];y.$initWidth=i.config.columns[m].width,_.push(y)}var b=function(e){var t=e.clientX-c;_.forEach((function(e){var i=e.$initWidth+t/_.length;e.width=i<=20?20:i})),i.setColumns(v),i.paint()},w=function(t){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),g.style.cursor="unset",e._colsAfterResize=v,e.config.spreadsheet.events.fire(a.SpreadsheetEvents.afterAction,[a.Actions.resizeCol,(0,r.cleanActionConfig)(e.config)])};document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),i.paint()}},e.prototype.undo=function(){this.config.grid.setColumns(this._prevCols),this.config.spreadsheet.events.fire(a.SpreadsheetEvents.afterAction,[a.Actions.resizeCol,(0,r.cleanActionConfig)(this.config)])},e}();t.ResizeCol=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeRow=void 0;var r=i(2),a=i(6),s=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this,t=this.config,i=t.grid,s=t.cell,l=t.mouseEvent;if(this._rowsAfterResize)this._rowsAfterResize.forEach((function(e){var t=e.id,n=e.height;i.data.update(t,{height:n,changedByUser:!0})}));else{var c=l.clientY,u=s.split(":"),d=u[0],h=u[1],f=(0,r.getCellIds)(d,i),p=(0,r.getCellIds)(h||d,i),v=o([],i.data.serialize(),!0),g=i.getRootNode();g.style.cursor="row-resize";for(var _=[],m=function(e){var t=v.find((function(t){return+t.id-1===e}));if(!t)return"continue";t.height||(t.height=i.config.rowHeight),_.push(t)},y=f.row;y<=p.row;y++)m(y);this._prevRows=_.map((function(e){return n({},e)})),this._rowsAfterResize=_.map((function(e){return n({},e)}));var b=function(t){var n=t.clientY-c;_.forEach((function(t){var o=t.height+n/_.length,r=o<=10?10:o;i.data.update(t.id,{height:r,changedByUser:!0}),e._rowsAfterResize.find((function(e){return e.id===t.id})).height=r})),i.paint()},w=function(t){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),g.style.cursor="unset",e.config.spreadsheet.events.fire(a.SpreadsheetEvents.afterAction,[a.Actions.resizeRow,(0,r.cleanActionConfig)(e.config)])};document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),i.paint()}},e.prototype.undo=function(){var e=this;this._prevRows.forEach((function(t){var i,n,o=t.id,r=t.height;null===(n=null===(i=e.config)||void 0===i?void 0:i.grid)||void 0===n||n.data.update(o,{height:r,changedByUser:!0})})),this.config.spreadsheet.events.fire(a.SpreadsheetEvents.afterAction,[a.Actions.resizeRow,(0,r.cleanActionConfig)(this.config)])},e}();t.ResizeRow=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetValidation=void 0;var n=i(2),o=function(){function e(e){this.config=e,this._page=e.page,this._prevState={}}return e.prototype.do=function(){var e=this.config,t=e.val,i=e.cell,o=e.grid,r=(0,n.getCellIds)(i,o),a=r.row,s=r.col,l=this._page.getCell(a,s);this._prevState[i]=(null==l?void 0:l.editor)||null,this._page.setCell(a,s,{editor:t?{type:"select",options:t}:null}),this.config.grid.paint()},e.prototype.undo=function(){var e=this.config,t=e.cell,i=e.grid,o=(0,n.getCellIds)(t,i),r=o.row,a=o.col;this._page.setCell(r,a,{editor:this._prevState[t]}),this.config.grid.paint()},e}();t.SetValidation=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SortCells=void 0;var r=i(2),a=function(){function e(e){this.config=e,this._data={}}return e.prototype.do=function(){var e=this,t=this.config,i=t.dir,a=t.cell,s=t.spreadsheet,l=t.page,c=t.dataStore,u=t.grid,d=a.split(","),h=(null==l?void 0:l.getMeta()).filter,f=(0,r.getCellIds)(null==h?void 0:h.cell,u).start;d.forEach((function(t){var a=l,d=t;if(d.includes("!")){var p=d.split("!");if(d=p[1],!(a=c.getPage(p[0])))return}e._data[t]=a.serialize(!0);var v=a.getSize(),g=v[0],_=v[1],m=(0,r.getCellIds)(d,u);if(m.end){var y=m.start,b=m.end;h&&f.row===y.row&&(y.row=y.row+1);for(var w=s.config.topSplit||y.row,x=g-1<b.row?g-1:b.row,C=a.getCellRange(w,y.col,x,y.col).map((function(e,t){return n(n({},e),{$row:t})})),E=C.sort((function(e,t){var n=null==e?void 0:e.value,o=null==t?void 0:t.value;return"string"==typeof n&&(n=n.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),!n&&"number"!=typeof n&&o?1:!o&&"number"!=typeof o&&n?-1:"string"==typeof n&&"number"==typeof o?-i:"number"==typeof n&&"string"==typeof o?i:n<o?-i:n>o?i:0})),S=w,I=0,k=[];S<x+1;){for(var M=E[I].$row+w,O=[],A=0;A<_;A++){var D=a.getCell(M,A)||{},P=a.getValue(M,A,!0);"string"==typeof P&&P.startsWith("=")&&(P=s._math.transposeMath(P,S-M,0,a.getContext())),O.push([S,A,n(n({},D),{value:P})])}k.push.apply(k,O),S++,I++}var F=a.serialize(!0).filter((function(e){return!k.find((function(t){return t[0]===e[0]&&t[1]===e[1]}))}));a.parse(o(o([],F,!0),k,!0))}})),this.config.grid.paint()},e.prototype.undo=function(){var e=this,t=this.config,i=t.grid,n=t.page,o=t.dataStore;Object.keys(this._data).forEach((function(t){var i=n;if(t.includes("!")){var r=t.split("!");if(!(i=o.getPage(r[0])))return}i.parse(e._data[t])})),i.paint()},e}();t.SortCells=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.InsertLink=void 0;var o=i(12),r=i(2),a=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e,t=this.config,i=t.cell,a=t.val,s=t.grid;if(i){var l=(0,r.getCellIds)(i,s),c=l.row,u=l.col,d=this.config.spreadsheet;if(!(null==d?void 0:d.isLocked(i))){var h=(0,r.getCellInfo)(i,this._page,s),f=h.css,p=h.format;if(p||(p=(0,o.getDefaultFormats)().filter((function(e){return"common"===e.id}))[0]),this.config.prev=h,a){var v=a.text,g=a.href;v=null==v?void 0:v.trim(),this._page.setCell(c,u,{value:v||g,link:n(n({},a),{text:v}),css:"dhx_spreadsheet_link ".concat(f||""),format:p})}else this._page.setCell(c,u,{link:null,css:null==f?void 0:f.split("dhx_spreadsheet_link ").join(""),format:p});null===(e=this.config.grid)||void 0===e||e.paint()}}},e.prototype.undo=function(){var e=this.config,t=e.cell,i=e.grid,n=e.groupAction;if(t){var o=(0,r.getCellIds)(t,i),a=o.row,s=o.col,l=this.config.prev,c=l.value,u=void 0===c?"":c,d=l.css,h=void 0===d?"":d,f=l.link,p=void 0===f?null:f;n?this._page.setCell(a,s,{link:p}):this._page.setCell(a,s,{value:u,css:h,link:p}),null==i||i.paint()}},e}();t.InsertLink=a},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.FitColumn=void 0;var o=i(2),r=i(0),a=i(12),s=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this,t=this.config,i=t.cell,s=t.spreadsheet,l=t.grid,c=(0,o.getCellIds)(i,l).col,u=this._page.getSize(),d=this._page.getMeta().filter,h=null;if(null==d?void 0:d.cell){var f=d.cell.split(":")[0],p=(0,o.getCellIds)(f,l);c===p.col&&(h=p.row)}var v=this._page.getRange(0,c,u[0],c),g=40;v.forEach((function(t,i){var n;if(t){var o=e._page.getCell(i,c),s=(0,r.getStringWidth)((0,a.getFormattedValue)("".concat(t),o.format));"select"!==(null===(n=o.editor)||void 0===n?void 0:n.type)&&i!==h||(s+=20),s>g&&(g=s)}}));var _=this._page.getMeta().cols;this._prev=n([],_,!0),g+=20;var m=_.slice(0,c),y=_.slice(c+1);this._page.setMeta({cols:n(n(n([],m,!0),[{width:g}],!1),y,!0)}),s._updateGridState()},e.prototype.undo=function(){var e=this.config.spreadsheet;this._page.setMeta({cols:this._prev}),e._updateGridState()},e}();t.FitColumn=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Filter=void 0;var o=i(2),r=i(11),a=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.page,a=e.val,s=e.grid,l=e.spreadsheet;this._prev=n({},i.getMeta().filter);var c=t;if(!a)return i.setMeta({filter:null}),void(i===l._activePage&&l._filterForm.applyFilter(i));var u=(0,o.getCellIds)(c,s);if(!u.end){var d=i.getSize(),h=d[0],f=d[1];c="".concat((0,o.getCellNameById)(s,1,1),":").concat((0,o.getCellNameById)(s,h,f)),u=(0,o.getCellIds)(c,s),this.config.cell=c}if(l._spanControl.checkBeforeAction(this.config.cell,i,r.default.filter)){for(var p=u.start,v=u.end.col-p.col;a.length<v+1;)a.push({});null==i||i.setMeta({filter:{cell:c,rules:a}}),i===l._activePage&&l._filterForm.applyFilter(i)}},e.prototype.undo=function(){var e,t,i=this.config,n=i.cell,o=i.val;this.config.val=null===(e=this._prev)||void 0===e?void 0:e.rules,this.config.cell=null===(t=this._prev)||void 0===t?void 0:t.cell,this.do(),this.config.cell=n,this.config.val=o},e}();t.Filter=a},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Merge=void 0;var o=i(2),r=i(1),a=i(0),s=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this,t=this.config,i=t.cell,s=t.spreadsheet,l=t.page,c=t.$autofill,u=t.grid;if(i&&(0,o.isRangeId)(i)&&!(null==i?void 0:i.includes(","))){var d=(null==l?void 0:l.getMeta()).merged,h=void 0===d?[]:d,f=(0,o.getCellsArray)(i,u),p=new Set,v=null==l?void 0:l.serialize(!0);this._prevData=n([],v,!0),f.forEach((function(e){var t=(0,o.isCellSpaned)(e,h);t&&p.add(t)}));var g=(0,o.getCellsArray)(i,u),_=g[0],m=g.slice(1),y=n([],m,!0),b=y[y.length-1],w=v.filter((function(e){var t=y.find((function(t){var i=(0,o.getCellIndex)(t,u),n=i.row,r=i.col;return e[0]===n&&e[1]===r-1}));return!t})),x=(0,o.getCellIndex)(_,u),C=(0,o.getCellIndex)(b,u);if(this._newSpan={from:{row:x.row,column:x.col-1},to:{row:C.row,column:C.col-1}},!h.find((function(t){return(0,a.compare)(t,e._newSpan)}))){this._prevSpan=h.filter((function(e){return p.has(e)}))||[];var E=n(n([],h.filter((function(e){return!p.has(e)})),!0),[this._newSpan],!1);null==l||l.setMeta({merged:E}),(0,r.awaitRedraw)().then((function(){c||null==l||l.parse(w),s._updateGridState(),s._updateToolbar()}))}}},e.prototype.undo=function(){var e=this,t=this.config,i=t.page,o=t.spreadsheet,a=t.$autofill,s=(null==i?void 0:i.getMeta()).merged;null==i||i.setMeta({merged:n(n([],s.filter((function(t){return t!==e._newSpan})),!0),this._prevSpan,!0)}),a||null==i||i.parse(this._prevData),(0,r.awaitRedraw)().then((function(){o._updateGridState()}))},e}();t.Merge=s},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Unmerge=void 0;var o=i(2),r=i(1),a=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this,t=this.config,i=t.cell,n=t.spreadsheet,r=t.page,a=t.grid;if(i&&!(null==i?void 0:i.includes(","))){var s=(null==r?void 0:r.getMeta()).merged,l=(0,o.getCellsArray)(i,a);if(this._prevSpan=(0,o.isCellSpaned)(l[0],s),this._prevSpan){var c=s.filter((function(t){return t!==e._prevSpan}));null==r||r.setMeta({merged:c}),n._updateGridState()}}},e.prototype.undo=function(){var e=this.config,t=e.page,i=e.spreadsheet;if(this._prevSpan){var o=(null==t?void 0:t.getMeta()).merged;null==t||t.setMeta({merged:n(n([],o,!0),[this._prevSpan],!1)}),(0,r.awaitRedraw)().then((function(){i._updateGridState()}))}},e}();t.Unmerge=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSheetsContextMenuStruct=t.getContextMenuStruct=void 0;var n=i(11);t.getContextMenuStruct=function(){return[{id:"lock",value:n.default.lockCell,icon:"dxi dxi-key"},{id:"clear",value:n.default.clear,icon:"dxi dxi-eraser",items:[{id:"clear-value",value:n.default.clearValue},{id:"clear-styles",value:n.default.clearStyles},{id:"clear-all",value:n.default.clearAll}]},{id:"columns",value:n.default.columns,icon:"dxi dxi-table-column",items:[{id:"add-col",value:n.default.addColumn,icon:"dxi dxi-table-column-plus-before"},{id:"remove-col",value:n.default.removeColumn,icon:"dxi dxi-table-column-remove"},{id:"fit-col",value:n.default.fitToData,hidden:!0,icon:"dxi dxi-table-column"}]},{id:"rows",value:n.default.rows,icon:"dxi dxi-table-row",items:[{id:"add-row",value:n.default.addRow,icon:"dxi dxi-table-row-plus-before"},{id:"remove-row",value:n.default.removeRow,icon:"dxi dxi-table-row-remove"}]},{id:"sort",value:n.default.sort,icon:"dxi dxi-format-line-spacing",items:[{id:"asc-sort",value:n.default.ascSort,icon:"dxi dxi-sort-variant dhx-sort-acs"},{id:"desc-sort",value:n.default.descSort,icon:"dxi dxi-sort-variant"}]},{id:"link",value:"".concat(n.default.insert," ").concat(n.default.link.toLowerCase()),icon:"dxi dxi-link-variant"}]},t.getSheetsContextMenuStruct=function(e){return[{id:"delete",value:n.default.deleteSheet,icon:"dxi dxi-delete-forever",disabled:!e},{id:"rename",value:n.default.renameSheet,icon:"dxi dxi-pencil"}]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMenuStruct=void 0;var n=i(42),o=i(11);t.getMenuStruct=function(e){return[{id:"file",open:!0,value:o.default.file,items:[{id:"import",value:o.default.importAs,icon:"dxi dxi-file-import",items:[{id:"import-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]},{id:"download",value:o.default.downloadAs,icon:"dxi dxi-file-export",items:[{id:"export-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]}]},{id:"edit",value:o.default.edit,items:[{id:"undo",value:o.default.undo,icon:"dxi dxi-undo"},{id:"redo",value:o.default.redo,icon:"dxi dxi-redo"},{type:"separator"},{id:"lock",value:o.default.lockCell,icon:"dxi dxi-key"},{type:"separator"},{id:"clear",value:o.default.clear,icon:"dxi dxi-eraser",items:[{id:"clear-value",value:o.default.clearValue},{id:"clear-styles",value:o.default.clearStyles},{id:"clear-all",value:o.default.clearAll}]}]},{id:"insert",value:o.default.insert,items:[{id:"columns",value:o.default.columns,icon:"dxi dxi-table-column",items:[{id:"add-col",value:o.default.addColumn,icon:"dxi dxi-table-column-plus-before"},{id:"remove-col",value:o.default.removeColumn,icon:"dxi dxi-table-column-remove"}]},{id:"rows",value:o.default.rows,icon:"dxi dxi-table-row",items:[{id:"add-row",value:o.default.addRow,icon:"dxi dxi-table-row-plus-before"},{id:"remove-row",value:o.default.removeRow,icon:"dxi dxi-table-row-remove"}]},{id:"link",type:"navItem",icon:"dxi dxi-link-variant",value:"".concat(o.default.insert," ").concat(o.default.link.toLowerCase())}]},{id:"configuration",value:o.default.format,items:[{id:"font-weight-bold",value:o.default.bold,icon:"dxi dxi-format-bold"},{id:"font-style-italic",value:o.default.italic,icon:"dxi dxi-format-italic"},{id:"text-decoration-underline",value:o.default.underline,icon:"dxi dxi-format-underline"},{id:"text-decoration-line-through",value:o.default.strikethrough,icon:"dxi dxi-format-strikethrough"},{type:"separator"},{id:"halign",value:o.default.halign,items:[{id:"halign-left",value:o.default.left,twoState:!0,group:"halign",icon:"dxi dxi-format-align-left"},{id:"halign-center",value:o.default.center,twoState:!0,group:"halign",icon:"dxi dxi-format-align-center"},{id:"halign-right",value:o.default.right,twoState:!0,group:"halign",icon:"dxi dxi-format-align-right"}]},{id:"valign",value:o.default.valign,items:[{id:"valign-top",value:o.default.top,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-top"},{id:"valign-center",value:o.default.center,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-center"},{id:"valign-bottom",value:o.default.bottom,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-bottom"}]},{id:"multiline",value:o.default.multiline,items:[{id:"multiline-clip",group:"multiline",twoState:!0,value:o.default.clip,icon:"dxi dxi-format-text-wrapping-clip"},{id:"multiline-wrap",group:"multiline",twoState:!0,value:o.default.wrap,icon:"dxi dxi-format-text-wrapping-wrap"}]},{id:"format",type:"navItem",value:o.default.format,items:(0,n.getFormatsDropdown)(e)},{id:"merge",type:"navItem",value:o.default.merge,tooltip:o.default.merge}]},{id:"data",value:o.default.data,items:[{id:"validation",value:o.default.validation,icon:"dxi dxi-table-check"},{id:"search",value:o.default.search,icon:"dxi dxi-magnify"},{id:"filter",value:o.default.filter,icon:"dxi dxi-filter-variant"},{id:"sort",value:o.default.sort,icon:"dxi dxi-format-line-spacing",items:[{id:"asc-sort",value:o.default.ascSort,icon:"dxi dxi-sort-variant dhx-sort-acs"},{id:"desc-sort",value:o.default.descSort,icon:"dxi dxi-sort-variant"}]}]},{id:"help",value:o.default.help}]}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getToolbarStruct=t.getHotKey=void 0;var r=i(2),a=i(42),s=i(11),l={undo:"z",redo:"y",bold:"b",italic:"i",underline:"u",link:"k","align-left":"l","align-center":"e","align-right":"r"},c={"line-through":"shift+5"},u=n(n(n({},l),c),{"line-through":"shift+x"});function d(e){return(0,r.isMac)()?"+".concat(u[e]):l[e]?"ctrl+".concat(l[e]):"alt+".concat(c[e])}t.getHotKey=d,t.getToolbarStruct=function(e,t){var i={undo:[{id:"undo",type:"navItem",icon:"dxi dxi-undo",tooltip:"".concat(s.default.undo," (").concat(d("undo"),")")},{id:"redo",type:"navItem",icon:"dxi dxi-redo",tooltip:"".concat(s.default.redo," (").concat(d("redo"),")")}],colors:[{id:"color",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:(0,a.getColorpickerTemplate)("#4C4C4C","format-color-text"),tooltip:s.default.textColor},{id:"background",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:(0,a.getColorpickerTemplate)("#FFF","format-color-fill"),tooltip:s.default.backgroundColor}],lock:[{id:"lock",type:"navItem",icon:"dxi dxi-key",tooltip:s.default.lockCell}],file:[{id:"export",type:"navItem",icon:"dxi dxi-file-export",tooltip:s.default.export,items:[{id:"export-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]},{id:"import",type:"navItem",icon:"dxi dxi-file-import",tooltip:s.default.import,items:[{id:"import-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]}],columns:[{id:"add-col",type:"navItem",icon:"dxi dxi-table-column-plus-before",tooltip:s.default.addColumn},{id:"remove-col",type:"navItem",icon:"dxi dxi-table-column-remove",tooltip:s.default.removeColumn}],rows:[{id:"add-row",type:"navItem",icon:"dxi dxi-table-row-plus-before",tooltip:s.default.addRow},{id:"remove-row",type:"navItem",icon:"dxi dxi-table-row-remove",tooltip:s.default.removeRow}],clear:[{type:"navItem",icon:"dxi dxi-eraser",id:"clear-group",tooltip:s.default.clear,items:[{id:"clear-value",value:s.default.clearValue},{id:"clear-styles",value:s.default.clearStyles},{id:"clear-all",value:s.default.clearAll}]}],align:[{id:"halign",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.halign,items:[{id:"halign-left",type:"navItem",value:s.default.left,icon:"dxi dxi-format-align-left",group:"halign",tooltip:"".concat(s.default.left," (").concat(d("align-left"),")")},{id:"halign-center",type:"navItem",value:s.default.center,icon:"dxi dxi-format-align-center",group:"halign",tooltip:"".concat(s.default.center," (").concat(d("align-center"),")")},{id:"halign-right",type:"navItem",value:s.default.right,icon:"dxi dxi-format-align-right",group:"halign",tooltip:"".concat(s.default.right," (").concat(d("align-right"),")")}]},{id:"valign",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.valign,items:[{id:"valign-top",type:"navItem",group:"valign",value:s.default.top,icon:"dxi dxi-format-vertical-align-top"},{id:"valign-center",type:"navItem",group:"valign",value:s.default.center,icon:"dxi dxi-format-vertical-align-center"},{id:"valign-bottom",type:"navItem",group:"valign",value:s.default.bottom,icon:"dxi dxi-format-vertical-align-bottom"}]},{id:"multiline",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.multiline,items:[{id:"multiline-clip",type:"navItem",group:"multiline",value:s.default.clip,icon:"dxi dxi-format-text-wrapping-clip"},{id:"multiline-wrap",type:"navItem",group:"multiline",value:s.default.wrap,icon:"dxi dxi-format-text-wrapping-wrap"}]},{id:"merge",type:"navItem",icon:"dxi dxi-table-merge-cells",tooltip:s.default.merge}],decoration:[{id:"font-weight-bold",type:"navItem",icon:"dxi dxi-format-bold",tooltip:"".concat(s.default.bold," (").concat(d("bold"),")")},{id:"font-style-italic",type:"navItem",icon:"dxi dxi-format-italic",tooltip:"".concat(s.default.italic," (").concat(d("italic"),")")},{id:"text-decoration-underline",type:"navItem",icon:"dxi dxi-format-underline",tooltip:"".concat(s.default.underline," (").concat(d("underline"),")")},{id:"text-decoration-line-through",type:"navItem",icon:"dxi dxi-format-strikethrough",tooltip:"".concat(s.default.strikethrough," (").concat(d("line-through"),")")}],helpers:[{id:"link",type:"navItem",icon:"dxi dxi-link-variant",tooltip:"".concat(s.default.insert," ").concat(s.default.link.toLowerCase()," (").concat(d("link"),")")},{id:"help",type:"navItem",icon:"dxi dxi-help-circle-outline",tooltip:s.default.help}],format:[{id:"format",type:"navItem",tooltip:s.default.format,css:"dhx_format-dropdown",items:(0,a.getFormatsDropdown)(t)}],actions:[{id:"filter",type:"navItem",tooltip:s.default.filter,icon:"dxi dxi-filter-variant"}]},n=["undo","colors","decoration","align","format","actions","helpers"],r=(e=e||n).indexOf("default");return-1!==r&&e.splice.apply(e,o([r,1],n,!1)),(e=e.filter((function(e,t,i){return i.indexOf(e)===t}))).reduce((function(e,t,n,o){return i[t]&&(e.push.apply(e,i[t]),n!==o.length-1&&e.push({type:"separator"})),e}),[])}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.EditLine=void 0;var r=i(1),a=i(8),s=i(6),l=i(2),c=i(25),u=i(208),d=i(0),h=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;n._store=i.math,n._activePage=i.activePage,n._grid=i.grid,n._suggest=new u.default((function(e,t,i,o){return n.setAtCursor(e,t,i,o)})),n._prevStyles=[],n._htmlEvents={oninput:function(e){n._isEdit||(e.target.value=n._value),n._value=e.target.value,n._isMath=n._value&&n._value.toString().startsWith("=")?n._parse(n._value):null,n._isMath&&n._suggest.show(n._value,e.target,n._isMath,n.config.spreadsheet._grid.config.height),n._editMode?n.setValue(n._value):n.config.events.fire(s.SpreadsheetEvents.editLineInput,[e.target.value])},onfocus:function(e){n._editMode||n.config.events.fire(s.SpreadsheetEvents.editLineFocus,[e.target.value,e])},onblur:function(e){n._editMode?n.focus():n.config.events.fire(s.SpreadsheetEvents.editLineBlur,[e.target.value,e])},onclick:function(e){var t=n._input.selectionStart;t!==n._prevCursorPosition&&n._isMath&&(n._suggest.show(n._value,e.target,n._isMath),n._prevCursorPosition=t)},onselectionchange:function(){var e=n.getRootView(),t=e&&e.refs&&e.refs.input_wrapper,i="0px";if(n._isEdit&&n._value&&n._input){var o=n._input.selectionStart,r=(0,d.getStringWidth)("".concat(n._value).substr(0,o))+12,a=n.getRootNode().offsetWidth;t&&a<r&&(i=a-r+"px")}t&&(t.el.style.left=i,n.paint())}},document.addEventListener("selectionchange",n._htmlEvents.onselectionchange),n.config.events.on(s.SpreadsheetEvents.cellInput,(function(e,t){n._setValue(t)})),n.config.events.on(s.SpreadsheetEvents.afterSheetChange,(function(){n._activePage=n.config.spreadsheet._activePage;var e=n.config.spreadsheet._editMode,t=n._input&&n._input.selectionStart;e?(n._editMode=e,n._removeStyles(),n._setValue(n._value),n.focus(),n.setCursor(t),e.pageName===n.config.spreadsheet.getActiveSheet().name&&(n._editMode=null)):n._editMode=null})),n.config.events.on(s.SpreadsheetEvents.afterEditStart,(function(){n._isEdit=!0})),n.config.events.on(s.SpreadsheetEvents.afterEditEnd,(function(){n._isEdit=!1}));return n.mount(t,(0,r.create)({render:function(){return n._render()}})),n}return o(t,e),t.prototype._parse=function(e,t){return void 0===t&&(t=this._activePage.getContext()),this._store.parse(e,t)},t.prototype.navigate=function(e){return"enter"===e&&this._isMath&&(this._presedEnter=!0),this._editMode&&this._presedEnter?(this.setCellMath(),!1):this._suggest.navigate(e)},t.prototype.setAtCursor=function(e,t,i,n){if(this._input){var o=this._value.substr(0,t)+e+this._value.substr(i);this._editMode?this.setValue(o):this.config.events.fire(s.SpreadsheetEvents.editLineInput,[o]),this._prevCursorPosition=t+n,this._input.setSelectionRange(t+n,t+n)}},t.prototype.focus=function(){this._input&&this._input.focus()},t.prototype.blur=function(){this._input&&this._input.blur()},t.prototype.lock=function(){this._locked=!0,this.paint()},t.prototype.unlock=function(){this._locked=!1,this.paint()},t.prototype.setValueAtRedactor=function(e){var t=this._input&&this._input.selectionStart;this.setAtCursor(e,t,t,e.length)},t.prototype.setValue=function(e){this.unlock(),this._setValue(e)},t.prototype._setValue=function(e){this._value=e,this._isMath=this._value&&this._value.toString().startsWith("=")?this._parse(this._value):null,this._colored=this._parseColors(this._value),this._input&&(this._input.value=this._value),this._presedEnter=!1,this._htmlEvents.onselectionchange(),this.paint()},t.prototype.setCellMath=function(){if(this._editMode){this._removeStyles();var e=(0,l.getCellIds)(this._editMode.cell,this._grid),t=e.row,i=e.col,n=this._editMode.page;this._editMode=null,n.setCell(t,i,{nextValue:this._value}),this.config.spreadsheet._changeSheet(n.getMeta().toolbarId),this.blur(),this._presedEnter=!1}},t.prototype.getValue=function(){return this._value},t.prototype.clean=function(){var e=this;setTimeout((function(){e._setValue("")}),1)},t.prototype.destructor=function(){this._suggest.destructor()},t.prototype.getInput=function(){return this._input},t.prototype.setCursor=function(e){this._input&&this._input.setSelectionRange(e,e)},t.prototype.isCellExpected=function(e,t,i,n){if(!this._presedEnter){if(this._isMath&&this._isEdit){var o=this._value,r=e.lastIndexOf(","),a=e.lastIndexOf(":"),l=r>a?r:a,u=e.includes(",")||e.includes(":"),d=i?i.selectionStart:this._input?this._input.selectionStart:this._value.length,h=this._isMath.code,f=this.config.spreadsheet.config.localization,p=f.decimal,v=f.thousands,g=","===p||","===v?";":",";if(l>-1&&e.includes(n)){var _=this._parse(this._isMath.source.substring(0,d)).code.reverse();e=(e=(12===_[2]?_[5]:_[2])!==c.T_OPERATOR?e.substring(l):e.substring(l+1)).split(",").join(g)}for(var m=0;m<h.length;m+=3){var y=h[m+1]+h[m+2]==d,b=h[m]===c.T_SPACE?h[m-3]:h[m];if(y&&(b==c.T_OPERATOR&&")"!==o[h[m+1]]||u)){if(t){var w=this.config.spreadsheet.getActiveSheet().name;this._editMode&&this._editMode.pageName!==w&&(e=e.includes(g)||e.startsWith(":")?"".concat(e.includes(g)?g:":").concat(e.startsWith(":")?"":"'".concat(w,"'!")).concat(e.substring(1)):"'".concat(w,"'!").concat(e));var x=o.substring(0,d),C=x+e+o.substring(d);return this._editMode?(this.setValue(C),this.setCursor(x.length+e.length)):this.config.events.fire(s.SpreadsheetEvents.editLineInput,[C]),x.length+e.length}return d}}}return 0}this._presedEnter=!1},t.prototype._render=function(){var e=this;return(0,r.el)(".dhx_edit_line",{},[(0,r.el)(".input__wrapper",[(0,r.el)(".input_value",{_ref:"input_wrapper"},this._colored),(0,r.el)("input.dhx_edit_line_input",{_hooks:{didInsert:function(t){e._input=t.el},didUnmount:function(){document.removeEventListener("selectionchange",e._htmlEvents.onselectionchange)}},oninput:this._htmlEvents.oninput,onfocus:this._htmlEvents.onfocus,onblur:this._htmlEvents.onblur,onclick:this._htmlEvents.onclick,value:this._value||"",_ref:"input",disabled:this._locked}),(0,r.el)(".input-animation")])])},t.prototype._parseColors=function(e){this._removeStyles();var t=1,i=[],n=function(e,t){return i.push((0,r.el)("span".concat(t?"."+t:""),{".innerText":e}))};if(e&&"="===e[0]){for(var o=this._parse(e).code,a=0,s=function(s){var u=e.substr(a,o[s+1]-a),d=e.substr(o[s+1],o[s+2]);switch(o[s]){case c.T_SPACE:for(var h=0;h<o[s+2];h++)i.push((0,r.el)("",{".innerHTML":"&nbsp;"})),a++;break;case c.T_ARG:case c.T_RANGE:var f=l._prevStyles.find((function(e){return e&&e.cell===d}));t=9===t?1:t,o[s+1]>a&&n(u),a=o[s+1]+o[s+2],n(d,"text_range_".concat(f?f.styleNum:t)),f||o[s-3]===c.T_ERROR||(l._setStyles(d,t),l._prevStyles.push({cell:d,styleNum:t}),++t);break;case c.T_DATA:case c.T_ERROR:break;case c.T_PAGE:o[s+3]!==c.T_ARG&&o[s+3]!==c.T_RANGE&&o[s+3]!==c.T_ERROR&&(o[s+1]!==a&&n(u),a=o[s+1]+o[s+2],n(d));break;default:o[s+1]>a&&n(u),a=o[s+1]+o[s+2],n(d)}},l=this,u=0;u<o.length;u+=3)s(u);a!==e.length&&n(e.substr(a,e.length-a))}else n(e);return i},t.prototype._setStyles=function(e,t){var i=this;e.includes("$")&&(e=e=e.split("$").join("")),e.includes("!")||(e="'".concat(this._editMode?this._editMode.pageName:this.config.spreadsheet.getActiveSheet().name,"'!").concat(e));var n=this.config.grid,o=this._parse(e).code;if((0,c.fromId)(o[7])[2]===this._activePage.getID())if(e.includes("!")&&(e=e.substr(e.indexOf("!")+1)),-1!==e.indexOf(":"))this.config.spreadsheet.eachCell((function(e){var o=(0,l.getCellIds)(e,i._grid),r=o.row,a=o.col;n.addCellCss("".concat(r+1),"".concat(a+1),"range_".concat(t))}),e);else{var r=(0,l.getCellIds)(e,this._grid),a=r.row,s=r.col;n.addCellCss("".concat(a+1),"".concat(s+1),"range_".concat(t))}},t.prototype._removeStyles=function(){for(var e=this,t=function(t){if(!t)return{value:void 0};var n=i.config.grid,o=t.cell;if(o.includes("$")&&(o=o.split("$").join("")),o.includes("!")&&(o=o.substr(o.indexOf("!")+1)),o.includes(":"))i.config.spreadsheet.eachCell((function(i){var o=(0,l.getCellIds)(i,e._grid),r=o.row,a=o.col;n.removeCellCss("".concat(r+1),"".concat(a+1),"range_".concat(t.styleNum))}),o);else{var r=(0,l.getCellIds)(o,i._grid),a=r.row,s=r.col;n.removeCellCss("".concat(a+1),"".concat(s+1),"range_".concat(t.styleNum))}},i=this,n=0,o=this._prevStyles;n<o.length;n++){var r=t(o[n]);if("object"==typeof r)return r.value}this._prevStyles=[]},t}(a.View);t.EditLine=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=i(31),r=i(25),a=function(){function e(e){this._suggestCallback=e}return e.prototype.isVisible=function(){return this._popup&&this._popup.isVisible()},e.prototype.hide=function(){this.isVisible()&&this._popup.hide()},e.prototype.destructor=function(){this._popup&&this._popup.destructor()},e.prototype.navigate=function(e){if(!this.isVisible())return!1;var t=this._list,i=t.data.getLength();if(!i)return!1;if("arrowUp"===e||"arrowDown"===e){var n="arrowDown"===e?1:-1,o=t.data.getIndex(t.getFocus());return void 0===o&&(o=-1===n?i:-1),this._list.setFocus(t.data.getId((o+n+i)%i)),!0}var r=t.getFocusItem();if(!r){var a=this._list.data.getId(0);r=this._list.data.getItem(a)}return this._insertSuggest(r.value),!0},e.prototype.show=function(e,t,i,n,o){for(var a=o||t.selectionStart,s=i.code,l=this._getPopup(n),c=function(i){if(s[i]==r.T_NAME&&a==s[i+1]+s[i+2]){var n=e.substr(s[i+1],s[i+2]).toUpperCase();return u._list.data.filter((function(e){return e.value.startsWith(n)})),u._list.data.getLength()?(u._cursorStart=a,u._startTrim=s[i+1],l.show(t,{centering:!1})):l.hide(),{value:void 0}}},u=this,d=0;d<s.length;d+=3){var h=c(d);if("object"==typeof h)return h.value}l.hide()},e.prototype._insertSuggest=function(e){this._suggestCallback(e+"(",this._startTrim,this._cursorStart,e.length+1),this._popup.hide()},e.prototype._getPopup=function(e){var t=this;if(!this._popup){var i=Object.keys(r.methods).map((function(e){return{value:e}}));this._popup=new n.Popup({css:"dhx_suggest_list"}),this._list=new o.List(null),this._list.data.parse(i),this._list.events.on("Click",(function(e){var i=t._list.selection.getItem();t._insertSuggest(i.value),t._list.selection.remove(i.id)})),this._popup.attach(this._list)}var a=this._popup.getRootNode();return!a.style.maxHeight&&e&&(a.style.maxHeight="".concat(e,"px")),this._popup},e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferManager=void 0;var n=i(6),o=i(2),r=i(58),a=i(11),s=i(0),l=function(){function e(e,t,i,n,o){this._spreadsheet=e,this._grid=t,this._activePage=n,this._math=o.getStore(),this._dataStore=o,this._callAction=i.bind(e),this._buffer={value:"",math:[],meta:[],styles:{},cell:"",cells:"",operation:"",inserted:!1,formats:[],html:"",spans:[]},this._setHandlers()}return e.prototype.store=function(e){var t=this,i=this._spreadsheet.selection.getFocusedCell(),n=(0,o.getCellInfo)(i,this._activePage,this._grid),r=this._spreadsheet.selection.getSelectedCell();if(this._prevCopyPage&&this._prevCopyPage.setMeta({inserted:!0}),!n.edited){var a=(0,o.isRangeId)(r),l=[r];if(a&&r.includes(",")){var c=(l=r.split(","))[l.length-1];if(r.includes(":"))if(c.includes(":")){for(var u=void 0,d=void 0,h=void 0,f=void 0,p=void 0,v=0;v<l.length;v++){var g=l[v];if(g.includes(":")&&!u&&(u=g,f={start:(0,o.getCellIds)(u.split(":")[0],this._grid),end:(0,o.getCellIds)(u.split(":")[1],this._grid)}),v){if(!g.includes(":")&&!d.includes(":"))if(f.start.row===f.end.row||f.start.col===f.end.col){var _=f.start.row===f.end.row?"row":"col",m=(0,o.getCellIds)(g,this._grid)[_];f.start[_]===m[_]&&h.push(g)}else r=c,v=l.length,h=[r];if(g.includes(":")&&g!==u){var y=(0,o.getCellIds)(g.split(":")[0],this._grid),b=(0,o.getCellIds)(g.split(":")[1],this._grid),w=y.row===f.start.row||y.row===f.end.row||y.col===f.start.col||y.col===f.end.col,x=b.row===f.start.row||b.row===f.end.row||b.col===f.start.col||b.col===f.end.col,C=w&&x,E=y.row===f.start.row?"col":"row";p||(p=E),C&&p===E?h.push(g):(r=c,v=l.length,h=[r])}}else h=[g];d=g}(l=h).length>1&&(r=l.join())}else l=[r=c];else l=[r=c]}if(!(0,o.isRangeId)(r)||r.includes(":")){var S,I=[];if((0,o.isRangeId)(l[0])){var k=(0,o.getCellIds)(l[0].split(":")[0],this._grid).row,M=(0,o.getCellIds)(l[0].split(":")[1],this._grid).row,O=l[1]&&(0,o.getCellIds)(l[1].split(":")[0],this._grid).row;S=O&&(O===k||O===M)}var A=0,D=function(e){var i,n=0;A=S?0:A;var r=l[e];P._spreadsheet.eachCell((function(e,r){if((0,s.isDefined)(r)||(r=" "),n){var a=(0,o.getCellIds)(i,t._grid),l=(0,o.getCellIds)(e,t._grid);a.row===l.row||A++,I[A]?I[A]+="\t"+r:I.push("".concat(r))}else I[A]?I[A]+="\t"+r:I.push("".concat(r));i=e,n++}),r),A++},P=this;for(v=0;v<l.length;v++)D(v);this._buffer.value=I.join("\n"),this._buffer.styles=this._spreadsheet.getStyle(r,!1);var F=this._activePage.getMeta().merged,T=[];if((0,o.isRangeId)(r)){var R=[],V=(0,o.getCellsArray)(r,this._grid);this._spreadsheet.eachCell((function(e){R.push(t._spreadsheet._getMath(e));var i=(0,o.isCellSpaned)(e,F);if(i&&!T.includes(i)){var n=i.from,r=i.to,a=(0,o.getCellNameByIndex)(n.row,n.column+1,t._grid),s=(0,o.getCellNameByIndex)(r.row,r.column+1,t._grid);V.includes(a)&&V.includes(s)&&a===e&&T.push(i)}else T.push(null)}),r),this._buffer.math=R}else{var H=this._spreadsheet._getMath(r);this._buffer.math=[H];var L=(0,o.isCellSpaned)(r,F);L&&!T.includes(L)&&T.push(L)}this._buffer.spans=T,this._buffer.cells=r,this._buffer.meta=[],this._spreadsheet.eachCell((function(e){var i=(0,o.getCellIds)(e,t._grid),n=i.row,r=i.col;t._buffer.meta.push(t._activePage.getCell(n,r)||{})}),r);var j=this._spreadsheet.getFormat(r);this._buffer.formats=j instanceof Array?j:[j],this._buffer.cell=i,this._buffer.operation=e,this._activePage.setMeta({inserted:!1}),this._prevCopyPage=this._activePage,this._grid.paint()}else this._buffer.cell=null}},e.prototype.paste=function(){var e=this;if(this._buffer.cell){this._activePage.setMeta({inserted:!0});var t=this._buffer.cell,i=this._buffer.formats,s=t,l=!1;if((0,o.isRangeId)(this._buffer.cells)){l=!0;var c=(0,o.getRangeIndexes)(this._buffer.cells,this._grid),u=(0,o.getCellIndex)(t,this._grid),d={row:c.end.row-c.start.row,col:c.end.col-c.start.col},h=(0,o.getCellNameByIndex)(u.row+d.row,u.col+d.col,this._grid);if((0,o.isRangeId)(t))(0,o.getCellsArray)(this._buffer.cells,this._grid).length>(0,o.getCellsArray)(t,this._grid).length&&(s="".concat(t.split(":")[0],":").concat(h));else s+=":".concat(h)}var f=(0,o.isRangeId)(s),p=Array.isArray(this._buffer.styles)?this._buffer.styles.map((function(e){return dhx.css.add(e)})):dhx.css.add(this._buffer.styles),v=[];"cut"===this._buffer.operation&&(v.push({cell:this._buffer.cells,action:n.Actions.setCellFormat,groupAction:f?n.Actions.groupAction:null,val:"",page:this._activePage,dataStore:this._dataStore},{cell:this._buffer.cells,action:n.Actions.setCellValue,val:"",page:this._activePage,groupAction:l?n.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:n.Actions.setCellStyle,val:"",page:this._activePage,groupAction:l?n.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:n.Actions.setValidation,val:null,page:this._activePage,groupAction:l?n.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:n.Actions.insertLink,val:null,page:this._activePage,groupAction:l?n.Actions.groupAction:null,dataStore:this._dataStore}),this._buffer.spans.forEach((function(t){if(t){var i=t.from,r=(0,o.getCellNameByIndex)(i.row,i.column+1,e._grid);v.push({action:n.Actions.unmerge,groupAction:n.Actions.groupAction,dataStore:e._dataStore,cell:r,page:e._activePage})}})),this._buffer.operation="copy");var g,_,m=l?[].concat(this._buffer.value):this._buffer.value,y=this._buffer.math,b=this._buffer.meta.map((function(e){var t;return(null===(t=e.editor)||void 0===t?void 0:t.options)||null})),w=this._buffer.meta.map((function(e){return e.link||null})),x=m.length;if(l){var C=(0,o.getRangeIndexes)(this._buffer.cells,this._grid);g=C.start,_=C.end.col-C.start.col+1}else g=(0,o.getCellIndex)(this._buffer.cells,this._grid),_=1;var E=0,S=this._activePage.getMeta().merged;this._spreadsheet.eachCell((function(t){var i=E%x,n=m[i],r=y[i];if(r){var a=i%_,s=(i-a)/_,l=(0,o.getCellIndex)(t,e._grid);n="="+e._math.transposeMath(r.source,l.row-g.row-s,l.col-g.col-a)}m[E]=n,E++}),s),m=m.map((function(e,t){return(0,o.doesContainUrl)(e)&&!w[t]?(w[t]={href:e},""):e})),v.push({cell:s,action:n.Actions.setCellFormat,groupAction:f?n.Actions.groupAction:null,val:i,page:this._activePage,dataStore:this._dataStore},{cell:s,action:n.Actions.setCellStyle,val:p,page:this._activePage,groupAction:f?n.Actions.groupAction:null,dataStore:this._dataStore},{cell:s,action:n.Actions.setCellValue,val:m,page:this._activePage,groupAction:n.Actions.groupAction,dataStore:this._dataStore},{cell:s,action:n.Actions.setValidation,val:b,page:this._activePage,groupAction:n.Actions.groupAction,dataStore:this._dataStore},{cell:s,action:n.Actions.insertLink,val:w,page:this._activePage,groupAction:n.Actions.groupAction,dataStore:this._dataStore});var I=!1,k=this._spreadsheet._grid,M=0,O=(0,o.getCellsArray)(this._buffer.cell,k),A=this._spreadsheet.config,D=A.leftSplit,P=A.topSplit,F=[];if(this._spreadsheet.eachCell((function(t){var i,s=e._buffer.spans[M],l=(0,o.isCellSpaned)(t,S);if(s){var c=(0,r.getCellsDiff)(O[M],t,k),u=c.x,d=c.y,h=(0,o.getCellNameByIndex)(s.from.row+d,s.from.column+u+1,k),f=(0,o.getCellNameByIndex)(s.to.row+d,s.to.column+u+1,k),p="".concat(h,":").concat(f);if(!(0,o.checkSpanByNames)(p,D,P,k))return(0,o.showAlert)(a.default.spanPasteError),void(I=!0);F.push((0,o.getCellsArray)(p,k)),l&&!(null===(i=e._spreadsheet._spanControl)||void 0===i?void 0:i.checkBeforeMerge(p))||v.push({action:n.Actions.merge,groupAction:n.Actions.merge,dataStore:e._dataStore,cell:p,page:e._activePage,$autofill:!0})}l&&!s&&F.includes(t)&&v.push({action:n.Actions.unmerge,groupAction:n.Actions.groupAction,dataStore:e._dataStore,cell:t,page:e._activePage}),M=M===O.length-1?0:++M}),s),!I){this._spreadsheet.eachCell((function(t){var i=(0,o.getCellIds)(t,k),n=i.row,r=i.col;e._activePage.setCell(+n,+r,{$toolbarAlign:!0})}),s),this._callAction(v);var T=(0,o.getCellIds)(s,k).end,R=k.data.getLength(),V=k.config.columns.length;(R<(null==T?void 0:T.row)+1||V<=(null==T?void 0:T.col)+1)&&this._spreadsheet._updateGridSizes(),this._spreadsheet.selection.setSelectedCell(s,!1)}}},e.prototype.getStruct=function(){return this._buffer},e.prototype._setHandlers=function(){var e=this;this._spreadsheet.events.on(n.SpreadsheetEvents.afterSheetChange,(function(){e._activePage=e._spreadsheet._activePage}))},e}();t.BufferManager=l},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCsvDriver=void 0;var r=i(13),a=i(2),s=function(e){function t(t){var i=e.call(this)||this;return i._grid=t,i}return o(t,e),t.prototype.toJsonArray=function(t){var i=this,n=e.prototype.toJsonArray.call(this,t).reduce((function(e,t,n){for(var o in t)e.push({value:t[o],cell:(0,a.getCellNameByIndex)(n,parseFloat(o),i._grid)});return e}),[]);return n},t}(r.CsvDriver);t.CustomCsvDriver=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyManager=void 0;var n=i(20),o=i(4);function r(e){for(var t=e.toLowerCase().match(/\w+/g),i=0,n="",o=0;o<t.length;o++){var r=t[o];"ctrl"===r?i+=4:"shift"===r?i+=2:"alt"===r?i+=1:n=r}return i+n}var a={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},s=function(){function e(e){var t=this;this._keysStorage={},this._initHandler=function(e){var i;if(e.which>=48&&e.which<=57||e.which>=65&&e.which<=90)i=String.fromCharCode(e.which);else{var r=32===e.which?e.code:e.key;i=(0,o.isIE)()&&a[r]||r}var s=t._keysStorage[(e.ctrlKey||e.metaKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+(i&&i.toLowerCase())];if(s)for(var l=0;l<s.length;l++){if(t._beforeCall&&!1===t._beforeCall(e,n.focusManager.getFocusId()))return;s[l].handler(e)}},e&&(this._beforeCall=e),document.addEventListener("keydown",this._initHandler)}return e.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},e.prototype.addHotKey=function(e,t){var i=r(e);this._keysStorage[i]||(this._keysStorage[i]=[]),this._keysStorage[i].push({handler:t})},e.prototype.removeHotKey=function(e,t){var i=this;if(e)if(e&&t){var n=r(e),o=function(e){return e.toString().replace(/\n/g,"").replace(/\s/g,"")};this._keysStorage[n].forEach((function(e,r){o(e.handler)===o(t)&&(delete i._keysStorage[n][r],i._keysStorage[n]=i._keysStorage[n].filter((function(e){return e})))}))}else{var a=r(e);delete this._keysStorage[a]}else this._keysStorage={}},e}();t.KeyManager=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var r=i(0),a=i(1),s=i(52),l=i(2),c=i(58),u=i(6),d=i(24),h=function(){function e(e,t,i,n){this._spreadsheet=e,this._grid=t,this._bufferManager=i,this._events=e.events,this._activePage=n,e.config.readonly||this._setHandlers()}return e.prototype.setSelectedCell=function(e,t){var i=this;if(void 0===t&&(t=!0),e&&this._events.fire(u.SpreadsheetEvents.beforeSelectionSet,[e])){this._removeHeadersCss();var n=this._activePage.getMeta().merged,o=e.split(","),r=o.map((function(e){var t=e;if(!(null==n?void 0:n.length)||i._pressedArea&&"cell"!==i._pressedArea)return t;if((0,l.isRangeId)(e)){var o=(0,l.getRangeArray)(e,i._grid),r=new Set;if(o.forEach((function(e){var t=(0,l.isCellSpaned)(e,n);t&&r.add(t)})),r.size){var a=(0,l.getCellIds)(o[0],i._grid),s=(0,l.getCellIds)(o[o.length-1],i._grid),c=a.row,u=a.col,d=s.row,h=s.col;Array.from(r).forEach((function(e){var t=e.from,i=e.to;t.row<c&&(c=t.row),t.column<u&&(u=t.column),i.row>d&&(d=i.row),i.column>h&&(h=i.column)}));var f=(0,l.getCellNameByIndex)(c,u+1,i._grid),p=(0,l.getCellNameByIndex)(d,h+1,i._grid);t="".concat(f,":").concat(p)}}else{var v=(0,l.isCellSpaned)(e,n);v&&(t=(0,l.getCellNameByIndex)(v.from.row,v.from.column+1,i._grid))}return t}));this._activePage.setMeta({selectedCells:r});var a=o[o.length-1];(0,l.isRangeId)(a)&&(a=a.split(":")[0]),this.setFocusedCell(a,t),this._setHeadersCss(),this._mousePressed?this._grid.paint():this._events.fire(u.SpreadsheetEvents.afterSelectionSet,[this.getSelectedCell()])}},e.prototype.getSelectedCell=function(){var e=this._activePage.getMeta().selectedCells;if(e&&e.length)return e.join(",")},e.prototype.getFocusedCell=function(){var e=this._activePage.getMeta().focusedCell;if(e&&e.cell)return e.cell},e.prototype.setFocusedCell=function(e,t){if(void 0===t&&(t=!0),e&&(e=e.toUpperCase(),this._events.fire(u.SpreadsheetEvents.beforeFocusSet,[e]))){var i=(0,l.getCellIds)(e,this._grid),n=i.row,o=i.col;if(this._activePage.setMeta({focusedCell:{row:n,col:o,cell:e,edit:!1}}),t){var r=(0,l.getCellIds)(e,this._grid);this._grid.scrollTo("".concat(r.row+1),"".concat(r.col+1))}this._events.fire(u.SpreadsheetEvents.afterFocusSet,[e])}},e.prototype.removeSelectedCell=function(e){var t=this,i=this.getSelectedCell();if(i){if(e){var n=i.split(","),o=e.split(","),r=[];o.forEach((function(e){(0,l.isRangeId)(e)?(0,l.getCellsArray)(e,t._grid).forEach((function(e){r.push(e)})):r.push(e)}));var a=[];if(n.forEach((function(e){if((0,l.isRangeId)(e)){var i=(0,l.getCellsArray)(e,t._grid);r.forEach((function(e){var t=i.indexOf(e);t>-1&&(i[t]=null)}));var n=null;i.forEach((function(e,t){n?(e||(a.push("".concat(n,":").concat(i[t-1])),n=null),e&&t===i.length-1&&a.push("".concat(n,":").concat(i[t]))):n=e}))}else r.includes(e)||a.push(e)})),a.length)return void this.setSelectedCell(a.join(","),!1);this._activePage.setMeta({selectedCells:null})}else this._activePage.setMeta({selectedCells:null});this._grid.paint()}},e.prototype._isInRange=function(e,t){if(!t||!e||!t.includes(":"))return!1;var i=(0,l.getCellIndex)(e,this._grid),n=i.row,o=i.col,r=(0,l.getRangeIndexes)(t,this._grid),a=r.start,s=r.end,c=function(e,t,i){return(e-t)*(e-i)<=0};return!(!a||!s)&&(c(n,a.row,s.row)&&c(o,a.col,s.col))},e.prototype._setSearchCell=function(e){if(this._searchedCells[e]){this._searchCell=this._searchedCells[e];var t=(0,l.getCellIndex)(this._searchCell,this._grid,!0),i=t.row,n=t.col;this._grid.scrollTo(i+1,n)}},e.prototype._setSearchedArray=function(e){this._searchedCells=e},e.prototype._removeSearchCell=function(){this._searchCell=null,this._searchedCells=[],this._grid.paint()},e.prototype._removeHeadersCss=function(){var e=this;if(this.getSelectedCell()){this._prevHeaderCss.forEach((function(t){var i=(0,l.getCellIndex)(t,e._grid),n=e._grid.data.getId(i.row);void 0!==n&&e._grid.removeRowCss(n,"dhx_selected_row");var o=e._grid.config.columns[i.col];void 0!==o&&(o.header[0].css=o.header[0].css.replace(" dhx_selected_header",""))}));var t=this._activePage.getMeta().focusedCell;this._grid.data.exists(t.row)&&this._grid.removeRowCss(t.row,"dhx_selected_row")}this._filteredCells&&(this._spreadsheet.eachCell((function(t){var i=(0,l.getCellIndex)(t,e._grid),n=e._grid.data.getId(i.row);void 0!==n&&e._grid.removeRowCss(n,"dhx_filtered_row");var o=e._grid.config.columns[i.col];void 0!==o&&(o.header[0].css=o.header[0].css.replace(" dhx_filtered_header",""))}),this._filteredCells),this._filteredCells="")},e.prototype._setHeadersCss=function(){var e=this,t=this.getSelectedCell(),i=this._activePage.getMeta(),n=i.merged,o=i.filter;if(this._prevHeaderCss=[],t){var r=[];this._spreadsheet.eachCell((function(t){var i=(0,l.getCellIndex)(t,e._grid),o=e._grid.data.getId(i.row);void 0!==o&&e._grid.addRowCss(o,"dhx_selected_row");var a=(0,l.isCellSpaned)(t,n),s=t;if(a&&!r.includes(a)&&"header"!==e._pressedArea&&"index"!==e._pressedArea){var c=a.from,u=a.to;s="".concat((0,l.getCellNameByIndex)(c.row,c.column+1,e._grid),":").concat((0,l.getCellNameByIndex)(u.row,u.column+1,e._grid)),r.push(a)}(0,l.isRangeId)(s)?e._spreadsheet.eachCell((function(t){return e._setCss(t)}),s):e._setCss(s)}))}o&&(this._spreadsheet.eachCell((function(t){var i=(0,l.getCellIndex)(t,e._grid),n=e._grid.data.getId(i.row);void 0!==n&&e._grid.addRowCss(n,"dhx_filtered_row");var o=e._grid.config.columns[i.col];void 0===o||o.header[0].css.includes("dhx_filtered_header")||(o.header[0].css+=" dhx_filtered_header")}),o.cell),this._filteredCells=o.cell)},e.prototype._setCss=function(e){this._prevHeaderCss.push(e);var t=(0,l.getCellIndex)(e,this._grid),i=this._grid.data.getId(t.row);void 0!==i&&this._grid.addRowCss(i,"dhx_selected_row");var n=this._grid.config.columns[t.col];void 0===n||n.header[0].css.includes("dhx_selected_header")||(n.header[0].css+=" dhx_selected_header")},e.prototype._selectRow=function(e){var t=this._grid.config.columns[1],i=this._grid.config.columns[this._grid.config.columns.length-1];this.setSelectedCell("".concat((0,l.getCellNameById)(this._grid,e.id,t.id),":").concat((0,l.getCellNameById)(this._grid,e.id,i.id)),!1)},e.prototype._selectColumn=function(e){var t=this._grid.data.getId(0),i=this._grid.data.getId(this._grid.data.getLength()-1),n=this._grid.data.getItem(t),o=this._grid.data.getItem(i);this.setSelectedCell("".concat((0,l.getCellNameById)(this._grid,n.id,e.id),":").concat((0,l.getCellNameById)(this._grid,o.id,e.id)),!1)},e.prototype._setGroupSelectionHandlers=function(){var e=this;this._spreadsheet.config.readonly||(this._grid.events.on(s.GridEvents.cellMouseOver,(function(t,i){if(!(0,l.getCellInfo)(e.getFocusedCell(),e._activePage,e._grid).edited){var n=e._activePage.getMeta(),r=n.focusedCell;if(e._mousePressed){if("index"!==e._pressedArea&&"$index"===i.id)return;if("header"===e._pressedArea&&"$index"!==i.id){var a=e._grid.data.getId(e._grid.data.getLength()-1),s=e._grid.data.getItem(a);return void e.setSelectedCell("".concat(r.cell,":").concat((0,l.getCellNameById)(e._grid,s.id,i.id)),!1)}var u=e._grid.config.columns[e._grid.config.columns.length-1],d=(0,l.getCellNameById)(e._grid,t.id,"index"===e._pressedArea?u.id:i.id),h=r.cell,f=o([],n.selectedCells,!0);if("fillHandle"===e._pressedArea){d=(0,c.getLastCopyingCell)(e._cellsToCopy,d,e._grid);var p=e._isInRange(d,e._cellsToCopy);((0,l.isRangeId)(e._cellsToCopy)&&d===h||p)&&(d=e._cellsToCopy.split(":")[1])}var v=h===d?h:"".concat(h,":").concat(d);f[f.length-1]=v;var g=e.getFocusedCell();e.setSelectedCell(f.join(","),!1),e.setFocusedCell(g,!1)}}})),this._grid.events.on(s.GridEvents.headerCellMouseOver,(function(t){if("cell"!==e._pressedArea&&e._mousePressed&&"header"===e._pressedArea&&"$index"!==t.id){var i=e._grid.data.getId(e._grid.data.getLength()-1),n=e._grid.data.getItem(i),o=e._activePage.getMeta().focusedCell;e.setSelectedCell("".concat(o.cell,":").concat((0,l.getCellNameById)(e._grid,n.id,t.id.toString())),!1)}})))},e.prototype._setHandlers=function(){var e,t,i=this;(0,a.awaitRedraw)().then((function(){var t;e=null===(t=i._grid.getRootView().node)||void 0===t?void 0:t.el.getBoundingClientRect()}));var c=function(n){t&&clearTimeout(t);var o=i._grid.getScrollState();n.clientX>e.width+e.left-50&&i._grid.scroll(o.x+50,o.y),n.clientX<e.left+50&&i._grid.scroll(o.x-50,o.y),n.clientY>e.height+e.top-50&&i._grid.scroll(o.x,o.y+50),n.clientY<e.top+50&&i._grid.scroll(o.x,o.y-50),t=setTimeout((function(){c(n)}),100)};document.addEventListener("mouseup",(function(){if(i._mousePressed){i._mousePressed=!1;var e=i.getSelectedCell();"fillHandle"===i._pressedArea&&(e!==i._cellsToCopy&&i._events.fire(u.SpreadsheetEvents.groupFill,[i._cellsToCopy,e]),i._cellsToCopy=""),i._pressedArea=null,document.removeEventListener("mousemove",c),t&&clearTimeout(t),e&&i._events.fire(u.SpreadsheetEvents.afterSelectionSet,[i.getSelectedCell()]),i._grid.paint()}})),this._grid.events.on(s.GridEvents.cellMouseDown,(function(t,n,o){var r;i._mousePressed=!0,e=i._grid.getRootView().node.el.getBoundingClientRect(),setTimeout((function(){i._mousePressed&&document.addEventListener("mousemove",c)}),100);var a=i._activePage.getMeta().selectedCells;if("$index"!==n.id){i._pressedArea="cell";var s=(0,l.getCellNameById)(i._grid,t.id,n.id),d=(0,l.getCellInfo)(s,i._activePage,i._grid);if(!(3===o.which&&i._isInRange(s,a[a.length-1])||d.edited)){var h=i.getFocusedCell();if(!o.shiftKey||o.ctrlKey||o.metaKey)if(o.shiftKey&&(o.ctrlKey||o.metaKey)){a.length&&a[a.length-1]===h&&a.pop();var f=i.getSelectedCell();i.setSelectedCell("".concat(f?f+",":"").concat(h,":").concat(s),!1)}else if(!o.ctrlKey&&!o.metaKey||o.shiftKey)i.setSelectedCell(s,!1);else{if(!(f=i.getSelectedCell()))return;if(f&&!(0,l.getCellsArray)(f,i._grid).includes(s))return i.setSelectedCell("".concat(f,",").concat(s),!1);for(var p=f.split(","),v=0;v<p.length;v++){var g=p[v];(0,l.isRangeId)(g)||g!==s||i.setSelectedCell(p.filter((function(e){return e!==s})).join(","),!1)}}else i.setSelectedCell("".concat(h,":").concat((0,l.getCellNameById)(i._grid,t.id,n.id)),!1)}}else{var _=o.target.getAttribute("data-dhx-id");if(o.shiftKey){var m=i.getSelectedCell(),y=[];(0,l.isRangeId)(m)&&(y=m.split(":"));var b=(0,l.getCellIds)(y[0]||m,i._grid),w=i._grid.config.columns,x=(0,l.getCellNameById)(i._grid,t.id,w[w.length-1].id),C=(0,l.getCellNameById)(i._grid,b.row+1,1);return void i.setSelectedCell("".concat(C,":").concat(x),!1)}if(_){document.removeEventListener("mousemove",c),i._mousePressed=!1;var E=null===(r=i.getSelectedCell())||void 0===r?void 0:r.split(":"),S=E&&(0,l.getCellIds)(E[0],i._grid),I=E&&(0,l.getCellIds)(E[1],i._grid);if(!E||0!==S.col||I.col+2!==i._grid.config.columns.length||+_!==S.row&&+_!==I.row){var k=(0,l.getCellNameById)(i._grid,+_+1,1);i._resizedRows=[k,k]}else i._resizedRows=E;i._spreadsheet._callAction({cell:i._resizedRows.join(":"),action:u.Actions.resizeRow,groupAction:u.Actions.resizeRow,mouseEvent:o})}else i._pressedArea="index",i._selectRow(t),i._mousePressed=!0}})),this._grid.events.on(s.GridEvents.headerCellMouseDown,(function(e,t){var n,o=t.target.getAttribute("data-dhx-id");if(t.shiftKey){var r=i.getSelectedCell(),a=[];(0,l.isRangeId)(r)&&(a=r.split(":"));var s=(0,l.getCellIds)(a[0]||r,i._grid),c=(0,l.getCellNameById)(i._grid,i._grid.data.getId(0),s.col+1),d=(0,l.getCellNameById)(i._grid,i._grid.data.getLength(),e.id);i.setSelectedCell("".concat(c,":").concat(d),!1)}else{var h=t.target.className.includes("dhx_header_icon");if(h)return i._pressedArea="header",void i._selectColumn(e);if(!o||h)i._pressedArea="header",i._selectColumn(e),i._mousePressed=!0;else{if("$index"===o){var f=(0,l.getCellNameByIndex)(0,1,i._grid),p=(0,l.getCellNameByIndex)(i._grid.data.getLength()-1,i._grid.config.columns.length-1,i._grid);return void i.setSelectedCell("".concat(f,":").concat(p),!1)}var v=(r=null===(n=i.getSelectedCell())||void 0===n?void 0:n.split(":"))&&(0,l.getCellIds)(r[0],i._grid),g=r&&(0,l.getCellIds)(r[1],i._grid);if(!r||0!==v.row||g.row+1!==i._grid.data.getLength()||+o!==v.col+1&&+o!==g.col+1){s=(0,l.getCellNameByIndex)(0,+o,i._grid);i._resizedColumns=[s,s]}else i._resizedColumns=r;i._spreadsheet._callAction({cell:i._resizedColumns.join(":"),action:u.Actions.resizeCol,groupAction:u.Actions.resizeCol,mouseEvent:t})}}})),this._setGroupSelectionHandlers(),this._grid.events.on(s.GridEvents.cellDblClick,(function(e,t,n){n.ctrlKey||n.metaKey?i._grid.events.fire(s.GridEvents.cellClick,[e,t,n]):"$index"!==t.id&&i._spreadsheet.startEdit((0,l.getCellNameById)(i._grid,e.id,t.id))})),this._grid.events.on(s.GridEvents.headerCellDblClick,(function(e,t){var n=t.target.getAttribute("data-dhx-id");if("$index"!==n&&n){var o=(0,l.getCellNameByIndex)(0,+e.id,i._grid);i._spreadsheet.fitColumn(o)}})),this._spreadsheet.events.on(u.SpreadsheetEvents.afterSheetChange,(function(){i._removeHeadersCss(),i._activePage=i._spreadsheet._activePage;var e=i._activePage.getMeta();i.setSelectedCell(e.selectedCells?e.selectedCells.join(","):null,!1),i.setFocusedCell(e.focusedCell?e.focusedCell.cell:null,!1)})),this._events.on(u.SpreadsheetEvents.afterAction,(function(e){e===u.Actions.resizeRow&&(i._resizedRows=null,i._grid.paint()),e===u.Actions.resizeCol&&(i._resizedColumns=null,i._grid.paint())})),this._events.on(u.SpreadsheetEvents.gridRedraw,(function(e){var t,s=i._activePage.getMeta(),u=s.selectedCells,h=s.focusedCell,f=s.merged,p=void 0===f?[]:f,v=s.filter,g=s.inserted,_=null==h?void 0:h.cell;if(u&&(_||(null===(t=i._searchedCells)||void 0===t?void 0:t.length))){var m,y=function(e){var t=i._grid.data.getItem(i._grid.data.getId(e.row));return t?{x:i._grid.config.columns.slice(0,e.col).reduce((function(e,t){return e+t.$width}),0),y:e.row?i._grid.data.mapRange(0,e.row-1,(function(e){return e})).reduce((function(e,t){return e+(t.height||t.$height)}),0)-1:0,width:(i._grid.config.columns[e.col]?i._grid.config.columns[e.col].$width:0)+1,height:(t.height||t.$height)+1}:{x:0,y:0,width:0,height:0}},b=function(e){var t=y(e.start),i=y(e.end);return{x:t.x,y:t.y,width:i.x-t.x+(i.width||0),height:i.y-t.y+i.height}},w=i._spreadsheet.config,x=w.leftSplit,C=void 0===x?0:x,E=w.topSplit,S=void 0===E?0:E,I=i._grid.getScrollState(),k=y({row:S,col:C}),M=function(e){void 0===e&&(e="A1");var t=(0,l.getCellIds)(e,i._grid),n=(t.col,t.row,(0,l.isCellFixed)(e,C,S,i._grid)),o=n.isLeftFixed,r=n.isTopFixed,a=(0,l.isCellSpaned)(e,p);if(a){var s=a.from,c=s.row,u=s.column;e=(0,l.getCellNameByIndex)(c,u+1,i._grid)}var h=y((0,l.getCellIndex)(e,i._grid)),f=h.x,v=h.y,g=h.width,_=void 0===g?0:g,m=h.height,w=k.x+I.x+(k.width||0),x=k.y+I.y,E=o?_:null,M=r?m:null,O=Math.abs(f-w<0&&!o?f-w:0),A=Math.abs(v-x<0&&!r?v-x:0),D=o?f+I.x:f,P=r?v+I.y:v;if(a){var F=a,T=F.to,R=F.from,V=y({row:T.row,col:+T.column+1}),H=R.row!==T.row?V.y-P+V.height-m:0;_+=R.column!==T.column?V.x-D+V.width-_:0,m+=H;var L=b({start:{row:R.row,col:R.column+1},end:{row:T.row,col:T.column+1}});o&&(E=L.width),r&&(M=L.height)}var j=_-O,N=m-A;return{width:E&&E>j?E:j,height:M&&M>N?M:N,top:P+A,left:D+O,borderLeft:!o&&_>j+d.BORDERS?"none":null,borderRight:!o&&j<=0?"none":null,borderTop:!r&&m>N?"none":null,borderBottom:!r&&N<=0?"none":null,position:"absolute",pointerEvents:"none",zIndex:12,minWidth:E,minHeight:M}},O=function(e){var t=(0,l.getRangeIndexes)(e,i._grid),n=b(t),o=n.x,r=n.y,a=n.width,s=n.height,c=t.start,u=t.end,d=c.col<=C,h=c.row<S;if(d||h){var f=k.x+I.x+k.width,p=k.y+I.y,v=b({start:{row:c.row,col:c.col},end:{row:S&&u.row>=S?S-1:u.row,col:C&&u.col>C?C:u.col}}),g=d?v.width:null,_=h?v.height:null,m=d?o+I.x:o,y=h?r+I.y:r,w=Math.abs(o-f<0&&!d?o-f:0),x=Math.abs(r-p<0&&!h?r-p:0),E=a-w,M=s-x;return d&&(E-=I.x),h&&(M-=I.y),{top:y+x,left:m+w,width:E,minWidth:g,height:M,borderLeft:!d&&a>E?"none":null,borderRight:!d&&E<=0?"none":null,borderTop:!h&&s>M?"none":null,borderBottom:!h&&M<=0?"none":null,minHeight:_,zIndex:12}}return{top:r,left:o,width:a,height:s,zIndex:10}},A=u.map((function(e){return(0,l.isRangeId)(e)?(0,a.el)(".dhx_group_selection",{style:O(e)}):1!==u.length?(0,a.el)(".dhx_group_selection",{style:M(e)}):void 0})),D=u[u.length-1],P=(0,a.el)(".dhx_selected_cell",{style:M(_||D)});i._searchCell&&(m=i._searchedCells.map((function(e){return(0,a.el)(".dhx_search_group".concat(e===i._searchCell?".dhx_search_cell":""),{style:M(e)})})));var F,T,R,V=[],H=i._bufferManager.getStruct();if(H.cell&&void 0!==g&&!g)V=(H.cells.includes(",")?H.cells.split(","):[H.cells]).map((function(e){var t=(0,l.isRangeId)(e)?O(e):M(e),i=t.width,o=t.left,r=t.height,s=t.top;return(0,a.el)(".dhx_copy_selection",{style:n(n({},t),{width:i+2,left:o-1,height:r+2,top:s-1})})}));if(i._resizedColumns){var L=(0,l.getCellIds)(i._resizedColumns[1],i._grid),j=(0,r.findIndex)(i._grid.config.columns,(function(e){return e.id==L.col+1})),N=y({row:0,col:j}),$=i._grid.config.$totalHeight;F=(0,a.el)(".resize_line",{style:{top:N.y,left:N.x+N.width-1.5,height:$}})}if(i._resizedRows){var z=(0,l.getCellIndex)(i._resizedRows[1],i._grid);N=y({row:z.row,col:0});F=(0,a.el)(".resize_line",{style:{top:N.y+N.height-2,left:0,width:i._grid.config.$totalWidth,height:"2px"}})}if((0,l.isRangeId)(D)){var B=(0,l.getRangeArray)(D,i._grid);D=B[B.length-1]}if(v){var W=(0,l.getCellsArray)(v.cell,i._grid).reverse(),G=W.find((function(e){return!i._grid.isRowHidden((0,l.getCellIds)(e,i._grid).row+1)}));T=(0,a.el)(".dhx_filtered_cells",{style:O("".concat(W[W.length-1],":").concat(G))})}if(!(0,l.getCellInfo)(i.getFocusedCell(),i._activePage,i._grid).edited){var U=M((0,l.isRangeId)(i.getSelectedCell())?D:_),q=U.top,X=U.left,Y=U.width,K=U.height,J=U.minWidth;q+=(U.minHeight||K)-6,X+=(J||Y)-6;var Z=(0,l.isCellFixed)(D,C,S,i._grid),Q=Z.isLeftFixed,ee=Z.isTopFixed;R=(0,a.el)(".dhx_selection_grip",{"data-dhx-id":"selection_grip",style:{position:"absolute",left:X,top:q,zIndex:!ee&&!Q||ee&&Y<=0||Q&&K<=0?10:12},onmousedown:function(){i._mousePressed=!0,document.addEventListener("mousemove",c),i._pressedArea="fillHandle";var e=i.getSelectedCell().split(","),t=e[e.length-1];i.setSelectedCell(t,!1);var n=(0,l.getCellsArray)(t,i._grid),o=(0,l.isCellSpaned)(n[n.length-1],p);if(i._cellsToCopy=t,o){var r=o.to,a=(0,l.getCellNameByIndex)(r.row,r.column+1,i._grid);i._cellsToCopy="".concat(n[0],":").concat(a)}}})}e.refs.selection.patch((0,a.el)(".dhx_grid_selection",o(o(o(o([],V,!0),[P],!1),A,!0),[m,F,T,R],!1)))}}))},e}();t.Selection=h},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DateEditor=void 0;var o=i(1),r=i(38),a=i(10),s=i(28),l=i(12),c=i(6),u=i(19),d=function(){function e(e,t,i){var n=this;this._dateFormat=t,this._calendar=new r.Calendar(null,{dateFormat:t}),this._popup=new a.Popup({css:"dhx_editor-popup"}),this._popup.attach(this._calendar),this._events=i,this._endEdit=e,this._popup.events.on(a.PopupEvents.afterShow,(function(){n._calendar.getRootNode().querySelector(".dhx_calendar__days").addEventListener("click",n.endEdit.bind(n),{once:!0})})),this._initHandlers()}return e.prototype.endEdit=function(){var e=this;this.edit&&((0,o.awaitRedraw)().then((function(){e._events.fire(c.SpreadsheetEvents.cellInput,[e._config.oninput[1],e._calendar.getValue()]),e._endEdit(),e._popup.hide()})),this.edit=!1)},e.prototype.setValue=function(e){var t;if((0,l.isNumeric)(e))t=(0,s.excelDateToJSDate)(e);else{if(!(0,u.stringToDate)(e,this._dateFormat,!0))return;t=(0,u.stringToDate)(e,this._dateFormat)}this._calendar.setValue(t)},e.prototype.hidePopup=function(){this._popup.isVisible()&&this._popup.hide()},e.prototype.toHTML=function(e){var t=this;return this._config=e,this.setValue(e.value),this.edit=!0,document.addEventListener("mousedown",this._handlers.onOuterClick),(0,o.el)("input.dhx_cell_input",n(n({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide()},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert})}))},e.prototype._showPopup=function(){this._input.value.startsWith("=")||this._popup.show(this._input,{centering:!0,mode:"bottom"})},e.prototype._initHandlers=function(){var e=this;this._handlers={onFocus:function(){(0,o.awaitRedraw)().then((function(){e._showPopup()}))},onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.contains(t.target),n=e._popup&&e._popup.getRootNode()&&e._popup.getRootNode().contains(t.target);i||n||e._popup.hide()}},oninput:function(t){t.target.value||e._showPopup(),t.target.value.startsWith("=")&&e._popup.isVisible()&&e._popup.hide();var i=e._config.oninput;(0,i[0])(i[1],t)},didInsert:function(t){var i=t.el;e._input=i,e._input.addEventListener("focus",e._handlers.onFocus),e._config._hooks.didInsert(t)}}},e}();t.DateEditor=d},function(e,t,i){"use strict";(function(e){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Exporter=void 0;var r=i(0),a=i(12),s=i(2),l=function(){function t(e,t){this._spreadsheet=e,this._grid=t}return t.prototype.xlsx=function(e){var t=this;if(void 0===e&&(e="data"),!(0,s.isWasmSupported)())throw new Error("WebAssembly is not supported by your browser");var i=[{id:""}],l=this._spreadsheet.serialize(),c=(0,a.getDefaultFormats)(),u=[];l.sheets.forEach((function(e){for(var a=t._spreadsheet._dataStore.getPage(e.name),l=a.getSize(),d=a.getMeta().merged,h=[],f=[],p=0;p<l[1];p++)h.push(null);for(p=0;p<l[0];p++)f.push(o([],h,!0));e.data.forEach((function(e){var o=null,a=(0,s.getCellIds)(e.cell,t._grid),l=a.row,u=a.col,d=c.find((function(t){return t.id===e.format})),h=d?d.mask:"",p=e.css||"",v=h+p;if(-1===(o=(0,r.findIndex)(i,(function(e){return e.id===v})))){var g={"text-align":"align","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle","text-decoration":"textDecoration","vertical-align":"verticalAlign"},_=dhx.css.get(p)||{},m=Object.keys(_).reduce((function(e,t){return e[g[t]||t]=_[t],e}),{});i.push(n(n({format:h},m),{id:v})),o=i.length-1}var y={v:(0,r.isDefined)(e.value)?"".concat(e.value):"",s:o};f[l][u]=y})),u.push({name:e.name,cells:f,cols:e.cols,rows:e.rows,merged:d})}));var d={data:u,styles:i},h=this._spreadsheet.config.exportModulePath;this._getXlsxWorker(e,h).then((function(e){return e.postMessage({type:"convert",data:d})}))},t.prototype.json=function(){return(0,r.downloadFile)(JSON.stringify(this._spreadsheet.serialize()),"data.json","text/json")},t.prototype._getXlsxWorker=function(t,i){if(!this._xlsxWorker){var n=window.URL.createObjectURL(new Blob(["importScripts('".concat(i,"');")],{type:"text/javascript"}));this._xlsxWorker=new e((function(e){var i=new Worker(n);i.addEventListener("message",(function(n){if("init"===n.data.type)e(i);else if("ready"===n.data.type){var o=document.createElement("a");o.href=URL.createObjectURL(n.data.blob),o.download="".concat(t,".xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}}))}))}return this._xlsxWorker},t}();t.Exporter=l}).call(this,i(16))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XlsxDriver=void 0;var n=i(2),o=function(){function e(){}return e.prototype.toJsonArray=function(e,t){var i=[],o=[],r={};return e.styles.forEach((function(e,t){var i=["background","color","textAlign","verticalAlign","textDecoration","fontWeight","fontStyle"].reduce((function(t,i){return e[i]&&(t[i]=e[i]),t}),{});o.push(e.format),r["imported_class"+t]=i})),e.data.forEach((function(e){var r=[];e.cells.forEach((function(e,i){e.forEach((function(e,a){if(e){var s={cell:(0,n.getCellNameByIndex)(i,a+1,t),value:e.v,css:["imported_class"+e.s],format:o[e.s]};r.push(s)}}))})),i.push({name:e.name,data:r,cols:e.cols,rows:e.rows,merged:e.merged})})),{sheets:i,styles:r}},e}();t.XlsxDriver=o},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.FileProxy=void 0;var n=i(2),o=function(){function t(e){this._spreadsheet=e}return t.prototype.load=function(t,i){var n=this;return void 0===t&&(t="xlsx"),new e((function(e){n._getFile(t,i).then((function(i){if("json"===t)return e(i);i instanceof ArrayBuffer&&(i=new Uint8Array(i));var o=n._spreadsheet.config.importModulePath;n._getXlsxWorker(o).then((function(t){t.postMessage({type:"convert",data:i,formulas:!0}),t.onmessage=function(t){"ready"===t.data.type&&e(t.data)}}))}))}))},t.prototype._getXlsxWorker=function(t){if(!this._xlsxWorker){var i=window.URL.createObjectURL(new Blob(["importScripts('".concat(t,"');")],{type:"text/javascript"}));this._xlsxWorker=new e((function(e){var t=new Worker(i);t.addEventListener("message",(function(i){"init"===i.data.type&&e(t)}))}))}return this._xlsxWorker},t.prototype._getFile=function(t,i){return void 0===t&&(t="xlsx"),new e((function(e){if(i)return(0,n.fetchFile)(i,"GET","arraybuffer").then((function(t){e(t)}));var o=document.createElement("input");o.type="file",o.accept=".".concat(t),o.click(),o.addEventListener("change",(function(i){var n=new FileReader;n.onload=function(){var i=n.result;e("json"===t?i:new Uint8Array(i))},"json"===t?n.readAsText(i.target.files[0]):n.readAsArrayBuffer(i.target.files[0])}))}))},t}();t.FileProxy=o}).call(this,i(16))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initMathStore=t.Store=void 0;var n=i(25);Object.defineProperty(t,"Store",{enumerable:!0,get:function(){return n.Store}}),t.initMathStore=function(e){var t=new n.DataStore({strict:!1});return e.forEach((function(e){return t.addPage(e.value)})),t}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.detectDrag=void 0,t.detectDrag=function(t){return new e((function(e){var i=function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i),e(!1)},n=setTimeout((function(){i()}),1e3),o=function(r){(Math.abs(r.pageX-t.pageX)>4||Math.abs(r.pageY-t.pageY)>4)&&(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i),clearTimeout(n),e({x:t.pageX,y:t.pageY}))};document.addEventListener("mousemove",o),document.addEventListener("mouseup",i)}))}}).call(this,i(16))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={popups:{},lastActive:null,freeCount:0,add:function(e,t){this.lastActive&&this.popups[this.lastActive].classList.remove("dhx_popup--window_active"),this.lastActive=e,t.classList.add("dhx_popup--window_active"),this.popups[e]=t},setActive:function(e){if(e!==this.lastActive){var t=this.popups[e];t&&(this.lastActive&&this.popups[this.lastActive].classList.remove("dhx_popup--window_active"),this.lastActive=e,t.classList.add("dhx_popup--window_active"))}},openFreeWindow:function(e){0===this.freeCount&&e.classList.add("dhx_window--no-scroll"),this.freeCount++},closeFreeWindow:function(e){this.freeCount--,0===this.freeCount&&e.classList.remove("dhx_window--no-scroll")}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProWindow=void 0;var r=i(87),a=i(32),s=i(17),l=i(23),c=i(43),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype._startResize=function(e){var t,i,n=this,o=100|this.config.minWidth,r=100|this.config.minHeight,a=this._popup.offsetLeft,s=this._popup.offsetTop,l=this._popup.offsetWidth,u=this._popup.offsetHeight,d=this.getRootView().refs;switch(!0){case e.bottom&&e.left:i="dhx_window-body-pointer--bottom_left",t=d.bottomLeft;break;case e.bottom&&e.right:i="dhx_window-body-pointer--bottom_right",t=d.bottomLeft;break;case e.top&&e.left:i="dhx_window-body-pointer--top_left",t=d.bottomLeft;break;case e.top&&e.right:i="dhx_window-body-pointer--top-right",t=d.right;break;case e.top:i="dhx_window-body-pointer--top",t=d.bottomLeft;break;case e.bottom:i="dhx_window-body-pointer--bottom",t=d.bottomLeft;break;case e.left:i="dhx_window-body-pointer--left",t=d.bottomLeft;break;case e.right:i="dhx_window-body-pointer--right",t=d.right}t.el.classList.add("dhx_window-resizer--active"),this.config.node.classList.add("dhx_window--stop_selection"),this.config.node.classList.add(i);var h=function(t){var i=n._getContainerParams(),d=i.containerInnerWidth,h=i.containerInnerHeight,f=i.containerXOffset,p=i.containerYOffset,v={width:n._notInNode()?t.pageX-a:t.pageX-n.config.node.offsetLeft-a,height:n._notInNode()?t.pageY-s:t.pageY-n.config.node.offsetTop-s,left:n._notInNode()?t.pageX:t.pageX-n.config.node.offsetLeft,top:n._notInNode()?t.pageY:t.pageY-n.config.node.offsetTop};e.right&&(v.width<o?v.width=o:v.width>f+d-a&&(v.width=f+d-a),n._popup.style.width=v.width+"px"),e.bottom&&(v.height<r?v.height=r:v.height>p+h-s&&(v.height=p+h-s),n._popup.style.height=v.height+"px"),e.left&&(a+l-v.left<o&&(v.left=a+l-o),v.width=a+l-v.left,n.config.left=v.left,n._popup.style.left=v.left+"px",n._popup.style.width=v.width+"px"),e.top&&(v.top<p?v.top=p:s+u-v.top<r&&(v.top=s+u-r),v.height=s+u-v.top,n.config.top=v.top,n._popup.style.top=v.top+"px",n._popup.style.height=v.height+"px"),n.config.width=n._popup.offsetWidth,n.config.height=n._popup.offsetHeight,n.events.fire(c.WindowEvents.resize,[v,{left:a,top:s,height:u,width:l},e]),n.scrollView&&n.scrollView.update()},f=function(){document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",h),n.config.node.classList.remove("dhx_window--stop_selection"),n.config.node.classList.remove(i),t.el.classList.remove("dhx_window-resizer--active")};document.addEventListener("mouseup",f),document.addEventListener("mousemove",h)},t.prototype._initUI=function(){var e=this,t=[],i=(this.config.header||this.config.title||this.config.closable||this.config.movable)&&!1!==this.config.header;i&&t.push({id:"header",height:"content",css:"dhx_window-header "+(this.config.movable?"dhx_window-header--movable":""),on:{mousedown:this.config.movable&&this._handlers.move,dblclick:this._handlers.headerDblClick}}),t.push({id:"content",css:i?"dhx_window-content":"dhx_window-content-without-header"}),this.config.footer&&t.push({id:"footer",height:"content",css:"dhx_window-footer"}),this.config.resizable&&t.push({id:"resizers",height:"content",css:"resizers"});var n=this._layout=new s.ProLayout(this._popup,{css:"dhx_window"+(this.config.modal?" dhx_window--modal":""),rows:t,on:{mousedown:this._handlers.setActive},id:this._uid}),o=this._layout.getCell("content");if(o&&o.scrollView&&(this.scrollView=o.scrollView),i){var r=this.header=new a.Toolbar;this.config.title&&(this.header.data.add({type:"title",value:this.config.title,id:"title",css:"title_max"}),this._popup.setAttribute("aria-label",this.config.title)),this.config.closable&&(this.header.data.add({type:"spacer"}),this.header.data.add({id:"close",type:"button",view:"link",size:"medium",color:"secondary",circle:!0,icon:"dxi dxi-close"}),r.events.on(l.NavigationBarEvents.click,(function(t,i){"close"===t&&e._hide(i)}))),n.getCell("header").attach(r)}if(this.config.footer){var c=this.footer=new a.Toolbar;n.getCell("footer").attach(c)}this.config.resizable&&n.getCell("resizers").attach((function(){return e._drawResizers()}))},t}(r.Window);t.ProWindow=u},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeysHandlers=t.getHtmlData=t.isPrintableKey=void 0;var o=i(6),r=i(2),a=i(42),s=i(20),l=i(25),c=i(0),u=i(12),d={General:"common",Fixed:"number","Short Date":"date"};function h(e){if(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&32===e.keyCode)return!1;var t=e.which||e.keyCode;return t>=65&&t<=90||t>=48&&t<=57||t>=96&&t<=105||!!{32:" ",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[t]||!1}function f(e){var t,i=e.selection.getSelectedCell(),n=e._activePage.getMeta().merged;if(i.includes(",")){var o=i.split(",");i=o[o.length-1]}var a=(t=(0,r.isRangeId)(i)?(0,r.getRangeMatrix)(i,e._grid):[[i]]).reduce((function(t,i){var o=i.reduce((function(t,i){var o=(0,l.str2pos)(i),a=o[0],s=o[1],u=n.find((function(e){var t=e.from;return t.row===a&&t.column===s})),d=1,h=1;if(u&&(d+=u.to.row-u.from.row,h+=u.to.column-u.from.column),(0,r.isCellSpaned)(i,n)&&!u)return t;var f=e.getValue(i),p=(0,c.isDefined)(f)?f:" ",v=e.getStyle(i)||{},g=Object.keys(v).reduce((function(e,t){return"".concat(e).concat(t,":").concat(v[t],";")}),"");return"".concat(t,' <td style="').concat(g,'" rowSpan="').concat(d,'" colSpan="').concat(h,'">\n\t\t\t').concat(p,"</td>")}),"");return"".concat(t,'<tr style="box-sizing: inherit;">').concat(o,"</tr>")}),"");return'\n\t\x3c!--StartFragment--\x3e\n\t\t<table id="customers">\n\t\t<col span="'.concat(t[0].length,'">\n\t\t\t<tbody style="box-sizing: inherit;">\n\t\t\t\t').concat(a,"\n\t\t\t</tbody>\n\t\t</table>\n\t\x3c!--EndFragment--\x3e")}function p(e,t){return"row"===t?{min:0,max:e.data.getLength()-1}:{min:1,max:e.config.columns.length-1}}function v(e,t,i,o,a,s){var l=e.selection.getFocusedCell();if(!(0,r.getCellInfo)(l,o,t).edited){var c=(0,r.getCellIndex)(l,t),u=p(t,s),d=a?c[s]+a:i;d>=u.min&&d<=u.max&&(c[s]=d);var h=(0,r.getCellNameByIndex)(c.row,c.col,t),f=o.getMeta().merged;if(null==f?void 0:f.length){var v=(0,r.isCellSpaned)(h,f);if(v){var g=(0,r.isCellSpaned)(l,f),_="col"===s?"column":"row",m={from:n({},v.from),to:n({},v.to)};if(m.from.column+=1,m.to.column+=1,v===g){var y=a>0?m.to[_]+1:m.from[_]-1;y>=u.min&&y<=u.max&&(c[s]=y),h=(0,r.getCellNameByIndex)(c.row,c.col,t)}else{var b="row"===_?m.from.row:c.row,w="column"===_?m.from.column:c.col;h=(0,r.getCellNameByIndex)(b,w,t)}}}e.selection.setSelectedCell(h,!0)}}function g(e,t,i,o,a){var s=e.selection.getFocusedCell();if(!(0,r.getCellInfo)(s,a,t).edited){var l,c,u=(0,r.getCellIndex)(s,t),d=e.selection.getSelectedCell().split(",")[0];if(d.includes(":")){var h=(0,r.getRangeIndexes)(d,t);h.end[o]>u[o]?(l=n({},h.end),c=h.start):(l=n({},h.start),c=h.end)}else l=n({},u),c=u;var f=p(t,o);if(l[o]+i>=f.min&&l[o]+i<=f.max){l[o]+=i;var v=(0,r.getCellNameByIndex)(l.row,l.col,t);if(v===(c=(0,r.getCellNameByIndex)(c.row,c.col,t)))return void e.selection.setSelectedCell(v,!1);e.selection.setSelectedCell("".concat(v,":").concat(c),!1),e.selection.setFocusedCell(s,!1)}}}t.isPrintableKey=h,t.getHtmlData=f,t.getKeysHandlers=function(e,t,i,p){var _,m;e.events.on(o.SpreadsheetEvents.afterEditStart,(function(e){_=e})),e.events.on(o.SpreadsheetEvents.afterEditEnd,(function(){_=null})),e.events.on(o.SpreadsheetEvents.afterSheetChange,(function(){return m=e._activePage})),document.addEventListener("keydown",(function(i){if(h(i)&&(s.focusManager.getFocusId()===e._uid||s.focusManager.getFocusId()===t._uid)){var n=e.selection.getFocusedCell();n&&n!==_&&(i.preventDefault(),e.startEdit(n,i.key))}}));var y=function(n,o){var a,s=i.getStruct(),h=e.selection.getSelectedCell(),f=(0,r.getCellIndex)(h,t),p=(0,r.getCellNameByIndex)(f.row+n.rowsCount-1,f.col+n.colsCount-1,t),v=(0,r.isRangeId)(h)?h:"".concat(h,":").concat(p),g=(0,l.str2pos)(h),_=g[0],m=g[1],y=null===(a=n.spans)||void 0===a?void 0:a.map((function(e){if(!e)return null;var t=e.from,i=e.to;return{from:{row:t.row+_,column:t.column+m},to:{row:i.row+_,column:i.column+m}}}));if(n.styles?s.styles=n.styles:s.styles=e.getStyle(v,!1),(0,c.isDefined)(o)&&(!o.includes(s.html)||!s.html)&&(s.cells="",n.formats.length)){for(var b=e.config.formats,w=[],x=function(t){var i=null==b?void 0:b.find((function(e){return e.mask===t||d[t]===e.id||!t&&"common"===e.id||t.toLowerCase().includes(e.id.toLowerCase())}));i||(i=(0,u.addNewFormat)(t,e.toolbar.data,b)),w.push(null==i?void 0:i.id)},C=0,E=n.formats;C<E.length;C++){x(E[C])}s.formats=w}var S=s.value;s.value=n.values.map((function(e,t){return"text"!==s.formats[t]&&(0,c.isNumeric)(e)?+e:e})),s.cell=v,s.spans=y||[],i.paste(),s.value=S},b={};function w(i){i.preventDefault();var n=e.selection.getSelectedCell(),o=(0,a.getToggledValue)(m,n,"text-decoration","line-through",t);e.setStyle(e.selection.getSelectedCell(),{"text-decoration":o})}function x(t,i){i.preventDefault(),e.setStyle(e.selection.getSelectedCell(),{"text-align":t})}function C(t,i){i.preventDefault();var n=e._sheets,o=e.getActiveSheet().id,r=n.getIndex(o),a=n.getLength()-1,s=r+t,l="add-sheet"===n.getId(0)?1:0;s<l&&(s=a),s>a&&(s=l),e.setActiveSheet(n.getId(s))}function E(i,n){n.preventDefault();var o=e.selection.getFocusedCell(),a=(0,r.getCellIds)(o,t),s=a.row,l=a.col,c=(0,r.getCellNameById)(t,i?t.data.getLength():s+1,i?l+1:t.config.columns.length-1),u=(0,r.getCellNameById)(t,i?1:s+1,i?l+1:1);e.selection.setSelectedCell("".concat(u,":").concat(c),!1),e.selection.setFocusedCell(o,!1)}return window.clipboardData?b={"ctrl+c":function(){if(!_&&(i.store("copy"),window.clipboardData)){var t=f(e);window.clipboardData.setData("text/html",t),window.clipboardData.setData("text/plain",i.getStruct().value),window.preventDefault(),i.getStruct().html=t}},"ctrl+x":function(){_||(i.store("cut"),window.clipboardData&&(window.clipboardData.setData("text/html",f(e)),window.clipboardData.setData("text/plain",i.getStruct().value),window.preventDefault(),i.getStruct().html=window.clipboardData.getData("text/html")))},"ctrl+v":function(){if(!_&&window.clipboardData){var e=(0,r.parseFromText)(window.clipboardData.getData("text")),t=window.clipboardData.getData("text/html");t&&t.includes("<table")&&(e=(0,r.parseHtmlTable)(t)),y(e,t||"")}}}:(document.addEventListener("cut",(function(n){_||s.focusManager.getFocusId()!==e._uid&&s.focusManager.getFocusId()!==t._uid||(i.store("cut"),n.clipboardData.setData("text/html",f(e)),n.clipboardData.setData("text/plain",i.getStruct().value),n.preventDefault(),i.getStruct().html=n.clipboardData.getData("text/html"))})),document.addEventListener("copy",(function(n){if(!_&&(s.focusManager.getFocusId()===e._uid||s.focusManager.getFocusId()===t._uid)){i.store("copy");var o=f(e);n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",i.getStruct().value),n.preventDefault(),i.getStruct().html=o}})),document.addEventListener("paste",(function(i){if(!_&&(s.focusManager.getFocusId()===e._uid||s.focusManager.getFocusId()===t._uid)){i.preventDefault();var n=i.clipboardData.getData("text/html"),o=(0,r.parseFromText)(i.clipboardData.getData("text"));n&&n.includes("<table")&&(o=(0,r.parseHtmlTable)(n)),y(o,n||"")}}))),n(n({},b),{escape:function(){var n=e.selection.getSelectedCell(),o=(0,r.getCellInfo)(n,m,t);i.getStruct().inserted=!0,o.edited&&(e.endEdit(!0),t.paint())},delete:function(){if(!_){var i=e.selection.getSelectedCell();i&&e.setValue(i,""),t.paint()}},enter:function(){var i=e.selection.getSelectedCell(),n=e.selection.getFocusedCell(),o=e._editMode;if(!p.navigate("enter"))if(_||o&&o.cell){var a=(0,r.getCellIndex)(_||o.cell,t);a.row=a.row+1===t.data.getLength()?a.row:a.row+1,e.selection.setSelectedCell((0,r.getCellNameByIndex)(a.row,a.col,t),!1),_="",(0,r.isRangeId)(i)&&!o&&(e.selection.setSelectedCell(i,!1),e.selection.setFocusedCell((0,r.getNextRangeCell)(i,n,t,"col"),!1))}else{if((0,r.isRangeId)(i))return e.endEdit(),e.selection.setSelectedCell(i,!1),void e.selection.setFocusedCell((0,r.getNextRangeCell)(i,n,t,"col"),!1);e.startEdit(i)}},f2:function(){e.startEdit(e.selection.getSelectedCell())},pageUp:function(e){e.preventDefault();var i=t.getRootView().refs.grid_body;i.el.scrollTop-=i.el.clientHeight},pageDown:function(e){e.preventDefault();var i=t.getRootView().refs.grid_body;i.el.scrollTop+=i.el.clientHeight-t.config.rowHeight},"ctrl+a":function(i){if(!_){i.preventDefault();var n=(0,r.getCellNameByIndex)(0,1,t),o=(0,r.getCellNameByIndex)(t.data.getLength()-1,t.config.columns.length-1,t);e.selection.setSelectedCell("".concat(n,":").concat(o),!1)}},"shift+arrowLeft":function(){g(e,t,-1,"col",m)},"shift+arrowRight":function(){g(e,t,1,"col",m)},"shift+arrowDown":function(){g(e,t,1,"row",m)},"shift+arrowUp":function(){g(e,t,-1,"row",m)},"ctrl+enter":function(){e.endEdit()},"shift+enter":function(){var i=e.selection.getSelectedCell();if((0,r.isRangeId)(i)){var n=e.selection.getFocusedCell();return e.endEdit(),e.selection.setSelectedCell(i,!1),void e.selection.setFocusedCell((0,r.getPrevRangeCell)(i,n,t,"col"),!1)}v(e,t,null,m,-1,"row")},tab:function(i){i.preventDefault();var n=e.selection.getSelectedCell();if((0,r.isRangeId)(n)){var o=e.selection.getFocusedCell();return e.endEdit(),e.selection.setSelectedCell(n,!1),void e.selection.setFocusedCell((0,r.getNextRangeCell)(n,o,t),!1)}v(e,t,null,m,1,"col")},"shift+tab":function(i){i.preventDefault();var n=e.selection.getSelectedCell();if((0,r.isRangeId)(n)){var o=e.selection.getFocusedCell();return e.endEdit(),e.selection.setSelectedCell(n,!1),void e.selection.setFocusedCell((0,r.getPrevRangeCell)(n,o,t),!1)}v(e,t,null,m,-1,"col")},arrowLeft:function(i){_||(i.preventDefault(),v(e,t,null,m,-1,"col"))},arrowRight:function(i){_||(i.preventDefault(),v(e,t,null,m,1,"col"))},arrowDown:function(i){i.preventDefault(),p.navigate("arrowDown")||_||v(e,t,null,m,1,"row")},arrowUp:function(i){i.preventDefault(),p.navigate("arrowUp")||_||v(e,t,null,m,-1,"row")},"ctrl+arrowLeft":function(){v(e,t,1,m,null,"col")},"ctrl+arrowRight":function(){v(e,t,t.config.columns.length-1,m,null,"col")},"ctrl+arrowDown":function(){v(e,t,t.data.getLength()-1,m,null,"row")},"ctrl+arrowUp":function(){v(e,t,0,m,null,"row")},home:function(i){_||(i.preventDefault(),v(e,t,1,m,null,"col"))},end:function(i){_||(i.preventDefault(),v(e,t,t.config.columns.length-1,m,null,"col"))},"ctrl+home":function(){v(e,t,0,m,null,"row"),v(e,t,1,m,null,"col")},"ctrl+end":function(){v(e,t,t.data.getLength()-1,m,null,"row"),v(e,t,t.config.columns.length-1,m,null,"col")},"ctrl+z":function(i){var n=e.selection.getFocusedCell(),o=(0,r.getCellInfo)(n,m,t);n&&o.edited||i.preventDefault(),e.undo()},"ctrl+y":function(t){t.preventDefault(),e.redo()},"ctrl+shift+z":function(){e.redo()},"ctrl+b":function(){var i=e.selection.getSelectedCell(),n=(0,a.getToggledValue)(m,i,"font-weight","bold",t);e.setStyle(e.selection.getSelectedCell(),{"font-weight":n})},"ctrl+i":function(){var i=e.selection.getSelectedCell(),n=(0,a.getToggledValue)(m,i,"font-style","italic",t);e.setStyle(e.selection.getSelectedCell(),{"font-style":n})},"ctrl+u":function(i){i.preventDefault();var n=e.selection.getSelectedCell(),o=(0,a.getToggledValue)(m,n,"text-decoration","underline",t);e.setStyle(e.selection.getSelectedCell(),{"text-decoration":o})},"ctrl+f":function(t){t.preventDefault(),e.search("",!0)},"alt+shift+5":function(e){(0,r.isMac)()||w(e)},"ctrl+shift+x":function(e){(0,r.isMac)()&&w(e)},"ctrl+shift+e":function(e){x("center",e)},"ctrl+shift+l":function(e){x("left",e)},"ctrl+shift+r":function(e){x("right",e)},"shift + F11":function(t){t.preventDefault(),e.addSheet()},"alt + arrowUp":function(e){C(1,e)},"alt + arrowDown":function(e){C(-1,e)},"ctrl + space":function(e){E(!0,e)},"shift + space":function(e){E(!1,e)},"ctrl+k":function(t){t.preventDefault();var i=e.selection.getFocusedCell();e._showLinkPopup(i)},backspace:function(){_||e.setValue(e.selection.getSelectedCell(),"")}})}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectEditor=void 0;var o=i(1),r=i(10),a=i(6),s=i(31),l=i(20),c=i(12),u=function(){function e(e,t){this._list=new s.List(null,{keyNavigation:!0,css:"dhx_editor-list"}),this._data=this._list.data,this._popup=new r.Popup({css:"dhx_editor-popup"}),this._popup.attach(this._list),this._events=t,this._endEdit=e,this._initHandlers()}return e.prototype.endEdit=function(){var e=this;this.edit&&((0,o.awaitRedraw)().then((function(){var t;e._events.fire(a.SpreadsheetEvents.cellInput,[e._config.oninput[1],(null===(t=e._list.selection.getItem())||void 0===t?void 0:t.value)||e._input.value]),e._endEdit(),e._popup.hide()})),this.edit=!1)},e.prototype.setValue=function(e){var t=e.filter((function(e){return e||(0,c.isNumeric)(e)})).map((function(e){return(null==e?void 0:e.toString().trim())||""})),i=new Set(t);this._data.parse(Array.from(i).map((function(e){return{value:e}})))},e.prototype.toHTML=function(e){var t=this;return this._config=e,this.edit=!0,document.addEventListener("mousedown",this._handlers.onOuterClick),[(0,o.el)("input.dhx_cell_input",n(n({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide(),"ArrowDown"!==e.code&&"ArrowUp"!==e.code||l.focusManager.setFocusId(t._list._uid)},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert,didRemove:function(){return document.removeEventListener("mousedown",t._handlers.onOuterClick)}})})),(0,o.el)(".dxi.dxi-menu-up.dhx_spreadsheet_cell_icon",{onclick:function(){return t.endEdit()}})]},e.prototype._filter=function(e){this._list.data.filter((function(t){return e?t.value.includes(e):t}))},e.prototype._showPopup=function(){var e,t=this;this._popup.show(this._input,{centering:!0,mode:"bottom"}),this._list.selection.add((null===(e=this._list.data.find((function(e){return e.value===t._input.value})))||void 0===e?void 0:e.id)||"")},e.prototype._initHandlers=function(){var e=this;this._handlers={onFocus:function(){(0,o.awaitRedraw)().then((function(){e._showPopup()}))},onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.contains(t.target),n=e._popup&&e._popup.getRootNode()&&e._popup.getRootNode().contains(t.target);i||n||e._popup.hide()}},oninput:function(t){var i=t.target.value;i||e._showPopup(),i.startsWith("=")&&e._popup.isVisible()&&e._popup.hide(),e._filter(i);var n=e._config.oninput;(0,n[0])(n[1],t)},didInsert:function(t){var i=t.el;e._input=i,e._input.addEventListener("focus",e._handlers.onFocus),e._config._hooks.didInsert(t)}},this._list.events.on(s.ListEvents.click,(function(){e.endEdit()})),this._events.on(a.SpreadsheetEvents.afterEditEnd,(function(){e._popup.hide()})),this._popup.events.on(r.PopupEvents.afterShow,(function(){var t=e._list.getFocus();e._list.data.getItem(t)||e._list.setFocus(e._list.data.getId(0))}))},e}();t.SelectEditor=u},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TimeEditor=void 0;var o=i(1),r=i(53),a=i(10),s=i(6),l=i(12),c=i(28),u=function(){function e(e,t,i){var n=t.toLocaleLowerCase().includes("%a")?12:24;this._timepicker=new r.Timepicker(null,{timeFormat:n}),this._popup=new a.Popup({css:"dhx_editor_popup"}),this._popup.attach(this._timepicker),this._events=i,this._initHandlers()}return e.prototype.endEdit=function(){},e.prototype.setValue=function(e){this._isFromSet=!0,this._initialDate&&(0,l.isNumeric)(e)&&(this._initialDate=(0,c.excelDateToJSDate)(e));var t=(0,l.isNumeric)(e)?(0,c.excelDateToJSDate)(e):(0,c.timeStringToJS)(e);t!==e&&this._timepicker.setValue(t)},e.prototype.hidePopup=function(){this._popup.isVisible()&&this._popup.hide()},e.prototype.toHTML=function(e){var t=this;return this._config=e,this.setValue(e.value),this._initialDate=e.initValue,document.addEventListener("mousedown",this._handlers.onOuterClick),(0,o.el)("input.dhx_cell_input",n(n({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide()},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert,didRemove:this._handlers.didRemove})}))},e.prototype._showPopup=function(){this._input.value.startsWith("=")||this._popup.show(this._input,{centering:!0,mode:"bottom"})},e.prototype._initHandlers=function(){var e=this;this._handlers={onFocus:function(){(0,o.awaitRedraw)().then((function(){e._showPopup()}))},onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.contains(t.target),n=e._popup&&e._popup.getRootNode()&&e._popup.getRootNode().contains(t.target);i||n||e._popup.hide()}},oninput:function(t){var i=t.target.value;i||e._showPopup(),i.startsWith("=")&&e._popup.isVisible()&&e._popup.hide();var n=e._config.oninput,o=n[0],r=n[1];e.setValue(i),o(r,t)},didInsert:function(t){var i=t.el;e._input=i,e._input.addEventListener("focus",e._handlers.onFocus),e._config._hooks.didInsert(t),e._initTimePickerEvents()},didRemove:function(){document.removeEventListener("mousedown",e._handlers.onOuterClick)}}},e.prototype._initTimePickerEvents=function(){var e=this;this._timepicker.events.on(r.TimepickerEvents.change,(function(t){e._isFromSet?(0,o.awaitRedraw)().then((function(){e._isFromSet=!1})):e._events.fire(s.SpreadsheetEvents.cellInput,[e._config.oninput[1],(0,l.getFormattedValue)((0,c.getExcelDateFromJs)((0,c.timeStringToJS)(t)),e._config.format)])}))},e}();t.TimeEditor=u},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationForm=void 0;var o=i(59),r=i(6),a=i(44),s=i(11),l=i(10),c=i(2),u=i(96),d=function(){function e(e,t,i){this._set=t,this._grid=i,this._modal=new a.Window({title:s.default.validation,movable:!0,closable:!0,css:"dhx-spreadsheet-form-validation",height:250,width:600}),this._form=new o.Form(null,{rows:[{name:"cell",type:"input",label:"Cell range:",labelPosition:"left",labelWidth:70,width:270,placeholder:"Enter cell range"},{cols:[{name:"criteria",type:"combo",label:"Criteria:",labelPosition:"left",labelWidth:70,width:270,readonly:!0,multiselection:!1,data:[{value:"List of items",id:"items"},{value:"List from a range",id:"range"}]},{labelWidth:3,width:260,labelPosition:"left",name:"target",type:"input",validation:this.formValidation.bind(this),errorMessage:"Invalid cell range",placeholder:"Enter cell range"}]},{align:"end",cols:[{type:"button",text:s.default.cancel,id:"cancel",view:"link"},{type:"button",text:s.default.removeValidation,id:"remove",view:"link"},{type:"button",text:s.default.save,id:"save"}]}]}),this._modal.attach(this._form),this._events=e,this._initHandlers()}return e.prototype.hide=function(){this._modal.isVisible()&&this._modal.hide(),this._events.fire(r.SpreadsheetEvents.afterPopupHide)},e.prototype.formValidation=function(e){if(!e)return!0;if("range"===this._form.getItem("criteria").getValue()){var t=(0,c.getCellIds)(e,this._grid),i=t.row,n=t.start;return i||n}return!0},e.prototype.show=function(e,t){this._modal.isVisible()||this._modal.show();var i=n({},t);if(t.editor){var o=t.editor.options;i.target="string"==typeof o?o:o.join(","),i.criteria="string"==typeof o?"range":"items"}this._form.setValue(n({cell:e,criteria:"items",target:""},i))},e.prototype._save=function(e){var t=this._form.getValue(),i=t.target,n=t.cell,o=t.criteria;if(i=u.sanitize(i),this._form.validate()){if(!e||i){var r="range"===o;r&&!(0,c.getCellIds)(i,this._grid).start&&(i+=":".concat(i)),this.hide();var a=r?i:i.split(",").map((function(e){return e.trim()}));this._set(n,e?a:null)}}else this._form.blur("target")},e.prototype._initHandlers=function(){var e=this;this._form.events.on(o.FormEvents.focus,(function(t){e._focus=t})),this._modal.events.on(l.PopupEvents.afterShow,(function(){e._form.setFocus("target")})),this._form.events.on(o.FormEvents.click,(function(t){switch(t){case"save":e._save(!0);break;case"remove":e._save(!1);break;default:e.hide()}})),this._form.getItem("criteria").events.on(o.FormEvents.change,(function(t){var i="Enter ".concat("range"===t?"cell range":" items separated by a comma");e._form.getItem("target").setProperties({placeholder:i}),e._form.setFocus("target")})),this._events.on(r.SpreadsheetEvents.afterSelectionSet,(function(t){"cell"===e._focus&&(e._form.setValue({cell:t}),e._form.setFocus("cell")),"target"===e._focus&&"range"===e._form.getItem("criteria").getValue()&&(e._form.setValue({target:t}),e._form.setFocus("target"))}))},e}();t.ValidationForm=d},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DatePicker=void 0;var a=i(38),s=i(19),l=i(3),c=i(1),u=i(0),d=i(15),h=i(10),f=i(5),p=i(7),v=i(21),g=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new l.EventSystem,n._popupIsFocus=!1,n._propsItem=["required","validation","valueFormat","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsCalendar=["mode","mark","disabledDates","weekStart","weekNumbers","timePicker","dateFormat","timeFormat","thisMonthOnly"],n._props=r(r(r([],p.baseProps,!0),n._propsItem,!0),n._propsCalendar,!0),n._keyManager=new v.KeyManager((function(){var e,t,i,o=document.activeElement;return(null===(i=null===(t=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===o||n._popup.isVisible()})),n._initView(i),n._initHandlers(),n._initHotkeys();return n.mount(t,(0,c.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this._popup&&this._popup.destructor(),this.calendar&&this.calendar.destructor(),this.events&&this.events.clear(),this.events=this._uid=this._propsCalendar=this._propsItem=this._props=null,e.prototype._destructor.call(this)},t.prototype.setProperties=function(e){if(e&&!(0,u.isEmptyObj)(e)&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsCalendar.includes(t)&&(this.calendar.config[t]=e[t]));this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()]),this.calendar.paint(),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(f.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e,t){var i;void 0===e&&(e=!1),void 0===t&&(t=this.getValue());var n="date"===(null===(i=this.config.valueFormat)||void 0===i?void 0:i.toLowerCase())?t instanceof Date:(0,s.stringToDate)(t,this.calendar.config.dateFormat,!0);if(!e&&!this.events.fire(f.ItemEvent.beforeValidate,[t]))return!1;var o=this.config.validation?this.config.validation(t):!!n;return e||(this.setValidationStatus(o?"success":"error"),this.events.fire(f.ItemEvent.afterValidate,[t,o]),this.paint()),o},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&this.calendar.setValue(e)},t.prototype.getValue=function(e){var t;return this.calendar.getValue("date"===(null===(t=this.config.valueFormat)||void 0===t?void 0:t.toLowerCase())||e)||""},t.prototype.focus=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,c.awaitRedraw)().then((function(){e._popup.hide(),e.getRootView().refs.input.el.blur()}))},t.prototype.clear=function(){""!==this.config.value&&this.calendar.clear()},t.prototype.getWidget=function(){return this.calendar},t.prototype._initView=function(e){var t=this;if((0,u.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var i in this.calendar&&this.calendar.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,value:"",mode:"calendar",weekStart:"sunday",weekNumbers:!1,timePicker:!1,dateFormat:"%d/%m/%y",timeFormat:24,thisMonthOnly:!1,valueFormat:"string",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this._popup=new h.Popup,this.calendar=new a.Calendar(null,(0,p.widgetConfig)(e)),this._popup.attach(this.calendar),this.config.hidden&&(0,c.awaitRedraw)().then((function(){t.hide(!0)}))},t.prototype._initHandlers=function(){var e=this;this.calendar.events.on(a.CalendarEvents.beforeChange,(function(t){var i;return""!==t&&"date"!==(null===(i=e.config.valueFormat)||void 0===i?void 0:i.toLowerCase())&&(t=(0,s.getFormattedDate)(e.calendar.config.dateFormat,t)),e.events.fire(f.ItemEvent.beforeChange,[t])})),this.calendar.events.on(a.CalendarEvents.change,(function(t,i,n,o){var r;e.config.value=e.calendar.getValue("date"===(null===(r=e.config.valueFormat)||void 0===r?void 0:r.toLowerCase())),e.events.fire(f.ItemEvent.change,[e.config.value]),(0,p.isVerify)(e.config)&&("clear"===o?e.setValidationStatus(e.validate(!0)?"success":"error"):e.validate()),e._popup.hide(),e.paint()})),this.events.on(f.ItemEvent.blur,(function(){e._popupIsFocus=!1,e.paint()})),this._popup.events.on(h.PopupEvents.afterHide,(function(){document.activeElement!==e.getRootView().refs.input.el&&e.events.fire(f.ItemEvent.blur,[e.getValue()]),e.paint()})),document.addEventListener("keydown",(function(t){var i,n,o,r=document.activeElement;((null===(o=null===(n=null===(i=e.getRootView())||void 0===i?void 0:i.refs)||void 0===n?void 0:n.input)||void 0===o?void 0:o.el)===r||e._popup.isVisible())&&e.events.fire(f.ItemEvent.keydown,[t])})),document.addEventListener("mousedown",(function(){e._popup.getContainer()!==document.activeElement&&(e._popupIsFocus=!1)}))},t.prototype._getHandlers=function(){var e=this;return{onblur:function(){e._popup.isVisible()||e.events.fire(f.ItemEvent.blur,[e.getValue()]),e.paint()},onfocus:function(){if(!e._popup.isVisible()){var t=e.getRootView().refs.input.el;e._popup.show(t,{theme:t}),e.events.fire(f.ItemEvent.focus,[e.getValue()]),e.paint()}},oninput:function(t){var i=t.target.value;e.events.fire(f.ItemEvent.input,[i])},onchange:function(t){var i=t.target.value;e.config.editable&&(0,s.stringToDate)(i,e.calendar.config.dateFormat,!0)?e.setValue(i):""===i&&e.clear()}}},t.prototype._initHotkeys=function(){var e=this,t={"shift+tab":function(){e._applyTab()},tab:function(){e._applyTab()},escape:function(){e._popup.isVisible()&&e.getRootView().refs.input.el.focus(),e._popup.hide()},enter:function(t){if(t.preventDefault(),!e._popup.isVisible()){var i=e.getRootView().refs.input.el;e._popup.show(i,{theme:i})}},arrowRight:function(t){var i=e._popup.getContainer();e._popup.isVisible()&&!e._popupIsFocus&&(t.preventDefault(),i.focus(),e._popupIsFocus=!0)}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t.prototype._draw=function(){var e,t,i,n=this.config,o=n.icon,r=n.required,a=n.disabled,s=n.placeholder,l=n.name,u=n.id,d=n.editable,h=n.label,f=n.helpMessage,v=this.calendar.getValue(),g=this._popup.isVisible()||(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement;return(0,c.el)("div.dhx_form-group",{class:(0,p.getFormItemCss)(this.config,(0,p.isVerify)(this.config),g)},[this._drawLabel(),(0,c.el)(".dhx_input__wrapper",[(0,c.el)("div.dhx_input__container",{},[(0,c.el)(".dhx_input__icon",{class:o||"dxi dxi-calendar-today"}),(0,c.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":l||u,_key:this._uid,_ref:"input",value:v,type:"text",required:r,disabled:a,class:g&&"dhx_input--focus",placeholder:s||"",name:l||"",id:u||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,autocomplete:"off",readOnly:!d,"aria-label":h||"".concat(d?"type or":""," select date"),"aria-describedby":f?"dhx_label__help_".concat(u||this._uid):null})]),(0,p.getValidationMessage)(this.config)&&(0,c.el)("span.dhx_input__caption",{},(0,p.getValidationMessage)(this.config))])])},t.prototype._applyTab=function(){var e,t,i;document.activeElement===(null===(i=null===(t=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.content)||void 0===i?void 0:i.el)||this._popupIsFocus||this._popup.hide()},t}(d.Label);t.DatePicker=g},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var s=i(1),l=i(8),c=i(5),u=i(3),d=i(0),h=i(7),f=function(e){function t(t,i){var n=e.call(this,t,r({disabled:!1,hidden:!1,submit:!1,full:!1,circle:!1,loading:!1,view:"flat",size:"medium",color:"primary",height:"content",url:"",text:"",icon:""},i))||this;n._propsItem=["submit","url","text","icon","view","size","color","full","circle","loading"],n._props=a(a([],h.baseProps,!0),n._propsItem,!0),n.config.text=n.config.text||n.config.value||"",n.events=new u.EventSystem,n._handlers={onclick:function(e){return n.events.fire(c.ItemEvent.click,[e])},onblur:function(){return n.events.fire(c.ItemEvent.blur,[n.config.text])},onfocus:function(){return n.events.fire(c.ItemEvent.focus,[n.config.text])},onkeydown:function(e){return n.events.fire(c.ItemEvent.keydown,[e])}},n.config.hidden&&(0,s.awaitRedraw)().then((function(){n.hide(!0)}));return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this._propsItem=this._props=this.events=this._handlers=this._uid=null,this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,d.isEmptyObj)(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.config.text=this.config.text||this.config.value,this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.text,i=void 0===t?"":t;e.hidden&&this.events.fire(c.ItemEvent.beforeShow,[i])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[i]))},t.prototype.hide=function(e){void 0===e&&(e=!1);var t=this.config,i=t.text,n=void 0===i?"":i;t.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[n,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.button.el.focus()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.button.el.blur()}))},t.prototype._draw=function(){var e=this.config,t=e.color,i=e.size,n=e.view,o=e.loading,r=e.circle,a=e.icon,l=e.text,c=e.disabled,u=e.submit,d=e.id,h=e.name,f=e.full,p={danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[t]||" dhx_button--color_primary",v={small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[i]||" dhx_button--size_medium",g={flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[n]||" dhx_button--view_flat",_=f?" dhx_button--width_full":"",m=r?" dhx_button--circle":"",y=o?" dhx_button--loading":"",b=a&&!l?" dhx_button--icon":"";return(0,s.el)("button",{disabled:c,id:d,"data-dhx-id":h||d,onclick:this._handlers.onclick,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,type:u?"submit":"button",class:"dhx_button "+p+v+g+m+_+y+b,_ref:"button"},[a&&(0,s.el)("span.dhx_button__icon",{class:a}),l&&(0,s.el)("span.dhx_button__text",l),o&&(0,s.el)("span.dhx_button__loading",[(0,s.el)("span.dhx_button__loading-icon.dxi.dxi-loading")])])},t}(l.View);t.Button=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxGroup=void 0;var s=i(1),l=i(17),c=i(3),u=i(89),d=i(15),h=i(5),f=i(0),p=i(7),v=i(10),g=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new c.EventSystem,n._buttons=[],n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],n._props=a(a([],p.baseProps,!0),n._propsItem,!0),n._initView(i),n._initHandlers();return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._buttons=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e,t){if(void 0!==e&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){if("object"==typeof e&&!(0,f.isEmptyObj)(e)){for(var i in e)this._props.includes(i)&&(this.config[i]=e[i]);e.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}if("string"==typeof e&&t&&!(0,f.isEmptyObj)(t)){var n=this._buttons.find((function(t){return t.config.id===e}));n&&n.setProperties(t,!0)}this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(e){if(void 0===e){var t={};for(var i in this.config)this._props.includes(i)&&(t[i]=this.config[i]);return t}return this._buttons.find((function(t){return t.config.id===e})).getProperties()},t.prototype.getValue=function(e){if(void 0===e){var t={};return this._buttons.forEach((function(e){t[e.config.id]=e.getValue()})),t}var i=this._buttons.find((function(t){return t.config.id===e}));if(e&&i)return i.getValue()},t.prototype.setValue=function(e){if(void 0!==e&&!(0,f.isEmptyObj)(e)){for(var t=this.getValue(),i=r({},t),n=function(e,t){var n=o._buttons.find((function(t){return t.config.id===e}));if(n){var r=n.config.value;i[e]="string"==typeof r?t&&r||"":!!t}},o=this,a=0,s=Object.entries(e);a<s.length;a++){var l=s[a];n(l[0],l[1])}if(!(0,f.compare)(t,i)&&this.events.fire(h.ItemEvent.beforeChange,[i])){for(var c=function(e,t){var i=u._buttons.find((function(t){return t.config.id===e}));i&&i.setValue(!!t,!0)},u=this,d=0,v=Object.entries(e);d<v.length;d++){var g=v[d];c(g[0],g[1])}this.events.fire(h.ItemEvent.change,[this.getValue()]),(0,p.isVerify)(this.config)&&this.validate()}}},t.prototype.isChecked=function(e){if(void 0===e){var t={};return this._buttons.forEach((function(e){t[e.config.id]=e.isChecked()})),t}var i=this._buttons.find((function(t){return t.config.id===e}));if(e&&i)return i.isChecked()},t.prototype.focus=function(e){var t=this;(0,s.awaitRedraw)().then((function(){if(t._buttons.length){if(!e)return t._buttons[0].focus();var i=t._buttons.find((function(t){return t.config.id===e}));i&&i.focus()}}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e._buttons.length&&e._buttons.forEach((function(e){e.blur()}))}))},t.prototype.show=function(e){var t,i=e&&this._buttons.find((function(t){return t.config.id===e}));(0,f.isDefined)(e)&&!i||(!i&&(this.config.hidden||this._buttons.some((function(e){return e.config.hidden})))||(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.hidden))&&this.events.fire(h.ItemEvent.beforeShow,[this.getValue(),e])&&(i?null==i||i.show():this._buttons.forEach((function(e){return e.show()})),this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[this.getValue(),e]))},t.prototype.hide=function(e,t){var i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,f.isDefined)(e)&&!n||((!n&&this.config.hidden||(null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.hidden))&&!t||!this.events.fire(h.ItemEvent.beforeHide,[this.getValue(),e,t])||(n?(null==n||n.hide(),this.config.hidden=this._buttons.every((function(e){return e.config.hidden}))):(this._buttons.forEach((function(e){return e.hide()})),this.config.hidden=!0),this.events.fire(h.ItemEvent.afterHide,[this.getValue(),e,t])))},t.prototype.isVisible=function(e){var t,i=this._buttons.find((function(t){return t.config.id===e}));return!(this.config.hidden||(0,f.isDefined)(e)&&(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.hidden))},t.prototype.enable=function(e){var t,i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,f.isDefined)(e)&&!n||(!n&&(this.config.disabled||this._buttons.some((function(e){return e.config.disabled})))||(null===(t=null==n?void 0:n.config)||void 0===t?void 0:t.disabled))&&(n?null==n||n.enable():this._buttons.forEach((function(e){return e.enable()})),this.config.disabled=!1,(null===(i=this.parent)||void 0===i?void 0:i.isDisabled())&&this.parent.enable(),this.paint())},t.prototype.disable=function(e,t){var i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,f.isDefined)(e)&&!n||((!n&&this.config.disabled||(null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.disabled))&&!t||(n?(null==n||n.disable(),this.config.disabled=this._buttons.every((function(e){return e.config.disabled}))):(this._buttons.forEach((function(e){return e.disable()})),this.config.disabled=!0),this.paint()))},t.prototype.isDisabled=function(e){var t,i=this._buttons.find((function(t){return t.config.id===e}));return Boolean(this.config.disabled||(0,f.isDefined)(e)&&(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.disabled))},t.prototype.clear=function(){if(this._buttons.some((function(e){return e.isChecked()}))){var e={};if(this._buttons.forEach((function(t){e[t.config.id]="string"==typeof t.config.value&&""})),!this.events.fire(h.ItemEvent.beforeChange,[e]))return;this._buttons.forEach((function(e){e.clear(!0)})),this.events.fire(h.ItemEvent.change,[e]),(0,p.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")}},t.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.getValue();if(!e&&!this.events.fire(h.ItemEvent.beforeValidate,[t]))return!1;var i=!(!this.config.required||!this._buttons.some((function(e){return e.config.$required&&!!e.config.checked})));return e||(this._buttons.forEach((function(e){e.setValidationStatus(i?"success":"error")})),this.setValidationStatus(i?"success":"error"),this.events.fire(h.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this._buttons.forEach((function(e){e.clearValidate()})),this.paint()},t.prototype._initView=function(e){var t=this;if((0,f.isEmptyObj)(e)||!e.options||(0,f.isEmptyObj)(e.options))throw new Error("Check the configuration is correct");for(var i in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach((function(e){e.destructor()})),this._buttons=[]),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.helpMessage&&(this._helper=new v.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage));var n=this.config.options.rows||this.config.options.cols;null==n||n.forEach((function(e){e.id=e.id||(0,f.uid)(),e.$group=!0})),this.layout=new l.Layout(null,this.config.options),null==n||n.forEach((function(i){var n=new u.Checkbox(null,r(r({},i),{disabled:e.disabled||i.disabled,name:e.name,$required:e.required}));t._buttons.push(n),t.layout.getCell(i.id).attach(n),n.events.on(h.ItemEvent.beforeChange,(function(e){var i,o=r(r({},t.getValue()),((i={})[n.config.id]=e,i));return t.events.fire(h.ItemEvent.beforeChange,[o])})),n.events.on(h.ItemEvent.change,(function(){t.events.fire(h.ItemEvent.change,[t.getValue()]),(0,p.isVerify)(t.config)&&t.validate()})),n.events.on(h.ItemEvent.focus,(function(e,i){t.events.fire(h.ItemEvent.focus,[t.getValue(),i])})),n.events.on(h.ItemEvent.blur,(function(e,i){t.events.fire(h.ItemEvent.blur,[t.getValue(),i])})),n.events.on(h.ItemEvent.keydown,(function(e,i){t.events.fire(h.ItemEvent.keydown,[e,i])})),n.events.on(h.ItemEvent.afterHide,(function(){(0,s.awaitRedraw)().then((function(){var e;null===(e=t.layout.getCell(n.config.id))||void 0===e||e.hide()}))})),n.events.on(h.ItemEvent.afterShow,(function(){var e;null===(e=t.layout.getCell(n.config.id))||void 0===e||e.show()}))})),this.config.value&&this.setValue(this.config.value),this.clearValidate(),!this.config.disabled&&this._buttons.length&&this._buttons.every((function(e){return e.config.disabled}))&&(this.config.disabled=!0),this.config.hidden&&(0,s.awaitRedraw)().then((function(){return t.hide(void 0,!0)}))},t.prototype._initHandlers=function(){var e=this;this.events.on(h.ItemEvent.change,(function(){e.config.value=e.getValue(),e.paint()}))},t.prototype._draw=function(){var e=this.config.hidden?" dhx_form-group--hidden":"",t=this.config,i=t.label,n=t.labelWidth,o=t.helpMessage,r=t.required,a=t.name,l=t.id;return(0,s.el)("fieldset.dhx_form-group-fieldset",{},[(0,s.el)("div.dhx_form-group.dhx_form-group--checkbox-group",{class:(0,p.getFormItemCss)(this.config,(0,p.isVerify)(this.config))+e,"data-dhx-id":a||l,role:"radiogroup"},[i||n||o||r?this._drawLabel():null,(0,s.el)("div.dhx_checkbox-group--container",{},[this.layout&&(0,s.inject)(this.layout.getRootView()),r&&(0,p.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,p.getValidationMessage)(this.config))])])])},t}(d.Label);t.CheckboxGroup=g},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.RadioGroup=void 0;var s=i(1),l=i(0),c=i(17),u=i(10),d=i(3),h=i(229),f=i(7),p=i(15),v=i(5),g=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new d.EventSystem,n._buttons=[],n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],n._props=a(a([],f.baseProps,!0),n._propsItem,!0),n._initView(i),n._initHandlers(),n.config.value&&n._setValue(n.config.value),n.clearValidate(),n.config.helpMessage&&(n._helper=new u.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),n._helper.attachHTML(n.config.helpMessage));return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._buttons=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e,t){if(void 0!==e&&this.events.fire(v.ItemEvent.beforeChangeProperties,[this.getProperties()])){if("object"==typeof e&&!(0,l.isEmptyObj)(e)){for(var i in e)this._props.includes(i)&&(this.config[i]=e[i]);e.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}if("string"==typeof e&&t&&!(0,l.isEmptyObj)(t)){var n=this._buttons.find((function(t){return t.config.id===e}));n&&n.setProperties(t)}this.events.fire(v.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(e){if(void 0===e){var t={};for(var i in this.config)this._props.includes(i)&&(t[i]=this.config[i]);return t}return this._buttons.find((function(t){return t.config.id===e})).getProperties()},t.prototype.getValue=function(){var e=this;return this._buttons.forEach((function(t){t.getValue()&&(e.config.value=t.getValue()||"")})),this.config.value||""},t.prototype.setValue=function(e){e!==this.config.value&&(this._setValue(e),this.events.fire(v.ItemEvent.change,[e]),(0,f.isVerify)(this.config)&&this.validate())},t.prototype.focus=function(e){var t=this;(0,s.awaitRedraw)().then((function(){if(t._buttons.length){if(!e)return t._buttons[0].focus();var i=t._buttons.find((function(t){return t.config.id===e}));if(i)return i.focus()}}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e._buttons.length&&e._buttons.forEach((function(e){return e.blur()}))}))},t.prototype.show=function(e){var t,i=e&&this._buttons.find((function(t){return t.config.id===e}));(0,l.isDefined)(e)&&!i||(!i&&(this.config.hidden||this._buttons.some((function(e){return e.config.hidden})))||(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.hidden))&&this.events.fire(v.ItemEvent.beforeShow,[this.getValue(),e])&&(i?null==i||i.show():this._buttons.forEach((function(e){return e.show()})),this.config.hidden=!1,this.events.fire(v.ItemEvent.afterShow,[this.getValue(),e]))},t.prototype.hide=function(e,t){var i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,l.isDefined)(e)&&!n||((!n&&this.config.hidden||(null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.hidden))&&!t||!this.events.fire(v.ItemEvent.beforeHide,[this.getValue(),e,t])||(n?(null==n||n.hide(),this.config.hidden=this._buttons.every((function(e){return e.config.hidden}))):(this._buttons.forEach((function(e){return e.hide()})),this.config.hidden=!0),this.events.fire(v.ItemEvent.afterHide,[this.getValue(),e,t])))},t.prototype.isVisible=function(e){var t,i=this._buttons.find((function(t){return t.config.id===e}));return!(this.config.hidden||(0,l.isDefined)(e)&&(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.hidden))},t.prototype.enable=function(e){var t,i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,l.isDefined)(e)&&!n||(!n&&(this.config.disabled||this._buttons.some((function(e){return e.config.disabled})))||(null===(t=null==n?void 0:n.config)||void 0===t?void 0:t.disabled))&&(n?null==n||n.enable():this._buttons.forEach((function(e){return e.enable()})),this.config.disabled=!1,(null===(i=this.parent)||void 0===i?void 0:i.isDisabled())&&this.parent.enable(),this.paint())},t.prototype.disable=function(e,t){var i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,l.isDefined)(e)&&!n||((!n&&this.config.disabled||(null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.disabled))&&!t||(n?(null==n||n.disable(),this.config.disabled=this._buttons.every((function(e){return e.config.disabled}))):(this._buttons.forEach((function(e){return e.disable()})),this.config.disabled=!0),this.paint()))},t.prototype.isDisabled=function(e){var t,i=this._buttons.find((function(t){return t.config.id===e}));return Boolean(this.config.disabled||(0,l.isDefined)(e)&&(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.disabled))},t.prototype.clear=function(){""!==this.config.value&&(this._buttons.forEach((function(e){e.clear()})),this.config.value="",this.events.fire(v.ItemEvent.change,[this.config.value]),(0,f.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},t.prototype.validate=function(e){var t=this;void 0===e&&(e=!1);var i=this.getValue();if(!e&&!this.events.fire(v.ItemEvent.beforeValidate,[i]))return!1;var n=!(!this.config.required||!this._buttons.some((function(e){return t.config.required&&!!e.config.checked})));return e||(this._buttons.forEach((function(e){e.setValidationStatus(n?"success":"error")})),this.setValidationStatus(n?"success":"error"),this.events.fire(v.ItemEvent.afterValidate,[i,n]),this.paint()),n},t.prototype.clearValidate=function(){this.setValidationStatus(),this._buttons.map((function(e){e.clearValidate()})),this.paint()},t.prototype._initView=function(e){var t=this;if((0,l.isEmptyObj)(e)||!e.options||(0,l.isEmptyObj)(e.options))throw new Error("Check the configuration is correct");for(var i in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach((function(e){e.destructor()})),this._buttons=[]),this.config={type:e.type,id:e.id,name:e.name,value:"",disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.hidden&&(0,s.awaitRedraw)().then((function(){return t.hide(void 0,!0)}));var n=this.config.options.rows||this.config.options.cols;null==n||n.forEach((function(e){e.id=e.id||(0,l.uid)()})),this.layout=new c.Layout(null,this.config.options),null==n||n.forEach((function(i){var n=new h.RadioButton(null,r(r({},i),{disabled:e.disabled||i.disabled,$name:e.name,$required:e.required}));t._buttons.push(n),t.layout.getCell(i.id).attach(n),n.events.on(h.RadioButtonEvents.beforeChange,(function(){return t.events.fire(v.ItemEvent.beforeChange,[n.config.value||""])})),n.events.on(h.RadioButtonEvents.change,(function(){t._buttons.map((function(e){e.config.id!==n.config.id&&e.setValue(!1)})),t.events.fire(v.ItemEvent.change,[t.getValue()]),(0,f.isVerify)(t.config)&&t.validate()})),n.events.on(h.RadioButtonEvents.focus,(function(e,i){t.events.fire(v.ItemEvent.focus,[e,i])})),n.events.on(h.RadioButtonEvents.blur,(function(e,i){t.events.fire(v.ItemEvent.blur,[e,i])})),n.events.on(h.RadioButtonEvents.keydown,(function(e,i){t.events.fire(v.ItemEvent.keydown,[e,i])})),n.events.on(v.ItemEvent.afterHide,(function(){(0,s.awaitRedraw)().then((function(){t.layout.getCell(n.config.id).hide()}))})),n.events.on(v.ItemEvent.afterShow,(function(){t.layout.getCell(n.config.id).show()}))})),!this.config.disabled&&this._buttons.length&&this._buttons.every((function(e){return e.config.disabled}))&&(this.config.disabled=!0)},t.prototype._initHandlers=function(){var e=this;this.events.on(v.ItemEvent.beforeChange,(function(){return e.paint()})),this.events.on(v.ItemEvent.change,(function(){e.config.value=e.getValue(),e.paint()}))},t.prototype._draw=function(){var e=this.config,t=e.label,i=e.labelWidth,n=e.helpMessage,o=e.required,r=e.hidden,a=e.name,l=e.id,c=r?" dhx_form-group--hidden":"";return(0,s.el)("fieldset.dhx_form-group-fieldset",{},[(0,s.el)("div.dhx_form-group.dhx_form-group--radio-group",{class:(0,f.getFormItemCss)(this.config,(0,f.isVerify)(this.config))+c,"data-dhx-id":a||l},[t||i||n||o?[this._drawLabel()]:null,(0,s.el)("div.dhx_radio-group--container",{},[this.layout&&(0,s.inject)(this.layout.getRootView()),o&&(0,f.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,f.getValidationMessage)(this.config))])])])},t.prototype._setValue=function(e){void 0!==e&&-1!==this._buttons.findIndex((function(t){return t.config.value===e}))&&this._buttons.forEach((function(t){t.setValue(e===t.config.value)}))},t}(p.Label);t.RadioGroup=g},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.RadioButton=t.RadioButtonEvents=void 0;var s,l=i(0),c=i(1),u=i(3),d=i(7),h=i(15);!function(e){e.beforeChange="beforeChange",e.change="change",e.focus="focus",e.blur="blur",e.keydown="keydown",e.beforeHide="beforeHide",e.afterHide="afterHide",e.beforeShow="beforeShow",e.afterShow="afterShow"}(s||(t.RadioButtonEvents=s={}));var f=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,r({text:"",width:"content",height:"content",checked:!1},i))||this;n._propsItem=["text"],n._props=a(a([],d.baseProps,!0),n._propsItem,!0),n._handlers={onchange:function(e){var t=e.target.checked;n.events.fire(s.beforeChange,[t])&&(n.config.checked=t,n.events.fire(s.change,[t]))},onfocus:function(){return n.events.fire(s.focus,[n.getValue()||"",n.config.id])},onblur:function(){var e;return null===(e=n.events)||void 0===e?void 0:e.fire(s.blur,[n.getValue()||"",n.config.id])},onkeydown:function(e){n.events.fire(s.keydown,[e,n.config.id])}},n.events=new u.EventSystem;return n.mount(t,(0,c.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this._handlers=this._uid=this._props=this._propsItem=null,this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.getValue=function(){if(this.config.checked)return this.config.value},t.prototype.setValue=function(e){this.config.checked=e,this.paint()},t.prototype.show=function(){this.config.hidden&&this.events.fire(s.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(s.afterShow,[]))},t.prototype.hide=function(){!this.config.hidden&&this.events.fire(s.beforeHide,[])&&(this.config.hidden=!0,this.events.fire(s.afterHide,[]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.focus=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.input.el.blur()}))},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.clear=function(){this.config.checked=!1,this.setValidationStatus(this.validate()?"success":"error"),this.paint()},t.prototype.validate=function(){var e=!!this.config.checked;return this.setValidationStatus(e?"success":"error"),this.paint(),e},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.checked,o=e.disabled,r=e.$name,a=e.$required,s=e.text;return(0,c.el)("label.dhx_radiobutton.dhx_form-group",{class:(0,d.getFormItemCss)(this.config,!!a)},[(0,c.el)("input.dhx_radiobutton__input",{type:"radio",id:t,value:i||"",name:r||"",disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:a,_ref:"input"}),(0,c.el)("span.dhx_radiobutton__visual-input"),(0,c.el)("span.dhx_text",[s])])},t}(h.Label);t.RadioButton=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;var s=i(1),l=i(0),c=i(15),u=i(7),d=i(3),h=i(5),f=function(e){function t(t,i){var n=e.call(this,null,i)||this;return n.events=new d.EventSystem,n._propsItem=["required","validation","icon","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._props=a(a([],u.baseProps,!0),n._propsItem,!0),n._initView(i),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._propsItem=this._props=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){this.config.hidden&&this.events.fire(h.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[this.getValue()]))},t.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[this.getValue(),!!e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[this.getValue(),!!e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(e){var t=(0,l.isDefined)(e)&&this.config.options.find((function(t){return t.value===e}));(0,l.isDefined)(e)&&!t||(!t&&this.config.disabled||(null==t?void 0:t.disabled)||(t?(t.disabled=!0,this.config.disabled=this.config.options.every((function(e){return e.disabled}))):(this.config.options=this.config.options.map((function(e){return r(r({},e),{disabled:!0})})),this.config.disabled=!0),this.paint()))},t.prototype.enable=function(e){var t,i=(0,l.isDefined)(e)&&this.config.options.find((function(t){return t.value===e}));(0,l.isDefined)(e)&&!i||(!i&&(this.config.disabled||this.config.options.some((function(e){return e.disabled})))||(null==i?void 0:i.disabled))&&(i?i.disabled=!1:this.config.options=this.config.options.map((function(e){return r(r({},e),{disabled:!1})})),this.config.disabled=!1,(null===(t=this.parent)||void 0===t?void 0:t.isDisabled())&&this.parent.enable(),this.paint())},t.prototype.isDisabled=function(e){var t=this.config.options.find((function(t){return t.value===e}));return Boolean(this.config.disabled||(0,l.isDefined)(e)&&(null==t?void 0:t.disabled))},t.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.getValue();if(!e&&!this.events.fire(h.ItemEvent.beforeValidate,[t]))return!1;var i="function"==typeof this.config.validation?this.config.validation(t):void 0!==t&&!!String(t).length;return e||(this.setValidationStatus(i?"success":"error"),this.events.fire(h.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.clear=function(){var e,t,i=null===(t=null===(e=this.config)||void 0===e?void 0:e.options[0])||void 0===t?void 0:t.value;this.config.value!==i&&this.events.fire(h.ItemEvent.beforeChange,[i])&&(this.config.value=i,this.events.fire(h.ItemEvent.change,[i]),(0,u.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"),this.paint())},t.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&-1!==this.config.options.findIndex((function(t){return t.value===e}))&&this.events.fire(h.ItemEvent.beforeChange,[e])&&(this.config.value=e,this.events.fire(h.ItemEvent.change,[e]),(0,u.isVerify)(this.config)&&this.validate(),this.paint())},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.select.el.focus()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.select.el.blur()}))},t.prototype.getValue=function(){return this.config.value},t.prototype.setOptions=function(e){if(!e||!e.length)throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");this.events.fire(h.ItemEvent.beforeChangeOptions,[a([],e,!0)])&&(this._checkOptions(e),this.config.options=a([],e,!0),this.events.fire(h.ItemEvent.changeOptions,[a([],e,!0)]),this.setValue(this.config.options[0].value),this.paint())},t.prototype.getOptions=function(){return this.config.options},t.prototype._initView=function(e){var t=this;if((0,l.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var i in this._checkOptions(e.options),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,required:!1,icon:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",options:e.options,value:e.options[0].value},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);!this.config.disabled&&this.config.options.length&&this.config.options.every((function(e){return e.disabled}))&&(this.config.disabled=!0),this.config.hidden&&(0,s.awaitRedraw)().then((function(){return t.hide(!0)})),this.paint()},t.prototype._getHandlers=function(){var e=this;return{onchange:function(t){var i=e.config.options.map((function(e){return e.value})).find((function(e){return e==t.target.value}));e.events.fire(h.ItemEvent.beforeChange,[i])&&(e.config.value=i,e.events.fire(h.ItemEvent.change,[i]),(0,u.isVerify)(e.config)&&e.validate(),e.paint())},onblur:function(){e._uid&&(e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint())},onfocus:function(){e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()}}},t.prototype._draw=function(){var e,t,i,n=this.config,o=n.id,r=n.options,a=n.icon,l=n.value,c=n.label,d=n.labelWidth,h=n.helpMessage,f=n.required,p=n.name,v=(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.select)||void 0===i?void 0:i.el)===document.activeElement;return(0,s.el)(".dhx_form-group",{class:(0,u.getFormItemCss)(this.config,(0,u.isVerify)(this.config),v)},[(c||d||h)&&this._drawLabel(),(0,s.el)(".dhx_input__wrapper",{},[(0,s.el)("div.dhx_input__container",{},[(0,s.el)(".dhx_input__icon",{class:a||"dxi dxi-menu-down"}),(0,s.el)("select.dhx_select.dhx_input",{id:o,"data-dhx-id":p||o,tabindex:0,class:v&&"dhx_input--focus",onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,_ref:"select",required:f},r.length&&r.map((function(e){return(0,s.el)("option",{value:e.value,disabled:e.disabled,selected:l===e.value},e.content)})))]),(0,u.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,u.getValidationMessage)(this.config))])])},t.prototype._checkOptions=function(e){if(0===e.length)throw new Error("Property options* cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");e.forEach((function(e){if(!e.hasOwnProperty("value")||!e.hasOwnProperty("content"))throw new Error("The object must contain two required properties value and content, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect")}))},t}(c.Label);t.Select=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Textarea=void 0;var a=i(1),s=i(7),l=i(45),c=i(5),u=i(0),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._propsItem=["required","validation","placeholder","readOnly","maxlength","minlength","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],t._props=r(r([],s.baseProps,!0),t._propsItem,!0),t}return o(t,e),t.prototype.getValue=function(){var e;return String(null!==(e=this.config.value)&&void 0!==e?e:"")},t.prototype.isFocused=function(){var e,t,i;return(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.textarea)||void 0===i?void 0:i.el)===document.activeElement},t.prototype.focus=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.getRootView().refs.textarea.el.focus()}))},t.prototype.blur=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.getRootView().refs.textarea.el.blur()}))},t.prototype.setProperties=function(e){if(e&&!(0,u.isEmptyObj)(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype._initView=function(e){var t=this;if((0,u.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var i in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,required:!1,validation:void 0,placeholder:"",readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.hidden&&(0,a.awaitRedraw)().then((function(){t.hide(!0)})),this.paint()},t.prototype._draw=function(){var e,t,i,n=this,o=this.config,r=o.id,l=o.value,c=o.disabled,d=o.name,h=o.placeholder,f=o.required,p=o.resizable,v=o.readOnly,g=o.maxlength,_=o.minlength,m=o.label,y=o.helpMessage,b=o.height,w=(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.textarea)||void 0===i?void 0:i.el)===document.activeElement;return(0,a.el)("div.dhx_form-group.dhx_form-group--textarea",{class:(0,s.getFormItemCss)(this.config,(0,s.isVerify)(this.config),w)},[this._drawLabel(),(0,a.el)(".dhx_input__wrapper",[(0,a.el)("textarea.dhx_input.dhx_input--textarea",{type:"text",id:r,"data-dhx-id":d||r,placeholder:h||"",value:(0,u.isDefined)(l)?l:"",name:d||"",disabled:c,required:f,readOnly:v,maxlength:g,minlength:_,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,_hooks:{didInsert:function(e){if("content"===b){var t=e.el;t.style.height=t.scrollHeight+"px"}},didRecycle:function(e,t){n.isFocused()&&n._value&&(t.el.value=n._value)}},style:{resize:p?"both":"none"},_ref:"textarea","aria-label":m||"".concat(v?l:""," type text"),"aria-describedby":y?"dhx_label__help_".concat(r||this._uid):null}),(0,s.getValidationMessage)(this.config)&&(0,a.el)("span.dhx_input__caption",{},(0,s.getValidationMessage)(this.config))])])},t}(l.Input);t.Textarea=d},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;var a=i(1),s=i(0),l=i(7),c=i(45),u=i(5),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._propsItem=["inputType","label","labelWidth","labelPosition","hiddenLabel","helpMessage"],t._props=r(r([],l.baseProps,!0),t._propsItem,!0),t}return o(t,e),t.prototype.setProperties=function(e){if(e&&!(0,s.isEmptyObj)(e)&&this.events.fire(u.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(u.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype._initView=function(e){var t=this;if((0,s.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var i in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",inputType:"text",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.hidden&&(0,a.awaitRedraw)().then((function(){t.hide(!0)})),this.paint()},t.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.name,o=e.inputType,r=e.label,s=(null!=i?i:"").toString().length;return(0,a.el)("div.dhx_form-group.dhx_form-group--textinput",{class:(0,l.getFormItemCss)(this.config)},[this._drawLabel(),(0,a.el)(".dhx_input__wrapper",[(0,a.el)("input.dhx_input.dhx_input--textinput",{type:["text","number","password"].includes(o)?o:"text",readOnly:!0,id:t,"data-dhx-id":n||t,value:null!=i?i:"",name:n,_ref:"input",tabindex:-1,role:"presentation","aria-label":r||i,size:s>20?s:20,onkeydown:this._handlers.onkeydown})])])},t}(c.Input);t.Text=d},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Combo=void 0;var a=i(1),s=i(0),l=i(7),c=i(56),u=i(3),d=i(15),h=i(5),f=function(e){function t(t,i){var n=e.call(this,null,i)||this;return n.events=new u.EventSystem,n._propsItem=["required","validation","placeholder","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","readonly","readOnly"],n._propsCombo=["template","filter","multiselection","selectAllButton","itemsCount","itemHeight","virtual","listHeight"],n._props=r(r(r([],l.baseProps,!0),n._propsItem,!0),n._propsCombo,!0),n._isClear=!1,n._initView(i),n._initHandlers(),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.combobox&&this.combobox.destructor(),this.events=this._uid=this._propsCombo=this._propsItem=this._props=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){var t=this;(0,a.awaitRedraw)().then((function(){if(e&&!(0,s.isEmptyObj)(e)&&t.events.fire(h.ItemEvent.beforeChangeProperties,[t.getProperties()])){for(var i in e)t._props.includes(i)&&(t.config[i]=e[i]);var n=[];t.getWidget().data.forEach((function(e){return n.push(e)})),t.config.data=n,t._initView(t.config),t._initHandlers(),t.events.fire(h.ItemEvent.afterChangeProperties,[t.getProperties()])}}))},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.combobox.disable(),this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,this.combobox.enable(),(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.clear=function(){this.config.value&&(this.config.value="",this._isClear=!0,this.combobox.clear())},t.prototype.getValue=function(){return this.config.multiselection?this.combobox.getValue(!0)||[]:this.combobox.getValue()||""},t.prototype.setValue=function(e){void 0!==e&&e.toString()!==this.config.value.toString()&&(this._isClear=!1,this.combobox.setValue(e))},t.prototype.validate=function(e,t){var i,n=this;if(void 0===e&&(e=!1),void 0===t&&(t=this.getValue()),!e&&!this.events.fire(h.ItemEvent.beforeValidate,[t]))return!1;i=Array.isArray(t)?t.map((function(e){return n._getItemText(e)})):this._getItemText(t)||"";var o="function"==typeof this.config.validation?this.config.validation(t,i):this._existData(t);return e||(this.setValidationStatus(o?"success":"error"),this.config.required&&this._validationStatus(),this.events.fire(h.ItemEvent.afterValidate,[t,o]),this.paint()),o},t.prototype.clearValidate=function(){this.setValidationStatus(),this._validationStatus(),this.paint()},t.prototype.getWidget=function(){return this.combobox},t.prototype.focus=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.combobox.focus()}))},t.prototype.blur=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.combobox.blur()}))},t.prototype._initView=function(e){var t=this;if((0,s.isEmptyObj)(e))throw new Error("Check the configuration is correct");this.combobox&&this.combobox.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",readOnly:!1,multiselection:!1,selectAllButton:!1,itemHeight:32,virtual:!1,listHeight:224,required:!1,placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"};var i={};for(var n in e)"id"!==n&&"type"!==n&&"name"!==n&&(this.config[n]=e[n],"validation"!==n&&(i[n]=e[n]));this.combobox=new c.Combobox(null,i),this.config.hidden&&(0,a.awaitRedraw)().then((function(){t.hide(!0)})),this.paint()},t.prototype._initHandlers=function(){var e=this;this.combobox.events.on(c.ComboboxEvents.beforeChange,(function(t){return e.events.fire(h.ItemEvent.beforeChange,[t])})),this.combobox.events.on(c.ComboboxEvents.change,(function(){var t=e.config.value=e.getValue();e.events.fire(h.ItemEvent.change,[t]),(0,l.isVerify)(e.config)&&(e._isClear?(e.setValidationStatus(e.validate(!0)?"success":"error"),e._isClear=!1):e.validate()),e.paint()})),this.combobox.events.on(c.ComboboxEvents.focus,(function(){e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()})),this.combobox.events.on(c.ComboboxEvents.blur,(function(){e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint()})),this.combobox.events.on(c.ComboboxEvents.keydown,(function(t,i){"Enter"===t.code&&t.preventDefault(),e.events.fire(h.ItemEvent.keydown,[t,i])}))},t.prototype._validationStatus=function(){var e,t,i;if(!(this.combobox.popup.isVisible()||(null===(i=null===(t=null===(e=this.combobox.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement))switch(this.config.$validationStatus){case h.ValidationStatus.success:return this.combobox.config.css=(this.config.css||"")+" dhx_form-group--state_success";case h.ValidationStatus.error:return this.combobox.config.css=(this.config.css||"")+" dhx_form-group--state_error";case h.ValidationStatus.pre:default:return this.combobox.config.css=this.config.css||""}return this.combobox.config.css=this.config.css||""},t.prototype._getRootView=function(){return this.combobox.getRootView()},t.prototype._draw=function(){var e=this.config,t=e.labelWidth,i=e.labelPosition,n=e.name,o=e.id;return(0,a.el)(".dhx_form-group.dhx_form-group--combobox",{"data-dhx-id":n||o},[(0,a.el)("div.dhx_form-combobox__container",[(0,a.inject)(this._getRootView())]),(0,a.el)("div.dhx_form-combobox__wrapper",{style:{"margin-left":"".concat(t&&"left"===i?"calc(".concat(t," + 16px)"):"")},class:this._validationStatus()},[(0,a.el)("span.dhx_input__caption",(0,l.getValidationMessage)(this.config))])])},t.prototype._existData=function(e){var t=this;return!!(0,s.isDefined)(e)&&(e instanceof Array?!!e.length&&e.every((function(e){return t.combobox.data.exists(e)})):this.combobox.data.exists(e))},t.prototype._getItemText=function(e){var t;return null===(t=this.combobox.data.getItem(e))||void 0===t?void 0:t.value},t}(d.Label);t.Combo=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SliderForm=void 0;var s=i(1),l=i(0),c=i(73),u=i(3),d=i(15),h=i(5),f=i(7),p=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.events=new u.EventSystem,n._propsItem=["label","labelWidth","labelPosition","hiddenLabel","helpMessage"],n._propsSlider=["min","max","step","mode","range","inverse","tooltip","tick","tickTemplate","majorTick"],n._props=a(a(a([],f.baseProps,!0),n._propsItem,!0),n._propsSlider,!0),n._initView(i),n._initHandlers();return n.mount(t,(0,s.create)({render:function(){return n._drawSlider()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.slider&&this.slider.destructor(),this.events=this._uid=this._propsSlider=this._propsItem=this._props=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this._initView(this.config),this._initHandlers(),this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.slider.paint(),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.slider.disable(),this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,this.slider.enable(),(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.clear=function(){var e=this.config,t=e.value,i=e.min;t[0]!==i&&this.slider.setValue(i)},t.prototype.getValue=function(){return this.slider.getValue()},t.prototype.setValue=function(e){void 0!==e&&e.toString()!==this.config.value.toString()&&this.slider.setValue(e)},t.prototype.getWidget=function(){return this.slider},t.prototype.focus=function(e){var t=this;(0,s.awaitRedraw)().then((function(){t.slider.focus(e)}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.slider.blur()}))},t.prototype._initView=function(e){var t=this;if((0,l.isEmptyObj)(e))throw new Error("Check the configuration is correct");this.slider&&this.slider.destructor();var i={type:e.type,id:e.id,name:e.name,mode:"horizontal",min:0,max:100,step:1,range:!1,inverse:!1,tooltip:!0,disabled:!1,hidden:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content"};for(var n in e)"id"!==n&&"type"!==n&&"name"!==n&&(i[n]=e[n]);this.config=r({type:this.config.type},i),this.slider=new c.Slider(null,i),this.config.disabled&&this.slider.disable(),this.config.value=this.slider.getValue(),this.config.hidden&&(0,s.awaitRedraw)().then((function(){t.hide(!0)}))},t.prototype._initHandlers=function(){var e=this;this.slider.events.on(c.SliderEvents.beforeChange,(function(t,i,n){var o=[t];if(e.config.range){var r=e.getValue(),a=r[0],s=r[1];o=n?[a,t]:[t,s]}return e.events.fire(h.ItemEvent.beforeChange,[o])})),this.slider.events.on(c.SliderEvents.change,(function(){if(e._uid){var t=e.config.value=e.slider.getValue();e.events.fire(h.ItemEvent.change,[t]),e.paint()}})),this.slider.events.on(c.SliderEvents.focus,(function(){e.events.fire(h.ItemEvent.focus,[e.getValue()])})),this.slider.events.on(c.SliderEvents.blur,(function(){e.events.fire(h.ItemEvent.blur,[e.getValue()])})),this.slider.events.on(c.SliderEvents.keydown,(function(t){e.events.fire(h.ItemEvent.keydown,[t])}))},t.prototype._drawSlider=function(){var e=this.config,t=e.name,i=e.id;return(0,s.el)("div.dhx_form-group",{"data-dhx-id":t||i},[(0,s.inject)(this.slider.getRootView())])},t}(d.Label);t.SliderForm=p},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(91),t),o(i(236),t),o(i(36),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Vault=void 0;var a=i(0),s=i(3),l=i(8),c=i(13),u=i(17),d=i(32),h=i(23),f=i(46),p=i(36),v=i(91),g=i(237),_=i(92),m=i(238),y=i(239),b=i(240),w=i(31),x=i(1),C=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,null,(0,a.extend)({mode:p.VaultMode.list,modeControls:!0,toolbar:!0,updateFromResponse:!0,scaleFactor:4,customScroll:!0,uploader:{},progressBar:{},disablePreview:!1,editable:!0},i))||this;return n.config.toolbar||(n.config.uploader.autosend=!0),i.data?(n.data=i.data,n.events=i.data.events,n.events.context=n):(n.events=new s.EventSystem(n),n.data=new c.DataCollection({},n.events)),n.data.config.init=function(e){var t,i,o,r;return e.status=e.status||p.FileStatus.uploaded,e.file?(e.size=e.file.size,e.name=e.file.name,e.value=null===(t=e.file.name)||void 0===t?void 0:t.split(".").slice(0,-1).join("."),e.extension=null===(i=e.file.name)||void 0===i?void 0:i.split(".").pop(),e.preview=!n.config.disablePreview):(e.size=e.size||0,e.name=e.name||"",e.value=(null===(o=e.name)||void 0===o?void 0:o.split(".").slice(0,-1).join("."))||"",e.extension=null===(r=e.name)||void 0===r?void 0:r.split(".").pop(),e.preview=!n.config.disablePreview),e.file&&(0,_.isImage)(e)&&n._readStack.add(e,n.uploader.config.autosend||n.config.disablePreview),e},n._readStack=new y.ReadStackPreview(n.data),n.uploader=new v.Uploader(n.config.uploader,n.data,n.events),n._progressBar=new m.ProgressBar(n.events,n.config.progressBar),n.events.on(p.UploaderEvents.uploadProgress,(function(e,t,i){return n._progressBar.setState(e,{current:t,total:i})})),n._initUI(t),n._initEvents(),n}return o(t,e),t.prototype.destructor=function(){this.toolbar.destructor(),this._readStack.stop(),this.uploader.unlinkDropArea(),this.uploader.abort(),this.unmount()},t.prototype.getRootView=function(){return this._layout.getRootView()},t.prototype.paint=function(){var e=this._canDrop||!this.data.getLength();this._activeView=e?this._emptyField:this.config.mode===p.VaultMode.grid||this.toolbar&&this.toolbar.getState().mode===p.VaultMode.grid?this.grid:this.list,this._layout.getCell("vault").attach(this._activeView)},t.prototype._initUI=function(e){var t=this._layout=new u.Layout(e,{css:"dhx_vault",rows:[{id:"toolbar",css:"dhx_vault--toolbar",height:"content"},{id:"vault",css:"dhx_vault--container"}],on:this._getDragEvents()});this._initToolbar(),t.getCell("toolbar").attach(this.toolbar),this._initEmpty(),this._initList(),this._initGrid(e),this.config.toolbar||t.getCell("toolbar").hide(),this.paint()},t.prototype._initList=function(){var e=this,t="ontouchstart"in document.documentElement;this.list=new w.List(null,{data:this.data,dragMode:"both",multiselection:!!t||"ctrlClick",template:g.listTemplate,eventHandlers:(0,g.getContainersEvents)(this.data),keyNavigation:!0,editable:this.config.editable,itemHeight:49,hotkeys:{delete:function(){var t,i=null===(t=e.list.selection.getItem())||void 0===t?void 0:t.map((function(e){return e.id}));i.length&&e.data.remove(i)}}}),this.list.events.on("afterEditEnd",(function(t,i){var n=e.list.data.getItem(i);e.list.data.update(i,{name:"".concat(t,".").concat(n.extension)})}))},t.prototype._initGrid=function(e){var t=this,i="ontouchstart"in document.documentElement;this.grid=new b.DataView(null,{gap:8,itemsInRow:4,dragMode:"both",multiselection:!!i||"ctrlClick",data:this.data,template:g.gridTemplate,eventHandlers:(0,g.getContainersEvents)(this.data),keyNavigation:!0,editable:this.config.editable,hotkeys:{delete:function(){var e,i=null===(e=t.list.selection.getItem())||void 0===e?void 0:e.map((function(e){return e.id}));i.length&&t.data.remove(i)}}}),this.grid.selection=this.list.selection,e&&("string"==typeof e&&(e=document.getElementById(e)),this.grid.config.itemsInRow=Math.floor(e.offsetWidth/100))},t.prototype._initToolbar=function(){this.toolbar=new d.Toolbar(null,{css:"vault-toolbar"}),this.toolbar.data.parse([{id:"add",tooltip:f.default.add,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-plus"},{id:"mode-separator",type:"separator"},{id:"list",tooltip:f.default.list,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-view-sequential",active:this.config.mode===p.VaultMode.list,group:"mode"},{id:"grid",tooltip:f.default.grid,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-view-grid",active:this.config.mode===p.VaultMode.grid,group:"mode"},{id:"upload-separator",type:"separator"},{id:"upload",tooltip:f.default.upload,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-vault"},{id:"spacer",type:"spacer"},{id:"remove-all",tooltip:f.default.clearAll,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-delete-forever"}]),this.config.modeControls||this.toolbar.hide(["mode-separator","list","grid","upload-separator"]),this._hideAdditionalButtons()},t.prototype._initEmpty=function(){var e=this;return this._emptyField=(0,l.toViewLike)((0,x.create)({render:function(){return(0,x.el)(".dhx-dropable-area.drop-files-here",[(0,x.el)(".dhx-big-icon-block",[(0,x.el)(".dxi.dxi-vault")]),!e._canDrop&&(0,x.el)(".drop-area-bold-text",f.default.dragAndDrop),!e._canDrop&&(0,x.el)(".drop-area-bold-text",f.default.filesOrFoldersHere),!e._canDrop&&(0,x.el)(".drop-area-light-text",f.default.or),!e._canDrop&&(0,x.el)("button.dhx_button.dhx_button--view_flat.dhx_btn--small.dhx_button--color_primary.dhx_button--size_small",{onclick:function(){return e.uploader.selectFile()}},f.default.browse)])}}))},t.prototype._changeUI=function(e){this.config.mode=e,this._activeView=e===p.VaultMode.grid?this.grid:this.list,this.data.getLength()&&this.paint()},t.prototype._initEvents=function(){var e=this;this.data.events.on(c.DataEvents.change,(function(){e.data.getLength()?e._showAdditionalButtons():e._hideAdditionalButtons(),e.config.downloadURL&&e.data.forEach((function(t){t.downloadURL||(t.downloadURL=e.config.downloadURL)})),e.paint()})),this.events.on(p.UploaderEvents.uploadBegin,(function(){e.config.toolbar&&e._layout.getCell("toolbar").attach(e._progressBar)})),this.events.on(p.UploaderEvents.uploadComplete,(function(){e.config.toolbar&&e._layout.getCell("toolbar").attach(e.toolbar)})),this.toolbar.events.on(h.NavigationBarEvents.click,(function(t){switch(t){case"add":e.uploader.selectFile();break;case"remove-all":if(e.data.getLength()){var i=e._activeView.selection.getItem();i&&i.length>0?i.forEach((function(t){(0,_.removeItem)(e.data,t.id)})):e.data.removeAll()}break;case"list":case"grid":e._changeUI(t);break;case"upload":e.uploader.send()}})),this.events.on(p.ProgressBarEvents.cancel,(function(){e.uploader.abort(),e.paint()}))},t.prototype._getDragEvents=function(){var e=this,t={left:null,top:null,width:null,height:null};return{dragleave:function(i){e._canDrop&&(i.pageX>t.left+t.width-1||i.pageX<t.left||i.pageY>t.top+t.height-1||i.pageY<t.top)&&(e._canDrop=!1,e.config.toolbar&&e._layout.getCell("toolbar").show(),e._layout.config.css="dhx_vault",e.paint())},dragenter:function(i){if(i.preventDefault(),!e.uploader.isActive&&!e._canDrop){for(var n=0,o=i.dataTransfer.types;n<o.length;n++){var r=o[n];if("Files"!==r&&"application/x-moz-file"!==r)return void(e._canDrop=!1)}e._canDrop=!0;var a=e.getRootView().node.el.getBoundingClientRect();t.left=a.left+window.pageXOffset,t.top=a.top+window.pageYOffset,t.width=a.width,t.height=a.height,e._canDrop=!0,e.config.toolbar&&e._layout.getCell("toolbar").hide(),e._layout.config.css="dhx_vault dhx-dragin ".concat(e._canDrop?" drop-here":""),e.paint()}},dragover:function(e){e.preventDefault()},drop:function(t){if(t.preventDefault(),e._canDrop){var i=t.dataTransfer;e.uploader.parseFiles(i),e._canDrop=!1,e.config.toolbar&&e._layout.getCell("toolbar").show(),e._layout.config.css="dhx_vault",e.paint()}}}},t.prototype._hideAdditionalButtons=function(){var e=this,t=["upload",this.config.modeControls?"upload-separator":""];r(r(r([],["mode-separator","list","grid"],!0),t,!0),["remove-all"],!1).forEach((function(t){e.toolbar.data.getItem(t)&&!e.toolbar.data.getItem(t).hidden&&e.toolbar.hide(t)}))},t.prototype._showAdditionalButtons=function(){var e=this,t=this.config.modeControls?["mode-separator","list","grid"]:[],i=this.uploader.config.autosend?[]:["upload",this.config.modeControls?"upload-separator":""],n=r(r(r([],t,!0),i,!0),["remove-all"],!1);this.toolbar.data.update("remove-all",{tooltip:this._activeView.selection&&this._activeView.selection.getItem()?f.default.clearAllSelected:f.default.clearAll}),n.forEach((function(t){e.toolbar.data.getItem(t)&&e.toolbar.data.getItem(t).hidden&&e.toolbar.show(t)}))},t}(l.View);t.Vault=C},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContainersEvents=t.listTemplate=t.gridTemplate=void 0;var n=i(4),o=i(14),r=i(92),a=i(36),s=i(46);t.gridTemplate=function(e){var t=e.status===a.FileStatus.inprogress,i=e.status===a.FileStatus.failed,n=e.status!==a.FileStatus.uploaded,o="dhx_dataview-item--file__";switch(e.status){case a.FileStatus.inprogress:o+="progress";break;case a.FileStatus.queue:o+="queue";break;case a.FileStatus.failed:o+="failed";break;default:o=""}var l="",c="";e.link&&(c=(l=(e.downloadURL||"")+e.link).split("/").pop().split("?")[0]);var u="";return/image/.exec((0,r.getFileClassName)(e))&&e.preview&&(e.image&&e.image.src?u="style=\"background:url('".concat(e.image.src,"') center center no-repeat;background-size:cover\""):e.link&&(u="style=\"background:url('".concat(l,"') center center no-repeat;background-size:cover\""))),'<div class="dhx_dataview-item--file '.concat(o,'">\n\t\t<div class="dhx_dataview-item--file-type ').concat((0,r.getFileClassName)(e),'" ').concat(u,"></div>\n\t\t").concat(t?'<div class="dhx_dataview-item--progress-block">\n\t\t\t\t\t<div class="dhx_dataview-item--progress-value">'.concat((100*e.progress).toFixed(1)+"%",'</div>\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" class="dhx_vault-item--progress-circle" viewBox="0 0 60 60">\n\t\t\t\t\t\t<circle cx="30" cy="30" r="28" stroke-width="4" class="dhx_vault-item--progress-bar-background"></circle>\n\t\t\t\t\t\t<circle cx="30" cy="30" r="28" stroke-width="4" stroke-dasharray="175.9 175.9" stroke-dashoffset="').concat(175.9*(1-e.progress),'" class="active-circle dhx_vault-item--progress-bar-active"></circle>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>'):'<div class="dhx_dataview-item--default-block">\n\t\t\t\t\t'.concat(i?'<div class="dhx_dataview-item--error-mark dxi dxi-alert-circle"></div>':n?'<div class="dhx_dataview-item--error-mark dxi dxi-vault"></div>':'<div class="dhx_dataview-item--success-mark dxi dxi-checkbox-marked-circle"></div>','\n\t\t\t\t</div>\n\t\t\t\t<div class="dhx_dataview-item--hover-block">\n\t\t\t\t\t<div class="dhx_dataview-item--control-block ').concat(i||n||!e.link?"dhx_dataview-item--control-block__withoutLink":"",'">\n\t\t\t\t\t\t').concat(i||n||!e.link?'<div class="dhx_dataview-item--remove-btn dxi dxi-delete-forever"></div>':'<a href="'.concat(l,'" class="dhx_dataview-item--download-btn dxi dxi-download" download="').concat(c,'"></a>\n\t\t\t\t\t\t\t\t\t<div class="dhx_dataview-item--remove-btn dxi dxi-delete-forever"></div>'),"\n\t\t\t\t\t</div>\n\t\t\t\t\t").concat(i?'<div class="dhx_dataview-item--error-text">'.concat(s.default.error,"</div>"):'<div class="dhx_dataview-item--file-size">'.concat((0,r.getBasis)(e.size),"</div>"),"\n\t\t\t\t</div>"),'\n\t\t</div>\n\t<div class="dhx_dataview-item--file-name">').concat((0,r.truncateWord)(e.name),"</div>")};t.listTemplate=function(e){var t=e.status===a.FileStatus.failed,i=e.status===a.FileStatus.inprogress,n=e.status!==a.FileStatus.uploaded&&!t,o="",l="";return e.link&&(l=(o=(e.downloadURL||"")+e.link).split("/").pop().split("?")[0]),'<div class="dhx_list-item--icon '.concat(n?"dhx_list-item--queue":"",'">\n\t\t\t<div class="dhx_list-item--file-type ').concat((0,r.getFileClassName)(e),'"></div>\n\t\t</div>\n\t\t<div class="dhx_list-item--content">\n\t\t').concat(i?'<div class="dhx_list-item--name">'.concat(e.value,".").concat(e.extension,'\n\t\t\t\t\t<p class="dhx_item--progress-value">').concat((100*e.progress).toFixed(1)+"%","</p>\n\t\t\t\t</div>"):'<div class="dhx_list-item--name">'.concat(e.value,".").concat(e.extension,"</div>\n\t\t\t\t\t").concat(t?'<div class="dhx_list-item--error-info">'.concat(s.default.error,"</div>"):"",'\n\t\t\t\t\t<div class="dhx_list-item--size ').concat(t?"error":"",'">').concat((0,r.getBasis)(e.size),"</div>\t\n\t\t\t\t</div>"),"\n\t\t</div>\n\t\t").concat(i?'<div class="dhx_item--download-progress" style="width:'.concat((100*e.progress).toFixed(1),'%"></div>'):'<div class="dhx_item--info">\n\t\t\t\t\t'.concat(t?'<div class="dhx_item--error-mark dxi dxi-alert-circle"></div><div class="dhx_item--btn-remove dxi dxi-delete-forever"></div>':"".concat(n?'<div class="dhx_item--error-mark dxi dxi-vault"></div>':'<div class="dhx_item--success-mark dxi dxi-checkbox-marked-circle"></div>','\n\t\t\t\t\t\t\t<div class="dhx_item--hover-block">\n\t\t\t\t\t\t\t\t').concat(t||n||!e.link?"":'<a href="'.concat(o,'" class="dhx_item--download-btn dxi dxi-download" download="').concat(l,'"></a>'),'\n\t\t\t\t\t\t\t\t<div class="dhx_item--btn-remove dxi dxi-delete-forever"></div>\n\t\t\t\t\t\t\t</div>'),"\n\t\t\t\t</div>"))};t.getContainersEvents=function(e){var t=function(t){var i=(0,n.locate)(t);if(i){var r=e.getItem(i);(0,o.tooltip)(r.name,{node:t.target,position:o.Position.bottom})}};return{onclick:{"dxi-delete-forever":function(t){var i=(0,n.locate)(t);i&&(0,r.removeItem)(e,i)}},onmouseover:{"dxi-download":function(e){(0,o.tooltip)(s.default.download,{node:e.target,position:o.Position.bottom})},"dxi-delete-forever":function(e){(0,o.tooltip)(s.default.clear,{node:e.target,position:o.Position.bottom})},"dhx_list-item--name":t,"dhx_dataview-item--file-name":t}}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBar=void 0;var r=i(1),a=i(8),s=i(46),l=i(36),c=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=t,n._progress=0;return n.mount(null,(0,r.create)({render:function(){return n._draw()}})),n._abortUpload=function(){n.events.fire(l.ProgressBarEvents.cancel)},n}return o(t,e),t.prototype.setState=function(e,t){this._progress=e,this.config.template?this._progressText=this.config.template(e,t):this._progressText=this._progress.toFixed(1)+"%",this.paint()},t.prototype._draw=function(){return(0,r.el)(".progress-bar",{_key:this._uid},[(0,r.el)(".progress-indicator",{style:{width:this._progress+"%"}}),(0,r.el)(".progress-text",{".innerHTML":this._progressText}),(0,r.el)("button",{class:"dhx_button dhx_button--color_primary dhx_button--size_small dhx_button--view_flat action-abort-all",onclick:this._abortUpload},s.default.cancel)])},t}(a.View);t.ProgressBar=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadStackPreview=void 0;var n=function(){function e(e){this._readerStack=[],this._isActive=!1,this._data=e}return e.prototype.add=function(e,t){void 0===t&&(t=!1),this._readerStack.push(e),t||this.read()},e.prototype.read=function(){var e=this;if(this._readerStack.length&&!this._isActive){var t=this._readerStack.shift();this._isActive=!0;var i=new FileReader;i.readAsDataURL(t.file),i.onload=function(i){var n=new Image;n.src=i.target.result,n.onload=function(){e._data.exists(t.id)&&e._data.update(t.id,{image:n}),e._isActive=!1,e.read()}},i.onerror=function(){e._isActive=!1,e.read()}}},e.prototype.stop=function(){this._readerStack=[]},e}();t.ReadStackPreview=n},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(93),t),o(i(243),t),o(i(94),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditor=void 0;var n=i(242);t.getEditor=function(e,t){return new n.InputEditor(e,t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputEditor=void 0;var n=i(1),o=i(94),r=function(){function e(e,t){var i=this;this._dataView=t,this._config=t.config,this._item=e,this._dataView.events.on(o.DataViewEvents.focusChange,(function(e,t){i._mode&&t!==i._item.id&&i.endEdit()})),this._initHandlers()}return e.prototype.endEdit=function(){if(this._input){var e=this._input.value;this._dataView.events.fire(o.DataViewEvents.beforeEditEnd,[e,this._item.id])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),this._input.removeEventListener("keydown",this._handlers.onKeyDown),this._handlers={},this._mode=!1,this._dataView.events.fire(o.DataViewEvents.afterEditEnd,[e,this._item.id])):this._input.focus()}},e.prototype.toHTML=function(e){this._mode=!0;var t=this._config,i=t.itemsInRow,o=t.gap,r=function(e){return parseFloat(e)};return(0,n.el)(".dhx_input__wrapper",{style:{width:"calc(".concat(100/i,"% - ").concat(r(o)," * ").concat((i-1)/i,"px)"),maxWidth:"calc(".concat(100/i,"% - ").concat(r(o)," * ").concat((i-1)/i,"px)"),marginRight:e?"":o},role:"presentation"},[(0,n.el)("div.dhx_input__container",{style:{height:"100%"},role:"presentation"},[(0,n.el)("input.dhx_input",{class:(this._item.css?" "+this._item.css:"")+(e?" dhx_dataview-item--last-item-in-row":""),style:{padding:"8px, 12px",width:"100%",height:"100%"},_hooks:{didInsert:this._handlers.didInsert},_key:this._item.id,"data-dhx-id":this._item.id})])])},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onChange:function(){e.endEdit()},onKeyDown:function(t){"Enter"===t.key&&e._item.value===e._input.value&&e.endEdit(),"Escape"===t.key&&(e._input.value=e._item.value,e.endEdit())},didInsert:function(t){var i=t.el;e._input=i,i.focus(),i.value=e._item.value,i.setSelectionRange(0,i.value.length),i.addEventListener("change",e._handlers.onChange),i.addEventListener("blur",e._handlers.onBlur),i.addEventListener("keydown",e._handlers.onKeyDown)}}},e}();t.InputEditor=r},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProDataView=void 0;var a=i(34),s=i(93),l=i(1),c=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;return n.scrollView=new a.ScrollView((function(){return n.getRootView()})),n.paint(),n}return o(t,e),t.prototype.destructor=function(){e.prototype.destructor.call(this),this.scrollView=null},t.prototype.scrollTo=function(e){var t,i,n=this.getRootView();if(n&&n.node&&n.node.el&&void 0!==e){var o=(null===(t=this.scrollView)||void 0===t?void 0:t.config.enable)?null===(i=this.getRootNode())||void 0===i?void 0:i.querySelector(".scroll-view"):this.getRootNode();this._scrollTo(e,o)}},t.prototype._renderList=function(){var e=this,t=this.data.getRawData(0,-1),i=this.config,n=i.itemsInRow,o=i.css,a=i.gap,s=0,c=t.reduce((function(t,i,o){return 0===s&&t.push([]),t[t.length-1].push(e._renderItem(i,o)),s=(s+1)%n,t}),[]),u=c.map((function(e,t){return(0,l.el)(".dhx_dataview-row",{style:{margin:a},"aria-label":"Row ".concat(t+1)},e)})),d=this.scrollView&&this.scrollView.config.enable,h=(o||"")+" dhx_widget dhx_dataview"+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":"")+(d?" dhx_dataview--scroll-view":"");return(0,l.el)("",r(r(r({},this._handlers),{"data-dhx-widget-id":this._uid,class:h,style:{height:this.config.height}}),this.getDataViewAriaAttrs(this.config,this.data.getLength(),c.length,n)),d?[this.scrollView.render(u)]:u)},t}(s.DataView);t.ProDataView=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={simpleVaultText:"Drag & drop files or folders here or",simpleVaultLabel:"browse files"}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TimePicker=void 0;var a=i(53),s=i(1),l=i(0),c=i(15),u=i(10),d=i(3),h=i(5),f=i(7),p=i(21),v=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new d.EventSystem,n._popupIsFocus=!1,n._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsTimepicker=["timeFormat","controls","valueFormat"],n._props=r(r(r([],f.baseProps,!0),n._propsItem,!0),n._propsTimepicker,!0),n._keyManager=new p.KeyManager((function(){var e,t,i,o=document.activeElement;return(null===(i=null===(t=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===o||n._popup.isVisible()})),n._initView(i),n._initHandlers(),n._initHotkeys();return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.timepicker&&this.timepicker.destructor(),this._popup&&this._popup.destructor(),this.events=this._uid=this._propsItem=this._propsTimepicker=this._props=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){var t=this;(0,s.awaitRedraw)().then((function(){if(e&&!(0,l.isEmptyObj)(e)&&t.events.fire(h.ItemEvent.beforeChangeProperties,[t.getProperties()])){for(var i in e)t._props.includes(i)&&(t.config[i]=e[i]);t._initView(t.config),t._initHandlers(),t.events.fire(h.ItemEvent.afterChangeProperties,[t.getProperties()]),t.paint()}}))},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){this.config.hidden&&this.events.fire(h.ItemEvent.beforeShow,[this.getValue("timeObject"===this.config.valueFormat)])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[this.getValue("timeObject"===this.config.valueFormat)]))},t.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[this.getValue("timeObject"===this.config.valueFormat),e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[this.getValue("timeObject"===this.config.valueFormat),e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=this.getValue("timeObject"===this.config.valueFormat)),!e&&!this.events.fire(h.ItemEvent.beforeValidate,[t]))return!1;var i=!!("function"==typeof this.config.validation?this.config.validation(t):(0,f.isTimeFormat)(this.getValue(),this.config.timeFormat));return e||(this.config.$validationStatus=i?h.ValidationStatus.success:h.ValidationStatus.error,this.events.fire(h.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.config.$validationStatus=h.ValidationStatus.pre,this.paint()},t.prototype.setValue=function(e){if(void 0!==e&&e!==this.config.value){if(this.timepicker.setValue(e),this.config.controls){var t=this.getValue(this._isTimeObject());if(!this.events.fire(h.ItemEvent.beforeChange,[t]))return;this.config.value=this.timepicker.getValue(),this.events.fire(h.ItemEvent.change,[t])}(0,f.isVerify)(this.config)&&this.validate(),this.paint()}},t.prototype.getValue=function(e){return e?this.timepicker.getValue(e):this.config.value||""},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e._popup.hide(),e.getRootView().refs.input.el.blur()}))},t.prototype.clear=function(){""!==this.config.value&&this._clear()},t.prototype.getWidget=function(){return this.timepicker},t.prototype._initView=function(e){var t=this;if((0,l.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var i in this.timepicker&&this.timepicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,value:"",disabled:!1,editable:!1,hidden:!1,timeFormat:24,controls:!1,valueFormat:"string",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this._popup=new u.Popup,this.timepicker=new a.Timepicker(null,(0,f.widgetConfig)(e)),this._popup.attach(this.timepicker),this.config.value&&(this.config.value=this.timepicker.getValue()),this.config.hidden&&(0,s.awaitRedraw)().then((function(){t.hide(!0)}))},t.prototype._initHandlers=function(){var e=this;this.config.controls?(this.timepicker.events.on(a.TimepickerEvents.afterClose,(function(){e._popup.hide()})),this.timepicker.events.on(a.TimepickerEvents.afterApply,(function(){e._afterApply(!0)})),this._popup.events.on(u.PopupEvents.afterHide,(function(){e.config.value&&e.config.value!==e.timepicker.getValue()?e.timepicker.setValue(e.config.value):""!==e.config.value&&void 0!==e.config.value||e._clear(!0)}))):(this.timepicker.events.on(a.TimepickerEvents.beforeChange,(function(t){return e.events.fire(h.ItemEvent.beforeChange,[t])})),this.timepicker.events.on(a.TimepickerEvents.change,(function(t){var i=12===e.config.timeFormat?"12:00AM":"00:00",n=e.timepicker.getValue();""===e.config.value&&i===n||e.config.value===n||(e.config.value=e.timepicker.getValue(),e.events.fire(h.ItemEvent.change,[t]),(0,f.isVerify)(e.config)&&e.validate(),e.paint())}))),this._popup.events.on(u.PopupEvents.afterHide,(function(){document.activeElement!==e.getRootView().refs.input.el&&e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint()})),this.events.on(h.ItemEvent.input,(function(t){var i=12===e.config.timeFormat?7:5;t.length>=i&&(0,f.isTimeFormat)(t,e.config.timeFormat)?e.timepicker.setValue(t):""!==t||e.config.controls||e._clear()})),this.events.on(h.ItemEvent.afterChangeProperties,(function(){e.config.value=e.timepicker.getValue(),e.paint()})),this.events.on(h.ItemEvent.blur,(function(){e._popupIsFocus=!1,e.paint()})),document.addEventListener("keydown",(function(t){var i,n,o,r=document.activeElement;((null===(o=null===(n=null===(i=e.getRootView())||void 0===i?void 0:i.refs)||void 0===n?void 0:n.input)||void 0===o?void 0:o.el)===r||e._popup.isVisible())&&e.events.fire(h.ItemEvent.keydown,[t])})),document.addEventListener("mousedown",(function(){e._popup.getContainer()!==document.activeElement&&(e._popupIsFocus=!1)}))},t.prototype._getHandlers=function(){var e=this;return{onfocus:function(){if(!e._popup.isVisible()){var t=e.getRootView().refs.input.el;e._popup.show(t,{theme:t}),e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()}},onblur:function(){e._popup.isVisible()||e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint()},oninput:function(t){var i=t.target.value;e.events.fire(h.ItemEvent.input,[i])}}},t.prototype._initHotkeys=function(){var e=this,t={"shift+tab":function(){e._applyTab()},tab:function(){e._applyTab()},escape:function(){e._popup.isVisible()&&e.getRootView().refs.input.el.focus(),e._popup.hide()},enter:function(t){t.preventDefault();var i=e.getRootView().refs.input.el;e._popup.isVisible()||e._popup.show(i,{theme:i}),e._popupIsFocus&&e.config.controls?e._afterApply(!0):(e._popup.hide(),e.paint())},arrowRight:function(t){var i=e._popup.getContainer();e._popupIsFocus=i.contains(document.activeElement),e._popup.isVisible()&&!e._popupIsFocus&&(t.preventDefault(),i.focus(),e._popupIsFocus=!0)}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t.prototype._draw=function(){var e,t,i,n=this.config,o=n.value,r=n.required,a=n.disabled,l=n.placeholder,c=n.name,u=n.id,d=n.editable,h=n.label,p=n.helpMessage,v=this._popup.isVisible()||(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement;return(0,s.el)("div.dhx_form-group",{class:(0,f.getFormItemCss)(this.config,(0,f.isVerify)(this.config),v)},[this._drawLabel(),(0,s.el)(".dhx_input__wrapper",[(0,s.el)("div.dhx_input__container",{},[(0,s.el)(".dhx_input__icon.dxi.dxi-clock-outline"),(0,s.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":c||u,_key:this._uid,_ref:"input",value:o,type:"text",required:r,disabled:a,class:v&&"dhx_input--focus",placeholder:l||"",name:c||"",id:u||this._uid,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,oninput:this._handlers.oninput,autocomplete:"off",readOnly:!d,"aria-label":h||"".concat(d?"type or":""," select date"),"aria-describedby":p?"dhx_label__help_".concat(u||this._uid):null})]),(0,f.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",{},(0,f.getValidationMessage)(this.config))])])},t.prototype._clear=function(e){(e||this.events.fire(h.ItemEvent.beforeChange,[""]))&&(this.config.value="",this.timepicker.clear(),e||(this.events.fire(h.ItemEvent.change,[""]),(0,f.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")),this.paint())},t.prototype._afterApply=function(e){if(void 0===e&&(e=!1),""!==this.getRootView().refs.input.el.value||e){var t=this.timepicker.getValue(this._isTimeObject());if(!this.events.fire(h.ItemEvent.beforeChange,[t]))return;this.config.value=this.timepicker.getValue(),this.events.fire(h.ItemEvent.change,[t]),(0,f.isVerify)(this.config)&&this.validate()}else this.clear();this._popup.hide(),this.paint()},t.prototype._applyTab=function(){var e,t,i;document.activeElement===(null===(i=null===(t=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.content)||void 0===i?void 0:i.el)||this._popupIsFocus||this._popup.hide()},t.prototype._isTimeObject=function(){var e;return"timeobject"===(null===(e=this.config.valueFormat)||void 0===e?void 0:e.toLowerCase())},t}(c.Label);t.TimePicker=v},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=void 0;var a=i(64),s=i(3),l=i(1),c=i(0),u=i(15),d=i(10),h=i(5),f=i(7),p=i(21),v=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new s.EventSystem,n._popupIsFocus=!1,n._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsColorpicker=["mode","grayShades","customColors","palette"],n._props=r(r(r([],f.baseProps,!0),n._propsItem,!0),n._propsColorpicker,!0),n._keyManager=new p.KeyManager((function(){var e,t,i,o=document.activeElement;return(null===(i=null===(t=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===o||n._popup.isVisible()})),n._initView(i),n._initHandlers(),n._initHotkeys();return n.mount(t,(0,l.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this._popup&&this._popup.destructor(),this.colorpicker&&this.colorpicker.destructor(),this.events=this._uid=this._propsColorpicker=this._propsItem=this._props=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,c.isEmptyObj)(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsColorpicker.includes(t)&&(this.colorpicker.config[t]=e[t]));this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.colorpicker.paint(),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=this.getValue()),!e&&!this.events.fire(h.ItemEvent.beforeValidate,[t]))return!1;var i="function"==typeof this.config.validation?this.config.validation(t):(0,a.isHex)(t);return e||(this.setValidationStatus(i?"success":"error"),this.events.fire(h.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&this.colorpicker.setValue(e)},t.prototype.getValue=function(){return this.colorpicker.getValue()},t.prototype.clear=function(){""!==this.config.value&&this.colorpicker.clear()},t.prototype.getWidget=function(){return this.colorpicker},t.prototype.focus=function(){var e=this;(0,l.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,l.awaitRedraw)().then((function(){e._popup.hide(),e.getRootView().refs.input.el.blur()}))},t.prototype._initView=function(e){var t=this;if((0,c.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var i in this.colorpicker&&this.colorpicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,value:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:a.palette,mode:"palette",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this._popup=new d.Popup,this.colorpicker=new a.Colorpicker(null,(0,f.widgetConfig)(e)),this.colorpicker.setValue(this.config.value),this._popup.attach(this.colorpicker),this.config.hidden&&(0,l.awaitRedraw)().then((function(){t.hide(!0)}))},t.prototype._initHandlers=function(){var e=this;this.colorpicker.events.on(a.ColorpickerEvents.beforeChange,(function(t){return e.events.fire(h.ItemEvent.beforeChange,[t])})),this.colorpicker.events.on(a.ColorpickerEvents.change,(function(t,i){e.config.value=e.colorpicker.getValue(),e.events.fire(h.ItemEvent.change,[e.config.value]),(0,f.isVerify)(e.config)&&("clear"===i?e.setValidationStatus(e.validate(!0)?"success":"error"):e.validate()),e._popup.hide(),e.paint()})),this._popup.events.on(d.PopupEvents.afterHide,(function(){document.activeElement!==e.getRootView().refs.input.el&&e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint()})),this.events.on(h.ItemEvent.blur,(function(){e._popupIsFocus=!1,e.paint()})),document.addEventListener("keydown",(function(t){var i,n,o,r=document.activeElement;((null===(o=null===(n=null===(i=e.getRootView())||void 0===i?void 0:i.refs)||void 0===n?void 0:n.input)||void 0===o?void 0:o.el)===r||e._popup.isVisible())&&e.events.fire(h.ItemEvent.keydown,[t])})),document.addEventListener("mousedown",(function(){e._popup.getContainer()!==document.activeElement&&(e._popupIsFocus=!1)}))},t.prototype._getHandlers=function(){var e=this;return{onblur:function(){e._popup.isVisible()||e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint()},onfocus:function(){if(!e._popup.isVisible()){""!==e.config.value&&e.clearValidate();var t=e.getRootView().refs.input.el;e._popup.show(t,{theme:t}),e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()}},oninput:function(t){var i=t.target.value;e.events.fire(h.ItemEvent.input,[i])},onchange:function(t){var i=t.target.value;e.config.editable&&(0,a.isHex)(i)?e.setValue(i):""===i&&e.clear()}}},t.prototype._initHotkeys=function(){var e=this,t={"shift+tab":function(){e._applyTab()},tab:function(){e._applyTab()},escape:function(){e._popup.isVisible()&&e.getRootView().refs.input.el.focus(),e._popup.hide()},enter:function(t){if(t.preventDefault(),!e._popup.isVisible()){var i=e.getRootView().refs.input.el;e._popup.show(i,{theme:i})}},arrowRight:function(t){var i=e._popup.getContainer();e._popup.isVisible()&&!e._popupIsFocus&&(t.preventDefault(),i.focus(),e._popupIsFocus=!0)},onkeydown:function(t){"Tab"===t.key&&e._popup.hide()}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t.prototype._draw=function(){var e,t,i,n=this.config,o=n.required,r=n.value,a=n.icon,s=n.disabled,c=n.placeholder,u=n.name,d=n.id,h=n.editable,p=n.label,v=n.helpMessage,g=this._popup.isVisible()||(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement;return(0,l.el)("div.dhx_form-group",{class:(0,f.getFormItemCss)(this.config,(0,f.isVerify)(this.config),g)},[this._drawLabel(),(0,l.el)(".dhx_input__wrapper",[(0,l.el)("div.dhx_input__container",{},[(0,l.el)(".dhx_input__icon",{class:a||"dxi dxi-eyedropper-variant"+(r?" dhx_input__icon--color-selected":""),style:{"background-color":r||"transparent"}}),(0,l.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":u||d,_key:this._uid,_ref:"input",value:r,type:"text",required:o,disabled:s,class:g&&"dhx_input--focus",placeholder:c||"",name:u||"",id:d||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,autocomplete:"off",readOnly:!h,"aria-label":p||"".concat(h?"type or":""," select color"),"aria-describedby":v?"dhx_label__help_".concat(d||this._uid):null})]),(0,f.getValidationMessage)(this.config)&&(0,l.el)("span.dhx_input__caption",{},(0,f.getValidationMessage)(this.config))])])},t.prototype._applyTab=function(){var e,t,i;document.activeElement===(null===(i=null===(t=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.content)||void 0===i?void 0:i.el)||this._popupIsFocus||this._popup.hide()},t}(u.Label);t.ColorPicker=v},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Spacer=void 0;var a=i(1),s=i(8),l=i(5),c=i(3),u=i(0),d=i(7),h=function(e){function t(t,i){var n=e.call(this,t,r({disabled:!1,hidden:!1,width:"content",height:"content"},i))||this;n.events=new c.EventSystem,n.config.hidden&&(0,a.awaitRedraw)().then((function(){n.hide(!0)}));return n.mount(t,(0,a.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=null,this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,u.isEmptyObj)(e)&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)d.baseProps.includes(t)&&(this.config[t]=e[t]);this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=d.baseProps;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){this.config.hidden&&this.events.fire(l.ItemEvent.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[]))},t.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(l.ItemEvent.beforeHide,[!!e])||(this.config.hidden=!0,this.events.fire(l.ItemEvent.afterHide,[!!e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype._draw=function(){return(0,a.el)("div")},t}(s.View);t.Spacer=h},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Avatar=void 0;var s=i(1),l=i(0),c=i(3),u=i(15),d=i(5),h=i(7),f=i(90),p=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.events=new c.EventSystem,n._propsItem=["validation","required","readOnly","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","size","circle","alt","icon","placeholder","preview","accept","autosend","params","headerParams","fieldName","target","updateFromResponse","removeIcon"],n._props=a(a([],h.baseProps,!0),n._propsItem,!0),n._isUpload=!1,n._initView(i),n._initHandlers(),n}return o(t,e),t.prototype.send=function(e){var t=this,i=this.config,n=i.target,o=i.value,a=i.updateFromResponse,s=i.headerParams;if(!this._isUpload&&n&&(null==o?void 0:o.file)&&o.status!==f.FileStatus.uploaded&&this.events.fire(d.ItemEvent.beforeUploadFile,[o])){var l=this._createFormData(o,e),c=new XMLHttpRequest;if(this._isUpload=!0,this.config.value=r(r({},o),{status:f.FileStatus.inprogress,request:c}),this.events.fire(d.ItemEvent.uploadBegin,[this.config.value]),this.events.fire(d.ItemEvent.uploadProgress,[0,this.config.value]),c.open("POST",n),s)for(var u in s)c.setRequestHeader(u,s[u]);c.upload.onprogress=function(e){var i=e.loaded/e.total;t.config.value=r(r({},t.config.value),{progress:i}),t.events.fire(d.ItemEvent.uploadProgress,[100*i,t.config.value])},c.onloadend=function(){var e=200===c.status?f.FileStatus.uploaded:f.FileStatus.failed,i=200===c.status&&c.response?JSON.parse(c.response):null;t.config.value=r(r({},t.config.value),{status:e}),e===f.FileStatus.uploaded?(i&&a&&(t.config.value=r(r({},t.config.value),i)),t.events.fire(d.ItemEvent.uploadFile,[t.config.value,i])):t.events.fire(d.ItemEvent.uploadFail,[t.config.value]),t._isUpload=!1,t.events.fire(d.ItemEvent.uploadComplete,[t.config.value])},c.send(l)}},t.prototype.selectFile=function(){var e,t,i;null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i||i.el.click()},t.prototype.setValue=function(e){this._setValue(e),(0,h.isVerify)(this.config)&&this.validate()},t.prototype._setValue=function(e){this.events.fire(d.ItemEvent.beforeChange,[e])&&(this.config.value=!(0,l.isEmptyObj)(e)&&r({id:(0,l.uid)(),status:f.FileStatus.queue,progress:0,path:""},e)||{},this.events.fire(d.ItemEvent.change,[this.getValue()]))},t.prototype.getValue=function(){return this.config.value||{}},t.prototype.clear=function(){this._setValue({}),(0,h.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.show=function(){this.config.hidden&&this.events.fire(d.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(d.ItemEvent.afterShow,[this.getValue()]))},t.prototype.hide=function(e){void 0===e&&(e=!1),this.config.hidden&&!e||!this.events.fire(d.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(d.ItemEvent.afterHide,[this.getValue(),e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.validate=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=this.getValue()),!e&&!this.events.fire(d.ItemEvent.beforeValidate,[t]))return!1;var i=!!("function"==typeof this.config.validation?this.config.validation(t):t.src);return e||(this.setValidationStatus(i?"success":"error"),this.events.fire(d.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(d.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(d.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){var t,i,n;null===(n=null===(i=null===(t=e.getRootView())||void 0===t?void 0:t.refs)||void 0===i?void 0:i.input)||void 0===n||n.el.focus(),e.paint()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){var t,i,n;null===(n=null===(i=null===(t=e.getRootView())||void 0===t?void 0:t.refs)||void 0===i?void 0:i.input)||void 0===n||n.el.blur(),e.paint()}))},t.prototype.destructor=function(){this.events&&this.events.clear(),e.prototype._destructor.call(this),this.unmount()},t.prototype._initView=function(e){this.config=r({size:"medium",labelPosition:"top",width:"content",height:"content",accept:"image/*",fieldName:"file",target:"",alt:"",css:"",label:"",errorMessage:"",successMessage:"",helpMessage:"",icon:"",labelWidth:"",placeholder:"",preMessage:"",removeIcon:!0,circle:!1,readOnly:!1,hiddenLabel:!1,autosend:!1,updateFromResponse:!0},e),this.paint()},t.prototype._initHandlers=function(){var e=this;this._handlers=r({change:function(t){var i,n,o=null===(n=null===(i=t.target)||void 0===i?void 0:i.files)||void 0===n?void 0:n[0];if(!e.config.readOnly&&o){var r=URL.createObjectURL(o);e.setValue({file:o,src:r}),e.config.autosend&&e.validate(!0)&&e.send()}},drop:function(t){var i,n;t.preventDefault();var o=null===(n=null===(i=t.dataTransfer)||void 0===i?void 0:i.files)||void 0===n?void 0:n[0];if(!e.config.readOnly&&o){var r=URL.createObjectURL(o);e._dragover=!1,e.setValue({file:o,src:r}),e.config.autosend&&e.validate(!0)&&e.send()}},dragover:function(t){if(t.preventDefault(),!e.config.readOnly){for(var i=0,n=t.dataTransfer.types;i<n.length;i++){var o=n[i];if("Files"!==o&&"application/x-moz-file"!==o)return}e._dragoverTimeout?clearTimeout(e._dragoverTimeout):e.paint(),e._dragover=!0,e._dragoverTimeout=setTimeout((function(){e._dragover=!1,e._dragoverTimeout=null,e.paint()}),150)}},onfocus:function(){return e.events.fire(d.ItemEvent.focus,[e.getValue()])},onblur:function(){return e.events.fire(d.ItemEvent.blur,[e.getValue()])},onkeydown:function(t){return e.events.fire(d.ItemEvent.keydown,[t])}},this._handlers),this.events.on(d.ItemEvent.change,(function(){return e.paint()}))},t.prototype._draw=function(){var e=this.config,t=e.hidden,i=e.alt,n=e.circle,o=e.size,r=e.label,a=e.value,l=e.readOnly,c=t?" dhx_form-group--hidden":"",u="",d={};return this._dragover&&(u+="dhx_avatar--on-drag "),n&&(u+="dhx_avatar--circle "),o&&"string"!=typeof o?d.width=d.height=o:o&&["small","medium","large"].includes(o)?u+="dhx_avatar-size--".concat(o," "):u+="dhx_avatar-size--medium ",(0,s.el)("div.dhx_form-group.dhx_form-group--avatar",{"aria-label":i||r,role:"img",class:(0,h.getFormItemCss)(this.config,(0,h.isVerify)(this.config),!1)+c},[this._drawLabel(),(0,s.el)("div.dhx_avatar",{class:u,style:d,ondragover:this._handlers.dragover,ondrop:this._handlers.drop},[(null==a?void 0:a.src)?this._drawImage(this.config):this._drawPreview(this.config),!l&&this._drawCover(this.config)]),(0,h.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,h.getValidationMessage)(this.config))])},t.prototype._drawImage=function(e){var t=e.alt,i=e.value;return(0,s.el)("img.dhx_avatar__image",{src:null==i?void 0:i.src,alt:t})},t.prototype._drawPreview=function(e){var t=e.icon,i=e.placeholder,n=e.preview;return(0,s.el)("div.dhx_avatar__preview",{style:r({},n&&{"background-image":"url(".concat(n)}||{})},[n?null:[t&&(0,s.el)("div.dhx_avatar__preview-icon",{class:t}),i&&(0,s.el)("div.dhx_avatar__preview-placeholder",{"aria-placeholder":i},i)]])},t.prototype._drawCover=function(e){var t=this,i=e.accept,n=e.id,o=e.value,r=e.removeIcon;return(0,s.el)("div.dhx_avatar__cover",[(0,s.el)("label.dhx_avatar__cover-upload",[(0,s.el)("input.dhx_avatar__cover-input",{_ref:"input",id:n,accept:i,type:"file",onchange:this._handlers.change,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown}),(0,s.el)("i.dhx_avatar__cover-icon.dxi.dxi-vault")]),(null==o?void 0:o.src)&&r&&(0,s.el)("div.dhx_avatar__cover-remove",{onclick:function(){return t.clear()}},[(0,s.el)("i.dhx_avatar__cover-icon.dxi.dxi-delete-forever")])])},t.prototype._createFormData=function(e,t){var i=this.config.fieldName,n=this.config.params,o=new FormData;if(t)for(var r in t)o.append(r,t[r]);if(n)for(var r in n)o.append(r,n[r]);return o.append(i,e.file,e.file.name),o.append(i+"_fullname",e.path+e.file.name),o.append(i+"_id",e.id),o},t}(u.Label);t.Avatar=p},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Fieldset=void 0;var r=i(3),a=i(5),s=i(7),l=i(0),c=i(1),u=function(){function e(e){var t=this;this.events=new r.EventSystem,this.attachments=[],this.propsItem=["label","labelAlignment","align"],this.props=o(o([],s.baseProps,!0),this.propsItem,!0),this.config=n({disabled:!1,hidden:!1,width:"content",height:"content",labelAlignment:"left",label:"",css:""},e),(0,c.awaitRedraw)().then((function(){var e,i;t.config.hidden&&t.hide(!0),t.config.disabled&&t.disable(),null===(e=t.cell)||void 0===e||e.events.on("afterShow",(function(){t.config.hidden=!1})),null===(i=t.cell)||void 0===i||i.events.on("afterHide",(function(){t.config.hidden=!0}))}))}return e.prototype.forEach=function(e,t){void 0===t&&(t=!1);for(var i=t?this.getTreeAttachments(this.getAttachments()):this.attachments,n=0;n<i.length;n++)e.call(this,i[n],n,i)},e.prototype.disable=function(){this.forEach((function(e){return"function"==typeof e.disable&&e.disable()})),this.config.disabled=this.cell.config.$disabled=!0,this.cell.paint()},e.prototype.enable=function(){var e;this.config.disabled=this.cell.config.$disabled=!1,this.attachments.every((function(e){return e.isDisabled()}))&&this.forEach((function(e){return"function"==typeof e.enable&&e.enable()})),(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.cell.paint()},e.prototype.isDisabled=function(){return!!this.config.disabled},e.prototype.show=function(){this.config.hidden&&(this.forEach((function(e){return"function"==typeof e.hide&&e.show()})),this.config.hidden=!1,this.cell.show())},e.prototype.hide=function(e){void 0===e&&(e=!1),this.config.hidden&&!e||(this.forEach((function(t){"function"==typeof t.hide&&("checkboxgroup"===t.config.type||"radiogroup"===t.config.type?t.hide(void 0,e):t.hide(e))})),this.config.hidden=!0,this.cell.hide())},e.prototype.isVisible=function(){return!this.config.hidden},e.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(a.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this.props.includes(t)&&(this.config[t]=e[t]);this.events.fire(a.ItemEvent.afterChangeProperties,[this.getProperties()])}},e.prototype.getProperties=function(){for(var e={},t=0,i=this.props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},e.prototype.destructor=function(){this.cell.hide(),this.events.clear(),this.attachments=[]},e.prototype.setCell=function(e){this.cell=e},e.prototype.getCell=function(){return this.cell},e.prototype.setAttachments=function(e){this.attachments=e},e.prototype.getAttachments=function(){return this.attachments},e.prototype.getTreeAttachments=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];t.push(n),"fieldset"===n.config.type&&t.push.apply(t,n.getTreeAttachments(n.getAttachments()))}return t},e}();t.Fieldset=u},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleGroup=void 0;var s=i(5),l=i(95),c=i(8),u=i(1),d=i(7),h=i(3),f=i(0),p=function(e){function t(t,i){var n=e.call(this,t,r({full:!1,multiselect:!1,disabled:!1,hidden:!1,width:"content",height:"content",gap:0,css:"",padding:"",items:[]},i))||this;n.events=new h.EventSystem,n.items=[],n.props=a(a([],d.baseProps,!0),["options","full","gap","multiselect"],!1),n.initView(),n.initHandlers(),n.config.hidden&&(0,u.awaitRedraw)().then((function(){console.log("hidden"),n.hide(void 0,!0)}));return n.mount(t,(0,u.create)({render:function(){return n.draw()}})),n}return o(t,e),t.prototype.setValue=function(e){var t;void 0===e&&(e={});var i=this.getValue(),n=Object.entries(e).every((function(e){var t=e[0];return!!e[1]==!!i[t]}));if(!n){if(!this.config.multiselection)for(var o=Object.entries(e).find((function(e){e[0];return e[1]})),a=this.getValue(),l=0,c=Object.entries(a);l<c.length;l++){var u=c[l],d=u[0],h=u[1],f=h;"string"==typeof h&&(f=""),"number"==typeof h&&(f=0),"boolean"==typeof h&&(f=!1),e[d]=o&&o[0]===d?o[1]:f}if(!this.events.fire(s.ItemEvent.beforeChange,[r(r({},this.getValue()),e)]))return!1;for(var p=function(e,i){null===(t=v.items.find((function(t){return t.config.id===e})))||void 0===t||t.setValue(!!i,!0)},v=this,g=0,_=Object.entries(e);g<_.length;g++){var m=_[g];p(m[0],m[1])}this.events.fire(s.ItemEvent.change,[this.getValue()])}},t.prototype.getValue=function(e){if(e){var t=this.items.find((function(t){return t.config.id===e}));if(t)return t.getValue()}var i={};return this.items.forEach((function(e){i[e.config.id]=e.getValue()})),i},t.prototype.isSelected=function(e){if(e){var t=this.items.find((function(t){return t.config.id===e}));if(t)return t.isSelected()}var i={};return this.items.forEach((function(e){i[e.config.id]=e.isSelected()})),i},t.prototype.show=function(e){var t=e&&this.items.find((function(t){return t.config.id===e}));t&&!t.config.hidden||!this.events.fire(s.ItemEvent.beforeShow,[this.getValue(),e])||(t?t.show():this.items.forEach((function(e){return e.show()})),this.config.hidden=!1,this.checkVisibleOrder(!!t),this.events.fire(s.ItemEvent.afterShow,[this.getValue(),e]))},t.prototype.hide=function(e,t){var i=e&&this.items.find((function(t){return t.config.id===e}));this.config.hidden&&!t||i&&i.config.hidden||!this.events.fire(s.ItemEvent.beforeHide,[this.getValue(),e,t])||(i?(i.hide(),this.config.hidden=this.items.every((function(e){return e.config.hidden}))):(this.items.forEach((function(e){return e.hide()})),this.config.hidden=!0),this.checkVisibleOrder(!!i),this.events.fire(s.ItemEvent.afterHide,[this.getValue(),e,t]))},t.prototype.isVisible=function(e){var t=this.items.find((function(t){return t.config.id===e}));return t?t.isVisible():!this.config.hidden},t.prototype.focus=function(e){var t=this;(0,u.awaitRedraw)().then((function(){var i=t.items.find((function(t){return t.config.id===e}))||t.items[0];i&&i.focus()}))},t.prototype.blur=function(){var e=this;(0,u.awaitRedraw)().then((function(){e.items.forEach((function(e){return e.blur()}))}))},t.prototype.disable=function(e){var t=e&&this.items.find((function(t){return t.config.id===e}));this.config.disabled||t&&t.config.disabled||(t?(t.disable(),this.config.disabled=this.items.every((function(e){return e.config.disabled}))):(this.items.forEach((function(e){return e.disable()})),this.config.disabled=!0),this.paint())},t.prototype.enable=function(e){var t,i=e&&this.items.find((function(t){return t.config.id===e}));!i&&!this.config.disabled||i&&!i.config.disabled||(i?null==i||i.enable():this.items.forEach((function(e){return e.enable()})),this.config.disabled=!1,(null===(t=this.parent)||void 0===t?void 0:t.isDisabled())&&this.parent.enable(),this.paint())},t.prototype.isDisabled=function(e){var t=this.items.find((function(t){return t.config.id===e}));return t?t.isDisabled():!!this.config.disabled},t.prototype.setProperties=function(e,t){var i=this.items.find((function(e){return e.config.id===t}));if(e&&!(0,f.isEmptyObj)(e)&&this.events.fire(s.ItemEvent.beforeChangeProperties,[r(r({},i?i.getProperties():this.getProperties()),e)])){if(i)i.setProperties(e);else for(var n in e)this.props.includes(n)&&(this.config[n]=e[n]);this.events.fire(s.ItemEvent.afterChangeProperties,[i?i.getProperties():this.getProperties()])}},t.prototype.getProperties=function(e){if(e){var t=this.items.find((function(t){return t.config.id===e}));if(t)return t.getProperties()}for(var i={},n=0,o=this.props;n<o.length;n++){var r=o[n];i[r]=this.config[r]}return i},t.prototype.destructor=function(){this.events.clear(),this.unmount()},t.prototype.initView=function(){var e,t=this;if(!(null===(e=this.config.options)||void 0===e?void 0:e.length))throw new Error("Check the configuration is correct");this.items=this.config.options.map((function(e,i){return e.id||(e.id=e.name||(0,f.uid)()),t.config.gap&&(e.$gap=i&&t.config.gap),new l.ToggleButton(null,r(r({},e),{$group:!0}))})),this.config.value&&this.setValue(this.config.value),this.checkVisibleOrder()},t.prototype.initHandlers=function(){var e=this;this.items.forEach((function(t){t.events.on(s.ItemEvent.keydown,(function(i){e.events.fire(s.ItemEvent.keydown,[i,t.config.id])})),t.events.on(s.ItemEvent.focus,(function(){e.events.fire(s.ItemEvent.focus,[e.getValue(),t.config.id])})),t.events.on(s.ItemEvent.blur,(function(){e.events.fire(s.ItemEvent.blur,[e.getValue(),t.config.id])})),t.events.on(s.ItemEvent.beforeChange,(function(i){var n;return"string"==typeof t.config.value&&(i=i?t.config.value:""),"number"==typeof t.config.value&&(i=i?t.config.value:0),e.setValue(((n={})[t.config.id]=i,n))}))}))},t.prototype.draw=function(){var e=this.config,t=e.hidden,i=e.id,n=e.name,o=e.full,r=e.gap,a=this.items.map((function(e){return(0,u.inject)(e.getRootView())}));return(0,u.el)("div.dhx_form-group.dhx_form-group--toggle-group.dhx_toggle-group",{"data-dhx-id":n||i,"aria-label":n||i,role:"group",class:(t?"dhx_form-group--hidden ":"")+(o?"dhx_toggle-group--full ":"")+(r?"dhx_toggle-group--segmented ":"")+(0,d.getFormItemCss)(this.config)},[a])},t.prototype.checkVisibleOrder=function(e){var t=this.items.map((function(e){return delete e.config.$extraCss,e})).filter((function(e){return!e.config.hidden}));if(t.length){var i=this.items.findIndex((function(e){return e.config.id===t[0].config.id})),n=this.items.findIndex((function(e){return e.config.id===t[t.length-1].config.id}));this.items[i].config.$extraCss="dhx_toggle--first ",this.items[n].config.$extraCss=this.items[n].config.$extraCss?this.items[n].config.$extraCss+"dhx_toggle--last ":"dhx_toggle--last "}e&&this.items.forEach((function(e){return e.paint()}))},t}(c.View);t.ToggleGroup=p},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProForm=void 0;var r=i(88),a=i(5),s=i(17),l=i(252),c=i(7),u=function(e){function t(t,i){return e.call(this,t,i)||this}return o(t,e),t.prototype._initItemHandlers=function(t,i){var n=this;if(e.prototype._initItemHandlers.call(this,t,i),"container"===t.type){var o=this._attachments[i]=new l.Container(null,t);o.events.on(a.ItemEvent.beforeChangeProperties,(function(e){return n.events.fire(a.FormEvents.beforeChangeProperties,[i,e])})),o.events.on(a.ItemEvent.afterChangeProperties,(function(e){n._changeProps(i,e),n.events.fire(a.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()})),o.events.on(a.ItemEvent.beforeHide,(function(e){if(!e)return n.events.fire(a.FormEvents.beforeHide,[i])})),o.events.on(a.ItemEvent.beforeShow,(function(){return n.events.fire(a.FormEvents.beforeShow,[i])})),o.events.on(a.ItemEvent.afterHide,(function(e){n.layout.getCell(i).hide(),!e&&n.events.fire(a.FormEvents.afterHide,[i])})),o.events.on(a.ItemEvent.afterShow,(function(){n.layout.getCell(i).show(),n.events.fire(a.FormEvents.afterShow,[i])}))}},t.prototype._initUI=function(e){var t=this._attachments={},i={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,i),this.layout=new s.ProLayout(e,i),(0,c.setAttacments)(t,this.layout)},t}(r.Form);t.ProForm=u},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var s=i(1),l=i(15),c=i(5),u=i(3),d=i(0),h=i(17),f=i(7),p=function(e){function t(t,i){var n=e.call(this,t,r({disabled:!1,hidden:!1,width:"content",height:"content",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:""},i))||this;if(n.events=new u.EventSystem,n._props=a(a([],f.baseProps,!0),["label","labelWidth","labelPosition","hiddenLabel","helpMessage"],!1),(0,d.isEmptyObj)(i))throw new Error("Check the configuration is correct");n.container&&n.container.destructor();var o={};for(var l in i)"id"!==l&&"type"!==l&&"name"!==l&&"width"!==l&&"height"!==l&&(n.config[l]=i[l],"validation"!==l&&(o[l]=i[l]));n.container=new h.Layout(null,{rows:[o]}),o.html&&n.container.attachHTML(o.html),n.config.hidden&&(0,s.awaitRedraw)().then((function(){n.hide(!0)})),n.paint();return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.attach=function(e){this.container.attach(e)},t.prototype.attachHTML=function(e){this.container.attachHTML(e)},t.prototype.show=function(){this.config.hidden&&this.events.fire(c.ItemEvent.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[]))},t.prototype.hide=function(e){void 0===e&&(e=!1),this.config.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.setProperties=function(e){if(e&&!(0,d.isEmptyObj)(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype._getRootView=function(){return this.container.getRootView()},t.prototype._draw=function(){var e=this.config,t=e.name,i=e.id;return(0,s.el)(".dhx_form-group.dhx_form-group--container",{class:(0,f.getFormItemCss)(this.config),"data-dhx-id":t||i},[this._drawLabel(),(0,s.inject)(this._getRootView())])},t}(l.Label);t.Container=p},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SearchForm=void 0;var o=i(44),r=i(32),a=i(6),s=i(23),l=i(0),c=i(2),u=i(1),d=i(43),h=i(12),f=function(){function e(e){this._events=e.events,this._spreadsheet=e,this._grid=e._grid,this._selection=e.selection,this._modal=new o.Window({css:"dhx-spreadsheet-form-search-modal",height:56,left:window.innerWidth-385,viewportOverflow:!0,top:0,width:405}),this._toolbar=new r.Toolbar(null,{data:[{type:"input",value:"",placeholder:"Search",icon:"dxi dxi-magnify",id:"search",css:"search-input",width:200},{type:"title",value:"",id:"results"},{icon:"dxi dxi-chevron-up",id:"prev"},{icon:"dxi dxi-chevron-down",id:"next"},{type:"separator"},{icon:"dxi dxi-close",id:"close"}],css:"dhx-spreadsheet-form-search-form"}),this._modal.attach(this._toolbar),this._initHandlers()}return e.prototype.hide=function(){this._modal.isVisible()&&(this._modal.hide(),this._selection._removeSearchCell())},e.prototype.research=function(e){e!==this._page&&(this._page=e),this._data=this._page.serialize().map((function(e){var t=e[0],i=e[1],o=e[2],r=o.value,a=o.format;return[t,i,n(n({},o),{value:(0,h.getFormattedValue)(r,a)})]})),this.search(this._searchText)},e.prototype.show=function(e){this.research(e),this._modal.show(),this._toolbar.setState({search:""}),this._toolbar.disable(["next","prev"])},e.prototype.isVisible=function(){return this._modal.isVisible()},e.prototype.search=function(e,t){var i=this;t&&this._page!==t&&this.research(t),this._toolbar.getState().search!==e&&(this._searchText=e,this._toolbar.setState({search:e})),this._filtered=[],e&&(this._filtered=this._data.filter((function(t){var n=t[0],o=(t[1],t[2].value);return!i._grid.isRowHidden(n+1)&&(!e||(0,l.isDefined)(o)&&"".concat(o).toLowerCase().includes(e.toLowerCase()))})));var n=this._filtered.map((function(e){return(0,c.getCellNameById)(i._spreadsheet._grid,e[0]+1,e[1]+1)}));return this._modal.isVisible()?(n.length?this._selection._setSearchedArray(n):this._selection._removeSearchCell(),this._stepIndex=0,this.next(),e?this._toolbar.enable(["next","prev"]):(this._toolbar.disable(["next","prev"]),this._selection._removeSearchCell()),n):n},e.prototype.next=function(){var e=this._filtered.length;this._toolbar.data.update("results",{value:"".concat(e?this._stepIndex+1:0,"/").concat(e)}),this._updateWindowPos(),e&&(this._stepIndex++,this._stepIndex>=e&&(this._stepIndex=0),this._selection._setSearchCell(this._stepIndex))},e.prototype.prev=function(){var e=this._filtered.length;this._toolbar.data.update("results",{value:"".concat(e?this._stepIndex+1:0,"/").concat(e)}),this._updateWindowPos(),e&&(this._stepIndex--,this._stepIndex<0&&(this._stepIndex=e-1),this._toolbar.data.update("results",{value:"".concat(this._stepIndex+1,"/").concat(e)}),this._selection._setSearchCell(this._stepIndex))},e.prototype.destructor=function(){document.removeEventListener("keydown",this._keyHandler)},e.prototype._updateWindowPos=function(){var e=this;(0,u.awaitRedraw)().then((function(){var t=e._modal.getSize();e._modal.setPosition(window.innerWidth-t.width-1,0)}))},e.prototype._keyHandler=function(e){if("Escape"===e.code&&(e.preventDefault(),this.hide()),"KeyG"===e.code){var t=e.ctrlKey||e.metaKey;t&&!e.shiftKey&&(e.preventDefault(),this.next()),t&&e.shiftKey&&(e.preventDefault(),this.prev())}},e.prototype._initHandlers=function(){var e=this;this._toolbar.events.on(s.NavigationBarEvents.click,(function(t){switch(t){case"prev":e.prev();break;case"close":e.hide();break;case"next":e.next()}})),this._toolbar.events.on(s.NavigationBarEvents.input,(function(t,i){e._searchText=i,e.search(i)})),this._modal.events.on(d.WindowEvents.afterShow,(function(){(0,u.awaitRedraw)().then((function(){var t=e._toolbar.getRootNode().querySelector("input");null==t||t.focus(),null==t||t.setAttribute("autocomplete","off"),e._toolbar.select("search")}))})),document.addEventListener("keydown",this._keyHandler.bind(this)),this._events.on(a.SpreadsheetEvents.afterSheetChange,(function(){e.isVisible()&&e.research(e._spreadsheet._activePage)})),this._events.on(a.SpreadsheetEvents.afterAction,(function(){e.isVisible()&&e.research(e._spreadsheet._activePage)}))},e}();t.SearchForm=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkForm=void 0;var n=i(59),o=i(44),r=i(11),a=i(10),s=i(6),l=i(32),c=i(2),u=i(23),d=i(14),h=i(1),f=i(96),p=function(){function e(e,t,i){this._set=t,this._events=i,this._grid=e,this._modal=new o.Window({title:"".concat(r.default.insert," ").concat(r.default.link.toLowerCase()),movable:!0,closable:!0,css:"dhx-spreadsheet-form-link",height:300,width:300}),this._form=new n.Form("",{padding:15,rows:[{name:"text",type:"input",label:r.default.text,labelPosition:"top",width:270,placeholder:r.default.text},{name:"href",type:"input",label:r.default.link,labelPosition:"top",width:270,placeholder:r.default.link},{align:"end",css:"dhx-button-wrapper",cols:[{type:"button",text:r.default.cancel,id:"cancel",view:"link"},{type:"button",text:r.default.save,id:"save"}]}]}),this._popup=new a.Popup({css:"dhx-spreadsheet-form-link dhx_editor-popup"}),this._toolbar=new l.Toolbar(void 0,{css:"dhx_link-toolbar",data:[{type:"customHTML",html:"",css:"dhx_spreadsheet_link href-link",id:"link"},{icon:"dxi dxi-file-outline",tooltip:r.default.copy.toLowerCase(),circle:!0,id:"copy"},{icon:"dxi dxi-pencil",tooltip:r.default.edit.toLowerCase(),circle:!0,id:"edit"},{icon:"dxi dxi-link-variant-off",tooltip:"".concat(r.default.remove," ").concat(r.default.link).toLowerCase(),circle:!0,id:"unlink"}]}),this._modal.attach(this._form),this._popup.attach(this._toolbar),this._initHandlers()}return e.prototype.hide=function(){this._modal.isVisible()&&this._modal.hide(),this._form.setValue({text:"",href:""}),this._debounds=!1,this._events.fire(s.SpreadsheetEvents.afterPopupHide)},e.prototype.isVisible=function(){return this._modal.isVisible()},e.prototype.destructor=function(){this._form.destructor(),this._modal.destructor(),this._popup.destructor(),this._toolbar.destructor()},e.prototype.show=function(e,t){var i=this;this._modal.isVisible()||this._modal.show(),this._cell=e;var n=t.value,o=t.link||{},r=o.href,a=o.text,s=!r&&(0,c.isURL)(n)?n:r;this._form.setValue({text:a||n,href:s}),this.toogleSaveButton((null==s?void 0:s.toString())||""),(0,h.awaitRedraw)().then((function(){i.hideInfo()}))},e.prototype.showInfo=function(e,t){if(!this._popup.isVisible()){this._cell=e,this._cellMeta=t;var i=t.link,n=t.value,o=t.locked,r=void 0!==o&&o,a=null==i?void 0:i.href;if(!a)a="".concat(n).split(" ").find((function(e){return(0,c.isURL)(e)}));this.toogleLocked(r),a&&(this._toolbarLink=a,this._toolbar.data.update("link",{html:'<a href="'.concat(a,'" target="blank">').concat(a,"</a>")}),this._popup.show((0,c.getCellNode)(e,this._grid,!0)))}},e.prototype.hideInfo=function(){this._popup.isVisible()&&(this._popup.hide(),this._toolbarLink=null,this._cellMeta=null,this._events.fire(s.SpreadsheetEvents.afterPopupHide))},e.prototype._keyHandler=function(e){var t=this;"Escape"===e.code&&(e.preventDefault(),this.hide()),"Enter"===e.code&&(e.preventDefault(),this._form.blur("href"),this._form.blur("text"),this._debounds||(this._debounds=setTimeout((function(){t._save(),t._debounds=!1}),200)))},e.prototype._save=function(){var e=this._form.getValue(),t=e.text,i=e.href;(i=f.sanitize(i)).startsWith("http")||(i="http://".concat(i),this._form.setValue({href:i})),this._form.validate()?(this._set(this._cell,i?{text:t,href:i}:void 0),this.hide()):this._form.setFocus("href")},e.prototype.toogleSaveButton=function(e){var t=this._form.getItem("save");e?t.enable():t.disable()},e.prototype.toogleLocked=function(e){e?this._toolbar.disable(["edit","unlink"]):this._toolbar.enable(["edit","unlink"])},e.prototype._initHandlers=function(){var e=this;this._modal.events.on(a.PopupEvents.afterShow,(function(){e._form.setFocus("href")})),this._form.events.on(n.FormEvents.click,(function(t){if("save"===t)e._save();else e.hide()})),this._form.events.on("keydown",function(e){this._keyHandler(e)}.bind(this)),this._form.getItem("href").events.on("input",(function(t){e.toogleSaveButton(t)})),this._toolbar.events.on(u.NavigationBarEvents.click,(function(t){switch(t){case"copy":window.clipboardData?window.clipboardData.setData("text/plain",e._toolbarLink):navigator.clipboard.writeText(e._toolbarLink),(0,d.message)({text:r.default.linkCopied,css:"dhx_message--success",expire:2e3});break;case"edit":e.show(e._cell,e._cellMeta);break;case"unlink":e._set(e._cell)}e.hideInfo()}))},e}();t.LinkForm=p},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.FilterForm=void 0;var r=i(59),a=i(6),s=i(11),l=i(10),c=i(2),u=i(4),d=i(28),h=i(0),f=i(12),p=i(1),v=function(){function e(e,t){this._grid=e,this._set=t,this._popup=new l.Popup({css:"dhx_editor-popup dhx_filter-popup"})}return e.prototype.hide=function(){var e=this;this._popup.isVisible()&&(this._popup.hide(),(0,p.awaitRedraw)().then((function(){return e._form.destructor()})))},e.prototype.show=function(e,t,i,r){var a=this,s=(0,u.locateNode)(t,"data-dhx-col-id");this._initForm();var l=i.cell,f=i.rules,p=(0,c.getCellIds)(l,this._grid),v=p.start,g=p.end,_=(0,c.getCellIds)(e,this._grid),m=_.row,y=_.col;this._filter=n(n({},i),{rules:o([],i.rules,!0)}),this._ruleIndex=y-v.col;var b=f[this._ruleIndex],w=m+1,x=r.getCellRange(w,y,g.row,y).map((function(e,t){e=e||{};var i=(0,h.isDefined)(e.value)?(0,c.getCellNameByIndex)(w+t,y+1,a._grid):"empty";return n(n({},e),{id:i})})),C={};this._hidden=[],this._data=[];var E=[],S=b.condition,I=b.exclude;x.forEach((function(e,t){var i=t+w,o=a._grid.isRowHidden(i+1),r=e||{id:"empty"},s=r.value,l=r.id,c=r.format,u=(0,h.isDefined)(I)&&(null==I?void 0:I.find((function(e){return(null==c?void 0:c.id)&&(e="object"==typeof e?(0,d.getExcelDateFromJs)(e):(0,d.getExcelDateFromString)(e,c)),e===s})));if(o&&!u||E.includes(s))s&&a._hidden.push(e);else{var f=!u;E.push(s),C[l]=f,a._data.push(n(n({},e),{checked:f}))}})),this._setCheckboxes();var k=this._controls,M=k.input,O=k.condition,A=k.checkboxes,D=k.search;if(A.setValue(C),this._checkboxesState=A.getValue(),M.hide(),M.setValue(""),D.setValue(""),null==S?void 0:S.factor){var P=S.factor,F=S.value;this._updateStateByCondition(P,F)}else O.setValue("1"),M.hide();this._popup.show(s),this._initValue=this._form.getValue()},e.prototype.apply=function(){var e,t=this,i=this._form.getValue(),n=i.condition,o=i.value,r=i.max,s=[];Object.values(this._checkboxesState).findIndex((function(e){return!e}))>-1&&Object.keys(this._checkboxesState).forEach((function(e){if(!t._checkboxesState[e]){var i=t._data.find((function(t){return t.id==e})).value;s.push((0,h.isDefined)(i)?i:null)}}));var l=o;if(1!==n){switch(n){case a.FilterConditions.tdc:o||(l=null);break;case a.FilterConditions.d:case a.FilterConditions.da:case a.FilterConditions.db:var c=this._controls.datepicker.getValue(!0);c&&(l=(0,d.getExcelDateFromJs)(c));break;case a.FilterConditions.ib:case a.FilterConditions.inb:"number"==typeof o&&"number"==typeof r&&(l=[Math.min(o,r),Math.max(o,r)]);break;case a.FilterConditions.e:case a.FilterConditions.ne:l=!0;break;default:l=o}(0,h.isDefined)(l)&&(e={factor:n,value:l})}(0,h.compare)(this._initValue,i)||(this._filter.rules[this._ruleIndex]={condition:e,exclude:s},this._set(this._filter.cell,this._filter.rules)),this.hide()},e.prototype._initForm=function(){this._form=new r.Form("",{css:"dhx_spreadsheet_filter-popup",rows:[{name:"condition",type:"combo",label:"".concat(s.default.condition,":"),labelPosition:"top",readonly:!0,height:70,data:o([{value:s.default.none,id:1}],Object.keys(a.FilterConditions).map((function(e){return{value:s.default[e],id:e}})),!0)},{name:"value",type:"input",placeholder:s.default.value,height:32},{name:"date",type:"datepicker",placeholder:s.default.date,height:32},{type:"text",name:"and",value:s.default.and,height:32},{name:"max",type:"input",inputType:"number",height:32,placeholder:s.default.value},{type:"spacer",height:10},{type:"text",css:"dhx-filter-label",height:32,value:"".concat(s.default.values,":")},{type:"button",name:"unselect",view:"flat",full:!0,css:"filter-unselect",text:s.default.unselectAll},{type:"button",name:"select",view:"flat",full:!0,hidden:!0,text:s.default.selectAll},{type:"spacer",height:5},{type:"input",name:"search",height:50,icon:"dxi dxi-magnify",autocomplite:!0},{css:"dhx-filter-checkbox-group",rows:[{name:"checkboxes",type:"checkboxGroup",options:{rows:[]}}]},{type:"spacer",height:15},{css:"buttons-wrapper",cols:[{name:"cancel",type:"button",view:"link",text:s.default.cancel},{name:"apply",type:"button",view:"flat",text:s.default.apply}]}]});var e=this._form.getItem("select"),t=this._form.getItem("unselect"),i=this._form.getItem("checkboxes"),n=this._form.getItem("condition"),l=this._form.getItem("value"),c=this._form.getItem("search"),u=this._form.getItem("date");this._controls={unselect:t,select:e,checkboxes:i,condition:n,input:l,search:c,datepicker:u},this._checkboxesState={},this._popup.attach(this._form),this._initHandlers()},e.prototype._updateStateByCondition=function(e,t){var i=this._controls,n=i.input,o=i.condition,r=i.datepicker;o.setValue(e);var s=this._form.getItem("max"),l=this._form.getItem("and");switch(s.hide(),l.hide(),r.hide(),n.setValue(t),e){case a.FilterConditions.d:case a.FilterConditions.da:case a.FilterConditions.db:r.show(),r.setValue((0,h.isNumeric)(t)?(0,d.excelDateToJSDate)(t):""),n.hide();break;case a.FilterConditions.e:case a.FilterConditions.ne:n.hide();break;case a.FilterConditions.tc:case a.FilterConditions.tdc:case a.FilterConditions.ts:case a.FilterConditions.te:case a.FilterConditions.tex:n.setProperties({inputType:"text"}),n.setValue(t),n.show();break;case a.FilterConditions.ib:case a.FilterConditions.inb:l.show(),s.setValue(null==t?void 0:t[1]),s.show();case a.FilterConditions.gt:case a.FilterConditions.geq:case a.FilterConditions.lt:case a.FilterConditions.leq:case a.FilterConditions.eq:case a.FilterConditions.neq:n.setProperties({inputType:"number"}),n.setValue(t instanceof Array?t[0]:t),n.show();break;default:n.hide()}},e.prototype.applyFilter=function(e){var t=this,i=e.getMeta().filter;if(this._grid.data.getInitialData().forEach((function(e){var i=e.id;t._grid.isRowHidden(i)&&t._showRow(i)})),!i)return this._grid.paint(),void this._updateGridData();for(var o=i.cell,r=i.rules,s=(0,c.getCellIds)(o,this._grid),l=s.start,u=s.end,p=0,v=u.col,g=u.row,_=l.row+1,m=function(i){var o=r[p],s=o.exclude,l=o.condition;p++;var c=e.getCellRange(_,i,g,i).map((function(e,t){var i=t+_+1;return n(n({},e),{rowId:i})}));if(s&&(c=c.filter((function(e,i){var o=n(n({},e),{value:(0,h.isDefined)(null==e?void 0:e.value)?e.value:null}),r=o.format,a=s.find((function(e){return"date"===(null==r?void 0:r.id)&&(e="object"==typeof e?(0,d.getExcelDateFromJs)(e):(0,d.getExcelDateFromString)(e,r)),o.value===e})),l=i+_+1;return a&&!t._grid.isRowHidden(l)&&t._hideRow(l),!a}))),l){var u=l.factor,v=l.value;c.forEach((function(e){var i,n=e||{},o=n.value,r=n.format,s=n.rowId,l=(0,f.getFormattedValue)(o,r);switch(u){case a.FilterConditions.d:case a.FilterConditions.da:case a.FilterConditions.db:v="object"==typeof v?(0,d.getExcelDateFromJs)(v):(0,d.getExcelDateFromString)(v,r),l=o}switch(u){case a.FilterConditions.e:i=(0,h.isDefined)(o);break;case a.FilterConditions.ne:i=!(0,h.isDefined)(o);break;case a.FilterConditions.tc:i=v&&!o||o&&!"".concat(l).toLowerCase().includes(v.toLowerCase());break;case a.FilterConditions.tdc:i=o&&"".concat(l).toLowerCase().includes(v.toLowerCase());break;case a.FilterConditions.ts:i=o&&!"".concat(l).toLowerCase().startsWith(v.toLowerCase());break;case a.FilterConditions.te:i=o&&!"".concat(l).toLowerCase().endsWith(v.toLowerCase());break;case a.FilterConditions.tex:i=(0,h.isNumeric)(l)||"".concat(l)!==v;break;case a.FilterConditions.d:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||Math.trunc(o)!==Math.trunc(v);break;case a.FilterConditions.db:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||Math.trunc(o)>=Math.trunc(v);break;case a.FilterConditions.da:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||Math.trunc(o)<=Math.trunc(v);break;case a.FilterConditions.gt:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o<=v;break;case a.FilterConditions.lt:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o>=v;break;case a.FilterConditions.geq:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o<v;break;case a.FilterConditions.leq:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o>v;break;case a.FilterConditions.eq:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o!==v;break;case a.FilterConditions.neq:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o===v;break;case a.FilterConditions.ib:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o<v[0]||o>v[1];break;case a.FilterConditions.inb:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o>=v[0]&&o<=v[1]}i&&!t._grid.isRowHidden(s)&&t._hideRow(s)}))}},y=l.col;y<=v;y++)m(y);this._updateGridData(),this._grid.paint()},e.prototype._showRow=function(e){this._grid.data.update(e,{hidden:!1},!0)},e.prototype._hideRow=function(e){this._grid.data.update(e,{hidden:!0},!0)},e.prototype._updateGridData=function(){this._grid.data.filter((function(e){return!e.hidden}))},e.prototype._updateButton=function(e){var t=this._controls,i=t.select,n=t.unselect;(0,p.awaitRedraw)().then((function(){e?(n.show(),i.hide()):(n.hide(),i.show())}))},e.prototype._setCheckboxes=function(e){void 0===e&&(e="");var t=this._data.filter((function(t){var i=t.value,n=t.format;return!e||"".concat((0,f.getFormattedValue)(i,n)).toLocaleLowerCase().includes(e.toLocaleLowerCase())})).map((function(e){var t=e.value,i=e.checked,n=e.id,o=e.format,r=(0,f.getFormattedValue)(t,o);return{type:"checkbox",text:null!=r?r:"(".concat(s.default.empty,")"),id:n,checked:i}}));this._form.getItem("checkboxes").setProperties({options:{rows:o([],t,!0)}})},e.prototype._selectAll=function(e){var t=this,i=this._controls.checkboxes;Object.keys(this._checkboxesState).forEach((function(i){return t._checkboxesState[i]=e})),i.setValue(this._checkboxesState),this._updateButton(e)},e.prototype._initHandlers=function(){var e=this,t=this._controls,i=t.condition,o=t.search,a=t.checkboxes,s=t.datepicker,c=i.getWidget();this._form.events.on(r.FormEvents.change,(function(t,i){switch(t){case"condition":e._updateStateByCondition(i);break;case"checkboxes":e._checkboxesState=n(n({},e._checkboxesState),i);var o=Object.values(e._checkboxesState).findIndex((function(e){return!e}));e._updateButton(o<0)}})),o.events.on("input",(function(t){e._setCheckboxes("".concat(t)),a.setValue(e._checkboxesState)})),this._form.events.on(r.FormEvents.click,(function(t){switch(t){case"unselect":case"select":e._selectAll("select"===t);break;case"apply":e.apply();break;case"cancel":e.hide()}}));var u=c.popup.getContainer(),d=s._popup.getContainer();this._popup.events.on(l.PopupEvents.beforeHide,(function(e,t){if(e){var i=(null==t?void 0:t.target).closest(".dhx_popup-content");if(e&&(i===u||i===d))return!1}}))},e}();t.FilterForm=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Merge=void 0;var n=i(6),o=i(2),r=i(11),a=function(){function e(e,t,i,n){this._callAction=e,this._config=t,this._grid=i,this._isLocked=n}return e.prototype.doAction=function(e,t){if(this.checkBeforeMerge(e,t)){var i=n.Actions[t?"unmerge":"merge"];this._callAction({action:i,groupAction:i,cell:e})}},e.prototype.checkBeforeMerge=function(e,t){var i=this;if(!(0,o.isRangeId)(e)&&!t)return!1;var n=this._config,a=n.topSplit,s=n.leftSplit;return!a&&!s||(0,o.checkSpanByNames)(e,s,a,this._grid)?!(0,o.getCellsArray)(e,this._grid).find((function(e){return i._isLocked(e)}))||((0,o.showAlert)(r.default[t?"spanUnmergeLockedError":"spanMergeLockedError"]),!1):((0,o.showAlert)(r.default.spanMergeAlert),!1)},e.prototype.checkBeforeAction=function(e,t,i){var n,a=t.getMeta().merged;if((0,o.getCellsArray)(e,this._grid).forEach((function(e){var t=(0,o.isCellSpaned)(e,a);t&&(n=t)}),e),n){var s=r.default.mergeAlertMessage.split("$action");return(0,o.showAlert)("".concat(s[0]," ").concat(i.toLowerCase()," ").concat(s[1]||"")),!1}return!0},e}();t.Merge=a}])})),window.dhx_legacy){if(window.dhx)for(var key in dhx)if("i18n"===key)for(var lang in dhx[key])window.dhx_legacy[key][lang]=dhx[key][lang];else dhx_legacy[key]=dhx[key];window.dhx=dhx_legacy,delete window.dhx_legacy}